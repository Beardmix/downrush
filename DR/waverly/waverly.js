/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/viewWAV.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),

/***/ "./src/AudioCtx.js":
/*!*************************!*\
  !*** ./src/AudioCtx.js ***!
  \*************************/
/*! exports provided: audioCtx, OfflineContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "audioCtx", function() { return audioCtx; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OfflineContext", function() { return OfflineContext; });
// Instatiate global variables
var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
var OfflineContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;



/***/ }),

/***/ "./src/BiquadFilter.js":
/*!*****************************!*\
  !*** ./src/BiquadFilter.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BiQuadFilter; });
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/jquery.knob.js */ "./src/js/jquery.knob.js");
/* harmony import */ var _js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Filters.js */ "./src/Filters.js");
/* harmony import */ var _templates_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./templates.js */ "./src/templates.js");
/* harmony import */ var _Dropdown_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Dropdown.js */ "./src/Dropdown.js");






class BiQuadFilter extends _Filters_js__WEBPACK_IMPORTED_MODULE_2__["FilterBase"] {
	constructor() {
		super(_templates_js__WEBPACK_IMPORTED_MODULE_3__["quadfilter_template"]);
	}

	getState() {
	  return {
		type: 		this.biquadFilter.type,
		frequency: 	this.biquadFilter.frequency.value,
		Q:			this.biquadFilter.Q.value,
		gain:		this.biquadFilter.gain.value,
	  };
	}

	applyState(state) {
		this.biquadFilter.type = state.type;
		this.biquadFilter.frequency.value = state.frequency;
		this.biquadFilter.Q.value = state.Q;
		this.biquadFilter.gain.value = state.gain;
	}

	createFilters(ctx) {
		this.biquadFilter = ctx.createBiquadFilter();
		this.filters = [this.biquadFilter];
	}


	selectSubfilter(ft) {
		this.biquadFilter.type = ft;

		if (ft === 'lowshelf' || ft === 'highshelf' || ft === 'peaking') _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('.gain_div').show(); else _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('.gain_div').hide();
		if (ft !== 'lowshelf' && ft !== 'highshelf') _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('.q_div').show(); else _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('.q_div').hide();
	}

	openGui(whereToPut) {
		super.openGui(whereToPut);
		let that = this;
		let filterDrop = new _Dropdown_js__WEBPACK_IMPORTED_MODULE_4__["default"]('#quaddropdn',undefined,function (e) {
			let targID = e.target.getAttribute('id');
			let targText = e.target.innerText;
			let fname = targID.substring(3);
			that.selectSubfilter(fname);
			let namef = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#quaddropdn');
			_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(namef[0].firstChild).text(targText);
		});

		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(".dial").knob({change: function (v) {
			let inp = this.i[0];
			let ctlId = inp.getAttribute('id').substring(3);
			that.biquadFilter[ctlId].value = v;
		}});
		this.selectSubfilter('lowpass');
	}
};



/***/ }),

/***/ "./src/DelayFilter.js":
/*!****************************!*\
  !*** ./src/DelayFilter.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DelayFilter; });
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/jquery.knob.js */ "./src/js/jquery.knob.js");
/* harmony import */ var _js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Filters.js */ "./src/Filters.js");
/* harmony import */ var _templates_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./templates.js */ "./src/templates.js");
/* harmony import */ var _Dropdown_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Dropdown.js */ "./src/Dropdown.js");







class DelayFilter extends _Filters_js__WEBPACK_IMPORTED_MODULE_2__["FilterBase"] {
  constructor() {
	super(_templates_js__WEBPACK_IMPORTED_MODULE_3__["delay_template"]);
	this.type = 'normal';
	this.delayTime = 1.0;
	this.cutoff = 8000;
	this.offset = 0;
	this.filterSetup = false;
  }

  createFilters(ctx) {
  	this.ctx = ctx;

	this.split = ctx.createChannelSplitter(2);
	this.merge = ctx.createChannelMerger(2);
	this.leftDelay = ctx.createDelay();
	this.rightDelay = ctx.createDelay();
	this.leftGain = ctx.createGain();
	this.rightGain = ctx.createGain();
	this.leftFilter = ctx.createBiquadFilter()
	this.rightFilter = ctx.createBiquadFilter();
	this.dryGain = ctx.createGain();

	this.leftFilter.type = 'lowpass';
	this.leftFilter.frequency.value  = this.cutoff;
	this.rightFilter.type = 'lowpass';
	this.rightFilter.frequency.value  = this.cutoff;

	this.leftDelay.delayTime.value = this.delayTime;
	this.rightDelay.delayTime.value = this.delayTime;
	this.leftGain.gain.value = 0.5;
	this.rightGain.gain.value = 0.5;
	
	this.setOffset(this.offset);
  }

  connectFilters(source, dest) {
	this.source = source;
	this.dest = dest;
 	this.source.connect(this.split);
 	if (!this.filterSetup) {
 		this.filterSetup = true;
		this.leftDelay.connect(this.leftGain);
		this.rightDelay.connect(this.rightGain);
		this.leftGain.connect(this.leftFilter);
		this.rightGain.connect(this.rightFilter);
	}
	this.merge.connect(this.dest);

	this.repatch();

	this.source.connect(this.dryGain);
	this.dryGain.connect(this.dest);

  }

  disconnectFilters() {
	// Isolate our filters from player.
	this.source.disconnect();
	this.merge.disconnect();
	// Reconnect the direct path
	this.source.connect(this.dest);
  }

  getState() {
	  return {		
		type:		this.type,
		delay:		this.delayTime,
		feedback:	this.leftGain.gain.value,
		cutoff:		this.leftFilter.frequency.value,
		offset:		this.offset,
		dry:		this.dryGain.gain.value,
	  };
	}

  applyState(state) {
		this.type = state.type;
		this.delayTime = state.delay;
		this.leftDelay.delayTime.value = this.delayTime;
		this.rightDelay.delayTime.value = this.delayTime;
		this.leftGain.gain.setValueAtTime(state.feedback, 0);
		this.rightGain.gain.setValueAtTime(state.feedback, 0);
		this.leftFilter.frequency.value = state.cutoff;
		this.rightFilter.frequency.value = state.cutoff;
		this.cutoff = state.cutoff;
		this.setOffset(state.offset);
		this.dryGain.gain.value = state.dry;

		this.repatch();
	}

	openGui(whereToPut) {
		super.openGui(whereToPut);
		let that = this;
		let delayDrop = new _Dropdown_js__WEBPACK_IMPORTED_MODULE_4__["default"]('#delaydropdn',undefined,function (e) {
			let targID = e.target.getAttribute('id');
			let targText = e.target.innerText;
			let fname = targID.substring(3);
			that.type = fname;
			that.repatch();
			let namef = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#delaydropdn');
			_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(namef[0].firstChild).text(targText);
		});

		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(".dial").knob({change: function (v) {
			let inp = this.i[0];
			let ctlId = inp.getAttribute('id').substring(3);
			that[ctlId] = v;

			switch (ctlId) {
		case 'delay':
			that.delayTime = v;
			that.setOffset(that.offset);
			break;

		case 'feedback':
			that.leftGain.gain.setValueAtTime(v, 0);
			that.rightGain.gain.setValueAtTime(v, 0);
			break;

		case 'cutoff':
			that.leftFilter.frequency.value = v;
			that.rightFilter.frequency.value = v;
			that.cutoff = v;
			break;

		case 'offset':
			that.setOffset(v);
			break;

		case 'dry':
			that.dryGain.gain.value = v;
			break;
		  } // End of switch
		}});
	}

  setOffset (value) {
	var offsetTime = this.delayTime + value;
	this.offset = value;
	if (value < 0) {
		this.leftDelay.delayTime.setValueAtTime(offsetTime, 0);
		this.rightDelay.delayTime.setValueAtTime(this.delayTime, 0);
	} else {
		this.leftDelay.delayTime.setValueAtTime(this.delayTime, 0);
		this.rightDelay.delayTime.setValueAtTime(offsetTime, 0);
	 }
 }

  repatch() {
	this.split.disconnect();
	this.leftFilter.disconnect();
	this.rightFilter.disconnect();
	this.leftFilter.connect(this.merge, 0, 0);
	this.rightFilter.connect(this.merge, 0, 1);
	
	if (this.type === 'normal') {
		this.split.connect(this.leftDelay, 0);
		this.split.connect(this.rightDelay, 1);
		this.leftFilter.connect(this.leftDelay);
		this.rightFilter.connect(this.rightDelay);
	}
	 else if (this.type === 'inverted') {
		this.split.connect(this.leftDelay, 1);
		this.split.connect(this.rightDelay, 0);
		this.leftFilter.connect(this.leftDelay);
		this.rightFilter.connect(this.rightDelay);
	}
	 else if (this.type === 'pingpong') {
		this.split.connect(this.leftDelay, 0);
		this.split.connect(this.rightDelay, 1);
		this.leftFilter.connect(this.rightDelay);
		this.rightFilter.connect(this.leftDelay);
	}
  }

};


/***/ }),

/***/ "./src/Dropdown.js":
/*!*************************!*\
  !*** ./src/Dropdown.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Dropdown; });
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);

// A simple drop-down menu manager which uses classes instead of Ids internally
class Dropdown {
	constructor(item, contents, dropfn) {
		this.item = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(item);
		this.showing = false;
		this.dropfn = dropfn;
		var that = this;
		if(contents) this.item.append(contents);
		this.dropbut = this.item.find('.dropbtn');
		this.dropbut.on('click', function (e) {
			that.showing = !that.showing;
			that.item.find('.dropdown-content').toggleClass('show');
			that.dropWatch = function (e) {
				if (e.target.matches('.dropbtn')) return;
				that.closeDropDown();
			};
			_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).on('click', that.dropWatch);
		});
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(this.item).find('.dropdown-content').on('click', e=> {
			that.closeDropDown();
			that.dropfn(e);
		});
	}

	closeDropDown() {
		this.item.find(".dropdown-content").removeClass('show');
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).off('click', this.dropWatch);
	}

}; // End of class


/***/ }),

/***/ "./src/Filters.js":
/*!************************!*\
  !*** ./src/Filters.js ***!
  \************************/
/*! exports provided: FilterBase, FilterFrame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterBase", function() { return FilterBase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterFrame", function() { return FilterFrame; });
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _templates_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./templates.js */ "./src/templates.js");
/* harmony import */ var _AudioCtx_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioCtx.js */ "./src/AudioCtx.js");




var createOfflineContext  = function (buffer) {
	let {numberOfChannels, sampleRate} = buffer;
	return new _AudioCtx_js__WEBPACK_IMPORTED_MODULE_2__["OfflineContext"](numberOfChannels, buffer.getChannelData(0).length, sampleRate);
}

// Abstract super class for a filter object.
class FilterBase {
	constructor(template) {
		this.template = template;
	}

	openGui(whereToPut) {
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(whereToPut).append (this.template());
	}

	// Get the current state of all the filter parameters.
	getState() {
		return {};
	}

	// Set the state of the filter parameters to the filter chain
	applyState(state) {
		
	}

	createFilters(ctx) {
		this.filters = [];
	}

	connectFilters(source, dest) {
		this.source = source;
		this.dest = dest;
		if(this.filters) {
			let prevFilter = source;
			for (var i = 0; i < this.filters.length; ++i) {
				let thisFilter = this.filters[i];
				prevFilter.connect(thisFilter);
				prevFilter = thisFilter;
			}
			prevFilter.connect(dest);
		}
	}

	disconnectFilters() {
		if (this.filters) {
			this.filters.forEach(function (filter) {
				filter && filter.disconnect();
			});
		}
		// Reconnect the direct path
		this.source.connect(this.dest);
	}
};

class FilterFrame {
  constructor(wave) {
		this.wave = wave;
  }

  close() {
	if(this.filter) {
		this.filter.disconnectFilters();
		this.filter = undefined;
	}
  }

  connectToWave() {
	this.wave.backend.analyser.disconnect();
	this.filter.connectFilters(this.wave.backend.analyser, this.wave.backend.gainNode);
  }


  open(filterClass) {
		this.filterClass = filterClass;
		this.filter = new filterClass();
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#procmods').empty();
		let frameText = Object(_templates_js__WEBPACK_IMPORTED_MODULE_1__["filter_frame_template"])();
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#procmods').append(frameText);
		this.filter.createFilters(this.wave.audioContext);
		this.filter.openGui('#filterbody');
		this.connectToWave()
		this.openGui();
	}

	openGui() {
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#fl_cancel').on('click', e=>{
		this.connectToWave();
		if(this.filter) {
			this.filter.disconnectFilters();
		}
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#procmods').empty();
	});

	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#fl_audition').on('click', e=>{
		if (e.target.checked) {
			this.connectToWave();
		} else {
			this.filter.disconnectFilters();
		}
	});

	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#fl_apply').on('click', e=>{
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#fl_audition').prop('checked', false);
		this.applyFilters();
		this.filter.disconnectFilters();
	});
  }

  applyFilters() {
	let working = this.wave.copySelected();
	let ctx = createOfflineContext(working);

	// create offline version of filter chain.
	let offlineFilter = new this.filterClass();
	offlineFilter.createFilters(ctx);

	// Create simulated wavesurfer filter environment.
	let offlineSource = ctx.createBufferSource();
	offlineFilter.connectFilters(offlineSource, ctx.destination);

	let state = this.filter.getState();
	offlineFilter.applyState(state);

	offlineSource.buffer = working;
	let that = this;
	ctx.oncomplete = function (e) {
		that.wave.pasteSelected(e.renderedBuffer);
	}
	offlineSource.start();
	ctx.startRendering();
  }

};




/***/ }),

/***/ "./src/SimplereverbFilter.js":
/*!***********************************!*\
  !*** ./src/SimplereverbFilter.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SimpleReverbFilter; });
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/jquery.knob.js */ "./src/js/jquery.knob.js");
/* harmony import */ var _js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_knob_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Filters.js */ "./src/Filters.js");
/* harmony import */ var _templates_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./templates.js */ "./src/templates.js");





class SimpleReverbFilter extends _Filters_js__WEBPACK_IMPORTED_MODULE_2__["FilterBase"] {
  constructor() {
	super(_templates_js__WEBPACK_IMPORTED_MODULE_3__["reverb_template"]);
	this.reverse = 0;
	this.seconds = 3;
	this.decay = 2;
	this.drylevel = 5;
	this.wetlevel = 5;
  }

  createFilters(ctx) {
 	this.dryGain = ctx.createGain();
 	this.dryGain.gain.value = 0.5;
 	this.wetGain = ctx.createGain();
 	this.wetGain.gain.value = 0.5;
	this.convolver = ctx.createConvolver();
	this.ctx = ctx;
	this.buildImpulse();
  }

  connectFilters(source, dest) {
		this.source = source;
		this.dest = dest;
		
		this.source.connect(this.dryGain);
		this.source.connect(this.convolver);
		this.dryGain.connect(this.dest);
		this.convolver.connect(this.wetGain);
		this.wetGain.connect(this.dest);
  }

  disconnectFilters() {
		this.dryGain.disconnect();
		this.wetGain.disconnect();
		this.convolver.disconnect();
		this.source.disconnect();

		// Reconnect the direct path
		this.source.connect(this.dest);
  }

  getState() {
	  return {
		seconds: 	this.seconds,
		decay:		this.decay,
		reverse:	this.reverse,
		drylevel:	this.drylevel,
		wetlevel:	this.wetlevel,
	  };
	}

  applyState(state) {
		this.seconds = state.seconds;
		this.decay = state.decay;
		this.reverse = state.reverse;
		this.drylevel = state.drylevel;
		this.dryGain.gain.value = state.drylevel / 10;
		this.wetGain.gain.value = state.wetlevel / 10;
		this.buildImpulse();
	}

  buildImpulse () {
	let rate = this.ctx.sampleRate;
	let length = rate * this.seconds
	let decay = this.decay
	let impulse = this.ctx.createBuffer(2, length, rate)
	let impulseL = impulse.getChannelData(0);
	let impulseR = impulse.getChannelData(1);

	for (let i = 0; i < length; i++) {
		let n = this.reverse ? length - i : i;
		impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);
		impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);
	 }
	this.convolver.buffer = impulse;
	this.convolver.normalize = true;
  }

  openGui(whereToPut) {
		super.openGui(whereToPut);
		let that = this;
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(".dial").knob({change: function (v) {
			let inp = this.i[0];
			let ctlId = inp.getAttribute('id').substring(3);
			that[ctlId] = v;
			if (ctlId === 'drylevel') {
				that.dryGain.gain.value = v / 10;
			} else if (ctlId === 'wetlevel') {
				that.wetGain.gain.value = v / 10;
			} else {
				that.buildImpulse();
			}
		}});
  }
};



/***/ }),

/***/ "./src/UndoStack.js":
/*!**************************!*\
  !*** ./src/UndoStack.js ***!
  \**************************/
/*! exports provided: default, undoStack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return UndoStack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "undoStack", function() { return undoStack; });
// A generalized 'Undo stack' which can keep N levels of revertable state.
class UndoStack {
	constructor(limit) {
		this.stack = [];
		this.index = -1;
		this.limit = limit;
	}
	
	atTop() {
		return this.index === -1;
	}

	canUndo() {
		if(this.stack.length === 0) return false;
		return this.index === -1 || this.index > 0;
	}

	canRedo() {
		if(this.stack.length === 0 || this.index === -1) return false;
		return this.index < this.stack.length - 1;
	}

	push(item) {
		if (this.index >= 0) {
			while (this.index < this.stack.length) this.stack.pop();
			this.index = -1;
		}
		if (this.limit && this.stack.length > this.limit) {
			this.stack.shift();
		}
		this.stack.push(item);
	}

	undo() {
		if (this.stack.length === 0) return undefined;
		if (this.index === -1) { // start one behind the redo buffer
			this.index = this.stack.length - 1;
		}
		if (this.index > 0) this.index--;
		let v = this.stack[this.index];
		return v;
	}

	redo() {
		if (this.stack.length === 0 || this.index === -1) return undefined;
		let nextX = this.index + 1;
		if (nextX >= this.stack.length) return undefined;
		this.index = nextX;
		return this.stack[this.index];
	}
};

var undoStack = new UndoStack(10);



/***/ }),

/***/ "./src/Wave.js":
/*!*********************!*\
  !*** ./src/Wave.js ***!
  \*********************/
/*! exports provided: default, Wave */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Wave; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wave", function() { return Wave; });
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _js_wavesurfer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/wavesurfer.js */ "./src/js/wavesurfer.js");
/* harmony import */ var _js_wavesurfer_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_wavesurfer_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _js_plugins_wavesurfer_timeline_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./js/plugins/wavesurfer.timeline.js */ "./src/js/plugins/wavesurfer.timeline.js");
/* harmony import */ var _js_plugins_wavesurfer_timeline_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_js_plugins_wavesurfer_timeline_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _js_plugins_wavesurfer_regions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./js/plugins/wavesurfer.regions.js */ "./src/js/plugins/wavesurfer.regions.js");
/* harmony import */ var _js_plugins_wavesurfer_regions_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_js_plugins_wavesurfer_regions_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _js_plugins_wavesurfer_minimap_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./js/plugins/wavesurfer.minimap.js */ "./src/js/plugins/wavesurfer.minimap.js");
/* harmony import */ var _js_plugins_wavesurfer_minimap_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_js_plugins_wavesurfer_minimap_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _js_plugins_wavesurfer_tiledrenderer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./js/plugins/wavesurfer.tiledrenderer.js */ "./src/js/plugins/wavesurfer.tiledrenderer.js");
/* harmony import */ var _js_plugins_wavesurfer_tiledrenderer_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_js_plugins_wavesurfer_tiledrenderer_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _AudioCtx_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AudioCtx.js */ "./src/AudioCtx.js");
/* harmony import */ var _UndoStack_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./UndoStack.js */ "./src/UndoStack.js");









function secondsToSampleNum(t, buffer) {
	let sn = t * buffer.sampleRate;
	if (sn < 0) return 0;
	if (sn > buffer.getChannelData(0).length) return buffer.getChannelData(0).length
	return Math.round(sn);
}

class Wave {
	constructor(rootDivId) {
		this.rootDivId = rootDivId;
	}

	redrawWave()
	{
		this.surfer.drawBuffer();
		this.surfer.minimap.render();
	}

	openOnBuffer(decoded) {
//	var tiledRenderer = new TiledRenderer.default();
	var plugs =  [
		_js_plugins_wavesurfer_timeline_js__WEBPACK_IMPORTED_MODULE_2___default.a.create({
			container: '#waveform-timeline'
			}),
		_js_plugins_wavesurfer_regions_js__WEBPACK_IMPORTED_MODULE_3___default.a.create({
			dragSelection: false,
			}),
			
		_js_plugins_wavesurfer_minimap_js__WEBPACK_IMPORTED_MODULE_4___default.a.create({
			container: '#minimap',
			height: 30,
			barHeight: 1.4,
			interact:	true,
			// showOverview: true,
			})
		];

	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#waveform').empty();
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#waveform-timeline').empty();
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#minimap').empty();

	this.surfer = _js_wavesurfer_js__WEBPACK_IMPORTED_MODULE_1___default.a.create({
		container:		'#waveform',
		waveColor:		'violet',
		progressColor:	'purple',
		splitChannels:	true,
		interact:		false,
		fillParent:		false,
		scrollParent:	true,
		plugins:		plugs,
		partialRender:  false,
		renderer:		 _js_plugins_wavesurfer_tiledrenderer_js__WEBPACK_IMPORTED_MODULE_5__["TiledRenderer"],
		// barWidth:		1,
	});
// Patch in an override to the drawBuffer function.
	this.surfer.drawBuffer = _js_plugins_wavesurfer_tiledrenderer_js__WEBPACK_IMPORTED_MODULE_5__["tiledDrawBuffer"];

	this.surfer.loadBlob(decoded);

// Expose some wavesurfer objects:
	this.backend = this.surfer.backend;
	this.audioContext = this.surfer.backend.ac;

	let that = this;
	this.surfer.on('ready', function () {
		let buf = that.surfer.backend.buffer;
		let dat = buf.getChannelData(0);
		
		let dur = that.surfer.getDuration();
		let w = that.surfer.drawer.getWidth();
		if (dur !== 0) {
			let pps = w / dur * 0.9;
			that.surfer.zoom(pps);
		}
		that.disableWaveTracker = that.setupWaveTracker();

		// that.startGuiCheck();
	})
}	

  getSelection() {
	let buffer = this.surfer.backend.buffer;
	let srcLen = buffer.getChannelData(0).length;
	let regionMap = this.surfer.regions.list;
	
	let startT = 0;
	let regional = false;
	let dur =  this.surfer.getDuration()
	let endT = dur;
	let progS = this.surfer.drawer.progress() * endT;
	let region = regionMap[function() { for (var k in regionMap) return k }()];
	let cursorTime = this.surfer.getCurrentTime();

	if (region && region.start < region.end) {
		startT = region.start;
		endT = region.end;
		regional = true;
	}
	let cursorPos = secondsToSampleNum(cursorTime, buffer);
	let startS = secondsToSampleNum(startT, buffer);
	let endS = secondsToSampleNum(endT, buffer);

	return {
		length: srcLen,
		regional: regional,
		start:	startT,
		end:	endT,
		first:  startS,
		last:	endS,
		progress: progS,
		region: region,
		cursorTime: cursorTime,
		cursorPos: 	cursorPos,
		duration:	dur,
	};
}

  setupWaveTracker() {
	var region;
	var dragActive;
	var t0;
	var t1;
	var duration;
	var scroll = this.surfer.params.scrollParent;
	var scrollSpeed = this.surfer.params.scrollSpeed || 1;
	var scrollThreshold = this.surfer.params.scrollThreshold || 10;
	var maxScroll = void 0;
	var scrollDirection = void 0;
	var wrapperRect = void 0;
	var wrapper = this.surfer.drawer.wrapper;
	var repeater;
	
	var that = this;

	var rangeUpdater = function(e) {
		t1 = that.surfer.drawer.handleEvent(e);
		let tS = t0;
		let tE = t1;
		if (t1 < t0) {
			tS = t1;
			tE = t0;
			that.surfer.seekTo(t1);
		}
		region.update({
			start:	tS * duration,
			end:	tE * duration
		});
	}

	var edgeScroll = function edgeScroll(e) {
		if (!region || !scrollDirection) return;

	// Update scroll position
		var scrollLeft = wrapper.scrollLeft + scrollSpeed * scrollDirection;
		var nextLeft =  Math.min(maxScroll, Math.max(0, scrollLeft));
		wrapper.scrollLeft = scrollLeft = Math.min(maxScroll, Math.max(0, scrollLeft));
		rangeUpdater(e);
		// Check that there is more to scroll and repeat
		if(scrollLeft < maxScroll && scrollLeft > 0) {
			window.requestAnimationFrame(function () {
			edgeScroll(e);
			});
		}
	};

	var eventMove = function (e) {
		if (!dragActive) return;
		rangeUpdater(e);
		// If scrolling is enabled
		if (scroll && that.surfer.drawer.container.clientWidth < wrapper.scrollWidth) {
			// Check threshold based on mouse
			var x = e.clientX - wrapperRect.left;
			if (x <= scrollThreshold) {
				scrollDirection = -1;
			} else if (x >= wrapperRect.right - scrollThreshold) {
				scrollDirection = 1;
			} else {
				scrollDirection = null;
			}
			scrollDirection && edgeScroll(e);
		}
	}

	var eventUp = function (e) {
		dragActive = false;
		if (region) {
			region.fireEvent('update-end', e);
			that.surfer.fireEvent('region-update-end', region, e);
		}
		region = null;
		let win = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window); // disconnect listeners.
		win.off('mousemove', eventMove);
		win.off('touchmove', eventMove);
		win.off('mouseup', eventUp);
		win.off('touchend', eventUp);
	}


	var eventDown = function (e) {
		duration = that.surfer.getDuration();
		// Filter out events intended for the scroll bar
		let hasScroll = that.surfer.params.scrollParent;
		let r = e.target.getBoundingClientRect();

		if (hasScroll && e.clientY > (r.bottom - 16)) return; // *** JFF Hack magic number.

		maxScroll = wrapper.scrollWidth - wrapper.clientWidth;
		wrapperRect = wrapper.getBoundingClientRect();

		t0 = that.surfer.drawer.handleEvent(e);

		let xD = e.clientX;

		if (hasScroll) {
			xD += wrapper.scrollLeft;
		}

		t1 = t0;
		if (that.surfer.isPlaying()) {
			dragActive = false;
			let progress = that.surfer.drawer.handleEvent(e);
			that.surfer.seekTo(progress);
		} else {
			dragActive = true;
			that.surfer.regions.clear();
			that.surfer.seekTo(t0);
			let pos = {
				start:	t0 * duration,
				end:	t1 * duration,
				drag:	false,
				resize: false,
			};
			region = that.surfer.regions.add(pos);
		}
		let win = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window);
		win.on('mousemove', eventMove); // dynamic listeners
		win.on('touchmove', eventMove);
		win.on('mouseup', eventUp);
		win.on('touchend', eventUp);
		//console.log('down');
	}

	let waveElem = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#waveform');

	waveElem.on('mousedown', eventDown);
	waveElem.on('touchstart', eventDown);

	return function() {
		waveElem.off('mousedown', eventDown);
		waveElem.off('touchstart', eventDown);
	 };
}

  changeBuffer(buffer) {
	if (!buffer) return;

	let playState = this.surfer.isPlaying();
	let songPos;
	if (playState) {
		console.log('pausing');
		this.surfer.pause();
		songPos = this.surfer.getCurrentTime();
	}

	this.backend.load(buffer);
	this.redrawWave();
	if (playState) {
		if (songPos < 0) songPos = 0;
		let dur = this.surfer.getDuration();
		if (songPos < dur) {
			this.surfer.play(songPos);
			console.log('playing');
		}
	}
}
  copySelected () {
	let buffer = this.surfer.backend.buffer;
	let {length, first, last, region} = this.getSelection();
	let ds = last - first;
	let {numberOfChannels, sampleRate} = buffer;
	let nextBuffer = _AudioCtx_js__WEBPACK_IMPORTED_MODULE_6__["audioCtx"].createBuffer(numberOfChannels, ds, sampleRate);

	for (var cx = 0; cx < numberOfChannels; ++cx) {
		let sa = buffer.getChannelData(cx);
		let da = nextBuffer.getChannelData(cx);
		let dx = 0;
		for(var i = first; i < last; ++i) {
			da[dx++] = sa[i];
		}
	}
	return nextBuffer;
}

  pasteSelected(pasteData, checkInsert) {
	let buffer = this.surfer.backend.buffer;

	let {regional, cursorTime, cursorPos, length, first, last, region} = this.getSelection();

	if (checkInsert && !regional) { // regionl === false means its an insertion point.
		first = cursorPos;
		last = cursorPos;
	}

	let pasteLen = pasteData.getChannelData(0).length;
	let dTs = last - first;
	let {numberOfChannels, sampleRate} = buffer;
	let numPasteChannels = pasteData.numberOfChannels;
	let bufLen = length - dTs + pasteLen;
	let nextBuffer = _AudioCtx_js__WEBPACK_IMPORTED_MODULE_6__["audioCtx"].createBuffer(numberOfChannels, bufLen, sampleRate);

	for (var cx = 0; cx < numberOfChannels; ++cx) {
		let sa = buffer.getChannelData(cx);
		let da = nextBuffer.getChannelData(cx);
		let pdx = cx < numPasteChannels ? cx : 0;
		let cb = pasteData.getChannelData(pdx);
		let dx = 0;
		for(var i = 0; i < first; ++i) {
			da[dx++] = sa[i];
		}

		for(var i = 0; i < pasteLen; ++i) {
			da[dx++] = cb[i];
		}

		for(var i = last; i < length; ++i) {
			da[dx++] = sa[i];
		}
	}
	_UndoStack_js__WEBPACK_IMPORTED_MODULE_7__["undoStack"].push(buffer);
	this.changeBuffer(nextBuffer);
  }

} // End class




/***/ }),

/***/ "./src/audioBufferToWav.js":
/*!*********************************!*\
  !*** ./src/audioBufferToWav.js ***!
  \*********************************/
/*! exports provided: audioBufferToWav */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "audioBufferToWav", function() { return audioBufferToWav; });
// Snarfed from: https://github.com/Jam3/audiobuffer-to-wav/blob/master/index.js
function audioBufferToWav (buffer, opt) {
  opt = opt || {}

  let {numberOfChannels, sampleRate} = buffer;
  var format = opt.float32 ? 3 : 1
  var bitDepth = format === 3 ? 32 : 16

  var result
  if (numberOfChannels === 2) {
    result = interleave(buffer.getChannelData(0), buffer.getChannelData(1))
  } else {
    result = buffer.getChannelData(0)
  }

  return encodeWAV(result, format, sampleRate, numberOfChannels, bitDepth)
}

function encodeWAV (samples, format, sampleRate, numChannels, bitDepth) {
  var bytesPerSample = bitDepth / 8
  var blockAlign = numChannels * bytesPerSample

  var buffer = new ArrayBuffer(44 + samples.length * bytesPerSample)
  var view = new DataView(buffer)

  /* RIFF identifier */
  writeString(view, 0, 'RIFF')
  /* RIFF chunk length */
  view.setUint32(4, 36 + samples.length * bytesPerSample, true)
  /* RIFF type */
  writeString(view, 8, 'WAVE')
  /* format chunk identifier */
  writeString(view, 12, 'fmt ')
  /* format chunk length */
  view.setUint32(16, 16, true)
  /* sample format (raw) */
  view.setUint16(20, format, true)
  /* channel count */
  view.setUint16(22, numChannels, true)
  /* sample rate */
  view.setUint32(24, sampleRate, true)
  /* byte rate (sample rate * block align) */
  view.setUint32(28, sampleRate * blockAlign, true)
  /* block align (channel count * bytes per sample) */
  view.setUint16(32, blockAlign, true)
  /* bits per sample */
  view.setUint16(34, bitDepth, true)
  /* data chunk identifier */
  writeString(view, 36, 'data')
  /* data chunk length */
  view.setUint32(40, samples.length * bytesPerSample, true)
  if (format === 1) { // Raw PCM
    floatTo16BitPCM(view, 44, samples)
  } else {
    writeFloat32(view, 44, samples)
  }

  return buffer
}

function interleave (inputL, inputR) {
  var length = inputL.length + inputR.length
  var result = new Float32Array(length)

  var index = 0
  var inputIndex = 0

  while (index < length) {
    result[index++] = inputL[inputIndex]
    result[index++] = inputR[inputIndex]
    inputIndex++
  }
  return result
}

function writeFloat32 (output, offset, input) {
  for (var i = 0; i < input.length; i++, offset += 4) {
    output.setFloat32(offset, input[i], true)
  }
}

function floatTo16BitPCM (output, offset, input) {
  for (var i = 0; i < input.length; i++, offset += 2) {
    var s = Math.max(-1, Math.min(1, input[i]))
    output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true)
  }
}

function writeString (view, offset, string) {
  for (var i = 0; i < string.length; i++) {
    view.setUint8(offset + i, string.charCodeAt(i))
  }
}




/***/ }),

/***/ "./src/base64data.js":
/*!***************************!*\
  !*** ./src/base64data.js ***!
  \***************************/
/*! exports provided: base64ArrayBuffer, base64ToArrayBuffer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "base64ArrayBuffer", function() { return base64ArrayBuffer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "base64ToArrayBuffer", function() { return base64ToArrayBuffer; });
// Functions to manage base64 encoded arrayBuffer data.
// Used for external clipboard data.

function base64ArrayBuffer(arrayBuffer) {
  var base64    = ''
  var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'

  var bytes         = new Uint8Array(arrayBuffer);
  var byteLength    = bytes.byteLength;
  var byteRemainder = byteLength % 3;
  var mainLength    = byteLength - byteRemainder;

  var a, b, c, d;
  var chunk;

  // Main loop deals with bytes in chunks of 3
  for (var i = 0; i < mainLength; i = i + 3) {
    // Insert newlines to avoid super-long strings.
  	if ((i !== 0) && ((i % 72) === 0)) {
    	base64 += '\n';
    }
    // Combine the three bytes into a single integer
    chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];

    // Use bitmasks to extract 6-bit segments from the triplet
    a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18
    b = (chunk & 258048)   >> 12 // 258048   = (2^6 - 1) << 12
    c = (chunk & 4032)     >>  6 // 4032     = (2^6 - 1) << 6
    d = chunk & 63               // 63       = 2^6 - 1

    // Convert the raw binary segments to the appropriate ASCII encoding
    base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d];
  }

  // Deal with the remaining bytes and padding
  if (byteRemainder == 1) {
    chunk = bytes[mainLength]

    a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2

    // Set the 4 least significant bits to zero
    b = (chunk & 3)   << 4 // 3   = 2^2 - 1

    base64 += encodings[a] + encodings[b] + '=='
  } else if (byteRemainder == 2) {
    chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]

    a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10
    b = (chunk & 1008)  >>  4 // 1008  = (2^6 - 1) << 4

    // Set the 2 least significant bits to zero
    c = (chunk & 15)    <<  2 // 15    = 2^4 - 1

    base64 += encodings[a] + encodings[b] + encodings[c] + '='
  }

  return base64
}

function base64ToArrayBuffer(base64) {
    var binary_string =  window.atob(base64);
    var len = binary_string.length;
    var bytes = new Uint8Array( len );
    for (var i = 0; i < len; i++)        {
        bytes[i] = binary_string.charCodeAt(i);
    }
    return bytes.buffer;
}



/***/ }),

/***/ "./src/js/handlebars.min.js":
/*!**********************************!*\
  !*** ./src/js/handlebars.min.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**!

 @license
 handlebars v4.0.11

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(a,b){ true?module.exports=b():undefined}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}var e=c(1)["default"];b.__esModule=!0;var f=c(2),g=e(f),h=c(35),i=e(h),j=c(36),k=c(41),l=c(42),m=e(l),n=c(39),o=e(n),p=c(34),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(3)["default"],f=c(1)["default"];b.__esModule=!0;var g=c(4),h=e(g),i=c(21),j=f(i),k=c(6),l=f(k),m=c(5),n=e(m),o=c(22),p=e(o),q=c(34),r=f(q),s=d();s.create=d,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(1)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(5),g=c(6),h=e(g),i=c(10),j=c(18),k=c(20),l=e(k),m="4.0.11";b.VERSION=m;var n=7;b.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.REVISION_CHANGES=o;var p="[object Object]";d.prototype={constructor:d,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;b.log=q,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return!a&&0!==a||!(!p(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,g=void 0,h=void 0;c&&(g=c.start.line,h=c.start.column,a+=" - "+g+":"+h);for(var i=Error.prototype.constructor.call(this,a),j=0;j<f.length;j++)this[f[j]]=i[f[j]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=g,e?Object.defineProperty(this,"column",{value:h,enumerable:!0}):this.column=h)}catch(k){}}var e=c(7)["default"];b.__esModule=!0;var f=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){a.exports={"default":c(8),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b,c){return d.setDesc(a,b,c)}},function(a,b){var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b,c){"use strict";function d(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultHelpers=d;var f=c(11),g=e(f),h=c(12),i=e(h),j=c(13),k=e(j),l=c(14),m=e(l),n=c(15),o=e(n),p=c(16),q=e(p),r=c(17),s=e(r)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(5),f=c(6),g=d(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;h<l;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(6),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultDecorators=d;var f=c(19),g=e(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=s.COMPILER_REVISION;if(b!==c){if(b<c){var d=s.REVISION_CHANGES[c],e=s.REVISION_CHANGES[b];throw new r["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new r["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=p.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new r["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=j(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!=f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=k(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new r["default"]("No environment passed to template");if(!a||!a.main)throw new r["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new r["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:p.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=p.extend({},b,a)),c},nullContext:l({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new r["default"]("must pass block params");if(a.useDepths&&!g)throw new r["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&!function(){c.data=s.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=s.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=p.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new r["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?s.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),p.extend(b,g)}return b}var l=c(23)["default"],m=c(3)["default"],n=c(1)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var o=c(5),p=m(o),q=c(6),r=n(q),s=c(4)},function(a,b,c){a.exports={"default":c(24),__esModule:!0}},function(a,b,c){c(25),a.exports=c(30).Object.seal},function(a,b,c){var d=c(26);c(27)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(28),e=c(30),f=c(33);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(29),e=c(30),f=c(31),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(32);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}var e=c(1)["default"],f=c(3)["default"];b.__esModule=!0,b.parse=d;var g=c(37),h=e(g),i=c(38),j=e(i),k=c(40),l=f(k),m=c(5);b.parser=h["default"];var n={};m.extend(n,l)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],
85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(1)["default"];b.__esModule=!0;var j=c(39),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,i=0,j=d.length;i<j;i++){var k=d[i],l=this.accept(k);if(l){var m=e(d,i,c),n=f(d,i,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&g(d,i,!0),l.open&&h(d,i,!0),b&&q&&(g(d,i),h(d,i)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[i-1].original)[1])),b&&o&&(g((k.program||k.inverse).body),h(d,i)),b&&p&&(g(d,i),h((k.inverse||k.program).body))}}return a},d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),!this.options.ignoreStandalone&&e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}function e(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function f(a){e.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function g(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}var h=c(1)["default"];b.__esModule=!0;var i=c(6),j=h(i);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!d.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:e,Decorator:e,BlockStatement:f,DecoratorBlock:f,PartialStatement:g,PartialBlockStatement:function(a){g.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:e,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function e(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function f(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function g(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function h(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function i(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;h<i;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function j(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function k(a,b,c,e){d(a,c),e=this.locInfo(e);var f={type:"Program",body:b,strip:{},loc:e};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:e}}function l(a,b,c,e,f,g){e&&e.path&&d(a,e);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=e.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:e&&e.strip,loc:this.locInfo(g)}}function m(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function n(a,b,c,e){return d(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(e)}}var o=c(1)["default"];b.__esModule=!0,b.SourceLocation=e,b.id=f,b.stripFlags=g,b.stripComment=h,b.preparePath=i,b.prepareMustache=j,b.prepareRawBlock=k,b.prepareBlock=l,b.prepareProgram=m,b.preparePartialBlock=n;var p=c(6),q=o(p)},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=l.extend({},b),"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}var i=c(1)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var j=c(6),k=i(j),l=c(5),m=c(35),n=i(m),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(this.options.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}var g=c(1)["default"];b.__esModule=!0;var h=c(4),i=c(6),j=g(i),k=c(5),l=c(43),m=g(l);e.prototype={nameLookup:function(a,b){return e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var g=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict&&e,this,b,a));for(var h=b.length;c<h;c++)this.replaceStack(function(e){
var f=g.nameLookup(e,b[c],a);return d?[" && ",f]:[" != null ? ",f," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(5),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b["default"]=e,a.exports=b["default"]}])});

/***/ }),

/***/ "./src/js/jquery-3.2.1.min.js":
/*!************************************!*\
  !*** ./src/js/jquery-3.2.1.min.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function K(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}});var L=/[^\x20\t\r\n\f]+/g;function M(a){var b={};return r.each(a.match(L)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?M(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then;function S(){d.removeEventListener("DOMContentLoaded",S),
a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d])));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){X.set(this,a)}):T(this,function(b){var c;if(f&&void 0===b){if(c=X.get(f,a),void 0!==c)return c;if(c=_(f,a),void 0!==c)return c}else this.each(function(){X.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){X.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=W.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){da(this)?r(this).show():r(this).hide()})}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;function na(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c){k=0;while(f=g[k++])la.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(L)||[""],j=b.length;while(j--)h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){b=(b||"").match(L)||[""],j=b.length;while(j--)if(h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=wa),this.each(function(){r.event.remove(this,a,c,b)})}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")?r(">tbody",a)[0]||a:a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)});if(m&&(e=qa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(na(e,"script"),Fa),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),f=na(a),d=0,e=f.length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return g=na(h,"script"),g.length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.appendChild(a)}})},prepend:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Oa(a,b,c){var d,e,f,g,h=a.style;return c=c||Na(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Wa(a){if(a in Va)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;while(c--)if(a=Ua[c]+b,a in Va)return a}function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=Wa(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+Za(a,b,c||(g?"border":"content"),d,e)+"px")}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b),i=Ra.test(b);return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,function(){return $a(a,b,d)})},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(a,c,g)}}}),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)}),r.fn.extend({css:function(a,b){return T(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=W.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done(function(){p||ia([a]),W.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[ib],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),
null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),lb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}});var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function pb(a){var b=a.match(L)||[];return b.join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qb(this)))});if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(L)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=qb(this),b&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":W.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&U(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");Lb.href=tb.href;function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Pb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:Fb.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Eb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=C.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||ra})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return T(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"=="function"&&__webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js")&&!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function(){return r}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r});


/***/ }),

/***/ "./src/js/jquery.knob.js":
/*!*******************************!*\
  !*** ./src/js/jquery.knob.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(/*! ./jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/*!jQuery Knob*/
/**
 * Downward compatible, touchable dial
 *
 * Version: 1.2.12
 * Requires: jQuery v1.7+
 *
 * Copyright (c) 2012 Anthony Terrien
 * Under MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Thanks to vor, eskimoblood, spiffistan, FabrizioC
 */
(function (factory) {
    if (true) {
        // CommonJS
        module.exports = factory(__webpack_require__(/*! ./jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js"));
    } else {}
}(function ($) {

    /**
     * Kontrol library
     */
    "use strict";

    /**
     * Definition of globals and core
     */
    var k = {}, // kontrol
        max = Math.max,
        min = Math.min;

    k.c = {};
    k.c.d = $(document);
    k.c.t = function (e) {
        return e.originalEvent.touches.length - 1;
    };

    /**
     * Kontrol Object
     *
     * Definition of an abstract UI control
     *
     * Each concrete component must call this one.
     * <code>
     * k.o.call(this);
     * </code>
     */
    k.o = function () {
        var s = this;

        this.o = null; // array of options
        this.$ = null; // jQuery wrapped element
        this.i = null; // mixed HTMLInputElement or array of HTMLInputElement
        this.g = null; // deprecated 2D graphics context for 'pre-rendering'
        this.v = null; // value ; mixed array or integer
        this.cv = null; // change value ; not commited value
        this.x = 0; // canvas x position
        this.y = 0; // canvas y position
        this.w = 0; // canvas width
        this.h = 0; // canvas height
        this.$c = null; // jQuery canvas element
        this.c = null; // rendered canvas context
        this.t = 0; // touches index
        this.isInit = false;
        this.fgColor = null; // main color
        this.pColor = null; // previous color
        this.dH = null; // draw hook
        this.cH = null; // change hook
        this.eH = null; // cancel hook
        this.rH = null; // release hook
        this.scale = 1; // scale factor
        this.relative = false;
        this.relativeWidth = false;
        this.relativeHeight = false;
        this.$div = null; // component div

        this.run = function () {
            var cf = function (e, conf) {
                var k;
                for (k in conf) {
                    s.o[k] = conf[k];
                }
                s._carve().init();
                s._configure()
                 ._draw();
            };

            if (this.$.data('kontroled')) return;
            this.$.data('kontroled', true);

            this.extend();
            this.o = $.extend({
                    // Config
                    min: this.$.data('min') !== undefined ? this.$.data('min') : 0,
                    max: this.$.data('max') !== undefined ? this.$.data('max') : 100,
                    stopper: true,
                    readOnly: this.$.data('readonly') || (this.$.attr('readonly') === 'readonly'),

                    // UI
                    cursor: this.$.data('cursor') === true && 30
                            || this.$.data('cursor') || 0,
                    thickness: this.$.data('thickness')
                               && Math.max(Math.min(this.$.data('thickness'), 1), 0.01)
                               || 0.35,
                    lineCap: this.$.data('linecap') || 'butt',
                    width: this.$.data('width') || 200,
                    height: this.$.data('height') || 200,
                    displayInput: this.$.data('displayinput') == null || this.$.data('displayinput'),
                    displayPrevious: this.$.data('displayprevious'),
                    fgColor: this.$.data('fgcolor') || '#87CEEB',
                    inputColor: this.$.data('inputcolor'),
                    font: this.$.data('font') || 'Arial',
                    fontWeight: this.$.data('font-weight') || 'bold',
                    inline: false,
                    step: this.$.data('step') || 1,
                    rotation: this.$.data('rotation'),

                    // Hooks
                    draw: null, // function () {}
                    change: null, // function (value) {}
                    cancel: null, // function () {}
                    release: null, // function (value) {}

                    // Output formatting, allows to add unit: %, ms ...
                    format: function(v) {
                        return v;
                    },
                    parse: function (v) {
                        return parseFloat(v);
                    }
                }, this.o
            );

            // finalize options
            this.o.flip = this.o.rotation === 'anticlockwise' || this.o.rotation === 'acw';
            if (!this.o.inputColor) {
                this.o.inputColor = this.o.fgColor;
            }

            // routing value
            if (this.$.is('fieldset')) {

                // fieldset = array of integer
                this.v = {};
                this.i = this.$.find('input');
                this.i.each(function(k) {
                    var $this = $(this);
                    s.i[k] = $this;
                    s.v[k] = s.o.parse($this.val());

                    $this.bind(
                        'change blur',
                        function () {
                            var val = {};
                            val[k] = $this.val();
                            s.val(s._validate(val));
                        }
                    );
                });
                this.$.find('legend').remove();
            } else {

                // input = integer
                this.i = this.$;
                this.v = this.o.parse(this.$.val());
                this.v === '' && (this.v = this.o.min);
                this.$.bind(
                    'change blur',
                    function () {
                        s.val(s._validate(s.o.parse(s.$.val())));
                    }
                );

            }

            !this.o.displayInput && this.$.hide();

            // adds needed DOM elements (canvas, div)
            this.$c = $(document.createElement('canvas')).attr({
                width: this.o.width,
                height: this.o.height
            });

            // wraps all elements in a div
            // add to DOM before Canvas init is triggered
            this.$div = $('<div style="'
                + (this.o.inline ? 'display:inline;' : '')
                + 'width:' + this.o.width + 'px;height:' + this.o.height + 'px;'
                + '"></div>');

            this.$.wrap(this.$div).before(this.$c);
            this.$div = this.$.parent();

            if (typeof G_vmlCanvasManager !== 'undefined') {
                G_vmlCanvasManager.initElement(this.$c[0]);
            }

            this.c = this.$c[0].getContext ? this.$c[0].getContext('2d') : null;

            if (!this.c) {
                throw {
                    name:        "CanvasNotSupportedException",
                    message:     "Canvas not supported. Please use excanvas on IE8.0.",
                    toString:    function(){return this.name + ": " + this.message}
                }
            }

            // hdpi support
            this.scale = (window.devicePixelRatio || 1) / (
                            this.c.webkitBackingStorePixelRatio ||
                            this.c.mozBackingStorePixelRatio ||
                            this.c.msBackingStorePixelRatio ||
                            this.c.oBackingStorePixelRatio ||
                            this.c.backingStorePixelRatio || 1
                         );

            // detects relative width / height
            this.relativeWidth =  this.o.width % 1 !== 0
                                  && this.o.width.indexOf('%');
            this.relativeHeight = this.o.height % 1 !== 0
                                  && this.o.height.indexOf('%');
            this.relative = this.relativeWidth || this.relativeHeight;

            // computes size and carves the component
            this._carve();

            // prepares props for transaction
            if (this.v instanceof Object) {
                this.cv = {};
                this.copy(this.v, this.cv);
            } else {
                this.cv = this.v;
            }

            // binds configure event
            this.$
                .bind("configure", cf)
                .parent()
                .bind("configure", cf);

            // finalize init
            this._listen()
                ._configure()
                ._xy()
                .init();

            this.isInit = true;

            this.$.val(this.o.format(this.v));
            this._draw();

            return this;
        };

        this._carve = function() {
            if (this.relative) {
                var w = this.relativeWidth ?
                        this.$div.parent().width() *
                        parseInt(this.o.width) / 100
                        : this.$div.parent().width(),
                    h = this.relativeHeight ?
                        this.$div.parent().height() *
                        parseInt(this.o.height) / 100
                        : this.$div.parent().height();

                // apply relative
                this.w = this.h = Math.min(w, h);
            } else {
                this.w = this.o.width;
                this.h = this.o.height;
            }

            // finalize div
            this.$div.css({
                'width': this.w + 'px',
                'height': this.h + 'px'
            });

            // finalize canvas with computed width
            this.$c.attr({
                width: this.w,
                height: this.h
            });

            // scaling
            if (this.scale !== 1) {
                this.$c[0].width = this.$c[0].width * this.scale;
                this.$c[0].height = this.$c[0].height * this.scale;
                this.$c.width(this.w);
                this.$c.height(this.h);
            }

            return this;
        };

        this._draw = function () {

            // canvas pre-rendering
            var d = true;

            s.g = s.c;

            s.clear();

            s.dH && (d = s.dH());

            d !== false && s.draw();
        };

        this._touch = function (e) {
            var touchMove = function (e) {
                var v = s.xy2val(
                            e.originalEvent.touches[s.t].pageX,
                            e.originalEvent.touches[s.t].pageY
                        );

                if (v == s.cv) return;

                if (s.cH && s.cH(v) === false) return;

                s.change(s._validate(v));
                s._draw();
            };

            // get touches index
            this.t = k.c.t(e);

            // First touch
            touchMove(e);

            // Touch events listeners
            k.c.d
                .bind("touchmove.k", touchMove)
                .bind(
                    "touchend.k",
                    function () {
                        k.c.d.unbind('touchmove.k touchend.k');
                        s.val(s.cv);
                    }
                );

            return this;
        };

        this._mouse = function (e) {
            var mouseMove = function (e) {
                var v = s.xy2val(e.pageX, e.pageY);

                if (v == s.cv) return;

                if (s.cH && (s.cH(v) === false)) return;

                s.change(s._validate(v));
                s._draw();
            };

            // First click
            mouseMove(e);

            // Mouse events listeners
            k.c.d
                .bind("mousemove.k", mouseMove)
                .bind(
                    // Escape key cancel current change
                    "keyup.k",
                    function (e) {
                        if (e.keyCode === 27) {
                            k.c.d.unbind("mouseup.k mousemove.k keyup.k");

                            if (s.eH && s.eH() === false)
                                return;

                            s.cancel();
                        }
                    }
                )
                .bind(
                    "mouseup.k",
                    function (e) {
                        k.c.d.unbind('mousemove.k mouseup.k keyup.k');
                        s.val(s.cv);
                    }
                );

            return this;
        };

        this._xy = function () {
            var o = this.$c.offset();
            this.x = o.left;
            this.y = o.top;

            return this;
        };

        this._listen = function () {
            if (!this.o.readOnly) {
                this.$c
                    .bind(
                        "mousedown",
                        function (e) {
                            e.preventDefault();
                            s._xy()._mouse(e);
                        }
                    )
                    .bind(
                        "touchstart",
                        function (e) {
                            e.preventDefault();
                            s._xy()._touch(e);
                        }
                    );

                this.listen();
            } else {
                this.$.attr('readonly', 'readonly');
            }

            if (this.relative) {
                $(window).resize(function() {
                    s._carve().init();
                    s._draw();
                });
            }

            return this;
        };

        this._configure = function () {

            // Hooks
            if (this.o.draw) this.dH = this.o.draw;
            if (this.o.change) this.cH = this.o.change;
            if (this.o.cancel) this.eH = this.o.cancel;
            if (this.o.release) this.rH = this.o.release;

            if (this.o.displayPrevious) {
                this.pColor = this.h2rgba(this.o.fgColor, "0.4");
                this.fgColor = this.h2rgba(this.o.fgColor, "0.6");
            } else {
                this.fgColor = this.o.fgColor;
            }

            return this;
        };

        this._clear = function () {
            this.$c[0].width = this.$c[0].width;
        };

        this._validate = function (v) {
            var val = (~~ (((v < 0) ? -0.5 : 0.5) + (v/this.o.step))) * this.o.step;
            return Math.round(val * 100) / 100;
        };

        // Abstract methods
        this.listen = function () {}; // on start, one time
        this.extend = function () {}; // each time configure triggered
        this.init = function () {}; // each time configure triggered
        this.change = function (v) {}; // on change
        this.val = function (v) {}; // on release
        this.xy2val = function (x, y) {}; //
        this.draw = function () {}; // on change / on release
        this.clear = function () { this._clear(); };

        // Utils
        this.h2rgba = function (h, a) {
            var rgb;
            h = h.substring(1,7);
            rgb = [
                parseInt(h.substring(0,2), 16),
                parseInt(h.substring(2,4), 16),
                parseInt(h.substring(4,6), 16)
            ];

            return "rgba(" + rgb[0] + "," + rgb[1] + "," + rgb[2] + "," + a + ")";
        };

        this.copy = function (f, t) {
            for (var i in f) {
                t[i] = f[i];
            }
        };
    };


    /**
     * k.Dial
     */
    k.Dial = function () {
        k.o.call(this);

        this.startAngle = null;
        this.xy = null;
        this.radius = null;
        this.lineWidth = null;
        this.cursorExt = null;
        this.w2 = null;
        this.PI2 = 2*Math.PI;

        this.extend = function () {
            this.o = $.extend({
                bgColor: this.$.data('bgcolor') || '#EEEEEE',
                angleOffset: this.$.data('angleoffset') || 0,
                angleArc: this.$.data('anglearc') || 360,
                inline: true
            }, this.o);
        };

        this.val = function (v, triggerRelease) {
            if (null != v) {

                // reverse format
                v = this.o.parse(v);

                if (triggerRelease !== false
                    && v != this.v
                    && this.rH
                    && this.rH(v) === false) { return; }

                this.cv = this.o.stopper ? max(min(v, this.o.max), this.o.min) : v;
                this.v = this.cv;
                this.$.val(this.o.format(this.v));
                this._draw();
            } else {
                return this.v;
            }
        };

        this.xy2val = function (x, y) {
            var a, ret;

            a = Math.atan2(
                        x - (this.x + this.w2),
                        - (y - this.y - this.w2)
                    ) - this.angleOffset;

            if (this.o.flip) {
                a = this.angleArc - a - this.PI2;
            }

            if (this.angleArc != this.PI2 && (a < 0) && (a > -0.5)) {

                // if isset angleArc option, set to min if .5 under min
                a = 0;
            } else if (a < 0) {
                a += this.PI2;
            }

            ret = (a * (this.o.max - this.o.min) / this.angleArc) + this.o.min;

            this.o.stopper && (ret = max(min(ret, this.o.max), this.o.min));

            return ret;
        };

        this.listen = function () {

            // bind MouseWheel
            var s = this, mwTimerStop,
                mwTimerRelease,
                mw = function (e) {
                    e.preventDefault();

                    var ori = e.originalEvent,
                        deltaX = ori.detail || ori.wheelDeltaX,
                        deltaY = ori.detail || ori.wheelDeltaY,
                        v = s._validate(s.o.parse(s.$.val()))
                            + (
                                deltaX > 0 || deltaY > 0
                                ? s.o.step
                                : deltaX < 0 || deltaY < 0 ? -s.o.step : 0
                              );

                    v = max(min(v, s.o.max), s.o.min);

                    s.val(v, false);

                    if (s.rH) {
                        // Handle mousewheel stop
                        clearTimeout(mwTimerStop);
                        mwTimerStop = setTimeout(function () {
                            s.rH(v);
                            mwTimerStop = null;
                        }, 100);

                        // Handle mousewheel releases
                        if (!mwTimerRelease) {
                            mwTimerRelease = setTimeout(function () {
                                if (mwTimerStop)
                                    s.rH(v);
                                mwTimerRelease = null;
                            }, 200);
                        }
                    }
                },
                kval,
                to,
                m = 1,
                kv = {
                    37: -s.o.step,
                    38: s.o.step,
                    39: s.o.step,
                    40: -s.o.step
                };

            this.$
                .bind(
                    "keydown",
                    function (e) {
                        var kc = e.keyCode;

                        // numpad support
                        if (kc >= 96 && kc <= 105) {
                            kc = e.keyCode = kc - 48;
                        }

                        kval = parseInt(String.fromCharCode(kc));

                        if (isNaN(kval)) {
                            (kc !== 13)                     // enter
                            && kc !== 8                     // bs
                            && kc !== 9                     // tab
                            && kc !== 189                   // -
                            && (kc !== 190
                                || s.$.val().match(/\./))   // . allowed once
                            && e.preventDefault();

                            // arrows
                            if ($.inArray(kc,[37,38,39,40]) > -1) {
                                e.preventDefault();

                                var v = s.o.parse(s.$.val()) + kv[kc] * m;
                                s.o.stopper && (v = max(min(v, s.o.max), s.o.min));

                                s.change(s._validate(v));
                                s._draw();

                                // long time keydown speed-up
                                to = window.setTimeout(function () {
                                    m *= 2;
                                }, 30);
                            }
                        }
                    }
                )
                .bind(
                    "keyup",
                    function (e) {
                        if (isNaN(kval)) {
                            if (to) {
                                window.clearTimeout(to);
                                to = null;
                                m = 1;
                                s.val(s.$.val());
                            }
                        } else {
                            // kval postcond
                            (s.$.val() > s.o.max && s.$.val(s.o.max))
                            || (s.$.val() < s.o.min && s.$.val(s.o.min));
                        }
                    }
                );

            this.$c.bind("mousewheel DOMMouseScroll", mw);
            this.$.bind("mousewheel DOMMouseScroll", mw);
        };

        this.init = function () {
            if (this.v < this.o.min
                || this.v > this.o.max) { this.v = this.o.min; }

            this.$.val(this.v);
            this.w2 = this.w / 2;
            this.cursorExt = this.o.cursor / 100;
            this.xy = this.w2 * this.scale;
            this.lineWidth = this.xy * this.o.thickness;
            this.lineCap = this.o.lineCap;
            this.radius = this.xy - this.lineWidth / 2;

            this.o.angleOffset
            && (this.o.angleOffset = isNaN(this.o.angleOffset) ? 0 : this.o.angleOffset);

            this.o.angleArc
            && (this.o.angleArc = isNaN(this.o.angleArc) ? this.PI2 : this.o.angleArc);

            // deg to rad
            this.angleOffset = this.o.angleOffset * Math.PI / 180;
            this.angleArc = this.o.angleArc * Math.PI / 180;

            // compute start and end angles
            this.startAngle = 1.5 * Math.PI + this.angleOffset;
            this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc;

            var s = max(
                String(Math.abs(this.o.max)).length,
                String(Math.abs(this.o.min)).length,
                2
            ) + 2;

            this.o.displayInput
                && this.i.css({
                        'width' : ((this.w / 2 + 4) >> 0) + 'px',
                        'height' : ((this.w / 3) >> 0) + 'px',
                        'position' : 'absolute',
                        'vertical-align' : 'middle',
                        'margin-top' : ((this.w / 3) >> 0) + 'px',
                        'margin-left' : '-' + ((this.w * 3 / 4 + 2) >> 0) + 'px',
                        'border' : 0,
                        'background' : 'none',
                        'font' : this.o.fontWeight + ' ' + ((this.w / s) >> 0) + 'px ' + this.o.font,
                        'text-align' : 'center',
                        'color' : this.o.inputColor || this.o.fgColor,
                        'padding' : '0px',
                        '-webkit-appearance': 'none'
                        }) || this.i.css({
                            'width': '0px',
                            'visibility': 'hidden'
                        });
        };

        this.change = function (v) {
            this.cv = v;
            this.$.val(this.o.format(v));
        };

        this.angle = function (v) {
            return (v - this.o.min) * this.angleArc / (this.o.max - this.o.min);
        };

        this.arc = function (v) {
          var sa, ea;
          v = this.angle(v);
          if (this.o.flip) {
              sa = this.endAngle + 0.00001;
              ea = sa - v - 0.00001;
          } else {
              sa = this.startAngle - 0.00001;
              ea = sa + v + 0.00001;
          }
          this.o.cursor
              && (sa = ea - this.cursorExt)
              && (ea = ea + this.cursorExt);

          return {
              s: sa,
              e: ea,
              d: this.o.flip && !this.o.cursor
          };
        };

        this.draw = function () {
            var c = this.g,                 // context
                a = this.arc(this.cv),      // Arc
                pa,                         // Previous arc
                r = 1;

            c.lineWidth = this.lineWidth;
            c.lineCap = this.lineCap;

            if (this.o.bgColor !== "none") {
                c.beginPath();
                    c.strokeStyle = this.o.bgColor;
                    c.arc(this.xy, this.xy, this.radius, this.endAngle - 0.00001, this.startAngle + 0.00001, true);
                c.stroke();
            }

            if (this.o.displayPrevious) {
                pa = this.arc(this.v);
                c.beginPath();
                c.strokeStyle = this.pColor;
                c.arc(this.xy, this.xy, this.radius, pa.s, pa.e, pa.d);
                c.stroke();
                r = this.cv == this.v;
            }

            c.beginPath();
            c.strokeStyle = r ? this.o.fgColor : this.fgColor ;
            c.arc(this.xy, this.xy, this.radius, a.s, a.e, a.d);
            c.stroke();
        };

        this.cancel = function () {
            this.val(this.v);
        };
    };

    $.fn.dial = $.fn.knob = function (o) {
        return this.each(
            function () {
                var d = new k.Dial();
                d.o = o;
                d.$ = $(this);
                d.run();
            }
        ).parent();
    };

}));


/***/ }),

/***/ "./src/js/plugins/wavesurfer.minimap.js":
/*!**********************************************!*\
  !*** ./src/js/plugins/wavesurfer.minimap.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "localhost:8080/dist/plugin/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */,
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {Object} MinimapPluginParams
 * @desc Extends the `WavesurferParams` wavesurfer was initialised with
 * @property {?string|HTMLElement} container CSS selector or HTML element where
 * the ELAN information should be renderer. By default it is simply appended
 * after the waveform.
 * @property {?boolean} deferInit Set to true to manually call
 * `initPlugin('minimap')`
 */

/**
 * Renders a smaller version waveform as a minimap of the main waveform.
 *
 * @implements {PluginClass}
 * @extends {Observer}
 * @example
 * // es6
 * import MinimapPlugin from 'wavesurfer.minimap.js';
 *
 * // commonjs
 * var MinimapPlugin = require('wavesurfer.minimap.js');
 *
 * // if you are using <script> tags
 * var MinimapPlugin = window.WaveSurfer.minimap;
 *
 * // ... initialising wavesurfer with the plugin
 * var wavesurfer = WaveSurfer.create({
 *   // wavesurfer options ...
 *   plugins: [
 *     MinimapPlugin.create({
 *       // plugin options ...
 *     })
 *   ]
 * });
 */
var MinimapPlugin = function () {
    _createClass(MinimapPlugin, null, [{
        key: 'create',

        /**
         * Minimap plugin definition factory
         *
         * This function must be used to create a plugin definition which can be
         * used by wavesurfer to correctly instantiate the plugin.
         *
         * @param  {MinimapPluginParams} params parameters use to initialise the plugin
         * @return {PluginDefinition} an object representing the plugin
         */
        value: function create(params) {
            return {
                name: 'minimap',
                deferInit: params && params.deferInit ? params.deferInit : false,
                params: params,
                staticProps: {
                    initMinimap: function initMinimap(customConfig) {
                        console.warn('Deprecated initMinimap!');
                        params = customConfig;
                        this.initPlugins('minimap');
                    }
                },
                instance: MinimapPlugin
            };
        }
    }]);

    function MinimapPlugin(params, ws) {
        var _this = this;

        _classCallCheck(this, MinimapPlugin);

        this.params = ws.util.extend({}, ws.params, {
            showRegions: false,
            showOverview: false,
            overviewBorderColor: 'green',
            overviewBorderSize: 2,
            // the container should be different
            container: false,
            height: Math.max(Math.round(ws.params.height / 4), 20)
        }, params, {
            scrollParent: false,
            fillParent: true
        });
        // if container is a selector, get the element
        if (typeof params.container === 'string') {
            var el = document.querySelector(params.container);
            if (!el) {
                console.warn('Wavesurfer minimap container ' + params.container + ' was not found! The minimap will be automatically appended below the waveform.');
            }
            this.params.container = el;
        }
        // if no container is specified add a new element and insert it
        if (!params.container) {
            this.params.container = ws.util.style(document.createElement('minimap'), {
                display: 'block'
            });
        }
        this.drawer = new ws.Drawer(this.params.container, this.params);
        this.wavesurfer = ws;
        this.util = ws.util;
        /**
         * Minimap needs to register to ready and waveform-ready events to
         * work with MediaElement, the time when ready is called is different
         * (peaks can not be got)
         *
         * @type {string}
         * @see https://github.com/katspaugh/wavesurfer.js/issues/736
         */
        this.renderEvent = ws.params.backend === 'MediaElement' ? 'waveform-ready' : 'ready';
        this.overviewRegion = null;

        this.drawer.createWrapper();
        this.createElements();
        var isInitialised = false;

        // ws ready event listener
        this._onShouldRender = function () {
            // only bind the events in the first run
            if (!isInitialised) {
                _this.bindWavesurferEvents();
                _this.bindMinimapEvents();
                isInitialised = true;
            }
            // if there is no such element, append it to the container (below
            // the waveform)
            if (!document.body.contains(_this.params.container)) {
                ws.container.insertBefore(_this.params.container, null);
            }

            if (_this.wavesurfer.regions && _this.params.showRegions) {
                _this.regions();
            }
            _this.render();
        };

        this._onAudioprocess = function (currentTime) {
            _this.drawer.progress(_this.wavesurfer.backend.getPlayedPercents());
        };

        // ws seek event listener
        this._onSeek = function () {
            return _this.drawer.progress(ws.backend.getPlayedPercents());
        };

        // event listeners for the overview region
        this._onScroll = function (e) {
            if (!_this.draggingOverview) {
                _this.moveOverviewRegion(e.target.scrollLeft / _this.ratio);
            }
        };
        this._onMouseover = function (e) {
            if (_this.draggingOverview) {
                _this.draggingOverview = false;
            }
        };
        var prevWidth = 0;
        this._onResize = ws.util.debounce(function () {
            if (prevWidth != _this.drawer.wrapper.clientWidth) {
                prevWidth = _this.drawer.wrapper.clientWidth;
                _this.render();
                _this.drawer.progress(_this.wavesurfer.backend.getPlayedPercents());
            }
        });
    }

    _createClass(MinimapPlugin, [{
        key: 'init',
        value: function init() {
            if (this.wavesurfer.isReady) {
                this._onShouldRender();
            }
            this.wavesurfer.on(this.renderEvent, this._onShouldRender);
        }
    }, {
        key: 'destroy',
        value: function destroy() {
            window.removeEventListener('resize', this._onResize, true);
            window.removeEventListener('orientationchange', this._onResize, true);
            this.wavesurfer.drawer.wrapper.removeEventListener('mouseover', this._onMouseover);
            this.wavesurfer.un(this.renderEvent, this._onShouldRender);
            this.wavesurfer.un('seek', this._onSeek);
            this.wavesurfer.un('scroll', this._onScroll);
            this.wavesurfer.un('audioprocess', this._onAudioprocess);
            this.drawer.destroy();
            this.overviewRegion = null;
            this.unAll();
        }
    }, {
        key: 'regions',
        value: function regions() {
            var _this2 = this;

            this.regions = {};

            this.wavesurfer.on('region-created', function (region) {
                _this2.regions[region.id] = region;
                _this2.renderRegions();
            });

            this.wavesurfer.on('region-updated', function (region) {
                _this2.regions[region.id] = region;
                _this2.renderRegions();
            });

            this.wavesurfer.on('region-removed', function (region) {
                delete _this2.regions[region.id];
                _this2.renderRegions();
            });
        }
    }, {
        key: 'renderRegions',
        value: function renderRegions() {
            var _this3 = this;

            var regionElements = this.drawer.wrapper.querySelectorAll('region');
            var i = void 0;
            for (i = 0; i < regionElements.length; ++i) {
                this.drawer.wrapper.removeChild(regionElements[i]);
            }

            Object.keys(this.regions).forEach(function (id) {
                var region = _this3.regions[id];
                var width = _this3.drawer.width * ((region.end - region.start) / _this3.wavesurfer.getDuration());
                var left = _this3.drawer.width * (region.start / _this3.wavesurfer.getDuration());
                var regionElement = _this3.util.style(document.createElement('region'), {
                    height: 'inherit',
                    backgroundColor: region.color,
                    width: width + 'px',
                    left: left + 'px',
                    display: 'block',
                    position: 'absolute'
                });
                regionElement.classList.add(id);
                _this3.drawer.wrapper.appendChild(regionElement);
            });
        }
    }, {
        key: 'createElements',
        value: function createElements() {
            this.drawer.createElements();
            if (this.params.showOverview) {
                this.overviewRegion = this.util.style(document.createElement('overview'), {
                    height: this.drawer.wrapper.offsetHeight - this.params.overviewBorderSize * 2 + 'px',
                    width: '0px',
                    display: 'block',
                    position: 'absolute',
                    cursor: 'move',
                    border: this.params.overviewBorderSize + 'px solid ' + this.params.overviewBorderColor,
                    zIndex: 2,
                    opacity: this.params.overviewOpacity
                });
                this.drawer.wrapper.appendChild(this.overviewRegion);
            }
        }
    }, {
        key: 'bindWavesurferEvents',
        value: function bindWavesurferEvents() {
            window.addEventListener('resize', this._onResize, true);
            window.addEventListener('orientationchange', this._onResize, true);
            this.wavesurfer.on('audioprocess', this._onAudioprocess);
            this.wavesurfer.on('seek', this._onSeek);
            if (this.params.showOverview) {
                this.wavesurfer.on('scroll', this._onScroll);
                this.wavesurfer.drawer.wrapper.addEventListener('mouseover', this._onMouseover);
            }
        }
    }, {
        key: 'bindMinimapEvents',
        value: function bindMinimapEvents() {
            var _this4 = this;

            var positionMouseDown = {
                clientX: 0,
                clientY: 0
            };
            var relativePositionX = 0;
            var seek = true;

            // the following event listeners will be destroyed by using
            // this.unAll() and nullifying the DOM node references after
            // removing them
            if (this.params.interact) {
                this.drawer.wrapper.addEventListener('click', function (event) {
                    _this4.fireEvent('click', event, _this4.drawer.handleEvent(event));
                });

                this.on('click', function (event, position) {
                    if (seek) {
                        _this4.drawer.progress(position);
                        _this4.wavesurfer.seekAndCenter(position);
                    } else {
                        seek = true;
                    }
                });
            }

            if (this.params.showOverview) {
                this.overviewRegion.addEventListener('mousedown', function (event) {
                    _this4.draggingOverview = true;
                    relativePositionX = event.layerX;
                    positionMouseDown.clientX = event.clientX;
                    positionMouseDown.clientY = event.clientY;
                });

                this.drawer.wrapper.addEventListener('mousemove', function (event) {
                    if (_this4.draggingOverview) {
                        _this4.moveOverviewRegion(event.clientX - _this4.drawer.container.getBoundingClientRect().left - relativePositionX);
                    }
                });

                this.drawer.wrapper.addEventListener('mouseup', function (event) {
                    if (positionMouseDown.clientX - event.clientX === 0 && positionMouseDown.clientX - event.clientX === 0) {
                        seek = true;
                        _this4.draggingOverview = false;
                    } else if (_this4.draggingOverview) {
                        seek = false;
                        _this4.draggingOverview = false;
                    }
                });
            }
        }
    }, {
        key: 'render',
        value: function render() {
            var len = this.drawer.getWidth();
            var peaks = this.wavesurfer.backend.getPeaks(len, 0, len);
            this.drawer.drawPeaks(peaks, len, 0, len);
            this.drawer.progress(this.wavesurfer.backend.getPlayedPercents());

            if (this.params.showOverview) {
                //get proportional width of overview region considering the respective
                //width of the drawers
                this.ratio = this.wavesurfer.drawer.width / this.drawer.width;
                this.waveShowedWidth = this.wavesurfer.drawer.width / this.ratio;
                this.waveWidth = this.wavesurfer.drawer.width;
                this.overviewWidth = this.drawer.width / this.ratio;
                this.overviewPosition = 0;
                this.moveOverviewRegion(this.wavesurfer.drawer.wrapper.scrollLeft / this.ratio);
                this.overviewRegion.style.width = this.overviewWidth - this.params.overviewBorderSize * 2 + 'px';
            }
        }
    }, {
        key: 'moveOverviewRegion',
        value: function moveOverviewRegion(pixels) {
            if (pixels < 0) {
                this.overviewPosition = 0;
            } else if (pixels + this.overviewWidth < this.drawer.width) {
                this.overviewPosition = pixels;
            } else {
                this.overviewPosition = this.drawer.width - this.overviewWidth;
            }
            this.overviewRegion.style.left = this.overviewPosition + 'px';
            if (this.draggingOverview) {
                this.wavesurfer.drawer.wrapper.scrollLeft = this.overviewPosition * this.ratio;
            }
        }
    }]);

    return MinimapPlugin;
}();

exports.default = MinimapPlugin;
module.exports = exports['default'];

/***/ })
/******/ ]);
});
//# sourceMappingURL=wavesurfer.minimap.js.map

/***/ }),

/***/ "./src/js/plugins/wavesurfer.regions.js":
/*!**********************************************!*\
  !*** ./src/js/plugins/wavesurfer.regions.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "localhost:8080/dist/plugin/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ({

/***/ 2:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * (Single) Region plugin class
 *
 * Must be turned into an observer before instantiating. This is done in
 * RegionsPlugin (main plugin class)
 *
 * @extends {Observer}
 */
var Region = function () {
    function Region(params, ws) {
        var _this = this;

        _classCallCheck(this, Region);

        this.wavesurfer = ws;
        this.wrapper = ws.drawer.wrapper;
        this.style = ws.util.style;

        this.id = params.id == null ? ws.util.getId() : params.id;
        this.start = Number(params.start) || 0;
        this.end = params.end == null ? // small marker-like region
        this.start + 4 / this.wrapper.scrollWidth * this.wavesurfer.getDuration() : Number(params.end);
        this.resize = params.resize === undefined ? true : Boolean(params.resize);
        this.drag = params.drag === undefined ? true : Boolean(params.drag);
        this.loop = Boolean(params.loop);
        this.color = params.color || 'rgba(0, 0, 0, 0.1)';
        this.data = params.data || {};
        this.attributes = params.attributes || {};

        this.maxLength = params.maxLength;
        this.minLength = params.minLength;
        this._onRedraw = function () {
            return _this.updateRender();
        };

        this.scroll = params.scroll !== false && ws.params.scrollParent;
        this.scrollSpeed = params.scrollSpeed || 1;
        this.scrollThreshold = params.scrollThreshold || 10;

        this.bindInOut();
        this.render();
        this.wavesurfer.on('zoom', this._onRedraw);
        this.wavesurfer.on('redraw', this._onRedraw);
        this.wavesurfer.fireEvent('region-created', this);
    }

    /* Update region params. */


    _createClass(Region, [{
        key: 'update',
        value: function update(params) {
            if (null != params.start) {
                this.start = Number(params.start);
            }
            if (null != params.end) {
                this.end = Number(params.end);
            }
            if (null != params.loop) {
                this.loop = Boolean(params.loop);
            }
            if (null != params.color) {
                this.color = params.color;
            }
            if (null != params.data) {
                this.data = params.data;
            }
            if (null != params.resize) {
                this.resize = Boolean(params.resize);
            }
            if (null != params.drag) {
                this.drag = Boolean(params.drag);
            }
            if (null != params.maxLength) {
                this.maxLength = Number(params.maxLength);
            }
            if (null != params.minLength) {
                this.minLength = Number(params.minLength);
            }
            if (null != params.attributes) {
                this.attributes = params.attributes;
            }

            this.updateRender();
            this.fireEvent('update');
            this.wavesurfer.fireEvent('region-updated', this);
        }

        /* Remove a single region. */

    }, {
        key: 'remove',
        value: function remove() {
            if (this.element) {
                this.wrapper.removeChild(this.element);
                this.element = null;
                this.fireEvent('remove');
                this.wavesurfer.un('zoom', this._onRedraw);
                this.wavesurfer.un('redraw', this._onRedraw);
                this.wavesurfer.fireEvent('region-removed', this);
            }
        }

        /* Play the audio region. */

    }, {
        key: 'play',
        value: function play() {
            this.wavesurfer.play(this.start, this.end);
            this.fireEvent('play');
            this.wavesurfer.fireEvent('region-play', this);
        }

        /* Play the region in loop. */

    }, {
        key: 'playLoop',
        value: function playLoop() {
            var _this2 = this;

            this.play();
            this.once('out', function () {
                return _this2.playLoop();
            });
        }

        /* Render a region as a DOM element. */

    }, {
        key: 'render',
        value: function render() {
            var regionEl = document.createElement('region');
            regionEl.className = 'wavesurfer-region';
            regionEl.title = this.formatTime(this.start, this.end);
            regionEl.setAttribute('data-id', this.id);

            for (var attrname in this.attributes) {
                regionEl.setAttribute('data-region-' + attrname, this.attributes[attrname]);
            }

            var width = this.wrapper.scrollWidth;
            this.style(regionEl, {
                position: 'absolute',
                zIndex: 2,
                height: '100%',
                top: '0px'
            });

            /* Resize handles */
            if (this.resize) {
                var handleLeft = regionEl.appendChild(document.createElement('handle'));
                var handleRight = regionEl.appendChild(document.createElement('handle'));
                handleLeft.className = 'wavesurfer-handle wavesurfer-handle-start';
                handleRight.className = 'wavesurfer-handle wavesurfer-handle-end';
                var css = {
                    cursor: 'col-resize',
                    position: 'absolute',
                    left: '0px',
                    top: '0px',
                    width: '1%',
                    maxWidth: '4px',
                    height: '100%'
                };
                this.style(handleLeft, css);
                this.style(handleRight, css);
                this.style(handleRight, {
                    left: '100%'
                });
            }

            this.element = this.wrapper.appendChild(regionEl);
            this.updateRender();
            this.bindEvents(regionEl);
        }
    }, {
        key: 'formatTime',
        value: function formatTime(start, end) {
            return (start == end ? [start] : [start, end]).map(function (time) {
                return [Math.floor(time % 3600 / 60), // minutes
                ('00' + Math.floor(time % 60)).slice(-2) // seconds
                ].join(':');
            }).join('-');
        }
    }, {
        key: 'getWidth',
        value: function getWidth() {
            return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;
        }

        /* Update element's position, width, color. */

    }, {
        key: 'updateRender',
        value: function updateRender() {
            var dur = this.wavesurfer.getDuration();
            var width = this.getWidth();

            if (this.start < 0) {
                this.start = 0;
                this.end = this.end - this.start;
            }
            if (this.end > dur) {
                this.end = dur;
                this.start = dur - (this.end - this.start);
            }

            if (this.minLength != null) {
                this.end = Math.max(this.start + this.minLength, this.end);
            }

            if (this.maxLength != null) {
                this.end = Math.min(this.start + this.maxLength, this.end);
            }

            if (this.element != null) {
                // Calculate the left and width values of the region such that
                // no gaps appear between regions.
                var left = Math.round(this.start / dur * width);
                var regionWidth = Math.round(this.end / dur * width) - left;

                this.style(this.element, {
                    left: left + 'px',
                    width: regionWidth + 'px',
                    backgroundColor: this.color,
                    cursor: this.drag ? 'move' : 'default'
                });

                for (var attrname in this.attributes) {
                    this.element.setAttribute('data-region-' + attrname, this.attributes[attrname]);
                }

                this.element.title = this.formatTime(this.start, this.end);
            }
        }

        /* Bind audio events. */

    }, {
        key: 'bindInOut',
        value: function bindInOut() {
            var _this3 = this;

            this.firedIn = false;
            this.firedOut = false;

            var onProcess = function onProcess(time) {
                if (!_this3.firedOut && _this3.firedIn && (_this3.start >= Math.round(time * 100) / 100 || _this3.end <= Math.round(time * 100) / 100)) {
                    _this3.firedOut = true;
                    _this3.firedIn = false;
                    _this3.fireEvent('out');
                    _this3.wavesurfer.fireEvent('region-out', _this3);
                }
                if (!_this3.firedIn && _this3.start <= time && _this3.end > time) {
                    _this3.firedIn = true;
                    _this3.firedOut = false;
                    _this3.fireEvent('in');
                    _this3.wavesurfer.fireEvent('region-in', _this3);
                }
            };

            this.wavesurfer.backend.on('audioprocess', onProcess);

            this.on('remove', function () {
                _this3.wavesurfer.backend.un('audioprocess', onProcess);
            });

            /* Loop playback. */
            this.on('out', function () {
                if (_this3.loop) {
                    _this3.wavesurfer.play(_this3.start);
                }
            });
        }

        /* Bind DOM events. */

    }, {
        key: 'bindEvents',
        value: function bindEvents() {
            var _this4 = this;

            this.element.addEventListener('mouseenter', function (e) {
                _this4.fireEvent('mouseenter', e);
                _this4.wavesurfer.fireEvent('region-mouseenter', _this4, e);
            });

            this.element.addEventListener('mouseleave', function (e) {
                _this4.fireEvent('mouseleave', e);
                _this4.wavesurfer.fireEvent('region-mouseleave', _this4, e);
            });

            this.element.addEventListener('click', function (e) {
                e.preventDefault();
                _this4.fireEvent('click', e);
                _this4.wavesurfer.fireEvent('region-click', _this4, e);
            });

            this.element.addEventListener('dblclick', function (e) {
                e.stopPropagation();
                e.preventDefault();
                _this4.fireEvent('dblclick', e);
                _this4.wavesurfer.fireEvent('region-dblclick', _this4, e);
            });

            /* Drag or resize on mousemove. */
            (this.drag || this.resize) && function () {
                var container = _this4.wavesurfer.drawer.container;
                var duration = _this4.wavesurfer.getDuration();
                var scrollSpeed = _this4.scrollSpeed;
                var scrollThreshold = _this4.scrollThreshold;
                var startTime = void 0;
                var touchId = void 0;
                var drag = void 0;
                var maxScroll = void 0;
                var resize = void 0;
                var scrollDirection = void 0;
                var wrapperRect = void 0;

                // Scroll when the user is dragging within the threshold
                var edgeScroll = function edgeScroll(e) {
                    if (!scrollDirection || !drag && !resize) {
                        return;
                    }

                    // Update scroll position
                    var scrollLeft = _this4.wrapper.scrollLeft + scrollSpeed * scrollDirection;
                    _this4.wrapper.scrollLeft = scrollLeft = Math.min(maxScroll, Math.max(0, scrollLeft));

                    // Update time
                    var time = _this4.wavesurfer.drawer.handleEvent(e) * duration;
                    var delta = time - startTime;
                    startTime = time;

                    // Continue dragging or resizing
                    drag ? _this4.onDrag(delta) : _this4.onResize(delta, resize);

                    // Repeat
                    window.requestAnimationFrame(function () {
                        edgeScroll(e);
                    });
                };

                var onDown = function onDown(e) {
                    if (e.touches && e.touches.length > 1) {
                        return;
                    }
                    touchId = e.targetTouches ? e.targetTouches[0].identifier : null;

                    e.stopPropagation();
                    startTime = _this4.wavesurfer.drawer.handleEvent(e, true) * duration;

                    // Store for scroll calculations
                    maxScroll = _this4.wrapper.scrollWidth - _this4.wrapper.clientWidth;
                    wrapperRect = _this4.wrapper.getBoundingClientRect();

                    if (e.target.tagName.toLowerCase() == 'handle') {
                        if (e.target.classList.contains('wavesurfer-handle-start')) {
                            resize = 'start';
                        } else {
                            resize = 'end';
                        }
                    } else {
                        drag = true;
                        resize = false;
                    }
                };
                var onUp = function onUp(e) {
                    if (e.touches && e.touches.length > 1) {
                        return;
                    }

                    if (drag || resize) {
                        drag = false;
                        scrollDirection = null;
                        resize = false;

                        _this4.fireEvent('update-end', e);
                        _this4.wavesurfer.fireEvent('region-update-end', _this4, e);
                    }
                };
                var onMove = function onMove(e) {
                    if (e.touches && e.touches.length > 1) {
                        return;
                    }
                    if (e.targetTouches && e.targetTouches[0].identifier != touchId) {
                        return;
                    }

                    if (drag || resize) {
                        var oldTime = startTime;
                        var time = _this4.wavesurfer.drawer.handleEvent(e) * duration;
                        var delta = time - startTime;
                        startTime = time;

                        // Drag
                        if (_this4.drag && drag) {
                            _this4.onDrag(delta);
                        }

                        // Resize
                        if (_this4.resize && resize) {
                            _this4.onResize(delta, resize);
                        }

                        if (_this4.scroll && container.clientWidth < _this4.wrapper.scrollWidth) {
                            if (drag) {
                                // The threshold is not between the mouse and the container edge
                                // but is between the region and the container edge
                                var regionRect = _this4.element.getBoundingClientRect();
                                var x = regionRect.left - wrapperRect.left;

                                // Check direction
                                if (time < oldTime && x >= 0) {
                                    scrollDirection = -1;
                                } else if (time > oldTime && x + regionRect.width <= wrapperRect.right) {
                                    scrollDirection = 1;
                                }

                                // Check that we are still beyond the threshold
                                if (scrollDirection === -1 && x > scrollThreshold || scrollDirection === 1 && x + regionRect.width < wrapperRect.right - scrollThreshold) {
                                    scrollDirection = null;
                                }
                            } else {
                                // Mouse based threshold
                                var _x = e.clientX - wrapperRect.left;

                                // Check direction
                                if (_x <= scrollThreshold) {
                                    scrollDirection = -1;
                                } else if (_x >= wrapperRect.right - scrollThreshold) {
                                    scrollDirection = 1;
                                } else {
                                    scrollDirection = null;
                                }
                            }

                            scrollDirection && edgeScroll(e);
                        }
                    }
                };

                _this4.element.addEventListener('mousedown', onDown);
                _this4.element.addEventListener('touchstart', onDown);

                _this4.wrapper.addEventListener('mousemove', onMove);
                _this4.wrapper.addEventListener('touchmove', onMove);

                document.body.addEventListener('mouseup', onUp);
                document.body.addEventListener('touchend', onUp);

                _this4.on('remove', function () {
                    document.body.removeEventListener('mouseup', onUp);
                    document.body.removeEventListener('touchend', onUp);
                    _this4.wrapper.removeEventListener('mousemove', onMove);
                    _this4.wrapper.removeEventListener('touchmove', onMove);
                });

                _this4.wavesurfer.on('destroy', function () {
                    document.body.removeEventListener('mouseup', onUp);
                    document.body.removeEventListener('touchend', onUp);
                });
            }();
        }
    }, {
        key: 'onDrag',
        value: function onDrag(delta) {
            var maxEnd = this.wavesurfer.getDuration();
            if (this.end + delta > maxEnd || this.start + delta < 0) {
                return;
            }

            this.update({
                start: this.start + delta,
                end: this.end + delta
            });
        }
    }, {
        key: 'onResize',
        value: function onResize(delta, direction) {
            if (direction == 'start') {
                this.update({
                    start: Math.min(this.start + delta, this.end),
                    end: Math.max(this.start + delta, this.end)
                });
            } else {
                this.update({
                    start: Math.min(this.end + delta, this.start),
                    end: Math.max(this.end + delta, this.start)
                });
            }
        }
    }]);

    return Region;
}();

/**
 * @typedef {Object} RegionsPluginParams
 * @property {?boolean} dragSelection Enable creating regions by dragging wih
 * the mouse
 * @property {?RegionParams[]} regions Regions that should be added upon
 * initialisation
 * @property {number} slop=2 The sensitivity of the mouse dragging
 * @property {?boolean} deferInit Set to true to manually call
 * `initPlugin('regions')`
 */

/**
 * @typedef {Object} RegionParams
 * @desc The parameters used to describe a region.
 * @example wavesurfer.addRegion(regionParams);
 * @property {string} id=→random The id of the region
 * @property {number} start=0 The start position of the region (in seconds).
 * @property {number} end=0 The end position of the region (in seconds).
 * @property {?boolean} loop Whether to loop the region when played back.
 * @property {boolean} drag=true Allow/dissallow dragging the region.
 * @property {boolean} resize=true Allow/dissallow resizing the region.
 * @property {string} [color='rgba(0, 0, 0, 0.1)'] HTML color code.
 */

/**
 * Regions are visual overlays on waveform that can be used to play and loop
 * portions of audio. Regions can be dragged and resized.
 *
 * Visual customization is possible via CSS (using the selectors
 * `.wavesurfer-region` and `.wavesurfer-handle`).
 *
 * @implements {PluginClass}
 * @extends {Observer}
 *
 * @example
 * // es6
 * import RegionsPlugin from 'wavesurfer.regions.js';
 *
 * // commonjs
 * var RegionsPlugin = require('wavesurfer.regions.js');
 *
 * // if you are using <script> tags
 * var RegionsPlugin = window.WaveSurfer.regions;
 *
 * // ... initialising wavesurfer with the plugin
 * var wavesurfer = WaveSurfer.create({
 *   // wavesurfer options ...
 *   plugins: [
 *     RegionsPlugin.create({
 *       // plugin options ...
 *     })
 *   ]
 * });
 */


var RegionsPlugin = function () {
    _createClass(RegionsPlugin, null, [{
        key: 'create',

        /**
         * Regions plugin definition factory
         *
         * This function must be used to create a plugin definition which can be
         * used by wavesurfer to correctly instantiate the plugin.
         *
         * @param {RegionsPluginParams} params parameters use to initialise the plugin
         * @return {PluginDefinition} an object representing the plugin
         */
        value: function create(params) {
            return {
                name: 'regions',
                deferInit: params && params.deferInit ? params.deferInit : false,
                params: params,
                staticProps: {
                    initRegions: function initRegions() {
                        console.warn('Deprecated initRegions! Use wavesurfer.initPlugins("regions") instead!');
                        this.initPlugin('regions');
                    },
                    addRegion: function addRegion(options) {
                        if (!this.initialisedPluginList.regions) {
                            this.initPlugin('regions');
                        }
                        return this.regions.add(options);
                    },
                    clearRegions: function clearRegions() {
                        this.regions && this.regions.clear();
                    },
                    enableDragSelection: function enableDragSelection(options) {
                        if (!this.initialisedPluginList.regions) {
                            this.initPlugin('regions');
                        }
                        this.regions.enableDragSelection(options);
                    },
                    disableDragSelection: function disableDragSelection() {
                        this.regions.disableDragSelection();
                    }
                },
                instance: RegionsPlugin
            };
        }
    }]);

    function RegionsPlugin(params, ws) {
        var _this5 = this;

        _classCallCheck(this, RegionsPlugin);

        this.params = params;
        this.wavesurfer = ws;
        this.util = ws.util;

        // turn the plugin instance into an observer
        var observerPrototypeKeys = Object.getOwnPropertyNames(this.util.Observer.prototype);
        observerPrototypeKeys.forEach(function (key) {
            Region.prototype[key] = _this5.util.Observer.prototype[key];
        });
        this.wavesurfer.Region = Region;

        // Id-based hash of regions.
        this.list = {};
        this._onReady = function () {
            _this5.wrapper = _this5.wavesurfer.drawer.wrapper;
            if (_this5.params.regions) {
                _this5.params.regions.forEach(function (region) {
                    _this5.add(region);
                });
            }
            if (_this5.params.dragSelection) {
                _this5.enableDragSelection(_this5.params);
            }
        };
    }

    _createClass(RegionsPlugin, [{
        key: 'init',
        value: function init() {
            // Check if ws is ready
            if (this.wavesurfer.isReady) {
                this._onReady();
            }
            this.wavesurfer.on('ready', this._onReady);
        }
    }, {
        key: 'destroy',
        value: function destroy() {
            this.wavesurfer.un('ready', this._onReady);
            this.disableDragSelection();
            this.clear();
        }
        /* Add a region. */

    }, {
        key: 'add',
        value: function add(params) {
            var _this6 = this;

            var region = new this.wavesurfer.Region(params, this.wavesurfer);

            this.list[region.id] = region;

            region.on('remove', function () {
                delete _this6.list[region.id];
            });

            return region;
        }

        /* Remove all regions. */

    }, {
        key: 'clear',
        value: function clear() {
            var _this7 = this;

            Object.keys(this.list).forEach(function (id) {
                _this7.list[id].remove();
            });
        }
    }, {
        key: 'enableDragSelection',
        value: function enableDragSelection(params) {
            var _this8 = this;

            var slop = params.slop || 2;
            var container = this.wavesurfer.drawer.container;
            var scroll = params.scroll !== false && this.wavesurfer.params.scrollParent;
            var scrollSpeed = params.scrollSpeed || 1;
            var scrollThreshold = params.scrollThreshold || 10;
            var drag = void 0;
            var duration = this.wavesurfer.getDuration();
            var maxScroll = void 0;
            var start = void 0;
            var region = void 0;
            var touchId = void 0;
            var pxMove = 0;
            var scrollDirection = void 0;
            var wrapperRect = void 0;

            // Scroll when the user is dragging within the threshold
            var edgeScroll = function edgeScroll(e) {
                if (!region || !scrollDirection) {
                    return;
                }

                // Update scroll position
                var scrollLeft = _this8.wrapper.scrollLeft + scrollSpeed * scrollDirection;
                _this8.wrapper.scrollLeft = scrollLeft = Math.min(maxScroll, Math.max(0, scrollLeft));

                // Update range
                var end = _this8.wavesurfer.drawer.handleEvent(e);
                region.update({
                    start: Math.min(end * duration, start * duration),
                    end: Math.max(end * duration, start * duration)
                });

                // Check that there is more to scroll and repeat
                if (scrollLeft < maxScroll && scrollLeft > 0) {
                    window.requestAnimationFrame(function () {
                        edgeScroll(e);
                    });
                }
            };

            var eventDown = function eventDown(e) {
                if (e.touches && e.touches.length > 1) {
                    return;
                }
                duration = _this8.wavesurfer.getDuration();
                touchId = e.targetTouches ? e.targetTouches[0].identifier : null;

                // Store for scroll calculations
                maxScroll = _this8.wrapper.scrollWidth - _this8.wrapper.clientWidth;
                wrapperRect = _this8.wrapper.getBoundingClientRect();

                drag = true;
                start = _this8.wavesurfer.drawer.handleEvent(e, true);
                region = null;
                scrollDirection = null;
            };
            this.wrapper.addEventListener('mousedown', eventDown);
            this.wrapper.addEventListener('touchstart', eventDown);
            this.on('disable-drag-selection', function () {
                _this8.wrapper.removeEventListener('touchstart', eventDown);
                _this8.wrapper.removeEventListener('mousedown', eventDown);
            });

            var eventUp = function eventUp(e) {
                if (e.touches && e.touches.length > 1) {
                    return;
                }

                drag = false;
                pxMove = 0;
                scrollDirection = null;

                if (region) {
                    region.fireEvent('update-end', e);
                    _this8.wavesurfer.fireEvent('region-update-end', region, e);
                }

                region = null;
            };
            this.wrapper.addEventListener('mouseup', eventUp);
            this.wrapper.addEventListener('touchend', eventUp);
            this.on('disable-drag-selection', function () {
                _this8.wrapper.removeEventListener('touchend', eventUp);
                _this8.wrapper.removeEventListener('mouseup', eventUp);
            });

            var eventMove = function eventMove(e) {
                if (!drag) {
                    return;
                }
                if (++pxMove <= slop) {
                    return;
                }

                if (e.touches && e.touches.length > 1) {
                    return;
                }
                if (e.targetTouches && e.targetTouches[0].identifier != touchId) {
                    return;
                }

                if (!region) {
                    region = _this8.add(params || {});
                }

                var end = _this8.wavesurfer.drawer.handleEvent(e);
                region.update({
                    start: Math.min(end * duration, start * duration),
                    end: Math.max(end * duration, start * duration)
                });

                // If scrolling is enabled
                if (scroll && container.clientWidth < _this8.wrapper.scrollWidth) {
                    // Check threshold based on mouse
                    var x = e.clientX - wrapperRect.left;
                    if (x <= scrollThreshold) {
                        scrollDirection = -1;
                    } else if (x >= wrapperRect.right - scrollThreshold) {
                        scrollDirection = 1;
                    } else {
                        scrollDirection = null;
                    }
                    scrollDirection && edgeScroll(e);
                }
            };
            this.wrapper.addEventListener('mousemove', eventMove);
            this.wrapper.addEventListener('touchmove', eventMove);
            this.on('disable-drag-selection', function () {
                _this8.wrapper.removeEventListener('touchmove', eventMove);
                _this8.wrapper.removeEventListener('mousemove', eventMove);
            });
        }
    }, {
        key: 'disableDragSelection',
        value: function disableDragSelection() {
            this.fireEvent('disable-drag-selection');
        }

        /* Get current region
         *  The smallest region that contains the current time.
         *  If several such regions exist, we take the first.
         *  Return null if none exist. */

    }, {
        key: 'getCurrentRegion',
        value: function getCurrentRegion() {
            var _this9 = this;

            var time = this.wavesurfer.getCurrentTime();
            var min = null;
            Object.keys(this.list).forEach(function (id) {
                var cur = _this9.list[id];
                if (cur.start <= time && cur.end >= time) {
                    if (!min || cur.end - cur.start < min.end - min.start) {
                        min = cur;
                    }
                }
            });

            return min;
        }
    }]);

    return RegionsPlugin;
}();

exports.default = RegionsPlugin;
module.exports = exports['default'];

/***/ })

/******/ });
});
//# sourceMappingURL=wavesurfer.regions.js.map

/***/ }),

/***/ "./src/js/plugins/wavesurfer.tiledrenderer.js":
/*!****************************************************!*\
  !*** ./src/js/plugins/wavesurfer.tiledrenderer.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
 * wavesurfer.js 2.0.4 (Fri Mar 02 2018 18:29:26 GMT-0800 (PST))
 * https://github.com/katspaugh/wavesurfer.js
 * @license BSD-3-Clause
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "localhost:8080/dist/plugin/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 10);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ajax = __webpack_require__(12);

Object.defineProperty(exports, 'ajax', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_ajax).default;
  }
});

var _getId = __webpack_require__(13);

Object.defineProperty(exports, 'getId', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_getId).default;
  }
});

var _max = __webpack_require__(14);

Object.defineProperty(exports, 'max', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_max).default;
  }
});

var _min = __webpack_require__(15);

Object.defineProperty(exports, 'min', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_min).default;
  }
});

var _observer = __webpack_require__(1);

Object.defineProperty(exports, 'Observer', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_observer).default;
  }
});

var _extend = __webpack_require__(16);

Object.defineProperty(exports, 'extend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_extend).default;
  }
});

var _style = __webpack_require__(17);

Object.defineProperty(exports, 'style', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_style).default;
  }
});

var _requestAnimationFrame = __webpack_require__(2);

Object.defineProperty(exports, 'requestAnimationFrame', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_requestAnimationFrame).default;
  }
});

var _frame = __webpack_require__(18);

Object.defineProperty(exports, 'frame', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_frame).default;
  }
});

var _debounce = __webpack_require__(19);

Object.defineProperty(exports, 'debounce', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_debounce).default;
  }
});

var _preventClick = __webpack_require__(20);

Object.defineProperty(exports, 'preventClick', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_preventClick).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {Object} ListenerDescriptor
 * @property {string} name The name of the event
 * @property {function} callback The callback
 * @property {function} un The function to call to remove the listener
 */

/**
 * Observer class
 */
var Observer = function () {
    /**
     * Instantiate Observer
     */
    function Observer() {
        _classCallCheck(this, Observer);

        /**
         * @private
         * @todo Initialise the handlers here already and remove the conditional
         * assignment in `on()`
         */
        this.handlers = null;
    }
    /**
     * Attach a handler function for an event.
     *
     * @param {string} event Name of the event to listen to
     * @param {function} fn The callback to trigger when the event is fired
     * @return {ListenerDescriptor}
     */


    _createClass(Observer, [{
        key: "on",
        value: function on(event, fn) {
            var _this = this;

            if (!this.handlers) {
                this.handlers = {};
            }

            var handlers = this.handlers[event];
            if (!handlers) {
                handlers = this.handlers[event] = [];
            }
            handlers.push(fn);

            // Return an event descriptor
            return {
                name: event,
                callback: fn,
                un: function un(e, fn) {
                    return _this.un(e, fn);
                }
            };
        }

        /**
         * Remove an event handler.
         *
         * @param {string} event Name of the event the listener that should be
         * removed listens to
         * @param {function} fn The callback that should be removed
         */

    }, {
        key: "un",
        value: function un(event, fn) {
            if (!this.handlers) {
                return;
            }

            var handlers = this.handlers[event];
            var i = void 0;
            if (handlers) {
                if (fn) {
                    for (i = handlers.length - 1; i >= 0; i--) {
                        if (handlers[i] == fn) {
                            handlers.splice(i, 1);
                        }
                    }
                } else {
                    handlers.length = 0;
                }
            }
        }

        /**
         * Remove all event handlers.
         */

    }, {
        key: "unAll",
        value: function unAll() {
            this.handlers = null;
        }

        /**
         * Attach a handler to an event. The handler is executed at most once per
         * event type.
         *
         * @param {string} event The event to listen to
         * @param {function} handler The callback that is only to be called once
         * @return {ListenerDescriptor}
         */

    }, {
        key: "once",
        value: function once(event, handler) {
            var _this2 = this;

            var fn = function fn() {
                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                    args[_key] = arguments[_key];
                }

                /*  eslint-disable no-invalid-this */
                handler.apply(_this2, args);
                /*  eslint-enable no-invalid-this */
                setTimeout(function () {
                    _this2.un(event, fn);
                }, 0);
            };
            return this.on(event, fn);
        }

        /**
         * Manually fire an event
         *
         * @param {string} event The event to fire manually
         * @param {...any} args The arguments with which to call the listeners
         */

    }, {
        key: "fireEvent",
        value: function fireEvent(event) {
            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                args[_key2 - 1] = arguments[_key2];
            }

            if (!this.handlers) {
                return;
            }
            var handlers = this.handlers[event];
            handlers && handlers.forEach(function (fn) {
                fn.apply(undefined, args);
            });
        }
    }]);

    return Observer;
}();

exports.default = Observer;
module.exports = exports["default"];

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

/**
 * Returns the requestAnimationFrame function for the browser, or a shim with
 * setTimeout if none is found
 *
 * @return {function}
 */
exports.default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {
    return setTimeout(callback, 1000 / 60);
}).bind(window);

module.exports = exports["default"];

/***/ }),
/* 3 */,
/* 4 */,
/* 5 */,
/* 6 */,
/* 7 */,
/* 8 */,
/* 9 */,
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.tiledDrawBuffer = exports.TiledRenderer = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _drawer = __webpack_require__(11);

var _drawer2 = _interopRequireDefault(_drawer);

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {Object} CanvasEntry
 * @private
 * @property {HTMLElement} wave The wave node
 * @property {CanvasRenderingContext2D} waveCtx The canvas rendering context
 * @property {?HTMLElement} progress The progress wave node
 * @property {?CanvasRenderingContext2D} progressCtx The progress wave canvas
 * rendering context
 * @property {?number} start Start of the area the canvas should render, between 0 and 1
 * @property {?number} end End of the area the canvas should render, between 0 and 1
 */

/**
 * TiledRenderer for wavesurfer. Based on the MultiCanvas renderer bundled with WaveSurfer.
 * TiledRenderer works with a pool of Canvas objects, automatically drawing and positioning them
 * as needed.
 */

var TiledRenderer = function (_Drawer) {
    _inherits(TiledRenderer, _Drawer);

    /**
     * @param {HTMLElement} container The container node of the wavesurfer instance
     * @param {WavesurferParams} params The wavesurfer initialisation options
     */
    function TiledRenderer(container, params) {
        _classCallCheck(this, TiledRenderer);

        /**
         * @type {number}
         * @private
         */
        var _this = _possibleConstructorReturn(this, (TiledRenderer.__proto__ || Object.getPrototypeOf(TiledRenderer)).call(this, container, params));

        _this.maxCanvasWidth = params.maxCanvasWidth;
        /**
         * @private
         * @type {number}
         */
        _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);

        /**
         * Whether or not the progress wave is renderered. If the `waveColor`
         * and `progressColor` are the same colour it is not.
         * @type {boolean}
         */
        _this.hasProgressCanvas = params.waveColor != params.progressColor;
        /**
         * @private
         * @type {number}
         */
        _this.halfPixel = 0.5 / params.pixelRatio;
        // Use tiled rendering if you need more than canvasLimit canvases
        _this.canvasLimit = params.canvasLimit || 6;
        // Use the sample-drawer if the minPxPerSec is >= sampleSpeed, otherwise use peaks/bars.
        _this.sampleSpeed = params.sampleSpeed || 2560;
        /**
         * @private
         * @type {Array}
         */
        _this.canvases = [];
        /** @private */
        _this.progressWave = null;
        _this.tiledRendering = false;
        return _this;
    }

    /**
     * Initialise the drawer
     */


    _createClass(TiledRenderer, [{
        key: 'init',
        value: function init() {
            this.createWrapper();
            this.createElements();
        }

        /**
         * Create the canvas elements and style them
         *
         * @private
         */

    }, {
        key: 'createElements',
        value: function createElements() {
            this.progressWave = this.wrapper.appendChild(this.style(document.createElement('wave'), {
                position: 'absolute',
                zIndex: 3,
                left: 0,
                top: 0,
                bottom: 0,
                overflow: 'hidden',
                width: '0',
                display: 'none',
                boxSizing: 'border-box',
                borderRightStyle: 'solid',
                pointerEvents: 'none'
            }));

            this.addCanvas();
            this.updateCursor();
        }

        /**
         * Update cursor style from params.
         */

    }, {
        key: 'updateCursor',
        value: function updateCursor() {
            this.style(this.progressWave, {
                borderRightWidth: this.params.cursorWidth + 'px',
                borderRightColor: this.params.cursorColor
            });
        }

        /**
         * Recenter the viewport on a position, either scroll there immediately or
         * in steps of 5 pixels
         *
         * @param {number} position X-offset in pixels
         * @param {boolean} immediate Set to true to immediately scroll somewhere
         */

    }, {
        key: 'recenterOnPosition',
        value: function recenterOnPosition(position, immediate) {
            var scrollLeft = this.wrapper.scrollLeft;
            var half = ~~(this.wrapper.clientWidth / 2);
            var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;
            var target = position - half;
            var offset = target - scrollLeft;

            if (maxScroll == 0) {
                // no need to continue if scrollbar is not there
                return;
            }

            // if the cursor is currently visible
            // and the scroll velocity is not too high.
            if (!immediate && -half <= offset && offset < half && this.params.minPxPerSec < 400) {
                // we'll limit the "re-center" rate.
                var rate = 5;
                offset = Math.max(-rate, Math.min(rate, offset));
                target = scrollLeft + offset;
            }

            // limit target to valid range (0 to maxScroll)
            target = Math.max(0, Math.min(maxScroll, target));
            // no use attempting to scroll if we're not moving
            if (target != scrollLeft) {
                this.wrapper.scrollLeft = target;
            }
        }

        /**
         * Adjust to the updated size by adding or removing canvases
         */

    }, {
        key: 'updateSize',
        value: function updateSize() {
            var _this2 = this;

            var totalWidth = Math.round(this.width / this.params.pixelRatio);
            var requiredCanvases = Math.ceil(totalWidth / this.maxCanvasElementWidth);
            var canvasCount = this.tiledRendering && this.canvasLimit < requiredCanvases ? this.canvasLimit : requiredCanvases;

            while (this.canvases.length < canvasCount) {
                this.addCanvas();
            }

            while (this.canvases.length > canvasCount) {
                this.removeCanvas();
            }

            this.canvases.forEach(function (entry, i) {
                //  reflow canvases in order
                var leftOffset = _this2.maxCanvasElementWidth * i;
                // Add some overlap to prevent vertical white stripes, keep the width even for simplicity.
                var canvasWidth = _this2.maxCanvasWidth + 2 * Math.ceil(_this2.params.pixelRatio / 2);

                if (!_this2.tiledRendering && i === _this2.canvases.length - 1) {
                    if (i === _this2.canvases.length - 1) {
                        canvasWidth = _this2.width - _this2.maxCanvasWidth * (_this2.canvases.length - 1);
                    }
                }

                _this2.updateDimensions(entry, canvasWidth, _this2.height, leftOffset, _this2.maxCanvasWidth * i);
                _this2.clearWaveForEntry(entry);
            });
        }

        /**
         * Add a canvas to the canvas list
         *
         * @private
         */

    }, {
        key: 'addCanvas',
        value: function addCanvas() {
            var entry = {};
            var leftOffset = this.maxCanvasElementWidth * this.canvases.length;

            entry.wave = this.wrapper.appendChild(this.style(document.createElement('canvas'), {
                position: 'absolute',
                zIndex: 2,
                left: leftOffset + 'px',
                top: 0,
                bottom: 0,
                height: '100%',
                pointerEvents: 'none'
            }));
            entry.waveCtx = entry.wave.getContext('2d');

            if (this.hasProgressCanvas) {
                entry.progress = this.progressWave.appendChild(this.style(document.createElement('canvas'), {
                    position: 'absolute',
                    left: leftOffset + 'px',
                    top: 0,
                    bottom: 0,
                    height: '100%'
                }));
                entry.progressCtx = entry.progress.getContext('2d');
            }

            this.canvases.push(entry);
        }

        /**
         * Pop one canvas from the list
         *
         * @private
         */

    }, {
        key: 'removeCanvas',
        value: function removeCanvas() {
            var lastEntry = this.canvases.pop();
            lastEntry.wave.parentElement.removeChild(lastEntry.wave);
            if (this.hasProgressCanvas) {
                lastEntry.progress.parentElement.removeChild(lastEntry.progress);
            }
        }

        /**
         * Update the dimensions of a canvas element
         *
         * @private
         * @param {CanvasEntry} entry
         * @param {number} width The new width of the element in canvas coordinates
         * @param {number} height The new height of the element
         * @param {number} offset Offset of the element in css coordinates
         * @param {number} leftCanX Offset of the element in canvas coordinates.
         */

    }, {
        key: 'updateDimensions',
        value: function updateDimensions(entry, width, height, offset, leftCanX) {
            var totalWidth = Math.round(this.width / this.params.pixelRatio);
            var elementWidth = Math.round(width / this.params.pixelRatio);
            // Where the canvas starts and ends in the waveform, represented as a decimal between 0 and 1.
            entry.start = offset / totalWidth || 0;
            // entry.start = entry.waveCtx.canvas.offsetLeft / totalWidth || 0;
            entry.end = entry.start + elementWidth / totalWidth;
            entry.leftX = leftCanX;
            entry.waveCtx.canvas.width = width;
            entry.waveCtx.canvas.height = height;
            this.style(entry.waveCtx.canvas, {
                width: elementWidth + 'px',
                left: offset + 'px'
            });

            this.style(this.progressWave, { display: 'block' });

            if (this.hasProgressCanvas) {
                entry.progressCtx.canvas.width = width;
                entry.progressCtx.canvas.height = height;
                this.style(entry.progressCtx.canvas, {
                    width: elementWidth + 'px',
                    left: offset + 'px'
                });
            }

            // Create an empty <div> to hold open
            if (this.tiledRendering && !this.spacer) {
                this.spacer = this.wrapper.appendChild(this.style(document.createElement('div'), {
                    id: 'spacerdiv',
                    position: 'absolute',
                    zIndex: 2,
                    top: 0,
                    bottom: '1px',
                    width: '1px',
                    left: totalWidth + 'px',
                    height: '100%',
                    pointerEvents: 'none'
                }));
            }
            if (this.spacer) {
                this.style(this.spacer, { left: totalWidth + 'px' });
            }
        }
        /**
         * Clear the whole waveform
         */

    }, {
        key: 'clearWave',
        value: function clearWave() {
            var _this3 = this;

            this.canvases.forEach(function (entry) {
                return _this3.clearWaveForEntry(entry);
            });
        }

        /**
         * Clear one canvas
         *
         * @private
         * @param {CanvasEntry} entry
         */

    }, {
        key: 'clearWaveForEntry',
        value: function clearWaveForEntry(entry) {
            entry.waveCtx.clearRect(0, 0, entry.waveCtx.canvas.width, entry.waveCtx.canvas.height);
            if (this.hasProgressCanvas) {
                entry.progressCtx.clearRect(0, 0, entry.progressCtx.canvas.width, entry.progressCtx.canvas.height);
            }
        }

        /**
         * Draw peaks on the (first) canvas
         * (control comes thru here via the minimap plugin or when clearing the waveform).
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} length The width of the area that should be drawn
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawPeaks',
        value: function drawPeaks(peaks, length, start, end) {
            if (!this.setWidth(length)) {
                this.clearWave();
            }
            this.params.barWidth ? this.drawBars(peaks, 0, start, end, this.canvases[0]) : this.drawWave(peaks, 0, start, end, this.canvases[0]);
        }

        /**
         * Draw a waveform with bars
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0. Must be an integer.
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         * @param (canvas) the canvas to draw the wave on,
         */

    }, {
        key: 'drawBars',
        value: function drawBars(peaks, channelIndex, start, end, canvas) {
            var _this4 = this;

            this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {
                var absmax = _ref.absmax,
                    hasMinVals = _ref.hasMinVals,
                    height = _ref.height,
                    offsetY = _ref.offsetY,
                    halfH = _ref.halfH,
                    peaks = _ref.peaks;

                // if drawBars was called within ws.empty we don't pass a start and
                // don't want anything to happen
                if (start === undefined) {
                    return;
                }
                // Skip every other value if there are negatives.
                var peakIndexScale = hasMinVals ? 2 : 1;
                var length = peaks.length / peakIndexScale;
                var bar = _this4.params.barWidth * _this4.params.pixelRatio;
                var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);
                var step = bar + gap;

                var scale = length / _this4.width;
                var first = start;
                var last = end;
                var i = void 0;

                for (i = first; i < last; i += step) {
                    var peak = peaks[Math.floor(i * scale * peakIndexScale)] || 0;
                    var h = Math.round(peak / absmax * halfH);
                    _this4.fillRect(i - first + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2, canvas);
                }
            }, canvas);
        }

        /**
         * Draw a waveform
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number?} start The x-offset of the beginning of the area that
         * should be rendered (If this isn't set only a flat line is rendered)
         * @param {number?} end The x-offset of the end of the area that should be
         * rendered
         * @param (canvas) the canvas to draw the wave on,
         */

    }, {
        key: 'drawWave',
        value: function drawWave(peaks, channelIndex, start, end, canvas) {
            var _this5 = this;

            this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {
                var absmax = _ref2.absmax,
                    hasMinVals = _ref2.hasMinVals,
                    height = _ref2.height,
                    offsetY = _ref2.offsetY,
                    halfH = _ref2.halfH,
                    peaks = _ref2.peaks;

                if (!hasMinVals) {
                    var reflectedPeaks = [];
                    var len = peaks.length;
                    var i = void 0;
                    for (i = 0; i < len; i++) {
                        reflectedPeaks[2 * i] = peaks[i];
                        reflectedPeaks[2 * i + 1] = -peaks[i];
                    }
                    peaks = reflectedPeaks;
                }

                // if drawWave was called within ws.empty we don't pass a start and
                // end and simply want a flat line
                if (start !== undefined) {
                    _this5.drawLine(peaks, absmax, halfH, offsetY, start, end, canvas);
                }

                // Always draw a median line
                _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel, canvas);
            }, canvas);
        }

        /**
         * Draw part of the waveform on a particular canvas
         *
         * @private
         * @param {number[]} peaks Peak data
         * @param {number} absmax Maximum peak value (absolute)
         * @param {number} halfH Half the height of the waveform
         * @param {number} offsetY Offset to the top
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that
         * should be rendered
         */

    }, {
        key: 'drawLine',
        value: function drawLine(peaks, absmax, halfH, offsetY, start, end, entry) {
            // let t0 = performance.now();
            this.setFillStyles(entry);
            this.drawLineToContext(entry, entry.waveCtx, peaks, absmax, halfH, offsetY, start, end);
            this.drawLineToContext(entry, entry.progressCtx, peaks, absmax, halfH, offsetY, start, end);
        }

        /**
         * Render the actual waveform line on a canvas
         *
         * @private
         * @param {CanvasEntry} entry
         * @param {Canvas2DContextAttributes} ctx Essentially `entry.[wave|progress]Ctx`
         * @param {number[]} peaks
         * @param {number} absmax Maximum peak value (absolute)
         * @param {number} halfH Half the height of the waveform
         * @param {number} offsetY Offset to the top
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that
         * should be rendered
         */

    }, {
        key: 'drawLineToContext',
        value: function drawLineToContext(entry, ctx, peaks, absmax, halfH, offsetY, start, end) {
            if (!ctx) {
                return;
            }

            var length = peaks.length / 2;
            //  const scale = this.width != length ? this.width / length : 1;

            var scale = this.params.fillParent && this.width != length ? this.width / length : 1;

            var first = Math.round(length * entry.start);
            // Use one more peak value to make sure we join peaks at ends -- unless,
            // of course, this is the last canvas.
            var last = Math.round(length * entry.end) + 1;
            if (first > end || last < start) {
                return;
            }
            var canvasStart = Math.min(first, start);
            var canvasEnd = Math.max(last, end);
            var i = void 0;
            var j = void 0;

            ctx.beginPath();
            ctx.moveTo((canvasStart - first) * scale + this.halfPixel, halfH + offsetY);

            for (i = canvasStart; i < canvasEnd; i++) {
                var peak = peaks[2 * i] || 0;
                var h = Math.round(peak / absmax * halfH);
                ctx.lineTo((i - first) * scale + this.halfPixel, halfH - h + offsetY);
            }

            // Draw the bottom edge going backwards, to make a single
            // closed hull to fill.
            for (j = canvasEnd - 1; j >= canvasStart; j--) {
                var _peak = peaks[2 * j + 1] || 0;
                var _h = Math.round(_peak / absmax * halfH);
                ctx.lineTo((j - first) * scale + this.halfPixel, halfH - _h + offsetY);
            }

            ctx.closePath();
            ctx.fill();
        }

        /**
         * Draw a rectangle on the waveform
         *
         * @param {number} x
         * @param {number} y
         * @param {number} width
         * @param {number} height
           @param {canvas} entry
         */

    }, {
        key: 'fillRect',
        value: function fillRect(x, y, width, height, entry) {
            this.setFillStyles(entry);

            this.fillRectToContext(entry.waveCtx, x, y, width, height);

            this.fillRectToContext(entry.progressCtx, x, y, width, height);
        }

        /**
         * Performs preparation tasks and calculations which are shared by drawBars and drawWave
         *
         * @private
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number?} start The x-offset of the beginning of the area that
         * should be rendered (If this isn't set only a flat line is rendered)
         * @param {number?} end The x-offset of the end of the area that should be
         * rendered
         * @param {function} fn The render function to call
         * @param {canvas} The canvas to draw upon.
         */

    }, {
        key: 'prepareDraw',
        value: function prepareDraw(peaks, channelIndex, start, end, fn, canvas) {
            var _this6 = this;

            //      if (!peaks) {
            //          let cat = 2;
            //      }
            // Split channels and call this function with the channelIndex set
            if (!peaks) {
                var cat = 3;
            }
            if (peaks[0] instanceof Array) {
                var channels = peaks;
                if (this.params.splitChannels) {
                    this.setHeight(channels.length * this.params.height * this.params.pixelRatio);
                    return channels.forEach(function (channelPeaks, i) {
                        return _this6.prepareDraw(channelPeaks, i, start, end, fn, canvas);
                    });
                }
                peaks = channels[0];
            }
            // calculate maximum modulation value, either from the barHeight
            // parameter or if normalize=true from the largest value in the peak
            // set
            var absmax = 1 / this.params.barHeight;
            if (this.params.normalize) {
                var max = util.max(peaks);
                var min = util.min(peaks);
                absmax = -min > max ? -min : max;
            }

            // Bar wave draws the bottom only as a reflection of the top,
            // so we don't need negative values
            var hasMinVals = [].some.call(peaks, function (val) {
                return val < 0;
            });
            var height = this.params.height * this.params.pixelRatio;
            var offsetY = height * channelIndex || 0;
            var halfH = height / 2;

            return fn({
                absmax: absmax,
                hasMinVals: hasMinVals,
                height: height,
                offsetY: offsetY,
                halfH: halfH,
                peaks: peaks,
                entry: canvas
            });
        }

        /**
         * Draw the actual rectangle on a canvas
         *
         * @private
         * @param {Canvas2DContextAttributes} ctx
         * @param {number} x
         * @param {number} y
         * @param {number} width
         * @param {number} height
         */

    }, {
        key: 'fillRectToContext',
        value: function fillRectToContext(ctx, x, y, width, height) {
            if (!ctx) {
                return;
            }
            ctx.fillRect(x, y, width, height);
        }

        /**
         * Set the fill styles for a certain entry (wave and progress)
         *
         * @private
         * @param {CanvasEntry} entry
         */

    }, {
        key: 'setFillStyles',
        value: function setFillStyles(entry) {
            entry.waveCtx.fillStyle = this.params.waveColor;
            if (this.hasProgressCanvas) {
                entry.progressCtx.fillStyle = this.params.progressColor;
            }
        }

        /**
         * Return image data of the waveform
         *
         * @param {string} type='image/png' An optional value of a format type.
         * @param {number} quality=0.92 An optional value between 0 and 1.
         * @return {string|string[]} images A data URL or an array of data URLs
         */

    }, {
        key: 'getImage',
        value: function getImage(type, quality) {
            var images = this.canvases.map(function (entry) {
                return entry.wave.toDataURL(type, quality);
            });
            return images.length > 1 ? images : images[0];
        }

        /**
         * Render the new progress
         *
         * @param {number} position X-Offset of progress position in pixels
         */

    }, {
        key: 'updateProgress',
        value: function updateProgress(position) {
            this.style(this.progressWave, { width: position + 'px' });
        }

        /**
         * Calculate position and width of the canvas corresponding to the normalized
         * X position supplied.
         *
         * @param surfer {Wavesurfer} wavesurfer instance that has channel data
         * @param xNorm {number} Normalized X position to use to determine canvas info.
         * @returns: lhs (number) left hand side coordianate of canvas in css coordinates.
         * canvaWidth (number) width of canvas (in canvas coordinates), adjusted if need be for last.
         * leftOff (number) left coordinate of canvas (in canvas coordinates).
         */

    }, {
        key: 'calcCanvasInfo',
        value: function calcCanvasInfo(surfer, xNorm) {
            var durScale = surfer.getDuration() * this.params.minPxPerSec;
            var xc = xNorm * durScale / this.params.pixelRatio;
            var canNum = Math.floor(xc / this.maxCanvasElementWidth);

            var lhs = canNum * this.maxCanvasElementWidth; // lhs in css coordinates
            var leftOff = canNum * this.maxCanvasWidth;
            var canvasWidth = this.maxCanvasWidth + 2 * Math.ceil(this.params.pixelRatio / 2);

            // If this is the last canvas position, trim its size back so as to not overhang
            if ((canNum + 1) * this.maxCanvasWidth > this.width) {
                canvasWidth = this.width - this.maxCanvasWidth * canNum;
            }
            return {
                left: lhs,
                canvasWidth: canvasWidth,
                leftOff: leftOff
            };
        }

        /**
         * fill the given canvas entry with data from the peaks array or the channel buffers
         *
         * @private
         * @param surfer {Wavesurfer} wavesurfer instance that has channel data
         * @param entry {Canvas} canvas to draw onto.
         * @param peaks (Peaks array) peak data to draw with if not using channel data.
         */

    }, {
        key: 'imageSingleCanvas',
        value: function imageSingleCanvas(surfer, entry, peaks) {
            var buffer = surfer.backend.buffer;
            var numberOfChannels = buffer.numberOfChannels,
                sampleRate = buffer.sampleRate;

            var spDx = sampleRate / this.params.minPxPerSec;
            var height = Math.round(this.params.height * this.params.pixelRatio); // ?
            var halfH = Math.round(height / 2);
            var pixH = 2;
            var pixW = Math.ceil(1 / spDx) + 1;
            var ySc = -halfH;
            var duration = surfer.getDuration();
            var durScale = duration * this.params.minPxPerSec;

            var lhs = Math.round(entry.start * durScale);
            var rhs = Math.round(entry.end * durScale);
            if (!entry) {
                var cat = 3;
            }
            if (this.params.minPxPerSec < this.sampleSpeed) {
                this.params.barWidth ? this.drawBars(peaks, 0, lhs, rhs, entry) : this.drawWave(peaks, 0, lhs, rhs, entry);
                return;
            }

            for (var c = 0; c < numberOfChannels; ++c) {
                var chan = buffer.getChannelData(c);
                var yoff = halfH + c * height;
                var progressCtx = entry.progressCtx,
                    waveCtx = entry.waveCtx;

                this.setFillStyles(entry);
                var sx = entry.start * duration * sampleRate;
                var w = rhs - lhs;
                for (var x = 0; x < w; ++x) {
                    var y = yoff + Math.round(chan[Math.round(sx)] * ySc);
                    sx += spDx;
                    waveCtx.fillRect(x, y, pixW, pixH);
                    if (progressCtx) progressCtx.fillRect(x, y, pixW, pixH);
                }
            }
        }

        /**
         * periodic function called in order to maintain the tile strip.
         * returns true if a canvas to reimage was found.
         * @private
         * @param surfer {Wavesurfer} wavesurfer instance that has channel data
         * @param peaks (Peaks array) peak data to draw with if not using channel data.
         * @returns: (boolean) true if a reimage was accomplished, false if not.
         */

    }, {
        key: 'scrollCheck',
        value: function scrollCheck(surfer, peaks) {
            var scrX = surfer.drawer.getScrollX(); // scrX should be in canvas coordinates.

            var duration = surfer.getDuration();
            var durScale = duration * this.params.minPxPerSec;
            var normX = scrX / durScale;

            var playState = surfer.isPlaying();

            if (normX > 1.0) {
                normX = 1.0;
            }

            var foundCan = void 0;
            var canvToFill = void 0;

            var maxDist = 0;
            // Find the canvas which is visable. Also determine the canvas that is farthest away or hidden
            // that we can recycle if need be.
            this.canvases.forEach(function (entry) {
                if (normX >= entry.start && normX < entry.end && !entry.hidden) {
                    foundCan = entry;
                } else {
                    if (entry.hidden) {
                        // hidden entries always win.
                        canvToFill = entry;
                        maxDist = -1; // use -1 as a flag to stop compares.
                    } else if (maxDist >= 0) {
                        var midPt = (entry.start + entry.end) / 2;
                        var dist = Math.abs(normX - midPt);
                        if (dist >= maxDist) {
                            maxDist = dist;
                            canvToFill = entry;
                        }
                    }
                }
            });

            var that = this;
            var whereX = -1;
            // If it isn't there, make that one.
            // If it is already there, find the next one

            if (!foundCan) {
                whereX = normX;
            } else {
                var ourWid = foundCan.end - foundCan.start;
                var ourMid = foundCan.start + ourWid / 2;
                var seekX = ourMid + ourWid;
                var foundUp = void 0;
                if (seekX < 1.0) {
                    foundUp = that.canvases.find(function (can) {
                        return seekX >= can.start && seekX < can.end && !can.hidden;
                    });
                }
                if (!foundUp && seekX < 1.0) {
                    whereX = seekX;
                } else {
                    seekX = ourMid - ourWid;
                    if (seekX < 0) seekX == 0;
                    var foundDn = that.canvases.find(function (can) {
                        return seekX >= can.start && seekX < can.end && !can.hidden;
                    });
                    if (!foundDn) {
                        whereX = seekX;
                    }
                }
            }

            if (whereX >= 0 && canvToFill) {
                var can = this.calcCanvasInfo(surfer, whereX);
                var canvasWidth = can.canvasWidth,
                    left = can.left,
                    leftOff = can.leftOff;

                this.updateDimensions(canvToFill, canvasWidth, this.height, left, leftOff);
                this.clearWaveForEntry(canvToFill);
                this.imageSingleCanvas(surfer, canvToFill, peaks);
                canvToFill.hidden = false;
                return true;
            }

            return false;
        }

        /**
         * called from tiledDrawBuffer to reimage the tiles. If we are using tiled rendering,
         * arrange to repaint the visible area and set up an event listener for scrolling.
         * If we aren't using tiled rendering, then fill up all the canvases.
         *
         * @private
         * @param surfer {Wavesurfer} wavesurfer instance that has channel data
         * @param entry {Canvas} canvas to draw onto.
         * @param peaks (Peaks array) peak data to draw with if not using channel data.
         */

    }, {
        key: 'drawTiles',
        value: function drawTiles(surfer, width, peaks) {
            this.setWidth(width);
            this.clearWave();
            var that = this;

            // Csncel any existing scroll watcher.
            if (this.scrollWatcher) {
                surfer.un('scroll', this.scrollWatcher);
                this.scrollWatcher = undefined;
            }
            if (this.tiledRendering) {
                // Mark all canvases as hidden.
                this.canvases.forEach(function (entry) {
                    entry.hidden = true;
                });
                var repaint = function repaint() {
                    var ctr = 0;
                    while (that.scrollCheck(surfer, peaks)) {
                        if (ctr++ > that.canvasLimit) {
                            return;
                        }
                    }
                };
                setTimeout(repaint);
            } else {
                this.canvases.forEach(function (entry) {
                    that.imageSingleCanvas(surfer, entry, peaks);
                });
            }

            // Make a new scroll watcher if we need it.
            if (this.tiledRendering) {
                var watchFun = function watchFun(screvt) {
                    if (that.tiledRendering) {
                        if (that.params.minPxPerSec < that.sampleSpeed && !peaks) {
                            return;
                        }
                        if (that.scrollCheck(surfer, peaks)) {
                            that.scrollCheck(surfer, peaks);
                        }
                    }
                };
                surfer.on('scroll', watchFun);
                this.scrollWatcher = watchFun;
            }
        }
    }]);

    return TiledRenderer;
}(_drawer2.default); // End of class.

/**
 * A hacked-up version of the drawBuffer routine defined in wavesurfer.js,
 * Since we don't want to use peak data at high magnification levels, we
 * avoid generating and using peak data in the situation. We also
 * turn on the tiled rendering feature if it is needed.
 */


exports.default = TiledRenderer;
var tiledDrawBuffer = function tiledDrawBuffer() {
    var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec);
    var parentWidth = this.drawer.getWidth();
    var width = nominalWidth;

    // If we need more than a certain number of canvases, then we will render them dynamically
    var requiredCanvases = Math.ceil(width / this.params.maxCanvasWidth);
    this.drawer.tiledRendering = requiredCanvases > this.drawer.canvasLimit;
    var needPeaks = this.params.minPxPerSec < this.drawer.sampleSpeed;
    var end = Math.max(parentWidth, width);

    this.peaks = undefined;
    var peaks = void 0;
    if (needPeaks) {
        this.backend.peaks = undefined;
        this.backend.mergedPeaks = undefined;
        peaks = this.backend.getPeaks(width, 0, end);
    }
    this.drawer.drawTiles(this, width, peaks);
    this.fireEvent('redraw', peaks, width);
};

exports.TiledRenderer = TiledRenderer;
exports.tiledDrawBuffer = tiledDrawBuffer;

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Parent class for renderers
 *
 * @extends {Observer}
 */
var Drawer = function (_util$Observer) {
    _inherits(Drawer, _util$Observer);

    /**
     * @param {HTMLElement} container The container node of the wavesurfer instance
     * @param {WavesurferParams} params The wavesurfer initialisation options
     */
    function Drawer(container, params) {
        _classCallCheck(this, Drawer);

        /** @private */
        var _this = _possibleConstructorReturn(this, (Drawer.__proto__ || Object.getPrototypeOf(Drawer)).call(this));

        _this.container = container;
        /**
         * @type {WavesurferParams}
         * @private
         */
        _this.params = params;
        /**
         * The width of the renderer
         * @type {number}
         */
        _this.width = 0;
        /**
         * The height of the renderer
         * @type {number}
         */
        _this.height = params.height * _this.params.pixelRatio;
        /** @private */
        _this.lastPos = 0;
        /**
         * The `<wave>` element which is added to the container
         * @type {HTMLElement}
         */
        _this.wrapper = null;
        return _this;
    }

    /**
     * Alias of `util.style`
     *
     * @param {HTMLElement} el The element that the styles will be applied to
     * @param {Object} styles The map of propName: attribute, both are used as-is
     * @return {HTMLElement} el
     */


    _createClass(Drawer, [{
        key: 'style',
        value: function style(el, styles) {
            return util.style(el, styles);
        }

        /**
         * Create the wrapper `<wave>` element, style it and set up the events for
         * interaction
         */

    }, {
        key: 'createWrapper',
        value: function createWrapper() {
            this.wrapper = this.container.appendChild(document.createElement('wave'));

            this.style(this.wrapper, {
                display: 'block',
                position: 'relative',
                userSelect: 'none',
                webkitUserSelect: 'none',
                height: this.params.height + 'px'
            });

            if (this.params.fillParent || this.params.scrollParent) {
                this.style(this.wrapper, {
                    width: '100%',
                    overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',
                    overflowY: 'hidden'
                });
            }

            this.setupWrapperEvents();
        }

        /**
         * Handle click event
         *
         * @param {Event} e Click event
         * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`
         * @return {number} Playback position from 0 to 1
         */

    }, {
        key: 'handleEvent',
        value: function handleEvent(e, noPrevent) {
            !noPrevent && e.preventDefault();

            var clientX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX;
            var bbox = this.wrapper.getBoundingClientRect();

            var nominalWidth = this.width;
            var parentWidth = this.getWidth();

            var progress = void 0;

            if (!this.params.fillParent && nominalWidth < parentWidth) {
                progress = (clientX - bbox.left) * this.params.pixelRatio / nominalWidth || 0;

                if (progress > 1) {
                    progress = 1;
                }
            } else {
                progress = (clientX - bbox.left + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;
            }

            return progress;
        }

        /**
         * @private
         */

    }, {
        key: 'setupWrapperEvents',
        value: function setupWrapperEvents() {
            var _this2 = this;

            this.wrapper.addEventListener('click', function (e) {
                var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;
                if (scrollbarHeight != 0) {
                    // scrollbar is visible.  Check if click was on it
                    var bbox = _this2.wrapper.getBoundingClientRect();
                    if (e.clientY >= bbox.bottom - scrollbarHeight) {
                        // ignore mousedown as it was on the scrollbar
                        return;
                    }
                }

                if (_this2.params.interact) {
                    _this2.fireEvent('click', e, _this2.handleEvent(e));
                }
            });

            this.wrapper.addEventListener('scroll', function (e) {
                return _this2.fireEvent('scroll', e);
            });
        }

        /**
         * Draw peaks on the canvas
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} length The width of the area that should be drawn
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawPeaks',
        value: function drawPeaks(peaks, length, start, end) {
            if (!this.setWidth(length)) {
                this.clearWave();
            }

            this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);
        }

        /**
         * Scroll to the beginning
         */

    }, {
        key: 'resetScroll',
        value: function resetScroll() {
            if (this.wrapper !== null) {
                this.wrapper.scrollLeft = 0;
            }
        }

        /**
         * Recenter the viewport at a certain percent of the waveform
         *
         * @param {number} percent Value from 0 to 1 on the waveform
         */

    }, {
        key: 'recenter',
        value: function recenter(percent) {
            var position = this.wrapper.scrollWidth * percent;
            this.recenterOnPosition(position, true);
        }

        /**
         * Recenter the viewport on a position, either scroll there immediately or
         * in steps of 5 pixels
         *
         * @param {number} position X-offset in pixels
         * @param {boolean} immediate Set to true to immediately scroll somewhere
         */

    }, {
        key: 'recenterOnPosition',
        value: function recenterOnPosition(position, immediate) {
            var scrollLeft = this.wrapper.scrollLeft;
            var half = ~~(this.wrapper.clientWidth / 2);
            var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;
            var target = position - half;
            var offset = target - scrollLeft;

            if (maxScroll == 0) {
                // no need to continue if scrollbar is not there
                return;
            }

            // if the cursor is currently visible...
            if (!immediate && -half <= offset && offset < half) {
                // we'll limit the "re-center" rate.
                var rate = 5;
                offset = Math.max(-rate, Math.min(rate, offset));
                target = scrollLeft + offset;
            }

            // limit target to valid range (0 to maxScroll)
            target = Math.max(0, Math.min(maxScroll, target));
            // no use attempting to scroll if we're not moving
            if (target != scrollLeft) {
                this.wrapper.scrollLeft = target;
            }
        }

        /**
         * Get the current scroll position in pixels
         *
         * @return {number}
         */

    }, {
        key: 'getScrollX',
        value: function getScrollX() {
            var pixelRatio = this.params.pixelRatio;
            var x = Math.round(this.wrapper.scrollLeft * pixelRatio);

            // In cases of elastic scroll (safari with mouse wheel) you can
            // scroll beyond the limits of the container
            // Calculate and floor the scrollable extent to make sure an out
            // of bounds value is not returned
            // Ticket #1312
            if (this.params.scrollParent) {
                var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());
                x = Math.min(maxScroll, Math.max(0, x));
            }

            return x;
        }

        /**
         * Get the width of the container
         *
         * @return {number}
         */

    }, {
        key: 'getWidth',
        value: function getWidth() {
            return Math.round(this.container.clientWidth * this.params.pixelRatio);
        }

        /**
         * Set the width of the container
         *
         * @param {number} width
         */

    }, {
        key: 'setWidth',
        value: function setWidth(width) {
            if (this.width == width) {
                return false;
            }

            this.width = width;

            if (this.params.fillParent || this.params.scrollParent) {
                this.style(this.wrapper, {
                    width: ''
                });
            } else {
                this.style(this.wrapper, {
                    width: ~~(this.width / this.params.pixelRatio) + 'px'
                });
            }

            this.updateSize();
            return true;
        }

        /**
         * Set the height of the container
         *
         * @param {number} height
         */

    }, {
        key: 'setHeight',
        value: function setHeight(height) {
            if (height == this.height) {
                return false;
            }
            this.height = height;

            this.style(this.wrapper, {
                height: ~~(this.height / this.params.pixelRatio) + 'px'
            });

            this.updateSize();
            return true;
        }

        /**
         * Called by wavesurfer when progress should be renderered
         *
         * @param {number} progress From 0 to 1
         */

    }, {
        key: 'progress',
        value: function progress(_progress) {
            var minPxDelta = 1 / this.params.pixelRatio;
            var pos = Math.round(_progress * this.width) * minPxDelta;

            if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {
                this.lastPos = pos;

                if (this.params.scrollParent && this.params.autoCenter) {
                    var newPos = ~~(this.wrapper.scrollWidth * _progress);
                    this.recenterOnPosition(newPos);
                }

                this.updateProgress(pos);
            }
        }

        /**
         * This is called when wavesurfer is destroyed
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.unAll();
            if (this.wrapper) {
                if (this.wrapper.parentNode == this.container) {
                    this.container.removeChild(this.wrapper);
                }
                this.wrapper = null;
            }
        }

        /* Renderer-specific methods */

        /**
         * Called after cursor related params have changed.
         *
         * @abstract
         */

    }, {
        key: 'updateCursor',
        value: function updateCursor() {}

        /**
         * Called when the size of the container changes so the renderer can adjust
         *
         * @abstract
         */

    }, {
        key: 'updateSize',
        value: function updateSize() {}

        /**
         * Draw a waveform with bars
         *
         * @abstract
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawBars',
        value: function drawBars(peaks, channelIndex, start, end) {}

        /**
         * Draw a waveform
         *
         * @abstract
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawWave',
        value: function drawWave(peaks, channelIndex, start, end) {}

        /**
         * Clear the waveform
         *
         * @abstract
         */

    }, {
        key: 'clearWave',
        value: function clearWave() {}

        /**
         * Render the new progress
         *
         * @abstract
         * @param {number} position X-Offset of progress position in pixels
         */

    }, {
        key: 'updateProgress',
        value: function updateProgress(position) {}
    }]);

    return Drawer;
}(util.Observer);

exports.default = Drawer;
module.exports = exports['default'];

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = ajax;

var _observer = __webpack_require__(1);

var _observer2 = _interopRequireDefault(_observer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Perform an ajax request
 *
 * @param {Options} options Description
 *
 * @returns {Object} Observer instance
 */
function ajax(options) {
    var instance = new _observer2.default();
    var xhr = new XMLHttpRequest();
    var fired100 = false;
    xhr.open(options.method || 'GET', options.url, true);
    xhr.responseType = options.responseType || 'json';

    if (options.xhr) {
        if (options.xhr.requestHeaders) {
            // add custom request headers
            options.xhr.requestHeaders.forEach(function (header) {
                xhr.setRequestHeader(header.key, header.value);
            });
        }
        if (options.xhr.withCredentials) {
            // use credentials
            xhr.withCredentials = true;
        }
    }

    xhr.addEventListener('progress', function (e) {
        instance.fireEvent('progress', e);
        if (e.lengthComputable && e.loaded == e.total) {
            fired100 = true;
        }
    });
    xhr.addEventListener('load', function (e) {
        if (!fired100) {
            instance.fireEvent('progress', e);
        }
        instance.fireEvent('load', e);
        if (200 == xhr.status || 206 == xhr.status) {
            instance.fireEvent('success', xhr.response, e);
        } else {
            instance.fireEvent('error', e);
        }
    });
    xhr.addEventListener('error', function (e) {
        return instance.fireEvent('error', e);
    });
    xhr.send();
    instance.xhr = xhr;
    return instance;
}
module.exports = exports['default'];

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = getId;
/**
 * Get a random prefixed ID
 *
 * @returns {String} Random ID
 */
function getId() {
    return 'wavesurfer_' + Math.random().toString(32).substring(2);
}
module.exports = exports['default'];

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = max;
/**
 * Get the largest value
 *
 * @param   {Array} values Array of numbers
 * @returns {Number} Largest number found
 */
function max(values) {
    var largest = -Infinity;
    Object.keys(values).forEach(function (i) {
        if (values[i] > largest) {
            largest = values[i];
        }
    });
    return largest;
}
module.exports = exports["default"];

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = min;
/**
 * Get the smallest value
 *
 * @param   {Array} values Array of numbers
 * @returns {Number}       Smallest number found
 */
function min(values) {
    var smallest = Number(Infinity);
    Object.keys(values).forEach(function (i) {
        if (values[i] < smallest) {
            smallest = values[i];
        }
    });
    return smallest;
}
module.exports = exports["default"];

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = extend;
/**
 * Extend an object shallowly with others
 *
 * @param {Object} dest The target object
 * @param {Object[]} sources The objects to use for extending
 *
 * @return {Object} Merged object
 */
function extend(dest) {
    for (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        sources[_key - 1] = arguments[_key];
    }

    sources.forEach(function (source) {
        Object.keys(source).forEach(function (key) {
            dest[key] = source[key];
        });
    });
    return dest;
}
module.exports = exports["default"];

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = style;
/**
 * Apply a map of styles to an element
 *
 * @param {HTMLElement} el The element that the styles will be applied to
 * @param {Object} styles The map of propName: attribute, both are used as-is
 *
 * @return {HTMLElement} el
 */
function style(el, styles) {
    Object.keys(styles).forEach(function (prop) {
        if (el.style[prop] !== styles[prop]) {
            el.style[prop] = styles[prop];
        }
    });
    return el;
}
module.exports = exports["default"];

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = frame;

var _requestAnimationFrame = __webpack_require__(2);

var _requestAnimationFrame2 = _interopRequireDefault(_requestAnimationFrame);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Create a function which will be called at the next requestAnimationFrame
 * cycle
 *
 * @param {function} func The function to call
 *
 * @return {func} The function wrapped within a requestAnimationFrame
 */
function frame(func) {
  return function () {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return (0, _requestAnimationFrame2.default)(function () {
      return func.apply(undefined, args);
    });
  };
}
module.exports = exports['default'];

/***/ }),
/* 19 */
/***/ (function(module, exports) {

/**
 * Returns a function, that, as long as it continues to be invoked, will not
 * be triggered. The function will be called after it stops being called for
 * N milliseconds. If `immediate` is passed, trigger the function on the
 * leading edge, instead of the trailing. The function also has a property 'clear' 
 * that is a function which will clear the timer to prevent previously scheduled executions. 
 *
 * @source underscore.js
 * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
 * @param {Function} function to wrap
 * @param {Number} timeout in ms (`100`)
 * @param {Boolean} whether to execute at the beginning (`false`)
 * @api public
 */

module.exports = function debounce(func, wait, immediate){
  var timeout, args, context, timestamp, result;
  if (null == wait) wait = 100;

  function later() {
    var last = Date.now() - timestamp;

    if (last < wait && last >= 0) {
      timeout = setTimeout(later, wait - last);
    } else {
      timeout = null;
      if (!immediate) {
        result = func.apply(context, args);
        context = args = null;
      }
    }
  };

  var debounced = function(){
    context = this;
    args = arguments;
    timestamp = Date.now();
    var callNow = immediate && !timeout;
    if (!timeout) timeout = setTimeout(later, wait);
    if (callNow) {
      result = func.apply(context, args);
      context = args = null;
    }

    return result;
  };

  debounced.clear = function() {
    if (timeout) {
      clearTimeout(timeout);
      timeout = null;
    }
  };
  
  debounced.flush = function() {
    if (timeout) {
      result = func.apply(context, args);
      context = args = null;
      
      clearTimeout(timeout);
      timeout = null;
    }
  };

  return debounced;
};


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = preventClick;
function preventClickHandler(e) {
    e.stopPropagation();
    document.body.removeEventListener('click', preventClickHandler, true);
}

function preventClick(values) {
    document.body.addEventListener('click', preventClickHandler, true);
}
module.exports = exports['default'];

/***/ })
/******/ ]);
});
//# sourceMappingURL=wavesurfer.tiledrenderer.js.map

/***/ }),

/***/ "./src/js/plugins/wavesurfer.timeline.js":
/*!***********************************************!*\
  !*** ./src/js/plugins/wavesurfer.timeline.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "localhost:8080/dist/plugin/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {Object} TimelinePluginParams
 * @desc Extends the `WavesurferParams` wavesurfer was initialised with
 * @property {!string|HTMLElement} container CSS selector or HTML element where
 * the timeline should be drawn. This is the only required parameter.
 * @property {number} notchPercentHeight=90 Height of notches in percent
 * @property {string} primaryColor='#000' The colour of the main notches
 * @property {string} secondaryColor='#c0c0c0' The colour of the secondary
 * notches
 * @property {string} primaryFontColor='#000' The colour of the labels next to
 * the main notches
 * @property {string} secondaryFontColor='#000' The colour of the labels next to
 * the secondary notches
 * @property {number} labelPadding=5 The padding between the label and the notch
 * @property {?number} zoomDebounce A debounce timeout to increase rendering
 * performance for large files
 * @property {string} fontFamily='Arial'
 * @property {number} fontSize=10 Font size of labels in pixels
 * @property {function} formatTimeCallback=→00:00
 * @property {?boolean} deferInit Set to true to manually call
 * `initPlugin('timeline')`
 */

/**
 * Adds a timeline to the waveform.
 *
 * @implements {PluginClass}
 * @extends {Observer}
 * @example
 * // es6
 * import TimelinePlugin from 'wavesurfer.timeline.js';
 *
 * // commonjs
 * var TimelinePlugin = require('wavesurfer.timeline.js');
 *
 * // if you are using <script> tags
 * var TimelinePlugin = window.WaveSurfer.timeline;
 *
 * // ... initialising wavesurfer with the plugin
 * var wavesurfer = WaveSurfer.create({
 *   // wavesurfer options ...
 *   plugins: [
 *     TimelinePlugin.create({
 *       // plugin options ...
 *     })
 *   ]
 * });
 */
var TimelinePlugin = function () {
    _createClass(TimelinePlugin, null, [{
        key: 'create',

        /**
         * Timeline plugin definition factory
         *
         * This function must be used to create a plugin definition which can be
         * used by wavesurfer to correctly instantiate the plugin.
         *
         * @param  {TimelinePluginParams} params parameters use to initialise the plugin
         * @return {PluginDefinition} an object representing the plugin
         */
        value: function create(params) {
            return {
                name: 'timeline',
                deferInit: params && params.deferInit ? params.deferInit : false,
                params: params,
                instance: TimelinePlugin
            };
        }

        // event handlers
        /** @private */

        /** @private */

        /** @private */

        /** @private */

    }]);

    /**
     * Creates an instance of TimelinePlugin.
     *
     * You probably want to use TimelinePlugin.create()
     *
     * @param {TimelinePluginParams} params Plugin parameters
     * @param {object} ws Wavesurfer instance
     */
    function TimelinePlugin(params, ws) {
        var _this = this;

        _classCallCheck(this, TimelinePlugin);

        _initialiseProps.call(this);

        /** @private */
        this.container = 'string' == typeof params.container ? document.querySelector(params.container) : params.container;

        if (!this.container) {
            throw new Error('No container for wavesurfer timeline');
        }
        /** @private */
        this.wavesurfer = ws;
        /** @private */
        this.util = ws.util;
        /** @private */
        this.params = this.util.extend({}, {
            height: 20,
            notchPercentHeight: 90,
            labelPadding: 5,
            primaryColor: '#000',
            secondaryColor: '#c0c0c0',
            primaryFontColor: '#000',
            secondaryFontColor: '#000',
            fontFamily: 'Arial',
            fontSize: 10,
            zoomDebounce: false,
            formatTimeCallback: function formatTimeCallback(seconds) {
                if (seconds / 60 > 1) {
                    // calculate minutes and seconds from seconds count
                    var minutes = parseInt(seconds / 60, 10);
                    seconds = parseInt(seconds % 60, 10);
                    // fill up seconds with zeroes
                    seconds = seconds < 10 ? '0' + seconds : seconds;
                    return minutes + ':' + seconds;
                }
                return Math.round(seconds * 1000) / 1000;
            },
            timeInterval: function timeInterval(pxPerSec) {
                if (pxPerSec >= 25) {
                    return 1;
                } else if (pxPerSec * 5 >= 25) {
                    return 5;
                } else if (pxPerSec * 15 >= 25) {
                    return 15;
                }
                return Math.ceil(0.5 / pxPerSec) * 60;
            },
            primaryLabelInterval: function primaryLabelInterval(pxPerSec) {
                if (pxPerSec >= 25) {
                    return 10;
                } else if (pxPerSec * 5 >= 25) {
                    return 6;
                } else if (pxPerSec * 15 >= 25) {
                    return 4;
                }
                return 4;
            },
            secondaryLabelInterval: function secondaryLabelInterval(pxPerSec) {
                if (pxPerSec >= 25) {
                    return 5;
                } else if (pxPerSec * 5 >= 25) {
                    return 2;
                } else if (pxPerSec * 15 >= 25) {
                    return 2;
                }
                return 2;
            }
        }, params);

        /** @private */
        this.canvases = [];
        /** @private */
        this.wrapper = null;
        /** @private */
        this.drawer = null;
        /** @private */
        this.pixelRatio = null;
        /** @private */
        this.maxCanvasWidth = null;
        /** @private */
        this.maxCanvasElementWidth = null;
        /**
         * This event handler has to be in the constructor function because it
         * relies on the debounce function which is only available after
         * instantiation
         *
         * Use a debounced function if zoomDebounce is defined
         *
         * @private
         */
        this._onZoom = this.params.zoomDebounce ? this.wavesurfer.util.debounce(function () {
            return _this.render();
        }, this.params.zoomDebounce) : function () {
            return _this.render();
        };
    }

    /**
     * Initialisation function used by the plugin API
     */


    _createClass(TimelinePlugin, [{
        key: 'init',
        value: function init() {
            this.wavesurfer.on('ready', this._onReady);
            // Check if ws is ready
            if (this.wavesurfer.isReady) {
                this._onReady();
            }
        }

        /**
         * Destroy function used by the plugin API
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.unAll();
            this.wavesurfer.un('redraw', this._onRedraw);
            this.wavesurfer.un('zoom', this._onZoom);
            this.wavesurfer.un('ready', this._onReady);
            this.wavesurfer.drawer.wrapper.removeEventListener('scroll', this._onScroll);
            if (this.wrapper && this.wrapper.parentNode) {
                this.wrapper.removeEventListener('click', this._onWrapperClick);
                this.wrapper.parentNode.removeChild(this.wrapper);
                this.wrapper = null;
            }
        }

        /**
         * Create a timeline element to wrap the canvases drawn by this plugin
         *
         * @private
         */

    }, {
        key: 'createWrapper',
        value: function createWrapper() {
            var wsParams = this.wavesurfer.params;
            this.container.innerHTML = '';
            this.wrapper = this.container.appendChild(document.createElement('timeline'));
            this.util.style(this.wrapper, {
                display: 'block',
                position: 'relative',
                userSelect: 'none',
                webkitUserSelect: 'none',
                height: this.params.height + 'px'
            });

            if (wsParams.fillParent || wsParams.scrollParent) {
                this.util.style(this.wrapper, {
                    width: '100%',
                    overflowX: 'hidden',
                    overflowY: 'hidden'
                });
            }

            this.wrapper.addEventListener('click', this._onWrapperClick);
        }

        /**
         * Render the timeline (also updates the already rendered timeline)
         *
         * @private
         */

    }, {
        key: 'render',
        value: function render() {
            if (!this.wrapper) {
                this.createWrapper();
            }
            this.updateCanvases();
            this.updateCanvasesPositioning();
            this.renderCanvases();
        }

        /**
         * Make sure the correct of timeline canvas elements exist and are cached in
         * this.canvases
         *
         * @private
         */

    }, {
        key: 'updateCanvases',
        value: function updateCanvases() {
            var _this2 = this;

            var addCanvas = function addCanvas() {
                var canvas = _this2.wrapper.appendChild(document.createElement('canvas'));
                _this2.canvases.push(canvas);
                _this2.util.style(canvas, {
                    position: 'absolute',
                    zIndex: 4
                });
            };
            var removeCanvas = function removeCanvas() {
                var canvas = _this2.canvases.pop();
                canvas.parentElement.removeChild(canvas);
            };

            var totalWidth = Math.round(this.drawer.wrapper.scrollWidth);
            var requiredCanvases = Math.ceil(totalWidth / this.maxCanvasElementWidth);
            while (this.canvases.length < requiredCanvases) {
                addCanvas();
            }

            while (this.canvases.length > requiredCanvases) {
                removeCanvas();
            }
        }

        /**
         * Update the dimensions and positioning style for all the timeline canvases
         *
         * @private
         */

    }, {
        key: 'updateCanvasesPositioning',
        value: function updateCanvasesPositioning() {
            var _this3 = this;

            // cache length for perf
            var canvasesLength = this.canvases.length;
            this.canvases.forEach(function (canvas, i) {
                // canvas width is the max element width, or if it is the last the
                // required width
                var canvasWidth = i === canvasesLength - 1 ? _this3.drawer.wrapper.scrollWidth - _this3.maxCanvasElementWidth * (canvasesLength - 1) : _this3.maxCanvasElementWidth;
                // set dimensions and style
                canvas.width = canvasWidth * _this3.pixelRatio;
                // on certain pixel ratios the canvas appears cut off at the bottom,
                // therefore leave 1px extra
                canvas.height = (_this3.params.height + 1) * _this3.pixelRatio;
                _this3.util.style(canvas, {
                    width: canvasWidth + 'px',
                    height: _this3.params.height + 'px',
                    left: i * _this3.maxCanvasElementWidth + 'px'
                });
            });
        }

        /**
         * Render the timeline labels and notches
         *
         * @private
         */

    }, {
        key: 'renderCanvases',
        value: function renderCanvases() {
            var _this4 = this;

            var duration = this.wavesurfer.backend.getDuration();
            if (duration <= 0) {
                return;
            }
            var wsParams = this.wavesurfer.params;
            var fontSize = this.params.fontSize * wsParams.pixelRatio;
            var totalSeconds = parseInt(duration, 10) + 1;
            var width = wsParams.fillParent && !wsParams.scrollParent ? this.drawer.getWidth() : this.drawer.wrapper.scrollWidth * wsParams.pixelRatio;
            var height1 = this.params.height * this.pixelRatio;
            var height2 = this.params.height * (this.params.notchPercentHeight / 100) * this.pixelRatio;
            var pixelsPerSecond = width / duration;

            var formatTime = this.params.formatTimeCallback;
            // if parameter is function, call the function with
            // pixelsPerSecond, otherwise simply take the value as-is
            var intervalFnOrVal = function intervalFnOrVal(option) {
                return typeof option === 'function' ? option(pixelsPerSecond) : option;
            };
            var timeInterval = intervalFnOrVal(this.params.timeInterval);
            var primaryLabelInterval = intervalFnOrVal(this.params.primaryLabelInterval);
            var secondaryLabelInterval = intervalFnOrVal(this.params.secondaryLabelInterval);

            var curPixel = 0;
            var curSeconds = 0;
            var i = void 0;
            // build an array of position data with index, second and pixel data,
            // this is then used multiple times below
            var positioning = [];
            for (i = 0; i < totalSeconds / timeInterval; i++) {
                positioning.push([i, curSeconds, curPixel]);
                curSeconds += timeInterval;
                curPixel += pixelsPerSecond * timeInterval;
            }

            // iterate over each position
            var renderPositions = function renderPositions(cb) {
                positioning.forEach(function (pos) {
                    cb(pos[0], pos[1], pos[2]);
                });
            };

            // render primary labels
            this.setFillStyles(this.params.primaryColor);
            this.setFonts(fontSize + 'px ' + this.params.fontFamily);
            this.setFillStyles(this.params.primaryFontColor);
            renderPositions(function (i, curSeconds, curPixel) {
                if (i % primaryLabelInterval === 0) {
                    _this4.fillRect(curPixel, 0, 1, height1);
                    _this4.fillText(formatTime(curSeconds), curPixel + _this4.params.labelPadding * _this4.pixelRatio, height1);
                }
            });

            // render secondary labels
            this.setFillStyles(this.params.secondaryColor);
            this.setFonts(fontSize + 'px ' + this.params.fontFamily);
            this.setFillStyles(this.params.secondaryFontColor);
            renderPositions(function (i, curSeconds, curPixel) {
                if (i % secondaryLabelInterval === 0) {
                    _this4.fillRect(curPixel, 0, 1, height1);
                    _this4.fillText(formatTime(curSeconds), curPixel + _this4.params.labelPadding * _this4.pixelRatio, height1);
                }
            });

            // render the actual notches (when no labels are used)
            this.setFillStyles(this.params.secondaryColor);
            renderPositions(function (i, curSeconds, curPixel) {
                if (i % secondaryLabelInterval !== 0 && i % primaryLabelInterval !== 0) {
                    _this4.fillRect(curPixel, 0, 1, height2);
                }
            });
        }

        /**
         * Set the canvas fill style
         *
         * @param {DOMString|CanvasGradient|CanvasPattern} fillStyle
         * @private
         */

    }, {
        key: 'setFillStyles',
        value: function setFillStyles(fillStyle) {
            this.canvases.forEach(function (canvas) {
                canvas.getContext('2d').fillStyle = fillStyle;
            });
        }

        /**
         * Set the canvas font
         *
         * @param {DOMString} font
         * @private
         */

    }, {
        key: 'setFonts',
        value: function setFonts(font) {
            this.canvases.forEach(function (canvas) {
                canvas.getContext('2d').font = font;
            });
        }

        /**
         * Draw a rectangle on the canvases
         *
         * (it figures out the offset for each canvas)
         *
         * @param {number} x
         * @param {number} y
         * @param {number} width
         * @param {number} height
         * @private
         */

    }, {
        key: 'fillRect',
        value: function fillRect(x, y, width, height) {
            var _this5 = this;

            this.canvases.forEach(function (canvas, i) {
                var leftOffset = i * _this5.maxCanvasWidth;

                var intersection = {
                    x1: Math.max(x, i * _this5.maxCanvasWidth),
                    y1: y,
                    x2: Math.min(x + width, i * _this5.maxCanvasWidth + canvas.width),
                    y2: y + height
                };

                if (intersection.x1 < intersection.x2) {
                    canvas.getContext('2d').fillRect(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1);
                }
            });
        }

        /**
         * Fill a given text on the canvases
         *
         * @param {string} text
         * @param {number} x
         * @param {number} y
         * @private
         */

    }, {
        key: 'fillText',
        value: function fillText(text, x, y) {
            var textWidth = void 0;
            var xOffset = 0;

            this.canvases.forEach(function (canvas) {
                var context = canvas.getContext('2d');
                var canvasWidth = context.canvas.width;

                if (xOffset > x + textWidth) {
                    return;
                }

                if (xOffset + canvasWidth > x) {
                    textWidth = context.measureText(text).width;
                    context.fillText(text, x - xOffset, y);
                }

                xOffset += canvasWidth;
            });
        }
    }]);

    return TimelinePlugin;
}();

var _initialiseProps = function _initialiseProps() {
    var _this6 = this;

    this._onScroll = function () {
        if (_this6.wrapper && _this6.drawer.wrapper) {
            _this6.wrapper.scrollLeft = _this6.drawer.wrapper.scrollLeft;
        }
    };

    this._onRedraw = function () {
        return _this6.render();
    };

    this._onReady = function () {
        var ws = _this6.wavesurfer;
        _this6.drawer = ws.drawer;
        _this6.pixelRatio = ws.drawer.params.pixelRatio;
        _this6.maxCanvasWidth = ws.drawer.maxCanvasWidth || ws.drawer.width;
        _this6.maxCanvasElementWidth = ws.drawer.maxCanvasElementWidth || Math.round(_this6.maxCanvasWidth / _this6.pixelRatio);

        ws.drawer.wrapper.addEventListener('scroll', _this6._onScroll);
        ws.on('redraw', _this6._onRedraw);
        ws.on('zoom', _this6._onZoom);
        _this6.render();
    };

    this._onWrapperClick = function (e) {
        e.preventDefault();
        var relX = 'offsetX' in e ? e.offsetX : e.layerX;
        _this6.fireEvent('click', relX / _this6.wrapper.scrollWidth || 0);
    };
};

exports.default = TimelinePlugin;
module.exports = exports['default'];

/***/ })
/******/ ]);
});
//# sourceMappingURL=wavesurfer.timeline.js.map

/***/ }),

/***/ "./src/js/wavesurfer.js":
/*!******************************!*\
  !*** ./src/js/wavesurfer.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
 * wavesurfer.js 2.0.4 (Thu Mar 01 2018 11:52:42 GMT-0800 (PST))
 * https://github.com/katspaugh/wavesurfer.js
 * @license BSD-3-Clause
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 4);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ajax = __webpack_require__(5);

Object.defineProperty(exports, 'ajax', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_ajax).default;
  }
});

var _getId = __webpack_require__(6);

Object.defineProperty(exports, 'getId', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_getId).default;
  }
});

var _max = __webpack_require__(7);

Object.defineProperty(exports, 'max', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_max).default;
  }
});

var _min = __webpack_require__(8);

Object.defineProperty(exports, 'min', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_min).default;
  }
});

var _observer = __webpack_require__(1);

Object.defineProperty(exports, 'Observer', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_observer).default;
  }
});

var _extend = __webpack_require__(9);

Object.defineProperty(exports, 'extend', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_extend).default;
  }
});

var _style = __webpack_require__(10);

Object.defineProperty(exports, 'style', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_style).default;
  }
});

var _requestAnimationFrame = __webpack_require__(2);

Object.defineProperty(exports, 'requestAnimationFrame', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_requestAnimationFrame).default;
  }
});

var _frame = __webpack_require__(11);

Object.defineProperty(exports, 'frame', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_frame).default;
  }
});

var _debounce = __webpack_require__(12);

Object.defineProperty(exports, 'debounce', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_debounce).default;
  }
});

var _preventClick = __webpack_require__(13);

Object.defineProperty(exports, 'preventClick', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_preventClick).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {Object} ListenerDescriptor
 * @property {string} name The name of the event
 * @property {function} callback The callback
 * @property {function} un The function to call to remove the listener
 */

/**
 * Observer class
 */
var Observer = function () {
    /**
     * Instantiate Observer
     */
    function Observer() {
        _classCallCheck(this, Observer);

        /**
         * @private
         * @todo Initialise the handlers here already and remove the conditional
         * assignment in `on()`
         */
        this.handlers = null;
    }
    /**
     * Attach a handler function for an event.
     *
     * @param {string} event Name of the event to listen to
     * @param {function} fn The callback to trigger when the event is fired
     * @return {ListenerDescriptor}
     */


    _createClass(Observer, [{
        key: "on",
        value: function on(event, fn) {
            var _this = this;

            if (!this.handlers) {
                this.handlers = {};
            }

            var handlers = this.handlers[event];
            if (!handlers) {
                handlers = this.handlers[event] = [];
            }
            handlers.push(fn);

            // Return an event descriptor
            return {
                name: event,
                callback: fn,
                un: function un(e, fn) {
                    return _this.un(e, fn);
                }
            };
        }

        /**
         * Remove an event handler.
         *
         * @param {string} event Name of the event the listener that should be
         * removed listens to
         * @param {function} fn The callback that should be removed
         */

    }, {
        key: "un",
        value: function un(event, fn) {
            if (!this.handlers) {
                return;
            }

            var handlers = this.handlers[event];
            var i = void 0;
            if (handlers) {
                if (fn) {
                    for (i = handlers.length - 1; i >= 0; i--) {
                        if (handlers[i] == fn) {
                            handlers.splice(i, 1);
                        }
                    }
                } else {
                    handlers.length = 0;
                }
            }
        }

        /**
         * Remove all event handlers.
         */

    }, {
        key: "unAll",
        value: function unAll() {
            this.handlers = null;
        }

        /**
         * Attach a handler to an event. The handler is executed at most once per
         * event type.
         *
         * @param {string} event The event to listen to
         * @param {function} handler The callback that is only to be called once
         * @return {ListenerDescriptor}
         */

    }, {
        key: "once",
        value: function once(event, handler) {
            var _this2 = this;

            var fn = function fn() {
                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                    args[_key] = arguments[_key];
                }

                /*  eslint-disable no-invalid-this */
                handler.apply(_this2, args);
                /*  eslint-enable no-invalid-this */
                setTimeout(function () {
                    _this2.un(event, fn);
                }, 0);
            };
            return this.on(event, fn);
        }

        /**
         * Manually fire an event
         *
         * @param {string} event The event to fire manually
         * @param {...any} args The arguments with which to call the listeners
         */

    }, {
        key: "fireEvent",
        value: function fireEvent(event) {
            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                args[_key2 - 1] = arguments[_key2];
            }

            if (!this.handlers) {
                return;
            }
            var handlers = this.handlers[event];
            handlers && handlers.forEach(function (fn) {
                fn.apply(undefined, args);
            });
        }
    }]);

    return Observer;
}();

exports.default = Observer;
module.exports = exports["default"];

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

/**
 * Returns the requestAnimationFrame function for the browser, or a shim with
 * setTimeout if none is found
 *
 * @return {function}
 */
exports.default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {
    return setTimeout(callback, 1000 / 60);
}).bind(window);

module.exports = exports["default"];

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// using consts to prevent someone writing the string wrong
var PLAYING = 'playing';
var PAUSED = 'paused';
var FINISHED = 'finished';

/**
 * WebAudio backend
 *
 * @extends {Observer}
 */

var WebAudio = function (_util$Observer) {
    _inherits(WebAudio, _util$Observer);

    _createClass(WebAudio, [{
        key: 'supportsWebAudio',


        /**
         * Does the browser support this backend
         *
         * @return {boolean}
         */

        /** @private */

        /** @private */
        value: function supportsWebAudio() {
            return !!(window.AudioContext || window.webkitAudioContext);
        }

        /**
         * Get the audio context used by this backend or create one
         *
         * @return {AudioContext}
         */

        /** @private */

        /** @private */

    }, {
        key: 'getAudioContext',
        value: function getAudioContext() {
            if (!window.WaveSurferAudioContext) {
                window.WaveSurferAudioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return window.WaveSurferAudioContext;
        }

        /**
         * Get the offline audio context used by this backend or create one
         *
         * @param {number} sampleRate
         * @return {OfflineAudioContext}
         */

    }, {
        key: 'getOfflineAudioContext',
        value: function getOfflineAudioContext(sampleRate) {
            if (!window.WaveSurferOfflineAudioContext) {
                window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 2, sampleRate);
            }
            return window.WaveSurferOfflineAudioContext;
        }

        /**
         * Construct the backend
         *
         * @param {WavesurferParams} params
         */

    }]);

    function WebAudio(params) {
        var _this$stateBehaviors, _this$states;

        _classCallCheck(this, WebAudio);

        /** @private */
        var _this = _possibleConstructorReturn(this, (WebAudio.__proto__ || Object.getPrototypeOf(WebAudio)).call(this));

        _this.audioContext = null;
        _this.offlineAudioContext = null;
        _this.stateBehaviors = (_this$stateBehaviors = {}, _defineProperty(_this$stateBehaviors, PLAYING, {
            init: function init() {
                this.addOnAudioProcess();
            },
            getPlayedPercents: function getPlayedPercents() {
                var duration = this.getDuration();
                return this.getCurrentTime() / duration || 0;
            },
            getCurrentTime: function getCurrentTime() {
                return this.startPosition + this.getPlayedTime();
            }
        }), _defineProperty(_this$stateBehaviors, PAUSED, {
            init: function init() {
                this.removeOnAudioProcess();
            },
            getPlayedPercents: function getPlayedPercents() {
                var duration = this.getDuration();
                return this.getCurrentTime() / duration || 0;
            },
            getCurrentTime: function getCurrentTime() {
                return this.startPosition;
            }
        }), _defineProperty(_this$stateBehaviors, FINISHED, {
            init: function init() {
                this.removeOnAudioProcess();
                this.fireEvent('finish');
            },
            getPlayedPercents: function getPlayedPercents() {
                return 1;
            },
            getCurrentTime: function getCurrentTime() {
                return this.getDuration();
            }
        }), _this$stateBehaviors);
        _this.params = params;
        /** @private */
        _this.ac = params.audioContext || _this.getAudioContext();
        /**@private */
        _this.lastPlay = _this.ac.currentTime;
        /** @private */
        _this.startPosition = 0;
        /** @private  */
        _this.scheduledPause = null;
        /** @private */
        _this.states = (_this$states = {}, _defineProperty(_this$states, PLAYING, Object.create(_this.stateBehaviors[PLAYING])), _defineProperty(_this$states, PAUSED, Object.create(_this.stateBehaviors[PAUSED])), _defineProperty(_this$states, FINISHED, Object.create(_this.stateBehaviors[FINISHED])), _this$states);
        /** @private */
        _this.analyser = null;
        /** @private */
        _this.buffer = null;
        /** @private */
        _this.filters = [];
        /** @private */
        _this.gainNode = null;
        /** @private */
        _this.mergedPeaks = null;
        /** @private */
        _this.offlineAc = null;
        /** @private */
        _this.peaks = null;
        /** @private */
        _this.playbackRate = 1;
        /** @private */
        _this.analyser = null;
        /** @private */
        _this.scriptNode = null;
        /** @private */
        _this.source = null;
        /** @private */
        _this.splitPeaks = [];
        /** @private */
        _this.state = null;
        /** @private */
        _this.explicitDuration = null;
        return _this;
    }

    /**
     * Initialise the backend, called in `wavesurfer.createBackend()`
     */


    _createClass(WebAudio, [{
        key: 'init',
        value: function init() {
            this.createVolumeNode();
            this.createScriptNode();
            this.createAnalyserNode();

            this.setState(PAUSED);
            this.setPlaybackRate(this.params.audioRate);
            this.setLength(0);
        }

        /** @private */

    }, {
        key: 'disconnectFilters',
        value: function disconnectFilters() {
            if (this.filters) {
                this.filters.forEach(function (filter) {
                    filter && filter.disconnect();
                });
                this.filters = null;
                // Reconnect direct path
                this.analyser.connect(this.gainNode);
            }
        }

        /** @private */

    }, {
        key: 'setState',
        value: function setState(state) {
            if (this.state !== this.states[state]) {
                this.state = this.states[state];
                this.state.init.call(this);
            }
        }

        /**
         * Unpacked `setFilters()`
         *
         * @param {...AudioNode} filters
         */

    }, {
        key: 'setFilter',
        value: function setFilter() {
            for (var _len = arguments.length, filters = Array(_len), _key = 0; _key < _len; _key++) {
                filters[_key] = arguments[_key];
            }

            this.setFilters(filters);
        }

        /**
         * Insert custom Web Audio nodes into the graph
         *
         * @param {AudioNode[]} filters Packed filters array
         * @example
         * const lowpass = wavesurfer.backend.ac.createBiquadFilter();
         * wavesurfer.backend.setFilter(lowpass);
         */

    }, {
        key: 'setFilters',
        value: function setFilters(filters) {
            // Remove existing filters
            this.disconnectFilters();

            // Insert filters if filter array not empty
            if (filters && filters.length) {
                this.filters = filters;

                // Disconnect direct path before inserting filters
                this.analyser.disconnect();

                // Connect each filter in turn
                filters.reduce(function (prev, curr) {
                    prev.connect(curr);
                    return curr;
                }, this.analyser).connect(this.gainNode);
            }
        }

        /** @private */

    }, {
        key: 'createScriptNode',
        value: function createScriptNode() {
            if (this.ac.createScriptProcessor) {
                this.scriptNode = this.ac.createScriptProcessor(WebAudio.scriptBufferSize);
            } else {
                this.scriptNode = this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);
            }

            this.scriptNode.connect(this.ac.destination);
        }

        /** @private */

    }, {
        key: 'addOnAudioProcess',
        value: function addOnAudioProcess() {
            var _this2 = this;

            this.scriptNode.onaudioprocess = function () {
                var time = _this2.getCurrentTime();

                if (time >= _this2.getDuration()) {
                    _this2.setState(FINISHED);
                    _this2.fireEvent('pause');
                } else if (time >= _this2.scheduledPause) {
                    _this2.pause();
                } else if (_this2.state === _this2.states[PLAYING]) {
                    _this2.fireEvent('audioprocess', time);
                }
            };
        }

        /** @private */

    }, {
        key: 'removeOnAudioProcess',
        value: function removeOnAudioProcess() {
            this.scriptNode.onaudioprocess = null;
        }

        /** @private */

    }, {
        key: 'createAnalyserNode',
        value: function createAnalyserNode() {
            this.analyser = this.ac.createAnalyser();
            this.analyser.connect(this.gainNode);
        }

        /**
         * Create the gain node needed to control the playback volume.
         *
         * @private
         */

    }, {
        key: 'createVolumeNode',
        value: function createVolumeNode() {
            // Create gain node using the AudioContext
            if (this.ac.createGain) {
                this.gainNode = this.ac.createGain();
            } else {
                this.gainNode = this.ac.createGainNode();
            }
            // Add the gain node to the graph
            this.gainNode.connect(this.ac.destination);
        }

        /**
         * Set the sink id for the media player
         *
         * @param {string} deviceId String value representing audio device id.
         */

    }, {
        key: 'setSinkId',
        value: function setSinkId(deviceId) {
            if (deviceId) {
                /**
                 * The webaudio api doesn't currently support setting the device
                 * output. Here we create an HTMLAudioElement, connect the
                 * webaudio stream to that element and setSinkId there.
                 */
                var audio = new window.Audio();
                if (!audio.setSinkId) {
                    return Promise.reject(new Error('setSinkId is not supported in your browser'));
                }
                audio.autoplay = true;
                var dest = this.ac.createMediaStreamDestination();
                this.gainNode.disconnect();
                this.gainNode.connect(dest);
                audio.src = URL.createObjectURL(dest.stream);

                return audio.setSinkId(deviceId);
            } else {
                return Promise.reject(new Error('Invalid deviceId: ' + deviceId));
            }
        }

        /**
         * Set the audio volume
         *
         * @param {number} value A floating point value between 0 and 1.
         */

    }, {
        key: 'setVolume',
        value: function setVolume(value) {
            this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);
        }

        /**
         * Get the current volume
         *
         * @return {number} value A floating point value between 0 and 1.
         */

    }, {
        key: 'getVolume',
        value: function getVolume() {
            return this.gainNode.gain.value;
        }

        /** @private */

    }, {
        key: 'decodeArrayBuffer',
        value: function decodeArrayBuffer(arraybuffer, callback, errback) {
            if (!this.offlineAc) {
                this.offlineAc = this.getOfflineAudioContext(this.ac ? this.ac.sampleRate : 44100);
            }
            this.offlineAc.decodeAudioData(arraybuffer, function (data) {
                return callback(data);
            }, errback);
        }

        /**
         * Set pre-decoded peaks
         *
         * @param {number[]|number[][]} peaks
         * @param {?number} duration
         */

    }, {
        key: 'setPeaks',
        value: function setPeaks(peaks, duration) {
            this.explicitDuration = duration;
            this.peaks = peaks;
        }

        /**
         * Set the rendered length (different from the length of the audio).
         *
         * @param {number} length
         */

    }, {
        key: 'setLength',
        value: function setLength(length) {
            // No resize, we can preserve the cached peaks.
            if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {
                return;
            }

            this.splitPeaks = [];
            this.mergedPeaks = [];
            // Set the last element of the sparse array so the peak arrays are
            // appropriately sized for other calculations.
            var channels = this.buffer ? this.buffer.numberOfChannels : 1;
            var c = void 0;
            for (c = 0; c < channels; c++) {
                this.splitPeaks[c] = [];
                this.splitPeaks[c][2 * (length - 1)] = 0;
                this.splitPeaks[c][2 * (length - 1) + 1] = 0;
            }
            this.mergedPeaks[2 * (length - 1)] = 0;
            this.mergedPeaks[2 * (length - 1) + 1] = 0;
        }

        /**
         * Compute the max and min value of the waveform when broken into <length> subranges.
         *
         * @param {number} length How many subranges to break the waveform into.
         * @param {number} first First sample in the required range.
         * @param {number} last Last sample in the required range.
         * @return {number[]|number[][]} Array of 2*<length> peaks or array of arrays of
         * peaks consisting of (max, min) values for each subrange.
         */

    }, {
        key: 'getPeaks',
        value: function getPeaks(length, first, last) {
            if (this.peaks) {
                return this.peaks;
            }

            first = first || 0;
            last = last || length - 1;

            this.setLength(length);

            /**
             * The following snippet fixes a buffering data issue on the Safari
             * browser which returned undefined It creates the missing buffer based
             * on 1 channel, 4096 samples and the sampleRate from the current
             * webaudio context 4096 samples seemed to be the best fit for rendering
             * will review this code once a stable version of Safari TP is out
             */
            if (!this.buffer.length) {
                var newBuffer = this.createBuffer(1, 4096, this.sampleRate);
                this.buffer = newBuffer.buffer;
            }

            var sampleSize = this.buffer.length / length;
            var sampleStep = ~~(sampleSize / 10) || 1;
            var channels = this.buffer.numberOfChannels;
            var c = void 0;

            for (c = 0; c < channels; c++) {
                var peaks = this.splitPeaks[c];
                var chan = this.buffer.getChannelData(c);
                var i = void 0;

                for (i = first; i <= last; i++) {
                    var start = ~~(i * sampleSize);
                    var end = ~~(start + sampleSize);
                    var min = 0;
                    var max = 0;
                    var j = void 0;

                    for (j = start; j < end; j += sampleStep) {
                        var value = chan[j];

                        if (value > max) {
                            max = value;
                        }

                        if (value < min) {
                            min = value;
                        }
                    }

                    peaks[2 * i] = max;
                    peaks[2 * i + 1] = min;

                    if (c == 0 || max > this.mergedPeaks[2 * i]) {
                        this.mergedPeaks[2 * i] = max;
                    }

                    if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {
                        this.mergedPeaks[2 * i + 1] = min;
                    }
                }
            }

            return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;
        }

        /**
         * Get the position from 0 to 1
         *
         * @return {number}
         */

    }, {
        key: 'getPlayedPercents',
        value: function getPlayedPercents() {
            return this.state.getPlayedPercents.call(this);
        }

        /** @private */

    }, {
        key: 'disconnectSource',
        value: function disconnectSource() {
            if (this.source) {
                this.source.disconnect();
            }
        }

        /**
         * This is called when wavesurfer is destroyed
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            if (!this.isPaused()) {
                this.pause();
            }
            this.unAll();
            this.buffer = null;
            this.disconnectFilters();
            this.disconnectSource();
            this.gainNode.disconnect();
            this.scriptNode.disconnect();
            this.analyser.disconnect();

            // close the audioContext if closeAudioContext option is set to true
            if (this.params.closeAudioContext) {
                // check if browser supports AudioContext.close()
                if (typeof this.ac.close === 'function' && this.ac.state != 'closed') {
                    this.ac.close();
                }
                // clear the reference to the audiocontext
                this.ac = null;
                // clear the actual audiocontext, either passed as param or the
                // global singleton
                if (!this.params.audioContext) {
                    window.WaveSurferAudioContext = null;
                } else {
                    this.params.audioContext = null;
                }
                // clear the offlineAudioContext
                window.WaveSurferOfflineAudioContext = null;
            }
        }

        /**
         * Loaded a decoded audio buffer
         *
         * @param {Object} buffer
         */

    }, {
        key: 'load',
        value: function load(buffer) {
            this.startPosition = 0;
            this.lastPlay = this.ac.currentTime;
            this.buffer = buffer;
            this.createSource();
        }

        /** @private */

    }, {
        key: 'createSource',
        value: function createSource() {
            this.disconnectSource();
            this.source = this.ac.createBufferSource();

            // adjust for old browsers
            this.source.start = this.source.start || this.source.noteGrainOn;
            this.source.stop = this.source.stop || this.source.noteOff;

            this.source.playbackRate.setValueAtTime(this.playbackRate, this.ac.currentTime);
            this.source.buffer = this.buffer;
            this.source.connect(this.analyser);
        }

        /**
         * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`
         *
         * @return {boolean}
         */

    }, {
        key: 'isPaused',
        value: function isPaused() {
            return this.state !== this.states[PLAYING];
        }

        /**
         * Used by `wavesurfer.getDuration()`
         *
         * @return {number}
         */

    }, {
        key: 'getDuration',
        value: function getDuration() {
            if (!this.buffer) {
                if (this.explicitDuration) {
                    return this.explicitDuration;
                }
                return 0;
            }
            return this.buffer.duration;
        }

        /**
         * Used by `wavesurfer.seekTo()`
         *
         * @param {number} start Position to start at in seconds
         * @param {number} end Position to end at in seconds
         * @return {{start: number, end: number}}
         */

    }, {
        key: 'seekTo',
        value: function seekTo(start, end) {
            if (!this.buffer) {
                return;
            }

            this.scheduledPause = null;

            if (start == null) {
                start = this.getCurrentTime();
                if (start >= this.getDuration()) {
                    start = 0;
                }
            }
            if (end == null) {
                end = this.getDuration();
            }

            this.startPosition = start;
            this.lastPlay = this.ac.currentTime;

            if (this.state === this.states[FINISHED]) {
                this.setState(PAUSED);
            }

            return {
                start: start,
                end: end
            };
        }

        /**
         * Get the playback position in seconds
         *
         * @return {number}
         */

    }, {
        key: 'getPlayedTime',
        value: function getPlayedTime() {
            return (this.ac.currentTime - this.lastPlay) * this.playbackRate;
        }

        /**
         * Plays the loaded audio region.
         *
         * @param {number} start Start offset in seconds, relative to the beginning
         * of a clip.
         * @param {number} end When to stop relative to the beginning of a clip.
         */

    }, {
        key: 'play',
        value: function play(start, end) {
            if (!this.buffer) {
                return;
            }

            // need to re-create source on each playback
            this.createSource();

            var adjustedTime = this.seekTo(start, end);

            start = adjustedTime.start;
            end = adjustedTime.end;

            this.scheduledPause = end;

            this.source.start(0, start, end - start);

            if (this.ac.state == 'suspended') {
                this.ac.resume && this.ac.resume();
            }

            this.setState(PLAYING);

            this.fireEvent('play');
        }

        /**
         * Pauses the loaded audio.
         */

    }, {
        key: 'pause',
        value: function pause() {
            this.scheduledPause = null;

            this.startPosition += this.getPlayedTime();
            this.source && this.source.stop(0);

            this.setState(PAUSED);

            this.fireEvent('pause');
        }

        /**
         * Returns the current time in seconds relative to the audioclip's
         * duration.
         *
         * @return {number}
         */

    }, {
        key: 'getCurrentTime',
        value: function getCurrentTime() {
            return this.state.getCurrentTime.call(this);
        }

        /**
         * Returns the current playback rate. (0=no playback, 1=normal playback)
         *
         * @return {number}
         */

    }, {
        key: 'getPlaybackRate',
        value: function getPlaybackRate() {
            return this.playbackRate;
        }

        /**
         * Set the audio source playback rate.
         *
         * @param {number} value
         */

    }, {
        key: 'setPlaybackRate',
        value: function setPlaybackRate(value) {
            value = value || 1;
            if (this.isPaused()) {
                this.playbackRate = value;
            } else {
                this.pause();
                this.playbackRate = value;
                this.play();
            }
        }
    }]);

    return WebAudio;
}(util.Observer);

WebAudio.scriptBufferSize = 256;
exports.default = WebAudio;
module.exports = exports['default'];

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

var _drawer = __webpack_require__(14);

var _drawer2 = _interopRequireDefault(_drawer);

var _webaudio = __webpack_require__(3);

var _webaudio2 = _interopRequireDefault(_webaudio);

var _mediaelement = __webpack_require__(16);

var _mediaelement2 = _interopRequireDefault(_mediaelement);

var _peakcache = __webpack_require__(17);

var _peakcache2 = _interopRequireDefault(_peakcache);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/*
 * This work is licensed under a BSD-3-Clause License.
 */

/** @external {HTMLElement} https://developer.mozilla.org/en/docs/Web/API/HTMLElement */
/** @external {OfflineAudioContext} https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext */
/** @external {File} https://developer.mozilla.org/en-US/docs/Web/API/File */
/** @external {Blob} https://developer.mozilla.org/en-US/docs/Web/API/Blob */
/** @external {CanvasRenderingContext2D} https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D */
/** @external {MediaStreamConstraints} https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints */
/** @external {AudioNode} https://developer.mozilla.org/de/docs/Web/API/AudioNode */

/**
 * @typedef {Object} WavesurferParams
 * @property {AudioContext} audioContext=null Use your own previously
 * initialized AudioContext or leave blank.
 * @property {number} audioRate=1 Speed at which to play audio. Lower number is
 * slower.
 * @property {boolean} autoCenter=true If a scrollbar is present, center the
 * waveform around the progress
 * @property {string} backend='WebAudio' `'WebAudio'|'MediaElement'` In most cases
 * you don't have to set this manually. MediaElement is a fallback for
 * unsupported browsers.
 * @property {number} barHeight=1 The height of the wave
 * @property {number} barGap=null The optional spacing between bars of the wave,
 * if not provided will be calculated in legacy format.
 * @property {boolean} closeAudioContext=false Close and nullify all audio
 * contexts when the destroy method is called.
 * @property {!string|HTMLElement} container CSS selector or HTML element where
 * the waveform should be drawn. This is the only required parameter.
 * @property {string} cursorColor='#333' The fill color of the cursor indicating
 * the playhead position.
 * @property {number} cursorWidth=1 Measured in pixels.
 * @property {boolean} fillParent=true Whether to fill the entire container or
 * draw only according to `minPxPerSec`.
 * @property {boolean} forceDecode=false Force decoding of audio using web audio
 * when zooming to get a more detailed waveform.
 * @property {number} height=128 The height of the waveform. Measured in
 * pixels.
 * @property {boolean} hideScrollbar=false Whether to hide the horizontal
 * scrollbar when one would normally be shown.
 * @property {boolean} interact=true Whether the mouse interaction will be
 * enabled at initialization. You can switch this parameter at any time later
 * on.
 * @property {boolean} loopSelection=true (Use with regions plugin) Enable
 * looping of selected regions
 * @property {number} maxCanvasWidth=4000 Maximum width of a single canvas in
 * pixels, excluding a small overlap (2 * `pixelRatio`, rounded up to the next
 * even integer). If the waveform is longer than this value, additional canvases
 * will be used to render the waveform, which is useful for very large waveforms
 * that may be too wide for browsers to draw on a single canvas.
 * @property {boolean} mediaControls=false (Use with backend `MediaElement`)
 * this enables the native controls for the media element
 * @property {string} mediaType='audio' (Use with backend `MediaElement`)
 * `'audio'|'video'`
 * @property {number} minPxPerSec=20 Minimum number of pixels per second of
 * audio.
 * @property {boolean} normalize=false If true, normalize by the maximum peak
 * instead of 1.0.
 * @property {boolean} partialRender=false Use the PeakCache to improve
 * rendering speed of large waveforms
 * @property {number} pixelRatio=window.devicePixelRatio The pixel ratio used to
 * calculate display
 * @property {PluginDefinition[]} plugins=[] An array of plugin definitions to
 * register during instantiation, they will be directly initialised unless they
 * are added with the `deferInit` property set to true.
 * @property {string} progressColor='#555' The fill color of the part of the
 * waveform behind the cursor.
 * @property {boolean} removeMediaElementOnDestroy=true Set to false to keep the
 * media element in the DOM when the player is destroyed. This is useful when
 * reusing an existing media element via the `loadMediaElement` method.
 * @property {Object} renderer=MultiCanvas Can be used to inject a custom
 * renderer.
 * @property {boolean|number} responsive=false If set to `true` resize the
 * waveform, when the window is resized. This is debounced with a `100ms`
 * timeout by default. If this parameter is a number it represents that timeout.
 * @property {boolean} scrollParent=false Whether to scroll the container with a
 * lengthy waveform. Otherwise the waveform is shrunk to the container width
 * (see fillParent).
 * @property {number} skipLength=2 Number of seconds to skip with the
 * skipForward() and skipBackward() methods.
 * @property {boolean} splitChannels=false Render with seperate waveforms for
 * the channels of the audio
 * @property {string} waveColor='#999' The fill color of the waveform after the
 * cursor.
 * @property {object} xhr={} XHR options.
 */

/**
 * @typedef {Object} PluginDefinition
 * @desc The Object used to describe a plugin
 * @example wavesurfer.addPlugin(pluginDefinition);
 * @property {string} name The name of the plugin, the plugin instance will be
 * added as a property to the wavesurfer instance under this name
 * @property {?Object} staticProps The properties that should be added to the
 * wavesurfer instance as static properties
 * @property {?boolean} deferInit Don't initialise plugin
 * automatically
 * @property {Object} params={} The plugin parameters, they are the first parameter
 * passed to the plugin class constructor function
 * @property {PluginClass} instance The plugin instance factory, is called with
 * the dependency specified in extends. Returns the plugin class.
 */

/**
 * @interface PluginClass
 *
 * @desc This is the interface which is implemented by all plugin classes. Note
 * that this only turns into an observer after being passed through
 * `wavesurfer.addPlugin`.
 *
 * @extends {Observer}
 */
var PluginClass = function () {
    _createClass(PluginClass, [{
        key: 'create',

        /**
         * Plugin definition factory
         *
         * This function must be used to create a plugin definition which can be
         * used by wavesurfer to correctly instantiate the plugin.
         *
         * @param  {Object} params={} The plugin params (specific to the plugin)
         * @return {PluginDefinition} an object representing the plugin
         */
        value: function create(params) {}
        /**
         * Construct the plugin
         *
         * @param {Object} ws The wavesurfer instance
         * @param {Object} params={} The plugin params (specific to the plugin)
         */

    }]);

    function PluginClass(ws, params) {
        _classCallCheck(this, PluginClass);
    }
    /**
     * Initialise the plugin
     *
     * Start doing something. This is called by
     * `wavesurfer.initPlugin(pluginName)`
     */


    _createClass(PluginClass, [{
        key: 'init',
        value: function init() {}
        /**
         * Destroy the plugin instance
         *
         * Stop doing something. This is called by
         * `wavesurfer.destroyPlugin(pluginName)`
         */

    }, {
        key: 'destroy',
        value: function destroy() {}
    }]);

    return PluginClass;
}();

/**
 * WaveSurfer core library class
 *
 * @extends {Observer}
 * @example
 * const params = {
 *   container: '#waveform',
 *   waveColor: 'violet',
 *   progressColor: 'purple'
 * };
 *
 * // initialise like this
 * const wavesurfer = WaveSurfer.create(params);
 *
 * // or like this ...
 * const wavesurfer = new WaveSurfer(params);
 * wavesurfer.init();
 *
 * // load audio file
 * wavesurfer.load('example/media/demo.wav');
 */


var WaveSurfer = function (_util$Observer) {
    _inherits(WaveSurfer, _util$Observer);

    _createClass(WaveSurfer, null, [{
        key: 'create',


        /**
         * Instantiate this class, call its `init` function and returns it
         *
         * @param {WavesurferParams} params
         * @return {Object} WaveSurfer instance
         * @example const wavesurfer = WaveSurfer.create(params);
         */

        /** @private */
        value: function create(params) {
            var wavesurfer = new WaveSurfer(params);
            return wavesurfer.init();
        }

        /**
         * Functions in the `util` property are available as a prototype property to
         * all instances
         *
         * @type {Object}
         * @example
         * const wavesurfer = WaveSurfer.create(params);
         * wavesurfer.util.style(myElement, { background: 'blue' });
         */


        /** @private */


        /**
         * Functions in the `util` property are available as a static property of the
         * WaveSurfer class
         *
         * @type {Object}
         * @example
         * WaveSurfer.util.style(myElement, { background: 'blue' });
         */

    }]);

    /**
     * Initialise wavesurfer instance
     *
     * @param {WavesurferParams} params Instantiation options for wavesurfer
     * @example
     * const wavesurfer = new WaveSurfer(params);
     * @returns {this}
     */
    function WaveSurfer(params) {
        var _ret;

        _classCallCheck(this, WaveSurfer);

        /**
         * Extract relevant parameters (or defaults)
         * @private
         */
        var _this = _possibleConstructorReturn(this, (WaveSurfer.__proto__ || Object.getPrototypeOf(WaveSurfer)).call(this));

        _this.defaultParams = {
            audioContext: null,
            audioRate: 1,
            autoCenter: true,
            backend: 'WebAudio',
            barHeight: 1,
            barGap: null,
            container: null,
            cursorColor: '#333',
            cursorWidth: 1,
            dragSelection: true,
            fillParent: true,
            forceDecode: false,
            height: 128,
            hideScrollbar: false,
            interact: true,
            loopSelection: true,
            maxCanvasWidth: 4000,
            mediaContainer: null,
            mediaControls: false,
            mediaType: 'audio',
            minPxPerSec: 20,
            normalize: false,
            partialRender: false,
            pixelRatio: window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,
            plugins: [],
            progressColor: '#555',
            removeMediaElementOnDestroy: true,
            renderer: _drawer2.default,
            responsive: false,
            scrollParent: false,
            skipLength: 2,
            splitChannels: false,
            waveColor: '#999',
            xhr: {}
        };
        _this.backends = {
            MediaElement: _mediaelement2.default,
            WebAudio: _webaudio2.default
        };
        _this.util = util;
        _this.params = util.extend({}, _this.defaultParams, params);

        /** @private */
        _this.container = 'string' == typeof params.container ? document.querySelector(_this.params.container) : _this.params.container;

        if (!_this.container) {
            throw new Error('Container element not found');
        }

        if (_this.params.mediaContainer == null) {
            /** @private */
            _this.mediaContainer = _this.container;
        } else if (typeof _this.params.mediaContainer == 'string') {
            /** @private */
            _this.mediaContainer = document.querySelector(_this.params.mediaContainer);
        } else {
            /** @private */
            _this.mediaContainer = _this.params.mediaContainer;
        }

        if (!_this.mediaContainer) {
            throw new Error('Media Container element not found');
        }

        if (_this.params.maxCanvasWidth <= 1) {
            throw new Error('maxCanvasWidth must be greater than 1');
        } else if (_this.params.maxCanvasWidth % 2 == 1) {
            throw new Error('maxCanvasWidth must be an even number');
        }

        /**
         * @private Used to save the current volume when muting so we can
         * restore once unmuted
         * @type {number}
         */
        _this.savedVolume = 0;

        /**
         * @private The current muted state
         * @type {boolean}
         */
        _this.isMuted = false;

        /**
         * @private Will hold a list of event descriptors that need to be
         * cancelled on subsequent loads of audio
         * @type {Object[]}
         */
        _this.tmpEvents = [];

        /**
         * @private Holds any running audio downloads
         * @type {Observer}
         */
        _this.currentAjax = null;
        /** @private */
        _this.arraybuffer = null;
        /** @private */
        _this.drawer = null;
        /** @private */
        _this.backend = null;
        /** @private */
        _this.peakCache = null;

        // cache constructor objects
        if (typeof _this.params.renderer !== 'function') {
            throw new Error('Renderer parameter is invalid');
        }
        /**
         * @private The uninitialised Drawer class
         */
        _this.Drawer = _this.params.renderer;
        /**
         * @private The uninitialised Backend class
         */
        _this.Backend = _this.backends[_this.params.backend];

        /**
         * @private map of plugin names that are currently initialised
         */
        _this.initialisedPluginList = {};
        /** @private */
        _this.isDestroyed = false;
        /** @private */
        _this.isReady = false;

        // responsive debounced event listener. If this.params.responsive is not
        // set, this is never called. Use 100ms or this.params.responsive as
        // timeout for the debounce function.
        var prevWidth = 0;
        _this._onResize = util.debounce(function () {
            if (prevWidth != _this.drawer.wrapper.clientWidth && !_this.params.scrollParent) {
                prevWidth = _this.drawer.wrapper.clientWidth;
                _this.drawer.fireEvent('redraw');
            }
        }, typeof _this.params.responsive === 'number' ? _this.params.responsive : 100);

        return _ret = _this, _possibleConstructorReturn(_this, _ret);
    }

    /**
     * Initialise the wave
     *
     * @example
     * var wavesurfer = new WaveSurfer(params);
     * wavesurfer.init();
     * @return {this}
     */


    _createClass(WaveSurfer, [{
        key: 'init',
        value: function init() {
            this.registerPlugins(this.params.plugins);
            this.createDrawer();
            this.createBackend();
            this.createPeakCache();
            return this;
        }

        /**
         * Add and initialise array of plugins (if `plugin.deferInit` is falsey),
         * this function is called in the init function of wavesurfer
         *
         * @param {PluginDefinition[]} plugins An array of plugin definitions
         * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions
         * @return {this}
         */

    }, {
        key: 'registerPlugins',
        value: function registerPlugins(plugins) {
            var _this2 = this;

            // first instantiate all the plugins
            plugins.forEach(function (plugin) {
                return _this2.addPlugin(plugin);
            });

            // now run the init functions
            plugins.forEach(function (plugin) {
                // call init function of the plugin if deferInit is falsey
                // in that case you would manually use initPlugins()
                if (!plugin.deferInit) {
                    _this2.initPlugin(plugin.name);
                }
            });
            this.fireEvent('plugins-registered', plugins);
            return this;
        }

        /**
         * Add a plugin object to wavesurfer
         *
         * @param {PluginDefinition} plugin A plugin definition
         * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added
         * @example wavesurfer.addPlugin(WaveSurfer.minimap());
         * @return {this}
         */

    }, {
        key: 'addPlugin',
        value: function addPlugin(plugin) {
            var _this3 = this;

            if (!plugin.name) {
                throw new Error('Plugin does not have a name!');
            }
            if (!plugin.instance) {
                throw new Error('Plugin ' + plugin.name + ' does not have an instance property!');
            }

            // staticProps properties are applied to wavesurfer instance
            if (plugin.staticProps) {
                Object.keys(plugin.staticProps).forEach(function (pluginStaticProp) {
                    /**
                     * Properties defined in a plugin definition's `staticProps` property are added as
                     * staticProps properties of the WaveSurfer instance
                     */
                    _this3[pluginStaticProp] = plugin.staticProps[pluginStaticProp];
                });
            }

            var Instance = plugin.instance;

            // turn the plugin instance into an observer
            var observerPrototypeKeys = Object.getOwnPropertyNames(util.Observer.prototype);
            observerPrototypeKeys.forEach(function (key) {
                Instance.prototype[key] = util.Observer.prototype[key];
            });

            /**
             * Instantiated plugin classes are added as a property of the wavesurfer
             * instance
             * @type {Object}
             */
            this[plugin.name] = new Instance(plugin.params || {}, this);
            this.fireEvent('plugin-added', plugin.name);
            return this;
        }

        /**
         * Initialise a plugin
         *
         * @param {string} name A plugin name
         * @emits WaveSurfer#plugin-initialised
         * @example wavesurfer.initPlugin('minimap');
         * @return {this}
         */

    }, {
        key: 'initPlugin',
        value: function initPlugin(name) {
            if (!this[name]) {
                throw new Error('Plugin ' + name + ' has not been added yet!');
            }
            if (this.initialisedPluginList[name]) {
                // destroy any already initialised plugins
                this.destroyPlugin(name);
            }
            this[name].init();
            this.initialisedPluginList[name] = true;
            this.fireEvent('plugin-initialised', name);
            return this;
        }

        /**
         * Destroy a plugin
         *
         * @param {string} name A plugin name
         * @emits WaveSurfer#plugin-destroyed
         * @example wavesurfer.destroyPlugin('minimap');
         * @returns {this}
         */

    }, {
        key: 'destroyPlugin',
        value: function destroyPlugin(name) {
            if (!this[name]) {
                throw new Error('Plugin ' + name + ' has not been added yet and cannot be destroyed!');
            }
            if (!this.initialisedPluginList[name]) {
                throw new Error('Plugin ' + name + ' is not active and cannot be destroyed!');
            }
            if (typeof this[name].destroy !== 'function') {
                throw new Error('Plugin ' + name + ' does not have a destroy function!');
            }

            this[name].destroy();
            delete this.initialisedPluginList[name];
            this.fireEvent('plugin-destroyed', name);
            return this;
        }

        /**
         * Destroy all initialised plugins. Convenience function to use when
         * wavesurfer is removed
         *
         * @private
         */

    }, {
        key: 'destroyAllPlugins',
        value: function destroyAllPlugins() {
            var _this4 = this;

            Object.keys(this.initialisedPluginList).forEach(function (name) {
                return _this4.destroyPlugin(name);
            });
        }

        /**
         * Create the drawer and draw the waveform
         *
         * @private
         * @emits WaveSurfer#drawer-created
         */

    }, {
        key: 'createDrawer',
        value: function createDrawer() {
            var _this5 = this;

            this.drawer = new this.Drawer(this.container, this.params);
            this.drawer.init();
            this.fireEvent('drawer-created', this.drawer);

            if (this.params.responsive !== false) {
                window.addEventListener('resize', this._onResize, true);
                window.addEventListener('orientationchange', this._onResize, true);
            }

            this.drawer.on('redraw', function () {
                _this5.drawBuffer();
                _this5.drawer.progress(_this5.backend.getPlayedPercents());
            });

            // Click-to-seek
            this.drawer.on('click', function (e, progress) {
                setTimeout(function () {
                    return _this5.seekTo(progress);
                }, 0);
            });

            // Relay the scroll event from the drawer
            this.drawer.on('scroll', function (e) {
                if (_this5.params.partialRender) {
                    _this5.drawBuffer();
                }
                _this5.fireEvent('scroll', e);
            });
        }

        /**
         * Create the backend
         *
         * @private
         * @emits WaveSurfer#backend-created
         */

    }, {
        key: 'createBackend',
        value: function createBackend() {
            var _this6 = this;

            if (this.backend) {
                this.backend.destroy();
            }

            // Back compat
            if (this.params.backend == 'AudioElement') {
                this.params.backend = 'MediaElement';
            }

            if (this.params.backend == 'WebAudio' && !this.Backend.prototype.supportsWebAudio.call(null)) {
                this.params.backend = 'MediaElement';
            }

            this.backend = new this.Backend(this.params);
            this.backend.init();
            this.fireEvent('backend-created', this.backend);

            this.backend.on('finish', function () {
                return _this6.fireEvent('finish');
            });
            this.backend.on('play', function () {
                return _this6.fireEvent('play');
            });
            this.backend.on('pause', function () {
                return _this6.fireEvent('pause');
            });

            this.backend.on('audioprocess', function (time) {
                _this6.drawer.progress(_this6.backend.getPlayedPercents());
                _this6.fireEvent('audioprocess', time);
            });
        }

        /**
         * Create the peak cache
         *
         * @private
         */

    }, {
        key: 'createPeakCache',
        value: function createPeakCache() {
            if (this.params.partialRender) {
                this.peakCache = new _peakcache2.default();
            }
        }

        /**
         * Get the duration of the audio clip
         *
         * @example const duration = wavesurfer.getDuration();
         * @return {number} Duration in seconds
         */

    }, {
        key: 'getDuration',
        value: function getDuration() {
            return this.backend.getDuration();
        }

        /**
         * Get the current playback position
         *
         * @example const currentTime = wavesurfer.getCurrentTime();
         * @return {number} Playback position in seconds
         */

    }, {
        key: 'getCurrentTime',
        value: function getCurrentTime() {
            return this.backend.getCurrentTime();
        }

        /**
         * Set the current play time in seconds.
         *
         * @param {number} seconds A positive number in seconds. E.g. 10 means 10
         * seconds, 60 means 1 minute
         */

    }, {
        key: 'setCurrentTime',
        value: function setCurrentTime(seconds) {
            if (seconds >= this.getDuration()) {
                this.seekTo(1);
            } else {
                this.seekTo(seconds / this.getDuration());
            }
        }

        /**
         * Starts playback from the current position. Optional start and end
         * measured in seconds can be used to set the range of audio to play.
         *
         * @param {?number} start Position to start at
         * @param {?number} end Position to end at
         * @emits WaveSurfer#interaction
         * @return {Promise}
         * @example
         * // play from second 1 to 5
         * wavesurfer.play(1, 5);
         */

    }, {
        key: 'play',
        value: function play(start, end) {
            var _this7 = this;

            this.fireEvent('interaction', function () {
                return _this7.play(start, end);
            });
            return this.backend.play(start, end);
        }

        /**
         * Stops playback
         *
         * @example wavesurfer.pause();
         * @return {Promise}
         */

    }, {
        key: 'pause',
        value: function pause() {
            if (!this.backend.isPaused()) {
                return this.backend.pause();
            }
        }

        /**
         * Toggle playback
         *
         * @example wavesurfer.playPause();
         * @return {Promise}
         */

    }, {
        key: 'playPause',
        value: function playPause() {
            return this.backend.isPaused() ? this.play() : this.pause();
        }

        /**
         * Get the current playback state
         *
         * @example const isPlaying = wavesurfer.isPlaying();
         * @return {boolean} False if paused, true if playing
         */

    }, {
        key: 'isPlaying',
        value: function isPlaying() {
            return !this.backend.isPaused();
        }

        /**
         * Skip backward
         *
         * @param {?number} seconds Amount to skip back, if not specified `skipLength`
         * is used
         * @example wavesurfer.skipBackward();
         */

    }, {
        key: 'skipBackward',
        value: function skipBackward(seconds) {
            this.skip(-seconds || -this.params.skipLength);
        }

        /**
         * Skip forward
         *
         * @param {?number} seconds Amount to skip back, if not specified `skipLength`
         * is used
         * @example wavesurfer.skipForward();
         */

    }, {
        key: 'skipForward',
        value: function skipForward(seconds) {
            this.skip(seconds || this.params.skipLength);
        }

        /**
         * Skip a number of seconds from the current position (use a negative value
         * to go backwards).
         *
         * @param {number} offset Amount to skip back or forwards
         * @example
         * // go back 2 seconds
         * wavesurfer.skip(-2);
         */

    }, {
        key: 'skip',
        value: function skip(offset) {
            var duration = this.getDuration() || 1;
            var position = this.getCurrentTime() || 0;
            position = Math.max(0, Math.min(duration, position + (offset || 0)));
            this.seekAndCenter(position / duration);
        }

        /**
         * Seeks to a position and centers the view
         *
         * @param {number} progress Between 0 (=beginning) and 1 (=end)
         * @example
         * // seek and go to the middle of the audio
         * wavesurfer.seekTo(0.5);
         */

    }, {
        key: 'seekAndCenter',
        value: function seekAndCenter(progress) {
            this.seekTo(progress);
            this.drawer.recenter(progress);
        }

        /**
         * Seeks to a position
         *
         * @param {number} progress Between 0 (=beginning) and 1 (=end)
         * @emits WaveSurfer#interaction
         * @emits WaveSurfer#seek
         * @example
         * // seek to the middle of the audio
         * wavesurfer.seekTo(0.5);
         */

    }, {
        key: 'seekTo',
        value: function seekTo(progress) {
            var _this8 = this;

            // return an error if progress is not a number between 0 and 1
            if (typeof progress !== 'number' || !isFinite(progress) || progress < 0 || progress > 1) {
                return console.error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');
            }
            this.fireEvent('interaction', function () {
                return _this8.seekTo(progress);
            });

            var paused = this.backend.isPaused();
            // avoid draw wrong position while playing backward seeking
            if (!paused) {
                this.backend.pause();
            }
            // avoid small scrolls while paused seeking
            var oldScrollParent = this.params.scrollParent;
            this.params.scrollParent = false;
            this.backend.seekTo(progress * this.getDuration());
            this.drawer.progress(progress);

            if (!paused) {
                this.backend.play();
            }
            this.params.scrollParent = oldScrollParent;
            this.fireEvent('seek', progress);
        }

        /**
         * Stops and goes to the beginning.
         *
         * @example wavesurfer.stop();
         */

    }, {
        key: 'stop',
        value: function stop() {
            this.pause();
            this.seekTo(0);
            this.drawer.progress(0);
        }

        /**
         * Set the playback volume.
         *
         * @param {string} deviceId String value representing underlying output device
         */

    }, {
        key: 'setSinkId',
        value: function setSinkId(deviceId) {
            return this.backend.setSinkId(deviceId);
        }

        /**
         * Set the playback volume.
         *
         * @param {number} newVolume A value between 0 and 1, 0 being no
         * volume and 1 being full volume.
         */

    }, {
        key: 'setVolume',
        value: function setVolume(newVolume) {
            this.backend.setVolume(newVolume);
        }

        /**
         * Get the playback volume.
         *
         * @return {number} A value between 0 and 1, 0 being no
         * volume and 1 being full volume.
         */

    }, {
        key: 'getVolume',
        value: function getVolume() {
            return this.backend.getVolume();
        }

        /**
         * Set the playback rate.
         *
         * @param {number} rate A positive number. E.g. 0.5 means half the normal
         * speed, 2 means double speed and so on.
         * @example wavesurfer.setPlaybackRate(2);
         */

    }, {
        key: 'setPlaybackRate',
        value: function setPlaybackRate(rate) {
            this.backend.setPlaybackRate(rate);
        }

        /**
         * Get the playback rate.
         *
         * @return {number}
         */

    }, {
        key: 'getPlaybackRate',
        value: function getPlaybackRate() {
            return this.backend.getPlaybackRate();
        }

        /**
         * Toggle the volume on and off. It not currenly muted it will save the
         * current volume value and turn the volume off. If currently muted then it
         * will restore the volume to the saved value, and then rest the saved
         * value.
         *
         * @example wavesurfer.toggleMute();
         */

    }, {
        key: 'toggleMute',
        value: function toggleMute() {
            this.setMute(!this.isMuted);
        }

        /**
         * Enable or disable muted audio
         *
         * @param {boolean} mute
         * @example
         * // unmute
         * wavesurfer.setMute(false);
         */

    }, {
        key: 'setMute',
        value: function setMute(mute) {
            // ignore all muting requests if the audio is already in that state
            if (mute === this.isMuted) {
                return;
            }

            if (mute) {
                // If currently not muted then save current volume,
                // turn off the volume and update the mute properties
                this.savedVolume = this.backend.getVolume();
                this.backend.setVolume(0);
                this.isMuted = true;
            } else {
                // If currently muted then restore to the saved volume
                // and update the mute properties
                this.backend.setVolume(this.savedVolume);
                this.isMuted = false;
            }
        }

        /**
         * Get the current mute status.
         *
         * @example const isMuted = wavesurfer.getMute();
         * @return {boolean}
         */

    }, {
        key: 'getMute',
        value: function getMute() {
            return this.isMuted;
        }

        /**
         * Get the current ready status.
         *
         * @example const isReady = wavesurfer.isReady();
         * @return {boolean}
         */

    }, {
        key: 'isReady',
        value: function isReady() {
            return this.isReady;
        }

        /**
         * Get the list of current set filters as an array.
         *
         * Filters must be set with setFilters method first
         *
         * @return {array}
         */

    }, {
        key: 'getFilters',
        value: function getFilters() {
            return this.backend.filters || [];
        }

        /**
         * Toggles `scrollParent` and redraws
         *
         * @example wavesurfer.toggleScroll();
         */

    }, {
        key: 'toggleScroll',
        value: function toggleScroll() {
            this.params.scrollParent = !this.params.scrollParent;
            this.drawBuffer();
        }

        /**
         * Toggle mouse interaction
         *
         * @example wavesurfer.toggleInteraction();
         */

    }, {
        key: 'toggleInteraction',
        value: function toggleInteraction() {
            this.params.interact = !this.params.interact;
        }

        /**
         * Get the fill color of the waveform after the cursor.
         *
         * @return {string} A CSS color string.
         */

    }, {
        key: 'getWaveColor',
        value: function getWaveColor() {
            return this.params.waveColor;
        }

        /**
         * Set the fill color of the waveform after the cursor.
         *
         * @param {string} color A CSS color string.
         * @example wavesurfer.setWaveColor('#ddd');
         */

    }, {
        key: 'setWaveColor',
        value: function setWaveColor(color) {
            this.params.waveColor = color;
            this.drawBuffer();
        }

        /**
         * Get the fill color of the waveform behind the cursor.
         *
         * @return {string} A CSS color string.
         */

    }, {
        key: 'getProgressColor',
        value: function getProgressColor() {
            return this.params.progressColor;
        }

        /**
         * Set the fill color of the waveform behind the cursor.
         *
         * @param {string} color A CSS color string.
         * @example wavesurfer.setProgressColor('#400');
         */

    }, {
        key: 'setProgressColor',
        value: function setProgressColor(color) {
            this.params.progressColor = color;
            this.drawBuffer();
        }

        /**
         * Get the fill color of the cursor indicating the playhead
         * position.
         *
         * @return {string} A CSS color string.
         */

    }, {
        key: 'getCursorColor',
        value: function getCursorColor() {
            return this.params.cursorColor;
        }

        /**
         * Set the fill color of the cursor indicating the playhead
         * position.
         *
         * @param {string} color A CSS color string.
         * @example wavesurfer.setCursorColor('#222');
         */

    }, {
        key: 'setCursorColor',
        value: function setCursorColor(color) {
            this.params.cursorColor = color;
            this.drawer.updateCursor();
        }

        /**
         * Get the height of the waveform.
         *
         * @return {number} Height measured in pixels.
         */

    }, {
        key: 'getHeight',
        value: function getHeight() {
            return this.params.height;
        }

        /**
         * Set the height of the waveform.
         *
         * @param {number} height Height measured in pixels.
         * @example wavesurfer.setHeight(200);
         */

    }, {
        key: 'setHeight',
        value: function setHeight(height) {
            this.params.height = height;
            this.drawer.setHeight(height * this.params.pixelRatio);
            this.drawBuffer();
        }

        /**
         * Get the correct peaks for current wave viewport and render wave
         *
         * @private
         * @emits WaveSurfer#redraw
         */

    }, {
        key: 'drawBuffer',
        value: function drawBuffer() {
            var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec * this.params.pixelRatio);
            var parentWidth = this.drawer.getWidth();
            var width = nominalWidth;
            var start = this.drawer.getScrollX();
            var end = Math.max(start + parentWidth, width);
            // Fill container
            if (this.params.fillParent && (!this.params.scrollParent || nominalWidth < parentWidth)) {
                width = parentWidth;
                start = 0;
                end = width;
            }

            var peaks = void 0;
            if (this.params.partialRender) {
                var newRanges = this.peakCache.addRangeToPeakCache(width, start, end);
                var i = void 0;
                for (i = 0; i < newRanges.length; i++) {
                    peaks = this.backend.getPeaks(width, newRanges[i][0], newRanges[i][1]);
                    this.drawer.drawPeaks(peaks, width, newRanges[i][0], newRanges[i][1]);
                }
            } else {
                peaks = this.backend.getPeaks(width, start, end);
                this.drawer.drawPeaks(peaks, width, start, end);
            }
            this.fireEvent('redraw', peaks, width);
        }

        /**
         * Horizontally zooms the waveform in and out. It also changes the parameter
         * `minPxPerSec` and enables the `scrollParent` option. Calling the function
         * with a falsey parameter will reset the zoom state.
         *
         * @param {?number} pxPerSec Number of horizontal pixels per second of
         * audio, if none is set the waveform returns to unzoomed state
         * @emits WaveSurfer#zoom
         * @example wavesurfer.zoom(20);
         */

    }, {
        key: 'zoom',
        value: function zoom(pxPerSec) {
            if (!pxPerSec) {
                this.params.minPxPerSec = this.defaultParams.minPxPerSec;
                this.params.scrollParent = false;
            } else {
                this.params.minPxPerSec = pxPerSec;
                this.params.scrollParent = true;
            }

            this.drawBuffer();
            this.drawer.progress(this.backend.getPlayedPercents());

            this.drawer.recenter(this.getCurrentTime() / this.getDuration());
            this.fireEvent('zoom', pxPerSec);
        }

        /**
         * Decode buffer and load
         *
         * @private
         * @param {ArrayBuffer} arraybuffer
         */

    }, {
        key: 'loadArrayBuffer',
        value: function loadArrayBuffer(arraybuffer) {
            var _this9 = this;

            this.decodeArrayBuffer(arraybuffer, function (data) {
                if (!_this9.isDestroyed) {
                    _this9.loadDecodedBuffer(data);
                }
            });
        }

        /**
         * Directly load an externally decoded AudioBuffer
         *
         * @private
         * @param {AudioBuffer} buffer
         * @emits WaveSurfer#ready
         */

    }, {
        key: 'loadDecodedBuffer',
        value: function loadDecodedBuffer(buffer) {
            this.backend.load(buffer);
            this.drawBuffer();
            this.fireEvent('ready');
            this.isReady = true;
        }

        /**
         * Loads audio data from a Blob or File object
         *
         * @param {Blob|File} blob Audio data
         * @example
         */

    }, {
        key: 'loadBlob',
        value: function loadBlob(blob) {
            var _this10 = this;

            // Create file reader
            var reader = new FileReader();
            reader.addEventListener('progress', function (e) {
                return _this10.onProgress(e);
            });
            reader.addEventListener('load', function (e) {
                return _this10.loadArrayBuffer(e.target.result);
            });
            reader.addEventListener('error', function () {
                return _this10.fireEvent('error', 'Error reading file');
            });
            reader.readAsArrayBuffer(blob);
            this.empty();
        }

        /**
         * Loads audio and re-renders the waveform.
         *
         * @param {string|HTMLMediaElement} url The url of the audio file or the
         * audio element with the audio
         * @param {?number[]|number[][]} peaks Wavesurfer does not have to decode
         * the audio to render the waveform if this is specified
         * @param {?string} preload (Use with backend `MediaElement`)
         * `'none'|'metadata'|'auto'` Preload attribute for the media element
         * @param {?number} duration The duration of the audio. This is used to
         * render the peaks data in the correct size for the audio duration (as
         * befits the current minPxPerSec and zoom value) without having to decode
         * the audio.
         * @example
         * // using ajax or media element to load (depending on backend)
         * wavesurfer.load('http://example.com/demo.wav');
         *
         * // setting preload attribute with media element backend and supplying
         * peaks wavesurfer.load(
         *   'http://example.com/demo.wav',
         *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],
         *   true,
         * );
         */

    }, {
        key: 'load',
        value: function load(url, peaks, preload, duration) {
            this.empty();

            if (preload) {
                // check whether the preload attribute will be usable and if not log
                // a warning listing the reasons why not and nullify the variable
                var preloadIgnoreReasons = {
                    "Preload is not 'auto', 'none' or 'metadata'": ['auto', 'metadata', 'none'].indexOf(preload) === -1,
                    'Peaks are not provided': !peaks,
                    'Backend is not of type MediaElement': this.params.backend !== 'MediaElement',
                    'Url is not of type string': typeof url !== 'string'
                };
                var activeReasons = Object.keys(preloadIgnoreReasons).filter(function (reason) {
                    return preloadIgnoreReasons[reason];
                });
                if (activeReasons.length) {
                    console.warn('Preload parameter of wavesurfer.load will be ignored because:\n\t- ' + activeReasons.join('\n\t- '));
                    // stop invalid values from being used
                    preload = null;
                }
            }

            switch (this.params.backend) {
                case 'WebAudio':
                    return this.loadBuffer(url, peaks, duration);
                case 'MediaElement':
                    return this.loadMediaElement(url, peaks, preload, duration);
            }
        }

        /**
         * Loads audio using Web Audio buffer backend.
         *
         * @private
         * @param {string} url
         * @param {?number[]|number[][]} peaks
         * @param {?number} duration
         */

    }, {
        key: 'loadBuffer',
        value: function loadBuffer(url, peaks, duration) {
            var _this11 = this;

            var load = function load(action) {
                if (action) {
                    _this11.tmpEvents.push(_this11.once('ready', action));
                }
                return _this11.getArrayBuffer(url, function (data) {
                    return _this11.loadArrayBuffer(data);
                });
            };

            if (peaks) {
                this.backend.setPeaks(peaks, duration);
                this.drawBuffer();
                this.tmpEvents.push(this.once('interaction', load));
            } else {
                return load();
            }
        }

        /**
         * Either create a media element, or load an existing media element.
         *
         * @private
         * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an
         * existing HTML5 Audio/Video Element
         * @param {number[]|number[][]} peaks Array of peaks. Required to bypass web audio
         * dependency
         * @param {?boolean} preload Set to true if the preload attribute of the
         * audio element should be enabled
         * @param {?number} duration
         */

    }, {
        key: 'loadMediaElement',
        value: function loadMediaElement(urlOrElt, peaks, preload, duration) {
            var _this12 = this;

            var url = urlOrElt;

            if (typeof urlOrElt === 'string') {
                this.backend.load(url, this.mediaContainer, peaks, preload);
            } else {
                var elt = urlOrElt;
                this.backend.loadElt(elt, peaks);

                // If peaks are not provided,
                // url = element.src so we can get peaks with web audio
                url = elt.src;
            }

            this.tmpEvents.push(this.backend.once('canplay', function () {
                _this12.drawBuffer();
                _this12.fireEvent('ready');
                _this12.isReady = true;
            }), this.backend.once('error', function (err) {
                return _this12.fireEvent('error', err);
            }));

            // If no pre-decoded peaks provided or pre-decoded peaks are
            // provided with forceDecode flag, attempt to download the
            // audio file and decode it with Web Audio.
            if (peaks) {
                this.backend.setPeaks(peaks, duration);
            }

            if ((!peaks || this.params.forceDecode) && this.backend.supportsWebAudio()) {
                this.getArrayBuffer(url, function (arraybuffer) {
                    _this12.decodeArrayBuffer(arraybuffer, function (buffer) {
                        _this12.backend.buffer = buffer;
                        _this12.backend.setPeaks(null);
                        _this12.drawBuffer();
                        _this12.fireEvent('waveform-ready');
                    });
                });
            }
        }

        /**
         * Decode an array buffer and pass data to a callback
         *
         * @private
         * @param {Object} arraybuffer
         * @param {function} callback
         */

    }, {
        key: 'decodeArrayBuffer',
        value: function decodeArrayBuffer(arraybuffer, callback) {
            var _this13 = this;

            this.arraybuffer = arraybuffer;

            this.backend.decodeArrayBuffer(arraybuffer, function (data) {
                // Only use the decoded data if we haven't been destroyed or
                // another decode started in the meantime
                if (!_this13.isDestroyed && _this13.arraybuffer == arraybuffer) {
                    callback(data);
                    _this13.arraybuffer = null;
                }
            }, function () {
                return _this13.fireEvent('error', 'Error decoding audiobuffer');
            });
        }

        /**
         * Load an array buffer by ajax and pass to a callback
         *
         * @param {string} url
         * @param {function} callback
         * @private
         */

    }, {
        key: 'getArrayBuffer',
        value: function getArrayBuffer(url, callback) {
            var _this14 = this;

            var ajax = util.ajax({
                url: url,
                responseType: 'arraybuffer',
                xhr: this.params.xhr
            });

            this.currentAjax = ajax;

            this.tmpEvents.push(ajax.on('progress', function (e) {
                _this14.onProgress(e);
            }), ajax.on('success', function (data, e) {
                callback(data);
                _this14.currentAjax = null;
            }), ajax.on('error', function (e) {
                _this14.fireEvent('error', 'XHR error: ' + e.target.statusText);
                _this14.currentAjax = null;
            }));

            return ajax;
        }

        /**
         * Called while the audio file is loading
         *
         * @private
         * @param {Event} e
         * @emits WaveSurfer#loading
         */

    }, {
        key: 'onProgress',
        value: function onProgress(e) {
            var percentComplete = void 0;
            if (e.lengthComputable) {
                percentComplete = e.loaded / e.total;
            } else {
                // Approximate progress with an asymptotic
                // function, and assume downloads in the 1-3 MB range.
                percentComplete = e.loaded / (e.loaded + 1000000);
            }
            this.fireEvent('loading', Math.round(percentComplete * 100), e.target);
        }

        /**
         * Exports PCM data into a JSON array and opens in a new window.
         *
         * @param {number} length=1024 The scale in which to export the peaks. (Integer)
         * @param {number} accuracy=10000 (Integer)
         * @param {?boolean} noWindow Set to true to disable opening a new
         * window with the JSON
         * @param {number} start
         * @todo Update exportPCM to work with new getPeaks signature
         * @return {JSON} JSON of peaks
         */

    }, {
        key: 'exportPCM',
        value: function exportPCM(length, accuracy, noWindow, start) {
            length = length || 1024;
            start = start || 0;
            accuracy = accuracy || 10000;
            noWindow = noWindow || false;
            var peaks = this.backend.getPeaks(length, start);
            var arr = [].map.call(peaks, function (val) {
                return Math.round(val * accuracy) / accuracy;
            });
            var json = JSON.stringify(arr);
            if (!noWindow) {
                window.open('data:application/json;charset=utf-8,' + encodeURIComponent(json));
            }
            return json;
        }

        /**
         * Save waveform image as data URI.
         *
         * The default format is `image/png`. Other supported types are
         * `image/jpeg` and `image/webp`.
         *
         * @param {string} format='image/png'
         * @param {number} quality=1
         * @return {string} data URI of image
         */

    }, {
        key: 'exportImage',
        value: function exportImage(format, quality) {
            if (!format) {
                format = 'image/png';
            }
            if (!quality) {
                quality = 1;
            }

            return this.drawer.getImage(format, quality);
        }

        /**
         * Cancel any ajax request currently in progress
         */

    }, {
        key: 'cancelAjax',
        value: function cancelAjax() {
            if (this.currentAjax) {
                this.currentAjax.xhr.abort();
                this.currentAjax = null;
            }
        }

        /**
         * @private
         */

    }, {
        key: 'clearTmpEvents',
        value: function clearTmpEvents() {
            this.tmpEvents.forEach(function (e) {
                return e.un();
            });
        }

        /**
         * Display empty waveform.
         */

    }, {
        key: 'empty',
        value: function empty() {
            if (!this.backend.isPaused()) {
                this.stop();
                this.backend.disconnectSource();
            }
            this.cancelAjax();
            this.clearTmpEvents();
            this.drawer.progress(0);
            this.drawer.setWidth(0);
            this.drawer.drawPeaks({ length: this.drawer.getWidth() }, 0);
        }

        /**
         * Remove events, elements and disconnect WebAudio nodes.
         *
         * @emits WaveSurfer#destroy
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.destroyAllPlugins();
            this.fireEvent('destroy');
            this.cancelAjax();
            this.clearTmpEvents();
            this.unAll();
            if (this.params.responsive !== false) {
                window.removeEventListener('resize', this._onResize, true);
                window.removeEventListener('orientationchange', this._onResize, true);
            }
            this.backend.destroy();
            this.drawer.destroy();
            this.isDestroyed = true;
            this.arraybuffer = null;
        }
    }]);

    return WaveSurfer;
}(util.Observer);

WaveSurfer.util = util;
exports.default = WaveSurfer;
module.exports = exports['default'];

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = ajax;

var _observer = __webpack_require__(1);

var _observer2 = _interopRequireDefault(_observer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Perform an ajax request
 *
 * @param {Options} options Description
 *
 * @returns {Object} Observer instance
 */
function ajax(options) {
    var instance = new _observer2.default();
    var xhr = new XMLHttpRequest();
    var fired100 = false;
    xhr.open(options.method || 'GET', options.url, true);
    xhr.responseType = options.responseType || 'json';

    if (options.xhr) {
        if (options.xhr.requestHeaders) {
            // add custom request headers
            options.xhr.requestHeaders.forEach(function (header) {
                xhr.setRequestHeader(header.key, header.value);
            });
        }
        if (options.xhr.withCredentials) {
            // use credentials
            xhr.withCredentials = true;
        }
    }

    xhr.addEventListener('progress', function (e) {
        instance.fireEvent('progress', e);
        if (e.lengthComputable && e.loaded == e.total) {
            fired100 = true;
        }
    });
    xhr.addEventListener('load', function (e) {
        if (!fired100) {
            instance.fireEvent('progress', e);
        }
        instance.fireEvent('load', e);
        if (200 == xhr.status || 206 == xhr.status) {
            instance.fireEvent('success', xhr.response, e);
        } else {
            instance.fireEvent('error', e);
        }
    });
    xhr.addEventListener('error', function (e) {
        return instance.fireEvent('error', e);
    });
    xhr.send();
    instance.xhr = xhr;
    return instance;
}
module.exports = exports['default'];

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = getId;
/**
 * Get a random prefixed ID
 *
 * @returns {String} Random ID
 */
function getId() {
    return 'wavesurfer_' + Math.random().toString(32).substring(2);
}
module.exports = exports['default'];

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = max;
/**
 * Get the largest value
 *
 * @param   {Array} values Array of numbers
 * @returns {Number} Largest number found
 */
function max(values) {
    var largest = -Infinity;
    Object.keys(values).forEach(function (i) {
        if (values[i] > largest) {
            largest = values[i];
        }
    });
    return largest;
}
module.exports = exports["default"];

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = min;
/**
 * Get the smallest value
 *
 * @param   {Array} values Array of numbers
 * @returns {Number}       Smallest number found
 */
function min(values) {
    var smallest = Number(Infinity);
    Object.keys(values).forEach(function (i) {
        if (values[i] < smallest) {
            smallest = values[i];
        }
    });
    return smallest;
}
module.exports = exports["default"];

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = extend;
/**
 * Extend an object shallowly with others
 *
 * @param {Object} dest The target object
 * @param {Object[]} sources The objects to use for extending
 *
 * @return {Object} Merged object
 */
function extend(dest) {
    for (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        sources[_key - 1] = arguments[_key];
    }

    sources.forEach(function (source) {
        Object.keys(source).forEach(function (key) {
            dest[key] = source[key];
        });
    });
    return dest;
}
module.exports = exports["default"];

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = style;
/**
 * Apply a map of styles to an element
 *
 * @param {HTMLElement} el The element that the styles will be applied to
 * @param {Object} styles The map of propName: attribute, both are used as-is
 *
 * @return {HTMLElement} el
 */
function style(el, styles) {
    Object.keys(styles).forEach(function (prop) {
        if (el.style[prop] !== styles[prop]) {
            el.style[prop] = styles[prop];
        }
    });
    return el;
}
module.exports = exports["default"];

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = frame;

var _requestAnimationFrame = __webpack_require__(2);

var _requestAnimationFrame2 = _interopRequireDefault(_requestAnimationFrame);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Create a function which will be called at the next requestAnimationFrame
 * cycle
 *
 * @param {function} func The function to call
 *
 * @return {func} The function wrapped within a requestAnimationFrame
 */
function frame(func) {
  return function () {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return (0, _requestAnimationFrame2.default)(function () {
      return func.apply(undefined, args);
    });
  };
}
module.exports = exports['default'];

/***/ }),
/* 12 */
/***/ (function(module, exports) {

/**
 * Returns a function, that, as long as it continues to be invoked, will not
 * be triggered. The function will be called after it stops being called for
 * N milliseconds. If `immediate` is passed, trigger the function on the
 * leading edge, instead of the trailing. The function also has a property 'clear' 
 * that is a function which will clear the timer to prevent previously scheduled executions. 
 *
 * @source underscore.js
 * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
 * @param {Function} function to wrap
 * @param {Number} timeout in ms (`100`)
 * @param {Boolean} whether to execute at the beginning (`false`)
 * @api public
 */

module.exports = function debounce(func, wait, immediate){
  var timeout, args, context, timestamp, result;
  if (null == wait) wait = 100;

  function later() {
    var last = Date.now() - timestamp;

    if (last < wait && last >= 0) {
      timeout = setTimeout(later, wait - last);
    } else {
      timeout = null;
      if (!immediate) {
        result = func.apply(context, args);
        context = args = null;
      }
    }
  };

  var debounced = function(){
    context = this;
    args = arguments;
    timestamp = Date.now();
    var callNow = immediate && !timeout;
    if (!timeout) timeout = setTimeout(later, wait);
    if (callNow) {
      result = func.apply(context, args);
      context = args = null;
    }

    return result;
  };

  debounced.clear = function() {
    if (timeout) {
      clearTimeout(timeout);
      timeout = null;
    }
  };
  
  debounced.flush = function() {
    if (timeout) {
      result = func.apply(context, args);
      context = args = null;
      
      clearTimeout(timeout);
      timeout = null;
    }
  };

  return debounced;
};


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = preventClick;
function preventClickHandler(e) {
    e.stopPropagation();
    document.body.removeEventListener('click', preventClickHandler, true);
}

function preventClick(values) {
    document.body.addEventListener('click', preventClickHandler, true);
}
module.exports = exports['default'];

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _drawer = __webpack_require__(15);

var _drawer2 = _interopRequireDefault(_drawer);

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {Object} CanvasEntry
 * @private
 * @property {HTMLElement} wave The wave node
 * @property {CanvasRenderingContext2D} waveCtx The canvas rendering context
 * @property {?HTMLElement} progress The progress wave node
 * @property {?CanvasRenderingContext2D} progressCtx The progress wave canvas
 * rendering context
 * @property {?number} start Start of the area the canvas should render, between 0 and 1
 * @property {?number} end End of the area the canvas should render, between 0 and 1
 */

/**
 * MultiCanvas renderer for wavesurfer. Is currently the default and sole built
 * in renderer.
 */
var MultiCanvas = function (_Drawer) {
    _inherits(MultiCanvas, _Drawer);

    /**
     * @param {HTMLElement} container The container node of the wavesurfer instance
     * @param {WavesurferParams} params The wavesurfer initialisation options
     */
    function MultiCanvas(container, params) {
        _classCallCheck(this, MultiCanvas);

        /**
         * @type {number}
         * @private
         */
        var _this = _possibleConstructorReturn(this, (MultiCanvas.__proto__ || Object.getPrototypeOf(MultiCanvas)).call(this, container, params));

        _this.maxCanvasWidth = params.maxCanvasWidth;
        /**
         * @private
         * @type {number}
         */
        _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);

        /**
         * Whether or not the progress wave is renderered. If the `waveColor`
         * and `progressColor` are the same colour it is not.
         * @type {boolean}
         */
        _this.hasProgressCanvas = params.waveColor != params.progressColor;
        /**
         * @private
         * @type {number}
         */
        _this.halfPixel = 0.5 / params.pixelRatio;
        /**
         * @private
         * @type {Array}
         */
        _this.canvases = [];
        /** @private */
        _this.progressWave = null;
        return _this;
    }

    /**
     * Initialise the drawer
     */


    _createClass(MultiCanvas, [{
        key: 'init',
        value: function init() {
            this.createWrapper();
            this.createElements();
        }

        /**
         * Create the canvas elements and style them
         *
         * @private
         */

    }, {
        key: 'createElements',
        value: function createElements() {
            this.progressWave = this.wrapper.appendChild(this.style(document.createElement('wave'), {
                position: 'absolute',
                zIndex: 3,
                left: 0,
                top: 0,
                bottom: 0,
                overflow: 'hidden',
                width: '0',
                display: 'none',
                boxSizing: 'border-box',
                borderRightStyle: 'solid',
                pointerEvents: 'none'
            }));

            this.addCanvas();
            this.updateCursor();
        }

        /**
         * Update cursor style from params.
         */

    }, {
        key: 'updateCursor',
        value: function updateCursor() {
            this.style(this.progressWave, {
                borderRightWidth: this.params.cursorWidth + 'px',
                borderRightColor: this.params.cursorColor
            });
        }

        /**
         * Adjust to the updated size by adding or removing canvases
         */

    }, {
        key: 'updateSize',
        value: function updateSize() {
            var _this2 = this;

            var totalWidth = Math.round(this.width / this.params.pixelRatio);
            var requiredCanvases = Math.ceil(totalWidth / this.maxCanvasElementWidth);

            while (this.canvases.length < requiredCanvases) {
                this.addCanvas();
            }

            while (this.canvases.length > requiredCanvases) {
                this.removeCanvas();
            }

            this.canvases.forEach(function (entry, i) {
                // Add some overlap to prevent vertical white stripes, keep the width even for simplicity.
                var canvasWidth = _this2.maxCanvasWidth + 2 * Math.ceil(_this2.params.pixelRatio / 2);

                if (i == _this2.canvases.length - 1) {
                    canvasWidth = _this2.width - _this2.maxCanvasWidth * (_this2.canvases.length - 1);
                }

                _this2.updateDimensions(entry, canvasWidth, _this2.height);
                _this2.clearWaveForEntry(entry);
            });
        }

        /**
         * Add a canvas to the canvas list
         *
         * @private
         */

    }, {
        key: 'addCanvas',
        value: function addCanvas() {
            var entry = {};
            var leftOffset = this.maxCanvasElementWidth * this.canvases.length;

            entry.wave = this.wrapper.appendChild(this.style(document.createElement('canvas'), {
                position: 'absolute',
                zIndex: 2,
                left: leftOffset + 'px',
                top: 0,
                bottom: 0,
                height: '100%',
                pointerEvents: 'none'
            }));
            entry.waveCtx = entry.wave.getContext('2d');

            if (this.hasProgressCanvas) {
                entry.progress = this.progressWave.appendChild(this.style(document.createElement('canvas'), {
                    position: 'absolute',
                    left: leftOffset + 'px',
                    top: 0,
                    bottom: 0,
                    height: '100%'
                }));
                entry.progressCtx = entry.progress.getContext('2d');
            }

            this.canvases.push(entry);
        }

        /**
         * Pop one canvas from the list
         *
         * @private
         */

    }, {
        key: 'removeCanvas',
        value: function removeCanvas() {
            var lastEntry = this.canvases.pop();
            lastEntry.wave.parentElement.removeChild(lastEntry.wave);
            if (this.hasProgressCanvas) {
                lastEntry.progress.parentElement.removeChild(lastEntry.progress);
            }
        }

        /**
         * Update the dimensions of a canvas element
         *
         * @private
         * @param {CanvasEntry} entry
         * @param {number} width The new width of the element
         * @param {number} height The new height of the element
         */

    }, {
        key: 'updateDimensions',
        value: function updateDimensions(entry, width, height) {
            var elementWidth = Math.round(width / this.params.pixelRatio);
            var totalWidth = Math.round(this.width / this.params.pixelRatio);

            // Where the canvas starts and ends in the waveform, represented as a decimal between 0 and 1.
            entry.start = entry.waveCtx.canvas.offsetLeft / totalWidth || 0;
            entry.end = entry.start + elementWidth / totalWidth;

            entry.waveCtx.canvas.width = width;
            entry.waveCtx.canvas.height = height;
            this.style(entry.waveCtx.canvas, { width: elementWidth + 'px' });

            this.style(this.progressWave, { display: 'block' });

            if (this.hasProgressCanvas) {
                entry.progressCtx.canvas.width = width;
                entry.progressCtx.canvas.height = height;
                this.style(entry.progressCtx.canvas, {
                    width: elementWidth + 'px'
                });
            }
        }

        /**
         * Clear the whole waveform
         */

    }, {
        key: 'clearWave',
        value: function clearWave() {
            var _this3 = this;

            this.canvases.forEach(function (entry) {
                return _this3.clearWaveForEntry(entry);
            });
        }

        /**
         * Clear one canvas
         *
         * @private
         * @param {CanvasEntry} entry
         */

    }, {
        key: 'clearWaveForEntry',
        value: function clearWaveForEntry(entry) {
            entry.waveCtx.clearRect(0, 0, entry.waveCtx.canvas.width, entry.waveCtx.canvas.height);
            if (this.hasProgressCanvas) {
                entry.progressCtx.clearRect(0, 0, entry.progressCtx.canvas.width, entry.progressCtx.canvas.height);
            }
        }

        /**
         * Draw a waveform with bars
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0. Must be an integer.
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawBars',
        value: function drawBars(peaks, channelIndex, start, end) {
            var _this4 = this;

            return this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {
                var absmax = _ref.absmax,
                    hasMinVals = _ref.hasMinVals,
                    height = _ref.height,
                    offsetY = _ref.offsetY,
                    halfH = _ref.halfH,
                    peaks = _ref.peaks;

                // if drawBars was called within ws.empty we don't pass a start and
                // don't want anything to happen
                if (start === undefined) {
                    return;
                }
                // Skip every other value if there are negatives.
                var peakIndexScale = hasMinVals ? 2 : 1;
                var length = peaks.length / peakIndexScale;
                var bar = _this4.params.barWidth * _this4.params.pixelRatio;
                var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);
                var step = bar + gap;

                var scale = length / _this4.width;
                var first = start;
                var last = end;
                var i = void 0;

                for (i = first; i < last; i += step) {
                    var peak = peaks[Math.floor(i * scale * peakIndexScale)] || 0;
                    var h = Math.round(peak / absmax * halfH);
                    _this4.fillRect(i + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2);
                }
            });
        }

        /**
         * Draw a waveform
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number?} start The x-offset of the beginning of the area that
         * should be rendered (If this isn't set only a flat line is rendered)
         * @param {number?} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawWave',
        value: function drawWave(peaks, channelIndex, start, end) {
            var _this5 = this;

            return this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {
                var absmax = _ref2.absmax,
                    hasMinVals = _ref2.hasMinVals,
                    height = _ref2.height,
                    offsetY = _ref2.offsetY,
                    halfH = _ref2.halfH,
                    peaks = _ref2.peaks;

                if (!hasMinVals) {
                    var reflectedPeaks = [];
                    var len = peaks.length;
                    var i = void 0;
                    for (i = 0; i < len; i++) {
                        reflectedPeaks[2 * i] = peaks[i];
                        reflectedPeaks[2 * i + 1] = -peaks[i];
                    }
                    peaks = reflectedPeaks;
                }

                // if drawWave was called within ws.empty we don't pass a start and
                // end and simply want a flat line
                if (start !== undefined) {
                    _this5.drawLine(peaks, absmax, halfH, offsetY, start, end);
                }

                // Always draw a median line
                _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel);
            });
        }

        /**
         * Tell the canvas entries to render their portion of the waveform
         *
         * @private
         * @param {number[]} peaks Peak data
         * @param {number} absmax Maximum peak value (absolute)
         * @param {number} halfH Half the height of the waveform
         * @param {number} offsetY Offset to the top
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that
         * should be rendered
         */

    }, {
        key: 'drawLine',
        value: function drawLine(peaks, absmax, halfH, offsetY, start, end) {
            var _this6 = this;

            this.canvases.forEach(function (entry) {
                _this6.setFillStyles(entry);
                _this6.drawLineToContext(entry, entry.waveCtx, peaks, absmax, halfH, offsetY, start, end);
                _this6.drawLineToContext(entry, entry.progressCtx, peaks, absmax, halfH, offsetY, start, end);
            });
        }

        /**
         * Render the actual waveform line on a canvas
         *
         * @private
         * @param {CanvasEntry} entry
         * @param {Canvas2DContextAttributes} ctx Essentially `entry.[wave|progress]Ctx`
         * @param {number[]} peaks
         * @param {number} absmax Maximum peak value (absolute)
         * @param {number} halfH Half the height of the waveform
         * @param {number} offsetY Offset to the top
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that
         * should be rendered
         */

    }, {
        key: 'drawLineToContext',
        value: function drawLineToContext(entry, ctx, peaks, absmax, halfH, offsetY, start, end) {
            if (!ctx) {
                return;
            }

            var length = peaks.length / 2;
            var scale = this.params.fillParent && this.width != length ? this.width / length : 1;

            var first = Math.round(length * entry.start);
            // Use one more peak value to make sure we join peaks at ends -- unless,
            // of course, this is the last canvas.
            var last = Math.round(length * entry.end) + 1;
            if (first > end || last < start) {
                return;
            }
            var canvasStart = Math.min(first, start);
            var canvasEnd = Math.max(last, end);
            var i = void 0;
            var j = void 0;

            ctx.beginPath();
            ctx.moveTo((canvasStart - first) * scale + this.halfPixel, halfH + offsetY);

            for (i = canvasStart; i < canvasEnd; i++) {
                var peak = peaks[2 * i] || 0;
                var h = Math.round(peak / absmax * halfH);
                ctx.lineTo((i - first) * scale + this.halfPixel, halfH - h + offsetY);
            }

            // Draw the bottom edge going backwards, to make a single
            // closed hull to fill.
            for (j = canvasEnd - 1; j >= canvasStart; j--) {
                var _peak = peaks[2 * j + 1] || 0;
                var _h = Math.round(_peak / absmax * halfH);
                ctx.lineTo((j - first) * scale + this.halfPixel, halfH - _h + offsetY);
            }

            ctx.closePath();
            ctx.fill();
        }

        /**
         * Draw a rectangle on the waveform
         *
         * @param {number} x
         * @param {number} y
         * @param {number} width
         * @param {number} height
         */

    }, {
        key: 'fillRect',
        value: function fillRect(x, y, width, height) {
            var startCanvas = Math.floor(x / this.maxCanvasWidth);
            var endCanvas = Math.min(Math.ceil((x + width) / this.maxCanvasWidth) + 1, this.canvases.length);
            var i = void 0;
            for (i = startCanvas; i < endCanvas; i++) {
                var entry = this.canvases[i];
                var leftOffset = i * this.maxCanvasWidth;

                var intersection = {
                    x1: Math.max(x, i * this.maxCanvasWidth),
                    y1: y,
                    x2: Math.min(x + width, i * this.maxCanvasWidth + entry.waveCtx.canvas.width),
                    y2: y + height
                };

                if (intersection.x1 < intersection.x2) {
                    this.setFillStyles(entry);

                    this.fillRectToContext(entry.waveCtx, intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1);

                    this.fillRectToContext(entry.progressCtx, intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1);
                }
            }
        }

        /**
         * Performs preparation tasks and calculations which are shared by drawBars and drawWave
         *
         * @private
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number?} start The x-offset of the beginning of the area that
         * should be rendered (If this isn't set only a flat line is rendered)
         * @param {number?} end The x-offset of the end of the area that should be
         * rendered
         * @param {function} fn The render function to call
         */

    }, {
        key: 'prepareDraw',
        value: function prepareDraw(peaks, channelIndex, start, end, fn) {
            var _this7 = this;

            return util.frame(function () {
                // Split channels and call this function with the channelIndex set
                if (peaks[0] instanceof Array) {
                    var channels = peaks;
                    if (_this7.params.splitChannels) {
                        _this7.setHeight(channels.length * _this7.params.height * _this7.params.pixelRatio);
                        return channels.forEach(function (channelPeaks, i) {
                            return _this7.prepareDraw(channelPeaks, i, start, end, fn);
                        });
                    }
                    peaks = channels[0];
                }
                // calculate maximum modulation value, either from the barHeight
                // parameter or if normalize=true from the largest value in the peak
                // set
                var absmax = 1 / _this7.params.barHeight;
                if (_this7.params.normalize) {
                    var max = util.max(peaks);
                    var min = util.min(peaks);
                    absmax = -min > max ? -min : max;
                }

                // Bar wave draws the bottom only as a reflection of the top,
                // so we don't need negative values
                var hasMinVals = [].some.call(peaks, function (val) {
                    return val < 0;
                });
                var height = _this7.params.height * _this7.params.pixelRatio;
                var offsetY = height * channelIndex || 0;
                var halfH = height / 2;

                return fn({
                    absmax: absmax,
                    hasMinVals: hasMinVals,
                    height: height,
                    offsetY: offsetY,
                    halfH: halfH,
                    peaks: peaks
                });
            })();
        }

        /**
         * Draw the actual rectangle on a canvas
         *
         * @private
         * @param {Canvas2DContextAttributes} ctx
         * @param {number} x
         * @param {number} y
         * @param {number} width
         * @param {number} height
         */

    }, {
        key: 'fillRectToContext',
        value: function fillRectToContext(ctx, x, y, width, height) {
            if (!ctx) {
                return;
            }
            ctx.fillRect(x, y, width, height);
        }

        /**
         * Set the fill styles for a certain entry (wave and progress)
         *
         * @private
         * @param {CanvasEntry} entry
         */

    }, {
        key: 'setFillStyles',
        value: function setFillStyles(entry) {
            entry.waveCtx.fillStyle = this.params.waveColor;
            if (this.hasProgressCanvas) {
                entry.progressCtx.fillStyle = this.params.progressColor;
            }
        }

        /**
         * Return image data of the waveform
         *
         * @param {string} type='image/png' An optional value of a format type.
         * @param {number} quality=0.92 An optional value between 0 and 1.
         * @return {string|string[]} images A data URL or an array of data URLs
         */

    }, {
        key: 'getImage',
        value: function getImage(type, quality) {
            var images = this.canvases.map(function (entry) {
                return entry.wave.toDataURL(type, quality);
            });
            return images.length > 1 ? images : images[0];
        }

        /**
         * Render the new progress
         *
         * @param {number} position X-Offset of progress position in pixels
         */

    }, {
        key: 'updateProgress',
        value: function updateProgress(position) {
            this.style(this.progressWave, { width: position + 'px' });
        }
    }]);

    return MultiCanvas;
}(_drawer2.default);

exports.default = MultiCanvas;
module.exports = exports['default'];

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Parent class for renderers
 *
 * @extends {Observer}
 */
var Drawer = function (_util$Observer) {
    _inherits(Drawer, _util$Observer);

    /**
     * @param {HTMLElement} container The container node of the wavesurfer instance
     * @param {WavesurferParams} params The wavesurfer initialisation options
     */
    function Drawer(container, params) {
        _classCallCheck(this, Drawer);

        /** @private */
        var _this = _possibleConstructorReturn(this, (Drawer.__proto__ || Object.getPrototypeOf(Drawer)).call(this));

        _this.container = container;
        /**
         * @type {WavesurferParams}
         * @private
         */
        _this.params = params;
        /**
         * The width of the renderer
         * @type {number}
         */
        _this.width = 0;
        /**
         * The height of the renderer
         * @type {number}
         */
        _this.height = params.height * _this.params.pixelRatio;
        /** @private */
        _this.lastPos = 0;
        /**
         * The `<wave>` element which is added to the container
         * @type {HTMLElement}
         */
        _this.wrapper = null;
        return _this;
    }

    /**
     * Alias of `util.style`
     *
     * @param {HTMLElement} el The element that the styles will be applied to
     * @param {Object} styles The map of propName: attribute, both are used as-is
     * @return {HTMLElement} el
     */


    _createClass(Drawer, [{
        key: 'style',
        value: function style(el, styles) {
            return util.style(el, styles);
        }

        /**
         * Create the wrapper `<wave>` element, style it and set up the events for
         * interaction
         */

    }, {
        key: 'createWrapper',
        value: function createWrapper() {
            this.wrapper = this.container.appendChild(document.createElement('wave'));

            this.style(this.wrapper, {
                display: 'block',
                position: 'relative',
                userSelect: 'none',
                webkitUserSelect: 'none',
                height: this.params.height + 'px'
            });

            if (this.params.fillParent || this.params.scrollParent) {
                this.style(this.wrapper, {
                    width: '100%',
                    overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',
                    overflowY: 'hidden'
                });
            }

            this.setupWrapperEvents();
        }

        /**
         * Handle click event
         *
         * @param {Event} e Click event
         * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`
         * @return {number} Playback position from 0 to 1
         */

    }, {
        key: 'handleEvent',
        value: function handleEvent(e, noPrevent) {
            !noPrevent && e.preventDefault();

            var clientX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX;
            var bbox = this.wrapper.getBoundingClientRect();

            var nominalWidth = this.width;
            var parentWidth = this.getWidth();

            var progress = void 0;

            if (!this.params.fillParent && nominalWidth < parentWidth) {
                progress = (clientX - bbox.left) * this.params.pixelRatio / nominalWidth || 0;

                if (progress > 1) {
                    progress = 1;
                }
            } else {
                progress = (clientX - bbox.left + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;
            }

            return progress;
        }

        /**
         * @private
         */

    }, {
        key: 'setupWrapperEvents',
        value: function setupWrapperEvents() {
            var _this2 = this;

            this.wrapper.addEventListener('click', function (e) {
                var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;
                if (scrollbarHeight != 0) {
                    // scrollbar is visible.  Check if click was on it
                    var bbox = _this2.wrapper.getBoundingClientRect();
                    if (e.clientY >= bbox.bottom - scrollbarHeight) {
                        // ignore mousedown as it was on the scrollbar
                        return;
                    }
                }

                if (_this2.params.interact) {
                    _this2.fireEvent('click', e, _this2.handleEvent(e));
                }
            });

            this.wrapper.addEventListener('scroll', function (e) {
                return _this2.fireEvent('scroll', e);
            });
        }

        /**
         * Draw peaks on the canvas
         *
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} length The width of the area that should be drawn
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawPeaks',
        value: function drawPeaks(peaks, length, start, end) {
            if (!this.setWidth(length)) {
                this.clearWave();
            }

            this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);
        }

        /**
         * Scroll to the beginning
         */

    }, {
        key: 'resetScroll',
        value: function resetScroll() {
            if (this.wrapper !== null) {
                this.wrapper.scrollLeft = 0;
            }
        }

        /**
         * Recenter the viewport at a certain percent of the waveform
         *
         * @param {number} percent Value from 0 to 1 on the waveform
         */

    }, {
        key: 'recenter',
        value: function recenter(percent) {
            var position = this.wrapper.scrollWidth * percent;
            this.recenterOnPosition(position, true);
        }

        /**
         * Recenter the viewport on a position, either scroll there immediately or
         * in steps of 5 pixels
         *
         * @param {number} position X-offset in pixels
         * @param {boolean} immediate Set to true to immediately scroll somewhere
         */

    }, {
        key: 'recenterOnPosition',
        value: function recenterOnPosition(position, immediate) {
            var scrollLeft = this.wrapper.scrollLeft;
            var half = ~~(this.wrapper.clientWidth / 2);
            var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;
            var target = position - half;
            var offset = target - scrollLeft;

            if (maxScroll == 0) {
                // no need to continue if scrollbar is not there
                return;
            }

            // if the cursor is currently visible...
            if (!immediate && -half <= offset && offset < half) {
                // we'll limit the "re-center" rate.
                var rate = 5;
                offset = Math.max(-rate, Math.min(rate, offset));
                target = scrollLeft + offset;
            }

            // limit target to valid range (0 to maxScroll)
            target = Math.max(0, Math.min(maxScroll, target));
            // no use attempting to scroll if we're not moving
            if (target != scrollLeft) {
                this.wrapper.scrollLeft = target;
            }
        }

        /**
         * Get the current scroll position in pixels
         *
         * @return {number}
         */

    }, {
        key: 'getScrollX',
        value: function getScrollX() {
            var pixelRatio = this.params.pixelRatio;
            var x = Math.round(this.wrapper.scrollLeft * pixelRatio);

            // In cases of elastic scroll (safari with mouse wheel) you can
            // scroll beyond the limits of the container
            // Calculate and floor the scrollable extent to make sure an out
            // of bounds value is not returned
            // Ticket #1312
            if (this.params.scrollParent) {
                var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());
                x = Math.min(maxScroll, Math.max(0, x));
            }

            return x;
        }

        /**
         * Get the width of the container
         *
         * @return {number}
         */

    }, {
        key: 'getWidth',
        value: function getWidth() {
            return Math.round(this.container.clientWidth * this.params.pixelRatio);
        }

        /**
         * Set the width of the container
         *
         * @param {number} width
         */

    }, {
        key: 'setWidth',
        value: function setWidth(width) {
            if (this.width == width) {
                return false;
            }

            this.width = width;

            if (this.params.fillParent || this.params.scrollParent) {
                this.style(this.wrapper, {
                    width: ''
                });
            } else {
                this.style(this.wrapper, {
                    width: ~~(this.width / this.params.pixelRatio) + 'px'
                });
            }

            this.updateSize();
            return true;
        }

        /**
         * Set the height of the container
         *
         * @param {number} height
         */

    }, {
        key: 'setHeight',
        value: function setHeight(height) {
            if (height == this.height) {
                return false;
            }
            this.height = height;

            this.style(this.wrapper, {
                height: ~~(this.height / this.params.pixelRatio) + 'px'
            });

            this.updateSize();
            return true;
        }

        /**
         * Called by wavesurfer when progress should be renderered
         *
         * @param {number} progress From 0 to 1
         */

    }, {
        key: 'progress',
        value: function progress(_progress) {
            var minPxDelta = 1 / this.params.pixelRatio;
            var pos = Math.round(_progress * this.width) * minPxDelta;

            if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {
                this.lastPos = pos;

                if (this.params.scrollParent && this.params.autoCenter) {
                    var newPos = ~~(this.wrapper.scrollWidth * _progress);
                    this.recenterOnPosition(newPos);
                }

                this.updateProgress(pos);
            }
        }

        /**
         * This is called when wavesurfer is destroyed
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.unAll();
            if (this.wrapper) {
                if (this.wrapper.parentNode == this.container) {
                    this.container.removeChild(this.wrapper);
                }
                this.wrapper = null;
            }
        }

        /* Renderer-specific methods */

        /**
         * Called after cursor related params have changed.
         *
         * @abstract
         */

    }, {
        key: 'updateCursor',
        value: function updateCursor() {}

        /**
         * Called when the size of the container changes so the renderer can adjust
         *
         * @abstract
         */

    }, {
        key: 'updateSize',
        value: function updateSize() {}

        /**
         * Draw a waveform with bars
         *
         * @abstract
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawBars',
        value: function drawBars(peaks, channelIndex, start, end) {}

        /**
         * Draw a waveform
         *
         * @abstract
         * @param {number[]|number[][]} peaks Can also be an array of arrays for split channel
         * rendering
         * @param {number} channelIndex The index of the current channel. Normally
         * should be 0
         * @param {number} start The x-offset of the beginning of the area that
         * should be rendered
         * @param {number} end The x-offset of the end of the area that should be
         * rendered
         */

    }, {
        key: 'drawWave',
        value: function drawWave(peaks, channelIndex, start, end) {}

        /**
         * Clear the waveform
         *
         * @abstract
         */

    }, {
        key: 'clearWave',
        value: function clearWave() {}

        /**
         * Render the new progress
         *
         * @abstract
         * @param {number} position X-Offset of progress position in pixels
         */

    }, {
        key: 'updateProgress',
        value: function updateProgress(position) {}
    }]);

    return Drawer;
}(util.Observer);

exports.default = Drawer;
module.exports = exports['default'];

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _webaudio = __webpack_require__(3);

var _webaudio2 = _interopRequireDefault(_webaudio);

var _util = __webpack_require__(0);

var util = _interopRequireWildcard(_util);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * MediaElement backend
 */
var MediaElement = function (_WebAudio) {
    _inherits(MediaElement, _WebAudio);

    /**
     * Construct the backend
     *
     * @param {WavesurferParams} params
     */
    function MediaElement(params) {
        _classCallCheck(this, MediaElement);

        /** @private */
        var _this = _possibleConstructorReturn(this, (MediaElement.__proto__ || Object.getPrototypeOf(MediaElement)).call(this, params));

        _this.params = params;

        // Dummy media to catch errors
        /** @private */
        _this.media = {
            currentTime: 0,
            duration: 0,
            paused: true,
            playbackRate: 1,
            play: function play() {},
            pause: function pause() {},

            volume: 0
        };

        /** @private */
        _this.mediaType = params.mediaType.toLowerCase();
        /** @private */
        _this.elementPosition = params.elementPosition;
        /** @private */
        _this.peaks = null;
        /** @private */
        _this.playbackRate = 1;
        /** @private */
        _this.volume = 1;
        /** @private */
        _this.buffer = null;
        /** @private */
        _this.onPlayEnd = null;
        return _this;
    }

    /**
     * Initialise the backend, called in `wavesurfer.createBackend()`
     */


    _createClass(MediaElement, [{
        key: 'init',
        value: function init() {
            this.setPlaybackRate(this.params.audioRate);
            this.createTimer();
        }

        /**
         * Create a timer to provide a more precise `audioprocess` event.
         *
         * @private
         */

    }, {
        key: 'createTimer',
        value: function createTimer() {
            var _this2 = this;

            var onAudioProcess = function onAudioProcess() {
                if (_this2.isPaused()) {
                    return;
                }
                _this2.fireEvent('audioprocess', _this2.getCurrentTime());

                // Call again in the next frame
                var requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame;
                requestAnimationFrame(onAudioProcess);
            };

            this.on('play', onAudioProcess);

            // Update the progress one more time to prevent it from being stuck in case of lower framerates
            this.on('pause', function () {
                _this2.fireEvent('audioprocess', _this2.getCurrentTime());
            });
        }

        /**
         * Create media element with url as its source,
         * and append to container element.
         *
         * @param {string} url Path to media file
         * @param {HTMLElement} container HTML element
         * @param {number[]|number[][]} peaks Array of peak data
         * @param {string} preload HTML 5 preload attribute value
         */

    }, {
        key: 'load',
        value: function load(url, container, peaks, preload) {
            var media = document.createElement(this.mediaType);
            media.controls = this.params.mediaControls;
            media.autoplay = this.params.autoplay || false;
            media.preload = preload == null ? 'auto' : preload;
            media.src = url;
            media.style.width = '100%';

            var prevMedia = container.querySelector(this.mediaType);
            if (prevMedia) {
                container.removeChild(prevMedia);
            }
            container.appendChild(media);

            this._load(media, peaks);
        }

        /**
         * Load existing media element.
         *
         * @param {HTMLMediaElement} elt HTML5 Audio or Video element
         * @param {number[]|number[][]} peaks Array of peak data
         */

    }, {
        key: 'loadElt',
        value: function loadElt(elt, peaks) {
            elt.controls = this.params.mediaControls;
            elt.autoplay = this.params.autoplay || false;

            this._load(elt, peaks);
        }

        /**
         * Private method called by both load (from url)
         * and loadElt (existing media element).
         *
         * @param {HTMLMediaElement} media HTML5 Audio or Video element
         * @param {number[]|number[][]} peaks Array of peak data
         * @private
         */

    }, {
        key: '_load',
        value: function _load(media, peaks) {
            var _this3 = this;

            // load must be called manually on iOS, otherwise peaks won't draw
            // until a user interaction triggers load --> 'ready' event
            if (typeof media.load == 'function') {
                // Resets the media element and restarts the media resource. Any
                // pending events are discarded. How much media data is fetched is
                // still affected by the preload attribute.
                media.load();
            }

            media.addEventListener('error', function () {
                _this3.fireEvent('error', 'Error loading media element');
            });

            media.addEventListener('canplay', function () {
                _this3.fireEvent('canplay');
            });

            media.addEventListener('ended', function () {
                _this3.fireEvent('finish');
            });

            // Listen to and relay play and pause events to enable
            // playback control from the external media element
            media.addEventListener('play', function () {
                _this3.fireEvent('play');
            });

            media.addEventListener('pause', function () {
                _this3.fireEvent('pause');
            });

            this.media = media;
            this.peaks = peaks;
            this.onPlayEnd = null;
            this.buffer = null;
            this.setPlaybackRate(this.playbackRate);
            this.setVolume(this.volume);
        }

        /**
         * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`
         *
         * @return {boolean}
         */

    }, {
        key: 'isPaused',
        value: function isPaused() {
            return !this.media || this.media.paused;
        }

        /**
         * Used by `wavesurfer.getDuration()`
         *
         * @return {number}
         */

    }, {
        key: 'getDuration',
        value: function getDuration() {
            if (this.explicitDuration) {
                return this.explicitDuration;
            }
            var duration = (this.buffer || this.media).duration;
            if (duration >= Infinity) {
                // streaming audio
                duration = this.media.seekable.end(0);
            }
            return duration;
        }

        /**
         * Returns the current time in seconds relative to the audioclip's
         * duration.
         *
         * @return {number}
         */

    }, {
        key: 'getCurrentTime',
        value: function getCurrentTime() {
            return this.media && this.media.currentTime;
        }

        /**
         * Get the position from 0 to 1
         *
         * @return {number}
         */

    }, {
        key: 'getPlayedPercents',
        value: function getPlayedPercents() {
            return this.getCurrentTime() / this.getDuration() || 0;
        }

        /**
         * Get the audio source playback rate.
         *
         * @return {number}
         */

    }, {
        key: 'getPlaybackRate',
        value: function getPlaybackRate() {
            return this.playbackRate || this.media.playbackRate;
        }

        /**
         * Set the audio source playback rate.
         *
         * @param {number} value
         */

    }, {
        key: 'setPlaybackRate',
        value: function setPlaybackRate(value) {
            this.playbackRate = value || 1;
            this.media.playbackRate = this.playbackRate;
        }

        /**
         * Used by `wavesurfer.seekTo()`
         *
         * @param {number} start Position to start at in seconds
         */

    }, {
        key: 'seekTo',
        value: function seekTo(start) {
            if (start != null) {
                this.media.currentTime = start;
            }
            this.clearPlayEnd();
        }

        /**
         * Plays the loaded audio region.
         *
         * @param {number} start Start offset in seconds, relative to the beginning
         * of a clip.
         * @param {number} end When to stop, relative to the beginning of a clip.
         * @emits MediaElement#play
         * @return {Promise}
         */

    }, {
        key: 'play',
        value: function play(start, end) {
            this.seekTo(start);
            var promise = this.media.play();
            end && this.setPlayEnd(end);

            return promise;
        }

        /**
         * Pauses the loaded audio.
         *
         * @emits MediaElement#pause
         * @return {Promise}
         */

    }, {
        key: 'pause',
        value: function pause() {
            var promise = void 0;

            if (this.media) {
                promise = this.media.pause();
            }
            this.clearPlayEnd();

            return promise;
        }

        /** @private */

    }, {
        key: 'setPlayEnd',
        value: function setPlayEnd(end) {
            var _this4 = this;

            this._onPlayEnd = function (time) {
                if (time >= end) {
                    _this4.pause();
                    _this4.seekTo(end);
                }
            };
            this.on('audioprocess', this._onPlayEnd);
        }

        /** @private */

    }, {
        key: 'clearPlayEnd',
        value: function clearPlayEnd() {
            if (this._onPlayEnd) {
                this.un('audioprocess', this._onPlayEnd);
                this._onPlayEnd = null;
            }
        }

        /**
         * Compute the max and min value of the waveform when broken into
         * <length> subranges.
         *
         * @param {number} length How many subranges to break the waveform into.
         * @param {number} first First sample in the required range.
         * @param {number} last Last sample in the required range.
         * @return {number[]|number[][]} Array of 2*<length> peaks or array of
         * arrays of peaks consisting of (max, min) values for each subrange.
         */

    }, {
        key: 'getPeaks',
        value: function getPeaks(length, first, last) {
            if (this.buffer) {
                return _get(MediaElement.prototype.__proto__ || Object.getPrototypeOf(MediaElement.prototype), 'getPeaks', this).call(this, length, first, last);
            }
            return this.peaks || [];
        }

        /**
         * Set the sink id for the media player
         *
         * @param {string} deviceId String value representing audio device id.
         */

    }, {
        key: 'setSinkId',
        value: function setSinkId(deviceId) {
            if (deviceId) {
                if (!this.media.setSinkId) {
                    return Promise.reject(new Error('setSinkId is not supported in your browser'));
                }
                return this.media.setSinkId(deviceId);
            }

            return Promise.reject(new Error('Invalid deviceId: ' + deviceId));
        }

        /**
         * Get the current volume
         *
         * @return {number} value A floating point value between 0 and 1.
         */

    }, {
        key: 'getVolume',
        value: function getVolume() {
            return this.volume || this.media.volume;
        }

        /**
         * Set the audio volume
         *
         * @param {number} value A floating point value between 0 and 1.
         */

    }, {
        key: 'setVolume',
        value: function setVolume(value) {
            this.volume = value;
            this.media.volume = this.volume;
        }

        /**
         * This is called when wavesurfer is destroyed
         *
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.pause();
            this.unAll();

            if (this.params.removeMediaElementOnDestroy && this.media && this.media.parentNode) {
                this.media.parentNode.removeChild(this.media);
            }

            this.media = null;
        }
    }]);

    return MediaElement;
}(_webaudio2.default);

exports.default = MediaElement;
module.exports = exports['default'];

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Caches the decoded peaks data to improve rendering speed for lage audio
 *
 * Is used if the option parameter `partialRender` is set to `true`
 */
var PeakCache = function () {
    /**
     * Instantiate cache
     */
    function PeakCache() {
        _classCallCheck(this, PeakCache);

        this.clearPeakCache();
    }

    /**
     * Empty the cache
     */


    _createClass(PeakCache, [{
        key: "clearPeakCache",
        value: function clearPeakCache() {
            /**
             * Flat array with entries that are always in pairs to mark the
             * beginning and end of each subrange.  This is a convenience so we can
             * iterate over the pairs for easy set difference operations.
             * @private
             */
            this.peakCacheRanges = [];
            /**
             * Length of the entire cachable region, used for resetting the cache
             * when this changes (zoom events, for instance).
             * @private
             */
            this.peakCacheLength = -1;
        }

        /**
         * Add a range of peaks to the cache
         *
         * @param {number} length The length of the range
         * @param {number} start The x offset of the start of the range
         * @param {number} end The x offset of the end of the range
         * @return {number[][]}
         */

    }, {
        key: "addRangeToPeakCache",
        value: function addRangeToPeakCache(length, start, end) {
            if (length != this.peakCacheLength) {
                this.clearPeakCache();
                this.peakCacheLength = length;
            }

            // Return ranges that weren't in the cache before the call.
            var uncachedRanges = [];
            var i = 0;
            // Skip ranges before the current start.
            while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] < start) {
                i++;
            }
            // If |i| is even, |start| falls after an existing range.  Otherwise,
            // |start| falls between an existing range, and the uncached region
            // starts when we encounter the next node in |peakCacheRanges| or
            // |end|, whichever comes first.
            if (i % 2 == 0) {
                uncachedRanges.push(start);
            }
            while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] <= end) {
                uncachedRanges.push(this.peakCacheRanges[i]);
                i++;
            }
            // If |i| is even, |end| is after all existing ranges.
            if (i % 2 == 0) {
                uncachedRanges.push(end);
            }

            // Filter out the 0-length ranges.
            uncachedRanges = uncachedRanges.filter(function (item, pos, arr) {
                if (pos == 0) {
                    return item != arr[pos + 1];
                } else if (pos == arr.length - 1) {
                    return item != arr[pos - 1];
                }
                return item != arr[pos - 1] && item != arr[pos + 1];
            });

            // Merge the two ranges together, uncachedRanges will either contain
            // wholly new points, or duplicates of points in peakCacheRanges.  If
            // duplicates are detected, remove both and extend the range.
            this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);
            this.peakCacheRanges = this.peakCacheRanges.sort(function (a, b) {
                return a - b;
            }).filter(function (item, pos, arr) {
                if (pos == 0) {
                    return item != arr[pos + 1];
                } else if (pos == arr.length - 1) {
                    return item != arr[pos - 1];
                }
                return item != arr[pos - 1] && item != arr[pos + 1];
            });

            // Push the uncached ranges into an array of arrays for ease of
            // iteration in the functions that call this.
            var uncachedRangePairs = [];
            for (i = 0; i < uncachedRanges.length; i += 2) {
                uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);
            }

            return uncachedRangePairs;
        }

        /**
         * For testing
         *
         * @return {number[][]}
         */

    }, {
        key: "getCacheRanges",
        value: function getCacheRanges() {
            var peakCacheRangePairs = [];
            var i = void 0;
            for (i = 0; i < this.peakCacheRanges.length; i += 2) {
                peakCacheRangePairs.push([this.peakCacheRanges[i], this.peakCacheRanges[i + 1]]);
            }
            return peakCacheRangePairs;
        }
    }]);

    return PeakCache;
}();

exports.default = PeakCache;
module.exports = exports["default"];

/***/ })
/******/ ]);
});
//# sourceMappingURL=wavesurfer.js.map

/***/ }),

/***/ "./src/templates.js":
/*!**************************!*\
  !*** ./src/templates.js ***!
  \**************************/
/*! exports provided: sfx_dropdn_template, local_exec_head, local_exec_info, filter_frame_template, quadfilter_template, quad_dropdn_template, reverb_template, delay_template */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sfx_dropdn_template", function() { return sfx_dropdn_template; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "local_exec_head", function() { return local_exec_head; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "local_exec_info", function() { return local_exec_info; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filter_frame_template", function() { return filter_frame_template; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quadfilter_template", function() { return quadfilter_template; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quad_dropdn_template", function() { return quad_dropdn_template; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reverb_template", function() { return reverb_template; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "delay_template", function() { return delay_template; });
// Handlebars tamplates
var Handlebars = __webpack_require__(/*! ./js/handlebars.min.js */ "./src/js/handlebars.min.js");
var local_exec_head = Handlebars.compile(`			<table class='nobord'><tr>
				<td><input ID='opener' name="file" type="file" accept=".wav,.WAV" /></td>
				<!--
				<td><input type="button" value="Open" style="width:55pt" onclick="btn_open()" ></td>
				<td><input type="button" value="Save(F1)" style="width:55pt" onclick="btn_save()"></td>
				-->
			</tr>
			</table>`);

var local_exec_info = Handlebars.compile(`
You are running the local version of Waverly.
`);


var sfx_dropdn_template = Handlebars.compile(`<button class="dropbtn">Effects &#x25bc;</button>
	<div class="dropdown-content">
	<a id='openfilter'>Quad Filter</a>
	<a id='openReverb'>Simple Reverb</a>
	<a id='openDelay'>Delay</a>
 </div>`);


var quad_dropdn_template = Handlebars.compile(`<button id='quadpop' class="dropbtn">Lowpass Filter &#x25bc;</button>
	<div class="dropdown-content">
	<a id='itmlowpass'>Lowpass Filter</a>
	<a id='itmhighpass'>Highpass Filter</a>
	<a id='itmbandpass'>Bandpass Filter</a>
	<a id='itmlowshelf'>Lowshelf Filter</a>
	<a id='itmhighshelf'>Highshelf Filter</a>
	<a id='itmpeaking'>Peaking Filter</a>
	<a id='itmnotch'>Notch Filter</a>
	<a id='itmallpass'>Allpass Filter</a>
 </div>`);
Handlebars.registerPartial("quaddropdn", quad_dropdn_template);

var filter_frame_template = Handlebars.compile(`<div id='filterhdr'>
<table><tr>
<td><button class="butn" id='fl_apply'>Apply</button></td>
<td><button class="butn" id='fl_cancel'>Close</button></td>
<td><input type='checkbox' class='audchbox' id='fl_audition' checked><span class='cboxtext'>Audition</span></input></td>
</tr></table>
<div id ='filterbody'>
</div>
</div>
`);

// Handlebars.registerPartial("filterheader", filterheader);

var quadfilter_template = Handlebars.compile(`<div id='quadfilter'>
<table>
<tr>
<td><div id='quaddropdn'>{{> quaddropdn}}</div></td>
<td><input id='qf_frequency' type="text" value="440" class="dial" data-min="1" data-max="8000" data-angleArc="300" data-angleOffset="30" data-width='128' data-height='128'></td>
<td><div class='q_div'><input id='qf_Q' type="text" value="1" class="dial" data-min="0" data-max="50" data-angleArc="300" data-angleOffset="30" data-width='128' data-height='128'</div></td>
<td><div class='gain_div'><input id='qf_gain' type="text" value="0" class="dial" data-min="-40" data-max="40" data-angleArc="300" data-angleOffset="30" data-width='128' data-height='128'></div></td>
</tr>
<tr>
<th>Kind</th>
<th>Frequency</th>
<th><div class='q_div'>Q</div></th>
<th><div class='gain_div'>Gain</div></th>
</tr>
</table>
</div>
`);

var reverb_template = Handlebars.compile(`<div id='simplereverb'>
<table>
<tr>
<td><input id='qf_drylevel' type="text" value="5" class="dial" data-min="0" data-max="10" data-step='0.1' data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_wetlevel' type="text" value="5" class="dial" data-min="0" data-max="10" data-step='0.1' data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_seconds' type="text" value="3" class="dial" data-min="0" data-max="30"  data-step='0.1' data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_decay' type="text" value="2" class="dial" data-min="0" data-max="100" data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_reverse' type="text" value="0" class="dial" data-min="0" data-max="1" data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
</tr>
<tr>
<th>Dry Level</th>
<th>Wet Level</th>
<th>Seconds</th>
<th>Decay</th>
<th>Reverse</th>
</tr>
</table>
</div>
`);

var delay_template = Handlebars.compile(`<div id='delay'>
<table>
<tr>
<th colspan='6'>Delay Filter</th>
</tr>
<tr>
<td>
<div id='delaydropdn'><button id='typepop' class="dropbtn">Kind &#x25bc;</button>
	<div class="dropdown-content">
	<a id='itmnormal'>Normal</a>
	<a id='itminverted'>Inverted</a>
	<a id='itmpingpong'>PingPong</a>
 </div>
</div>
</td>
<td><input id='qf_delay' type="text" value="1" class="dial" data-min="0" data-max="2" data-step='0.1' data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_feedback' type="text" value="0.5" class="dial" data-min="0" data-max="1.0" data-step='0.01' data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_cutoff' type="text" value="8000" class="dial" data-min="0" data-max="22050" data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_offset' type="text" value="0" class="dial" data-min="-0.5" data-max="0.5" data-step='0.01'  data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
<td><input id='qf_dry' type="text" value="1" class="dial" data-min="0" data-max="1" data-step='0.01' data-angleArc="300" data-angleOffset="210" data-width='128' data-height='128'></td>
</tr>
<tr>
<th>Type</th>
<th>Delay</th>
<th>Feedback</th>
<th>Cutoff</th>
<th>Offset</th>
<th>Dry</th>
</tr>
</table>
</div>
`);



/***/ }),

/***/ "./src/viewWAV.js":
/*!************************!*\
  !*** ./src/viewWAV.js ***!
  \************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/jquery-3.2.1.min.js */ "./src/js/jquery-3.2.1.min.js");
/* harmony import */ var _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Wave_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Wave.js */ "./src/Wave.js");
/* harmony import */ var _templates_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./templates.js */ "./src/templates.js");
/* harmony import */ var _UndoStack_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./UndoStack.js */ "./src/UndoStack.js");
/* harmony import */ var _base64data_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base64data.js */ "./src/base64data.js");
/* harmony import */ var _audioBufferToWav_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./audioBufferToWav.js */ "./src/audioBufferToWav.js");
/* harmony import */ var _Dropdown_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Dropdown.js */ "./src/Dropdown.js");
/* harmony import */ var _AudioCtx_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AudioCtx.js */ "./src/AudioCtx.js");
/* harmony import */ var _Filters_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Filters.js */ "./src/Filters.js");
/* harmony import */ var _BiquadFilter_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./BiquadFilter.js */ "./src/BiquadFilter.js");
/* harmony import */ var _SimplereverbFilter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./SimplereverbFilter.js */ "./src/SimplereverbFilter.js");
/* harmony import */ var _DelayFilter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./DelayFilter.js */ "./src/DelayFilter.js");
















"use strict";

// Flag to enable local execution (not via the FlashAir web server)
var local_exec = document.URL.indexOf('file:') == 0;

var sample_path_prefix = '/';
var filename_input = document.getElementById ("fname");//.value
var fname = "";

var localClipboard;

var wave;
var filterFrame;

function testFilterButton(e)
{
	if (filterFrame) {
		filterFrame.close();
	}

	filterFrame = new _Filters_js__WEBPACK_IMPORTED_MODULE_8__["FilterFrame"](wave);
	let targID = e.target.getAttribute('id');
	let classToMake;
	if (targID === 'openfilter') classToMake = _BiquadFilter_js__WEBPACK_IMPORTED_MODULE_9__["default"];
	 else if (targID === 'openReverb') classToMake = _SimplereverbFilter_js__WEBPACK_IMPORTED_MODULE_10__["default"];
	 	else if (targID === 'openDelay') classToMake = _DelayFilter_js__WEBPACK_IMPORTED_MODULE_11__["default"];
	filterFrame.open(classToMake);
}

// Simplified to just multiply by 1/max(abs(buffer))
// (which preserves any existing DC offset).
var normalize = function (buffer)
{
	let {numberOfChannels, sampleRate} = buffer;
	let bufLen = buffer.getChannelData(0).length;

	for (var cx = 0; cx < numberOfChannels; ++cx) {
		var maxv = -1000000;
		let d = buffer.getChannelData(cx);
		for (var i = 0; i < d.length; ++i) {
			let s = d[i];
			if (s < 0) s = -s;
			if (s > maxv) maxv = s;
		}
		if (maxv === 0) return;
		let scaler = 1.0 / maxv;
		for (var i = 0; i < d.length; ++i) {
			d[i] = d[i]* scaler;
		}
	}

	return buffer;
}

function reverse (buffer)
{
	let {numberOfChannels, sampleRate} = buffer;
	let bufLen = buffer.getChannelData(0).length;
	let halfbuf = bufLen / 2;

	for (var cx = 0; cx < numberOfChannels; ++cx) {
		let d = buffer.getChannelData(cx);
		let td = bufLen - 1;
		for (var i = 0; i < halfbuf; ++i) {
			let s = d[i];
			d[i] = d[td];
			d[td--] = s;
		}
	}

	return buffer;
}

var applyFunction = function (buffer, f)
{
	let {numberOfChannels, sampleRate} = buffer;
	let bufLen = buffer.getChannelData(0).length;

	for (var cx = 0; cx < numberOfChannels; ++cx) {
		var minv = 1000000;
		var maxv = -1000000;
		let d = buffer.getChannelData(cx);
		for (var i = 0; i < d.length; ++i) {
			d[i] = f(d[i], i, bufLen);
		}
	}

	return buffer;
}

function doPlaySel(e)
{
	let {start, end} = wave.getSelection();
	wave.surfer.play(start, end);
}


var deleteSelected = function (e)
{
	let buffer = wave.backend.buffer;
	let {regional, length, first, last, region} = wave.getSelection();
	if (!regional) return;

	let ds = last - first;
	let {numberOfChannels, sampleRate} = buffer;
	let bufLen = length - ds;
	if (bufLen === 0) bufLen = 1;
	let nextBuffer = _AudioCtx_js__WEBPACK_IMPORTED_MODULE_7__["audioCtx"].createBuffer(numberOfChannels, bufLen, sampleRate);

	for (var cx = 0; cx < numberOfChannels; ++cx) {
		let sa = buffer.getChannelData(cx);
		let da = nextBuffer.getChannelData(cx);
		let dx = 0;
		for(var i = 0; i < first; ++i) {
			da[dx++] = sa[i];
		}
		for(var i = last; i < length; ++i) {
			da[dx++] = sa[i];
		}
	}
	if(region) region.remove();
	_UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].push(buffer);
	wave.changeBuffer(nextBuffer);
}


// Apply a transform function to the selected area and replace the selected area
// with the result. The transform function can be either 'in place' or can return a
// result buffer of any size.
function applyTransform(f, f2)
{
	let working = wave.copySelected();
	let result = f(working, f2);
	wave.pasteSelected(result);
}

function reverser(e) {
	applyTransform(reverse);
}

function normalizer(e) {
	
	applyTransform(normalize);
}

function fadeIn(e) {
	
	let f = function (s, i, len) {
		return s * (i / len);
	}
	applyTransform(applyFunction, f);
}

function fadeOut(e) {
	
	let f = function (s, i, len) {
		return s * (1.0 - i / len);
	}
	applyTransform(applyFunction, f);
}

function selAll(e) {
	let {regional, start, end, duration} = wave.getSelection();
	wave.surfer.regions.clear();
	wave.surfer.seekTo(0);
	// If wa are alread a full selection, quit right after we cleared.
	if (regional && start === 0 && end === duration) return;

	let pos = {
		start:	0,
		end:	wave.surfer.getDuration(),
		drag:	false,
		resize: false,
	};
	wave.surfer.regions.add(pos);
}

function doUndo(e) {
	console.log("Undo");

	if (_UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].atTop()) {
		let buffer = wave.backend.buffer;
		_UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].push(buffer);
	}
	let unbuf = _UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].undo();
	wave.changeBuffer(unbuf);
}

function doRedo(e) {
	console.log("Redo");
	let redo = _UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].redo();
	wave.changeBuffer(redo);
}

function copyToClip(e) 
{
	let clip = e.originalEvent.clipboardData;

	let clipBuff = wave.copySelected();
	let wavData = Object(_audioBufferToWav_js__WEBPACK_IMPORTED_MODULE_5__["audioBufferToWav"])(clipBuff);
	let asText = Object(_base64data_js__WEBPACK_IMPORTED_MODULE_4__["base64ArrayBuffer"])(wavData);
	localClipboard = clipBuff;
	if (clip) clip.setData('text/plain', asText);
	e.preventDefault();
}

function cutToClip(e) {
	copyToClip(e);
	deleteSelected(e);
}

function pasteFromClip(e)
{
	let clipBd = e.originalEvent.clipboardData;
	if (clipBd) {
		let clip = clipBd.getData('text/plain');
		if (clip.startsWith('Ukl')) {
			let asbin = Object(_base64data_js__WEBPACK_IMPORTED_MODULE_4__["base64ToArrayBuffer"])(clip);
			wave.backend.decodeArrayBuffer(asbin, function (data) {
			if (data) wave.pasteSelected(data, true);
	 	  }, function (err) {
			alert('paste decode error');
		  });
		  return;
		}
	}
	if (localClipboard) wave.pasteSelected(localClipboard, true);
}

function zoom(amt) {
	
	let minPxWas = wave.surfer.params.minPxPerSec;
	let newPx = minPxWas * amt;
	let zoomLimit = 44100;
	if (newPx > zoomLimit) newPx = zoomLimit;
// console.log('zoom rate: ' + newPx);
	wave.surfer.zoom(newPx);
}

function bindGui() {
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).on('paste', pasteFromClip);
	// iOS was screwing up if the following line was not commented out.
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).on('copy', copyToClip);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).on('cut', cutToClip);
	
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).on('undo', doUndo);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()(window).on('redo', doRedo);
	// Remove highlighting after button pushes:
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('.butn').mouseup(function() { this.blur()});
	
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#loadbut').on('click',btn_load);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#savebut').on('click',btn_save);

	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#plsybut').on('click',(e)=>{wave.surfer.playPause(e)});
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#rewbut').on('click', (e)=>{wave.surfer.seekTo(0)});
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#plsyselbut').on('click', doPlaySel);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#undobut').on('click', doUndo);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#redobut').on('click', doRedo);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#delbut').on('click', deleteSelected);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#cutbut').on('click', cutToClip);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#copybut').on('click', copyToClip);

	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#pastebut').on('click',pasteFromClip);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#normbut').on('click',normalizer);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#reversebut').on('click',reverser);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#fadeinbut').on('click',fadeIn);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#fadeoutbut').on('click',fadeOut);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#selallbut').on('click',selAll);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#zoominbut').on('click',e=>{zoom(2.0)});
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#zoomoutbut').on('click',e=>{zoom(0.5)});
}

var sfxdd = Object(_templates_js__WEBPACK_IMPORTED_MODULE_2__["sfx_dropdn_template"])();

function openFilter(e) {
	testFilterButton(e);
}

var dropdown = new _Dropdown_js__WEBPACK_IMPORTED_MODULE_6__["default"]('#dropdn', sfxdd, openFilter);
console.log(dropdown);

var playBtnImg = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#playbutimg');
var undoBtn = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#undobut');
var redoBtn = _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#redobut');

function setDisable(item, state)
{
	item.prop("disabled", state);
	item.css('opacity', state ? 0.3: 1.0);
}

function updateGui()
{
	if(!wave || !wave.surfer) return;
	let playState = wave.surfer.isPlaying();

	let newPlayImg = "img/glyphicons-174-play.png"
	if (playState) newPlayImg = "img/glyphicons-175-pause.png";
	if (playBtnImg.attr('src') !== newPlayImg) {
		playBtnImg.attr('src',newPlayImg);
	}

	let canUndo = _UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].canUndo();
	setDisable(undoBtn, !canUndo);

	let canRedo = _UndoStack_js__WEBPACK_IMPORTED_MODULE_3__["undoStack"].canRedo();
	setDisable(redoBtn, !canRedo);
}

var guiCheck;

function startGuiCheck() {
	if(!guiCheck) guiCheck = setInterval(updateGui, 200);
}

/*
// Chrome decided to only allow the browser access to the microphone when the page has been served-up via https
// since the FlashAir card doesn't do that, we can't record audio. Another annoying browser incapacity.
function record()
{
	var mike = new Microphone({}, wave.surfer);

	mike.start();
}
*/

// data = DOMException: Only secure origins are allowed (see: https://goo.gl/Y0ZkNV).


//editor
function setEditData(data)
{
	if(!wave) {
		wave = new _Wave_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
	}
	wave.openOnBuffer(data);
	startGuiCheck();
	// let loadEndTime = performance.now();
	// console.log("Load time: " + (loadEndTime - loadStartTime));
}

function openLocal(evt)
{
	var files = evt.target.files;
	var f = files[0];
	if (f === undefined) return;
	var reader = new FileReader();
	if(!wave) {
		wave = new _Wave_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
	}
// Closure to capture the file information.
	reader.onloadend = (function(theFile) {
		return wave.openOnBuffer(theFile);
	})(f);
	// Read in the image file as a data URL.
	reader.readAsBinaryString(f);
}


//---------- When reading page -------------
function onLoad()
{
	// Getting arguments
	var urlarg = location.search.substring(1);
	if(urlarg != "")
	{
		// Decode and assign to file name box
		filename_input.value = decodeURI(urlarg);
	}

	if(!local_exec) {
		loadFile();
	} else { // We are running as a 'file://', so change the GUI to reflect that.
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#filegroup').remove();
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#filegroupplace').append(Object(_templates_js__WEBPACK_IMPORTED_MODULE_2__["local_exec_head"])());
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#jtab').append (Object(_templates_js__WEBPACK_IMPORTED_MODULE_2__["local_exec_info"])());
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()('#opener').on('change', openLocal);
	}
	bindGui();
}

window.onload = onLoad;

// use ajax to load wav data (instead of a web worker).
function loadFile()
{
	fname = filename_input.value;
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()("#statind").text("Loading: " +  fname);
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.ajax({
	url         : fname,
	cache       : false,
	processData : false,
	method:		'GET',
	type        : 'GET',
	success     : function(data, textStatus, jqXHR){
		setEditData(data);
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()("#statind").text(fname + " loaded.");
	},

	error: function (data, textStatus, jqXHR) {
		console.log("Error: " + textStatus);
	},

	xhr: function() {
		var xhr = new window.XMLHttpRequest();
		xhr.responseType= 'blob';
		return xhr;
	},

	});
}

// use ajax to save-back wav data (instead of a web worker).
function saveFile(filepath, data)
{
	var timestring;
	var dt = new Date();
	var year = (dt.getFullYear() - 1980) << 9;
	var month = (dt.getMonth() + 1) << 5;
	var date = dt.getDate();
	var hours = dt.getHours() << 11;
	var minutes = dt.getMinutes() << 5;
	var seconds = Math.floor(dt.getSeconds() / 2);
	var timestring = "0x" + (year + month + date).toString(16) + (hours + minutes + seconds).toString(16);
	var urlDateSet = '/upload.cgi?FTIME=' + timestring + "&TIME="+(Date.now());;
	_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.get(urlDateSet, function() {
		_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.ajax(filepath, {
		headers:	{'Overwrite': 't', 'Content-type': 'audio/wav'},
		cache:		false,
		contentType: false,
		data:		data,
		processData : false,
		method:		'PUT',
		error:		function(jqXHR, textStatus, errorThrown) {
			alert(textStatus + "\n" + errorThrown);
		},
		success: function(data, textStatus, jqXHR){
			console.log("Save OK");
			_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default.a.ajax("/upload.cgi?WRITEPROTECT=OFF",{
				error:	function(jqXHR, textStatus, errorThrown) {
					alert(textStatus + "\n" + errorThrown);
				},
				headers: {"If-Modified-Since": "Thu, 01 Jan 1970 00:00:00 GMT"},
				success: function(data, textStatus, jqXHR){
					console.log("save and unlock done");
					_js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()("#statind").text(filepath + " saved.");
				},
			})
		},
		
		xhr: function() {
			var xhr = new window.XMLHttpRequest();
		  	xhr.upload.addEventListener("progress", function(evt){
			  if (evt.lengthComputable) {
				  var percentComplete = Math.round(evt.loaded / evt.total * 100.0);
				  //Do something with upload progress
				 _js_jquery_3_2_1_min_js__WEBPACK_IMPORTED_MODULE_0___default()("#statind").text(filepath + " " + percentComplete + "%");
				 //console.log(percentComplete);
			  }
			}, false);
		 	return xhr;
		 }
		});
	});
}

//-------keyin--------
document.onkeydown = function (e){
	if(!e) e = window.event;

	if(e.keyCode == 112) //F1
	{
		btn_save();
		return false;		
	}

	if(e.keyCode == 123) //F12
	{
		btn_load();
		return false;		
	}
};


//---------Button-----------

//Load
function btn_load()
{
//	if(window.confirm('Load ?'))
//	{
		// postWorker("load"); // 4306
		loadFile();
		fname = filename_input.value;

//	}
	// jsEditor.markClean();
}

//Save

function btn_save(){

	if(fname != filename_input.value)
	{
		if(!window.confirm('Are you sure you want to save it?\n(Target file name has changed!)'))
		{
			return;
		}
	}
	fname = filename_input.value;

	let aBuf = wave.backend.buffer;
	let saveData = Object(_audioBufferToWav_js__WEBPACK_IMPORTED_MODULE_5__["audioBufferToWav"])(aBuf);
	saveFile(fname, saveData);
	// jsEditor.markClean();
}


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzIiwid2VicGFjazovLy8uL3NyYy9BdWRpb0N0eC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQmlxdWFkRmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9EZWxheUZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvRHJvcGRvd24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0ZpbHRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1NpbXBsZXJldmVyYkZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvVW5kb1N0YWNrLmpzIiwid2VicGFjazovLy8uL3NyYy9XYXZlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdWRpb0J1ZmZlclRvV2F2LmpzIiwid2VicGFjazovLy8uL3NyYy9iYXNlNjRkYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9oYW5kbGViYXJzLm1pbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvanF1ZXJ5LTMuMi4xLm1pbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvanF1ZXJ5Lmtub2IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BsdWdpbnMvd2F2ZXN1cmZlci5taW5pbWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9wbHVnaW5zL3dhdmVzdXJmZXIucmVnaW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcGx1Z2lucy93YXZlc3VyZmVyLnRpbGVkcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BsdWdpbnMvd2F2ZXN1cmZlci50aW1lbGluZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvd2F2ZXN1cmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzLmpzIiwid2VicGFjazovLy8uL3NyYy92aWV3V0FWLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlEQUFpRCxjQUFjO0FBQy9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQ0RBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQ0E7QUFDbUI7QUFDUztBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQSxzSkFBeUY7QUFDekYsK0hBQWtFO0FBQ2xFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxnRkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzREE7QUFDQTtBQUNtQjtBQUNJO0FBQ3ZCOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILGdGQUFtQjtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5QkY7QUFDOEI7QUFDUDs7QUFFdkI7QUFDQSxNQUFNLDZCQUE2QjtBQUNuQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxSVI7QUFDQTtBQUNtQjtBQUNLOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnRkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VDO0FBQ047QUFDZjs7QUFFbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtB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OztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLHNDQUFzQztBQUN0QyxtQ0FBbUM7QUFDbkMseUNBQXlDO0FBQ3pDLG1DQUFtQztBQUNuQyxrQ0FBa0MsZUFBZTs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFFBQVE7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUMscUJBQXFCOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtB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Q0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQ0FBaUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQixtQkFBbUIsT0FBTztBQUMxQixxQkFBcUI7QUFDckI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztB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QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQixtQkFBbUIsUUFBUTtBQUMzQjtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNCQUFzQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFFBQVE7QUFDM0I7QUFD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QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQSxvQkFBb0I7QUFDcEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCLG1CQUFtQixPQUFPO0FBQzFCLG1CQUFtQixPQUFPO0FBQzFCLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qjs7QUFFN0I7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFLE9BQU87QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOENBQThDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsY0FBYyxxREFBcUQ7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGU7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJ3YXZlcmx5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL3ZpZXdXQVYuanNcIik7XG4iLCIvKiBnbG9iYWxzIF9fd2VicGFja19hbWRfb3B0aW9uc19fICovXHJcbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcbiIsIi8vIEluc3RhdGlhdGUgZ2xvYmFsIHZhcmlhYmxlc1xudmFyIGF1ZGlvQ3R4ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7XG52YXIgT2ZmbGluZUNvbnRleHQgPSB3aW5kb3cuT2ZmbGluZUF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0T2ZmbGluZUF1ZGlvQ29udGV4dDtcblxuZXhwb3J0IHthdWRpb0N0eCwgT2ZmbGluZUNvbnRleHR9OyIsImltcG9ydCAkIGZyb20nLi9qcy9qcXVlcnktMy4yLjEubWluLmpzJztcbmltcG9ydCBrbm9iIGZyb20nLi9qcy9qcXVlcnkua25vYi5qcyc7XG5pbXBvcnQge0ZpbHRlckJhc2V9IGZyb20gJy4vRmlsdGVycy5qcyc7XG5pbXBvcnQge3F1YWRmaWx0ZXJfdGVtcGxhdGV9IGZyb20nLi90ZW1wbGF0ZXMuanMnO1xuaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vRHJvcGRvd24uanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaVF1YWRGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXJCYXNlIHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIocXVhZGZpbHRlcl90ZW1wbGF0ZSk7XG5cdH1cblxuXHRnZXRTdGF0ZSgpIHtcblx0ICByZXR1cm4ge1xuXHRcdHR5cGU6IFx0XHR0aGlzLmJpcXVhZEZpbHRlci50eXBlLFxuXHRcdGZyZXF1ZW5jeTogXHR0aGlzLmJpcXVhZEZpbHRlci5mcmVxdWVuY3kudmFsdWUsXG5cdFx0UTpcdFx0XHR0aGlzLmJpcXVhZEZpbHRlci5RLnZhbHVlLFxuXHRcdGdhaW46XHRcdHRoaXMuYmlxdWFkRmlsdGVyLmdhaW4udmFsdWUsXG5cdCAgfTtcblx0fVxuXG5cdGFwcGx5U3RhdGUoc3RhdGUpIHtcblx0XHR0aGlzLmJpcXVhZEZpbHRlci50eXBlID0gc3RhdGUudHlwZTtcblx0XHR0aGlzLmJpcXVhZEZpbHRlci5mcmVxdWVuY3kudmFsdWUgPSBzdGF0ZS5mcmVxdWVuY3k7XG5cdFx0dGhpcy5iaXF1YWRGaWx0ZXIuUS52YWx1ZSA9IHN0YXRlLlE7XG5cdFx0dGhpcy5iaXF1YWRGaWx0ZXIuZ2Fpbi52YWx1ZSA9IHN0YXRlLmdhaW47XG5cdH1cblxuXHRjcmVhdGVGaWx0ZXJzKGN0eCkge1xuXHRcdHRoaXMuYmlxdWFkRmlsdGVyID0gY3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpO1xuXHRcdHRoaXMuZmlsdGVycyA9IFt0aGlzLmJpcXVhZEZpbHRlcl07XG5cdH1cblxuXG5cdHNlbGVjdFN1YmZpbHRlcihmdCkge1xuXHRcdHRoaXMuYmlxdWFkRmlsdGVyLnR5cGUgPSBmdDtcblxuXHRcdGlmIChmdCA9PT0gJ2xvd3NoZWxmJyB8fCBmdCA9PT0gJ2hpZ2hzaGVsZicgfHwgZnQgPT09ICdwZWFraW5nJykgJCgnLmdhaW5fZGl2Jykuc2hvdygpOyBlbHNlICQoJy5nYWluX2RpdicpLmhpZGUoKTtcblx0XHRpZiAoZnQgIT09ICdsb3dzaGVsZicgJiYgZnQgIT09ICdoaWdoc2hlbGYnKSAkKCcucV9kaXYnKS5zaG93KCk7IGVsc2UgJCgnLnFfZGl2JykuaGlkZSgpO1xuXHR9XG5cblx0b3Blbkd1aSh3aGVyZVRvUHV0KSB7XG5cdFx0c3VwZXIub3Blbkd1aSh3aGVyZVRvUHV0KTtcblx0XHRsZXQgdGhhdCA9IHRoaXM7XG5cdFx0bGV0IGZpbHRlckRyb3AgPSBuZXcgRHJvcGRvd24oJyNxdWFkZHJvcGRuJyx1bmRlZmluZWQsZnVuY3Rpb24gKGUpIHtcblx0XHRcdGxldCB0YXJnSUQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG5cdFx0XHRsZXQgdGFyZ1RleHQgPSBlLnRhcmdldC5pbm5lclRleHQ7XG5cdFx0XHRsZXQgZm5hbWUgPSB0YXJnSUQuc3Vic3RyaW5nKDMpO1xuXHRcdFx0dGhhdC5zZWxlY3RTdWJmaWx0ZXIoZm5hbWUpO1xuXHRcdFx0bGV0IG5hbWVmID0gJCgnI3F1YWRkcm9wZG4nKTtcblx0XHRcdCQobmFtZWZbMF0uZmlyc3RDaGlsZCkudGV4dCh0YXJnVGV4dCk7XG5cdFx0fSk7XG5cblx0XHQkKFwiLmRpYWxcIikua25vYih7Y2hhbmdlOiBmdW5jdGlvbiAodikge1xuXHRcdFx0bGV0IGlucCA9IHRoaXMuaVswXTtcblx0XHRcdGxldCBjdGxJZCA9IGlucC5nZXRBdHRyaWJ1dGUoJ2lkJykuc3Vic3RyaW5nKDMpO1xuXHRcdFx0dGhhdC5iaXF1YWRGaWx0ZXJbY3RsSWRdLnZhbHVlID0gdjtcblx0XHR9fSk7XG5cdFx0dGhpcy5zZWxlY3RTdWJmaWx0ZXIoJ2xvd3Bhc3MnKTtcblx0fVxufTtcblxuIiwiaW1wb3J0ICQgZnJvbScuL2pzL2pxdWVyeS0zLjIuMS5taW4uanMnO1xuaW1wb3J0IGtub2IgZnJvbScuL2pzL2pxdWVyeS5rbm9iLmpzJztcbmltcG9ydCB7RmlsdGVyQmFzZX0gZnJvbSAnLi9GaWx0ZXJzLmpzJztcbmltcG9ydCB7ZGVsYXlfdGVtcGxhdGV9IGZyb20nLi90ZW1wbGF0ZXMuanMnO1xuaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vRHJvcGRvd24uanMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlbGF5RmlsdGVyIGV4dGVuZHMgRmlsdGVyQmFzZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuXHRzdXBlcihkZWxheV90ZW1wbGF0ZSk7XG5cdHRoaXMudHlwZSA9ICdub3JtYWwnO1xuXHR0aGlzLmRlbGF5VGltZSA9IDEuMDtcblx0dGhpcy5jdXRvZmYgPSA4MDAwO1xuXHR0aGlzLm9mZnNldCA9IDA7XG5cdHRoaXMuZmlsdGVyU2V0dXAgPSBmYWxzZTtcbiAgfVxuXG4gIGNyZWF0ZUZpbHRlcnMoY3R4KSB7XG4gIFx0dGhpcy5jdHggPSBjdHg7XG5cblx0dGhpcy5zcGxpdCA9IGN0eC5jcmVhdGVDaGFubmVsU3BsaXR0ZXIoMik7XG5cdHRoaXMubWVyZ2UgPSBjdHguY3JlYXRlQ2hhbm5lbE1lcmdlcigyKTtcblx0dGhpcy5sZWZ0RGVsYXkgPSBjdHguY3JlYXRlRGVsYXkoKTtcblx0dGhpcy5yaWdodERlbGF5ID0gY3R4LmNyZWF0ZURlbGF5KCk7XG5cdHRoaXMubGVmdEdhaW4gPSBjdHguY3JlYXRlR2FpbigpO1xuXHR0aGlzLnJpZ2h0R2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7XG5cdHRoaXMubGVmdEZpbHRlciA9IGN0eC5jcmVhdGVCaXF1YWRGaWx0ZXIoKVxuXHR0aGlzLnJpZ2h0RmlsdGVyID0gY3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpO1xuXHR0aGlzLmRyeUdhaW4gPSBjdHguY3JlYXRlR2FpbigpO1xuXG5cdHRoaXMubGVmdEZpbHRlci50eXBlID0gJ2xvd3Bhc3MnO1xuXHR0aGlzLmxlZnRGaWx0ZXIuZnJlcXVlbmN5LnZhbHVlICA9IHRoaXMuY3V0b2ZmO1xuXHR0aGlzLnJpZ2h0RmlsdGVyLnR5cGUgPSAnbG93cGFzcyc7XG5cdHRoaXMucmlnaHRGaWx0ZXIuZnJlcXVlbmN5LnZhbHVlICA9IHRoaXMuY3V0b2ZmO1xuXG5cdHRoaXMubGVmdERlbGF5LmRlbGF5VGltZS52YWx1ZSA9IHRoaXMuZGVsYXlUaW1lO1xuXHR0aGlzLnJpZ2h0RGVsYXkuZGVsYXlUaW1lLnZhbHVlID0gdGhpcy5kZWxheVRpbWU7XG5cdHRoaXMubGVmdEdhaW4uZ2Fpbi52YWx1ZSA9IDAuNTtcblx0dGhpcy5yaWdodEdhaW4uZ2Fpbi52YWx1ZSA9IDAuNTtcblx0XG5cdHRoaXMuc2V0T2Zmc2V0KHRoaXMub2Zmc2V0KTtcbiAgfVxuXG4gIGNvbm5lY3RGaWx0ZXJzKHNvdXJjZSwgZGVzdCkge1xuXHR0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0dGhpcy5kZXN0ID0gZGVzdDtcbiBcdHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5zcGxpdCk7XG4gXHRpZiAoIXRoaXMuZmlsdGVyU2V0dXApIHtcbiBcdFx0dGhpcy5maWx0ZXJTZXR1cCA9IHRydWU7XG5cdFx0dGhpcy5sZWZ0RGVsYXkuY29ubmVjdCh0aGlzLmxlZnRHYWluKTtcblx0XHR0aGlzLnJpZ2h0RGVsYXkuY29ubmVjdCh0aGlzLnJpZ2h0R2Fpbik7XG5cdFx0dGhpcy5sZWZ0R2Fpbi5jb25uZWN0KHRoaXMubGVmdEZpbHRlcik7XG5cdFx0dGhpcy5yaWdodEdhaW4uY29ubmVjdCh0aGlzLnJpZ2h0RmlsdGVyKTtcblx0fVxuXHR0aGlzLm1lcmdlLmNvbm5lY3QodGhpcy5kZXN0KTtcblxuXHR0aGlzLnJlcGF0Y2goKTtcblxuXHR0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZHJ5R2Fpbik7XG5cdHRoaXMuZHJ5R2Fpbi5jb25uZWN0KHRoaXMuZGVzdCk7XG5cbiAgfVxuXG4gIGRpc2Nvbm5lY3RGaWx0ZXJzKCkge1xuXHQvLyBJc29sYXRlIG91ciBmaWx0ZXJzIGZyb20gcGxheWVyLlxuXHR0aGlzLnNvdXJjZS5kaXNjb25uZWN0KCk7XG5cdHRoaXMubWVyZ2UuZGlzY29ubmVjdCgpO1xuXHQvLyBSZWNvbm5lY3QgdGhlIGRpcmVjdCBwYXRoXG5cdHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5kZXN0KTtcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuXHQgIHJldHVybiB7XHRcdFxuXHRcdHR5cGU6XHRcdHRoaXMudHlwZSxcblx0XHRkZWxheTpcdFx0dGhpcy5kZWxheVRpbWUsXG5cdFx0ZmVlZGJhY2s6XHR0aGlzLmxlZnRHYWluLmdhaW4udmFsdWUsXG5cdFx0Y3V0b2ZmOlx0XHR0aGlzLmxlZnRGaWx0ZXIuZnJlcXVlbmN5LnZhbHVlLFxuXHRcdG9mZnNldDpcdFx0dGhpcy5vZmZzZXQsXG5cdFx0ZHJ5Olx0XHR0aGlzLmRyeUdhaW4uZ2Fpbi52YWx1ZSxcblx0ICB9O1xuXHR9XG5cbiAgYXBwbHlTdGF0ZShzdGF0ZSkge1xuXHRcdHRoaXMudHlwZSA9IHN0YXRlLnR5cGU7XG5cdFx0dGhpcy5kZWxheVRpbWUgPSBzdGF0ZS5kZWxheTtcblx0XHR0aGlzLmxlZnREZWxheS5kZWxheVRpbWUudmFsdWUgPSB0aGlzLmRlbGF5VGltZTtcblx0XHR0aGlzLnJpZ2h0RGVsYXkuZGVsYXlUaW1lLnZhbHVlID0gdGhpcy5kZWxheVRpbWU7XG5cdFx0dGhpcy5sZWZ0R2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHN0YXRlLmZlZWRiYWNrLCAwKTtcblx0XHR0aGlzLnJpZ2h0R2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHN0YXRlLmZlZWRiYWNrLCAwKTtcblx0XHR0aGlzLmxlZnRGaWx0ZXIuZnJlcXVlbmN5LnZhbHVlID0gc3RhdGUuY3V0b2ZmO1xuXHRcdHRoaXMucmlnaHRGaWx0ZXIuZnJlcXVlbmN5LnZhbHVlID0gc3RhdGUuY3V0b2ZmO1xuXHRcdHRoaXMuY3V0b2ZmID0gc3RhdGUuY3V0b2ZmO1xuXHRcdHRoaXMuc2V0T2Zmc2V0KHN0YXRlLm9mZnNldCk7XG5cdFx0dGhpcy5kcnlHYWluLmdhaW4udmFsdWUgPSBzdGF0ZS5kcnk7XG5cblx0XHR0aGlzLnJlcGF0Y2goKTtcblx0fVxuXG5cdG9wZW5HdWkod2hlcmVUb1B1dCkge1xuXHRcdHN1cGVyLm9wZW5HdWkod2hlcmVUb1B1dCk7XG5cdFx0bGV0IHRoYXQgPSB0aGlzO1xuXHRcdGxldCBkZWxheURyb3AgPSBuZXcgRHJvcGRvd24oJyNkZWxheWRyb3BkbicsdW5kZWZpbmVkLGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRsZXQgdGFyZ0lEID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXHRcdFx0bGV0IHRhcmdUZXh0ID0gZS50YXJnZXQuaW5uZXJUZXh0O1xuXHRcdFx0bGV0IGZuYW1lID0gdGFyZ0lELnN1YnN0cmluZygzKTtcblx0XHRcdHRoYXQudHlwZSA9IGZuYW1lO1xuXHRcdFx0dGhhdC5yZXBhdGNoKCk7XG5cdFx0XHRsZXQgbmFtZWYgPSAkKCcjZGVsYXlkcm9wZG4nKTtcblx0XHRcdCQobmFtZWZbMF0uZmlyc3RDaGlsZCkudGV4dCh0YXJnVGV4dCk7XG5cdFx0fSk7XG5cblx0XHQkKFwiLmRpYWxcIikua25vYih7Y2hhbmdlOiBmdW5jdGlvbiAodikge1xuXHRcdFx0bGV0IGlucCA9IHRoaXMuaVswXTtcblx0XHRcdGxldCBjdGxJZCA9IGlucC5nZXRBdHRyaWJ1dGUoJ2lkJykuc3Vic3RyaW5nKDMpO1xuXHRcdFx0dGhhdFtjdGxJZF0gPSB2O1xuXG5cdFx0XHRzd2l0Y2ggKGN0bElkKSB7XG5cdFx0Y2FzZSAnZGVsYXknOlxuXHRcdFx0dGhhdC5kZWxheVRpbWUgPSB2O1xuXHRcdFx0dGhhdC5zZXRPZmZzZXQodGhhdC5vZmZzZXQpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdmZWVkYmFjayc6XG5cdFx0XHR0aGF0LmxlZnRHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodiwgMCk7XG5cdFx0XHR0aGF0LnJpZ2h0R2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHYsIDApO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdjdXRvZmYnOlxuXHRcdFx0dGhhdC5sZWZ0RmlsdGVyLmZyZXF1ZW5jeS52YWx1ZSA9IHY7XG5cdFx0XHR0aGF0LnJpZ2h0RmlsdGVyLmZyZXF1ZW5jeS52YWx1ZSA9IHY7XG5cdFx0XHR0aGF0LmN1dG9mZiA9IHY7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ29mZnNldCc6XG5cdFx0XHR0aGF0LnNldE9mZnNldCh2KTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAnZHJ5Jzpcblx0XHRcdHRoYXQuZHJ5R2Fpbi5nYWluLnZhbHVlID0gdjtcblx0XHRcdGJyZWFrO1xuXHRcdCAgfSAvLyBFbmQgb2Ygc3dpdGNoXG5cdFx0fX0pO1xuXHR9XG5cbiAgc2V0T2Zmc2V0ICh2YWx1ZSkge1xuXHR2YXIgb2Zmc2V0VGltZSA9IHRoaXMuZGVsYXlUaW1lICsgdmFsdWU7XG5cdHRoaXMub2Zmc2V0ID0gdmFsdWU7XG5cdGlmICh2YWx1ZSA8IDApIHtcblx0XHR0aGlzLmxlZnREZWxheS5kZWxheVRpbWUuc2V0VmFsdWVBdFRpbWUob2Zmc2V0VGltZSwgMCk7XG5cdFx0dGhpcy5yaWdodERlbGF5LmRlbGF5VGltZS5zZXRWYWx1ZUF0VGltZSh0aGlzLmRlbGF5VGltZSwgMCk7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5sZWZ0RGVsYXkuZGVsYXlUaW1lLnNldFZhbHVlQXRUaW1lKHRoaXMuZGVsYXlUaW1lLCAwKTtcblx0XHR0aGlzLnJpZ2h0RGVsYXkuZGVsYXlUaW1lLnNldFZhbHVlQXRUaW1lKG9mZnNldFRpbWUsIDApO1xuXHQgfVxuIH1cblxuICByZXBhdGNoKCkge1xuXHR0aGlzLnNwbGl0LmRpc2Nvbm5lY3QoKTtcblx0dGhpcy5sZWZ0RmlsdGVyLmRpc2Nvbm5lY3QoKTtcblx0dGhpcy5yaWdodEZpbHRlci5kaXNjb25uZWN0KCk7XG5cdHRoaXMubGVmdEZpbHRlci5jb25uZWN0KHRoaXMubWVyZ2UsIDAsIDApO1xuXHR0aGlzLnJpZ2h0RmlsdGVyLmNvbm5lY3QodGhpcy5tZXJnZSwgMCwgMSk7XG5cdFxuXHRpZiAodGhpcy50eXBlID09PSAnbm9ybWFsJykge1xuXHRcdHRoaXMuc3BsaXQuY29ubmVjdCh0aGlzLmxlZnREZWxheSwgMCk7XG5cdFx0dGhpcy5zcGxpdC5jb25uZWN0KHRoaXMucmlnaHREZWxheSwgMSk7XG5cdFx0dGhpcy5sZWZ0RmlsdGVyLmNvbm5lY3QodGhpcy5sZWZ0RGVsYXkpO1xuXHRcdHRoaXMucmlnaHRGaWx0ZXIuY29ubmVjdCh0aGlzLnJpZ2h0RGVsYXkpO1xuXHR9XG5cdCBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdpbnZlcnRlZCcpIHtcblx0XHR0aGlzLnNwbGl0LmNvbm5lY3QodGhpcy5sZWZ0RGVsYXksIDEpO1xuXHRcdHRoaXMuc3BsaXQuY29ubmVjdCh0aGlzLnJpZ2h0RGVsYXksIDApO1xuXHRcdHRoaXMubGVmdEZpbHRlci5jb25uZWN0KHRoaXMubGVmdERlbGF5KTtcblx0XHR0aGlzLnJpZ2h0RmlsdGVyLmNvbm5lY3QodGhpcy5yaWdodERlbGF5KTtcblx0fVxuXHQgZWxzZSBpZiAodGhpcy50eXBlID09PSAncGluZ3BvbmcnKSB7XG5cdFx0dGhpcy5zcGxpdC5jb25uZWN0KHRoaXMubGVmdERlbGF5LCAwKTtcblx0XHR0aGlzLnNwbGl0LmNvbm5lY3QodGhpcy5yaWdodERlbGF5LCAxKTtcblx0XHR0aGlzLmxlZnRGaWx0ZXIuY29ubmVjdCh0aGlzLnJpZ2h0RGVsYXkpO1xuXHRcdHRoaXMucmlnaHRGaWx0ZXIuY29ubmVjdCh0aGlzLmxlZnREZWxheSk7XG5cdH1cbiAgfVxuXG59O1xuIiwiaW1wb3J0ICQgZnJvbScuL2pzL2pxdWVyeS0zLjIuMS5taW4uanMnO1xuLy8gQSBzaW1wbGUgZHJvcC1kb3duIG1lbnUgbWFuYWdlciB3aGljaCB1c2VzIGNsYXNzZXMgaW5zdGVhZCBvZiBJZHMgaW50ZXJuYWxseVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd24ge1xuXHRjb25zdHJ1Y3RvcihpdGVtLCBjb250ZW50cywgZHJvcGZuKSB7XG5cdFx0dGhpcy5pdGVtID0gJChpdGVtKTtcblx0XHR0aGlzLnNob3dpbmcgPSBmYWxzZTtcblx0XHR0aGlzLmRyb3BmbiA9IGRyb3Bmbjtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0aWYoY29udGVudHMpIHRoaXMuaXRlbS5hcHBlbmQoY29udGVudHMpO1xuXHRcdHRoaXMuZHJvcGJ1dCA9IHRoaXMuaXRlbS5maW5kKCcuZHJvcGJ0bicpO1xuXHRcdHRoaXMuZHJvcGJ1dC5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0dGhhdC5zaG93aW5nID0gIXRoYXQuc2hvd2luZztcblx0XHRcdHRoYXQuaXRlbS5maW5kKCcuZHJvcGRvd24tY29udGVudCcpLnRvZ2dsZUNsYXNzKCdzaG93Jyk7XG5cdFx0XHR0aGF0LmRyb3BXYXRjaCA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdGlmIChlLnRhcmdldC5tYXRjaGVzKCcuZHJvcGJ0bicpKSByZXR1cm47XG5cdFx0XHRcdHRoYXQuY2xvc2VEcm9wRG93bigpO1xuXHRcdFx0fTtcblx0XHRcdCQod2luZG93KS5vbignY2xpY2snLCB0aGF0LmRyb3BXYXRjaCk7XG5cdFx0fSk7XG5cdFx0JCh0aGlzLml0ZW0pLmZpbmQoJy5kcm9wZG93bi1jb250ZW50Jykub24oJ2NsaWNrJywgZT0+IHtcblx0XHRcdHRoYXQuY2xvc2VEcm9wRG93bigpO1xuXHRcdFx0dGhhdC5kcm9wZm4oZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRjbG9zZURyb3BEb3duKCkge1xuXHRcdHRoaXMuaXRlbS5maW5kKFwiLmRyb3Bkb3duLWNvbnRlbnRcIikucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcblx0XHQkKHdpbmRvdykub2ZmKCdjbGljaycsIHRoaXMuZHJvcFdhdGNoKTtcblx0fVxuXG59OyAvLyBFbmQgb2YgY2xhc3NcbiIsImltcG9ydCAkIGZyb20nLi9qcy9qcXVlcnktMy4yLjEubWluLmpzJztcbmltcG9ydCB7ZmlsdGVyX2ZyYW1lX3RlbXBsYXRlfSBmcm9tJy4vdGVtcGxhdGVzLmpzJztcbmltcG9ydCB7T2ZmbGluZUNvbnRleHR9IGZyb20gJy4vQXVkaW9DdHguanMnO1xuXG52YXIgY3JlYXRlT2ZmbGluZUNvbnRleHQgID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuXHRsZXQge251bWJlck9mQ2hhbm5lbHMsIHNhbXBsZVJhdGV9ID0gYnVmZmVyO1xuXHRyZXR1cm4gbmV3IE9mZmxpbmVDb250ZXh0KG51bWJlck9mQ2hhbm5lbHMsIGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKS5sZW5ndGgsIHNhbXBsZVJhdGUpO1xufVxuXG4vLyBBYnN0cmFjdCBzdXBlciBjbGFzcyBmb3IgYSBmaWx0ZXIgb2JqZWN0LlxuY2xhc3MgRmlsdGVyQmFzZSB7XG5cdGNvbnN0cnVjdG9yKHRlbXBsYXRlKSB7XG5cdFx0dGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHR9XG5cblx0b3Blbkd1aSh3aGVyZVRvUHV0KSB7XG5cdFx0JCh3aGVyZVRvUHV0KS5hcHBlbmQgKHRoaXMudGVtcGxhdGUoKSk7XG5cdH1cblxuXHQvLyBHZXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgYWxsIHRoZSBmaWx0ZXIgcGFyYW1ldGVycy5cblx0Z2V0U3RhdGUoKSB7XG5cdFx0cmV0dXJuIHt9O1xuXHR9XG5cblx0Ly8gU2V0IHRoZSBzdGF0ZSBvZiB0aGUgZmlsdGVyIHBhcmFtZXRlcnMgdG8gdGhlIGZpbHRlciBjaGFpblxuXHRhcHBseVN0YXRlKHN0YXRlKSB7XG5cdFx0XG5cdH1cblxuXHRjcmVhdGVGaWx0ZXJzKGN0eCkge1xuXHRcdHRoaXMuZmlsdGVycyA9IFtdO1xuXHR9XG5cblx0Y29ubmVjdEZpbHRlcnMoc291cmNlLCBkZXN0KSB7XG5cdFx0dGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdFx0dGhpcy5kZXN0ID0gZGVzdDtcblx0XHRpZih0aGlzLmZpbHRlcnMpIHtcblx0XHRcdGxldCBwcmV2RmlsdGVyID0gc291cmNlO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbHRlcnMubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0bGV0IHRoaXNGaWx0ZXIgPSB0aGlzLmZpbHRlcnNbaV07XG5cdFx0XHRcdHByZXZGaWx0ZXIuY29ubmVjdCh0aGlzRmlsdGVyKTtcblx0XHRcdFx0cHJldkZpbHRlciA9IHRoaXNGaWx0ZXI7XG5cdFx0XHR9XG5cdFx0XHRwcmV2RmlsdGVyLmNvbm5lY3QoZGVzdCk7XG5cdFx0fVxuXHR9XG5cblx0ZGlzY29ubmVjdEZpbHRlcnMoKSB7XG5cdFx0aWYgKHRoaXMuZmlsdGVycykge1xuXHRcdFx0dGhpcy5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGZpbHRlcikge1xuXHRcdFx0XHRmaWx0ZXIgJiYgZmlsdGVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBSZWNvbm5lY3QgdGhlIGRpcmVjdCBwYXRoXG5cdFx0dGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmRlc3QpO1xuXHR9XG59O1xuXG5jbGFzcyBGaWx0ZXJGcmFtZSB7XG4gIGNvbnN0cnVjdG9yKHdhdmUpIHtcblx0XHR0aGlzLndhdmUgPSB3YXZlO1xuICB9XG5cbiAgY2xvc2UoKSB7XG5cdGlmKHRoaXMuZmlsdGVyKSB7XG5cdFx0dGhpcy5maWx0ZXIuZGlzY29ubmVjdEZpbHRlcnMoKTtcblx0XHR0aGlzLmZpbHRlciA9IHVuZGVmaW5lZDtcblx0fVxuICB9XG5cbiAgY29ubmVjdFRvV2F2ZSgpIHtcblx0dGhpcy53YXZlLmJhY2tlbmQuYW5hbHlzZXIuZGlzY29ubmVjdCgpO1xuXHR0aGlzLmZpbHRlci5jb25uZWN0RmlsdGVycyh0aGlzLndhdmUuYmFja2VuZC5hbmFseXNlciwgdGhpcy53YXZlLmJhY2tlbmQuZ2Fpbk5vZGUpO1xuICB9XG5cblxuICBvcGVuKGZpbHRlckNsYXNzKSB7XG5cdFx0dGhpcy5maWx0ZXJDbGFzcyA9IGZpbHRlckNsYXNzO1xuXHRcdHRoaXMuZmlsdGVyID0gbmV3IGZpbHRlckNsYXNzKCk7XG5cdFx0JCgnI3Byb2Ntb2RzJykuZW1wdHkoKTtcblx0XHRsZXQgZnJhbWVUZXh0ID0gZmlsdGVyX2ZyYW1lX3RlbXBsYXRlKCk7XG5cdFx0JCgnI3Byb2Ntb2RzJykuYXBwZW5kKGZyYW1lVGV4dCk7XG5cdFx0dGhpcy5maWx0ZXIuY3JlYXRlRmlsdGVycyh0aGlzLndhdmUuYXVkaW9Db250ZXh0KTtcblx0XHR0aGlzLmZpbHRlci5vcGVuR3VpKCcjZmlsdGVyYm9keScpO1xuXHRcdHRoaXMuY29ubmVjdFRvV2F2ZSgpXG5cdFx0dGhpcy5vcGVuR3VpKCk7XG5cdH1cblxuXHRvcGVuR3VpKCkge1xuXHQkKCcjZmxfY2FuY2VsJykub24oJ2NsaWNrJywgZT0+e1xuXHRcdHRoaXMuY29ubmVjdFRvV2F2ZSgpO1xuXHRcdGlmKHRoaXMuZmlsdGVyKSB7XG5cdFx0XHR0aGlzLmZpbHRlci5kaXNjb25uZWN0RmlsdGVycygpO1xuXHRcdH1cblx0XHQkKCcjcHJvY21vZHMnKS5lbXB0eSgpO1xuXHR9KTtcblxuXHQkKCcjZmxfYXVkaXRpb24nKS5vbignY2xpY2snLCBlPT57XG5cdFx0aWYgKGUudGFyZ2V0LmNoZWNrZWQpIHtcblx0XHRcdHRoaXMuY29ubmVjdFRvV2F2ZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmZpbHRlci5kaXNjb25uZWN0RmlsdGVycygpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnI2ZsX2FwcGx5Jykub24oJ2NsaWNrJywgZT0+e1xuXHRcdCQoJyNmbF9hdWRpdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cdFx0dGhpcy5hcHBseUZpbHRlcnMoKTtcblx0XHR0aGlzLmZpbHRlci5kaXNjb25uZWN0RmlsdGVycygpO1xuXHR9KTtcbiAgfVxuXG4gIGFwcGx5RmlsdGVycygpIHtcblx0bGV0IHdvcmtpbmcgPSB0aGlzLndhdmUuY29weVNlbGVjdGVkKCk7XG5cdGxldCBjdHggPSBjcmVhdGVPZmZsaW5lQ29udGV4dCh3b3JraW5nKTtcblxuXHQvLyBjcmVhdGUgb2ZmbGluZSB2ZXJzaW9uIG9mIGZpbHRlciBjaGFpbi5cblx0bGV0IG9mZmxpbmVGaWx0ZXIgPSBuZXcgdGhpcy5maWx0ZXJDbGFzcygpO1xuXHRvZmZsaW5lRmlsdGVyLmNyZWF0ZUZpbHRlcnMoY3R4KTtcblxuXHQvLyBDcmVhdGUgc2ltdWxhdGVkIHdhdmVzdXJmZXIgZmlsdGVyIGVudmlyb25tZW50LlxuXHRsZXQgb2ZmbGluZVNvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcblx0b2ZmbGluZUZpbHRlci5jb25uZWN0RmlsdGVycyhvZmZsaW5lU291cmNlLCBjdHguZGVzdGluYXRpb24pO1xuXG5cdGxldCBzdGF0ZSA9IHRoaXMuZmlsdGVyLmdldFN0YXRlKCk7XG5cdG9mZmxpbmVGaWx0ZXIuYXBwbHlTdGF0ZShzdGF0ZSk7XG5cblx0b2ZmbGluZVNvdXJjZS5idWZmZXIgPSB3b3JraW5nO1xuXHRsZXQgdGhhdCA9IHRoaXM7XG5cdGN0eC5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcblx0XHR0aGF0LndhdmUucGFzdGVTZWxlY3RlZChlLnJlbmRlcmVkQnVmZmVyKTtcblx0fVxuXHRvZmZsaW5lU291cmNlLnN0YXJ0KCk7XG5cdGN0eC5zdGFydFJlbmRlcmluZygpO1xuICB9XG5cbn07XG5cbmV4cG9ydCB7RmlsdGVyQmFzZSwgRmlsdGVyRnJhbWV9O1xuIiwiaW1wb3J0ICQgZnJvbScuL2pzL2pxdWVyeS0zLjIuMS5taW4uanMnO1xuaW1wb3J0IGtub2IgZnJvbScuL2pzL2pxdWVyeS5rbm9iLmpzJztcbmltcG9ydCB7RmlsdGVyQmFzZX0gZnJvbSAnLi9GaWx0ZXJzLmpzJztcbmltcG9ydCB7cmV2ZXJiX3RlbXBsYXRlfSBmcm9tJy4vdGVtcGxhdGVzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2ltcGxlUmV2ZXJiRmlsdGVyIGV4dGVuZHMgRmlsdGVyQmFzZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuXHRzdXBlcihyZXZlcmJfdGVtcGxhdGUpO1xuXHR0aGlzLnJldmVyc2UgPSAwO1xuXHR0aGlzLnNlY29uZHMgPSAzO1xuXHR0aGlzLmRlY2F5ID0gMjtcblx0dGhpcy5kcnlsZXZlbCA9IDU7XG5cdHRoaXMud2V0bGV2ZWwgPSA1O1xuICB9XG5cbiAgY3JlYXRlRmlsdGVycyhjdHgpIHtcbiBcdHRoaXMuZHJ5R2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7XG4gXHR0aGlzLmRyeUdhaW4uZ2Fpbi52YWx1ZSA9IDAuNTtcbiBcdHRoaXMud2V0R2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7XG4gXHR0aGlzLndldEdhaW4uZ2Fpbi52YWx1ZSA9IDAuNTtcblx0dGhpcy5jb252b2x2ZXIgPSBjdHguY3JlYXRlQ29udm9sdmVyKCk7XG5cdHRoaXMuY3R4ID0gY3R4O1xuXHR0aGlzLmJ1aWxkSW1wdWxzZSgpO1xuICB9XG5cbiAgY29ubmVjdEZpbHRlcnMoc291cmNlLCBkZXN0KSB7XG5cdFx0dGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdFx0dGhpcy5kZXN0ID0gZGVzdDtcblx0XHRcblx0XHR0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZHJ5R2Fpbik7XG5cdFx0dGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmNvbnZvbHZlcik7XG5cdFx0dGhpcy5kcnlHYWluLmNvbm5lY3QodGhpcy5kZXN0KTtcblx0XHR0aGlzLmNvbnZvbHZlci5jb25uZWN0KHRoaXMud2V0R2Fpbik7XG5cdFx0dGhpcy53ZXRHYWluLmNvbm5lY3QodGhpcy5kZXN0KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RGaWx0ZXJzKCkge1xuXHRcdHRoaXMuZHJ5R2Fpbi5kaXNjb25uZWN0KCk7XG5cdFx0dGhpcy53ZXRHYWluLmRpc2Nvbm5lY3QoKTtcblx0XHR0aGlzLmNvbnZvbHZlci5kaXNjb25uZWN0KCk7XG5cdFx0dGhpcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xuXG5cdFx0Ly8gUmVjb25uZWN0IHRoZSBkaXJlY3QgcGF0aFxuXHRcdHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5kZXN0KTtcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuXHQgIHJldHVybiB7XG5cdFx0c2Vjb25kczogXHR0aGlzLnNlY29uZHMsXG5cdFx0ZGVjYXk6XHRcdHRoaXMuZGVjYXksXG5cdFx0cmV2ZXJzZTpcdHRoaXMucmV2ZXJzZSxcblx0XHRkcnlsZXZlbDpcdHRoaXMuZHJ5bGV2ZWwsXG5cdFx0d2V0bGV2ZWw6XHR0aGlzLndldGxldmVsLFxuXHQgIH07XG5cdH1cblxuICBhcHBseVN0YXRlKHN0YXRlKSB7XG5cdFx0dGhpcy5zZWNvbmRzID0gc3RhdGUuc2Vjb25kcztcblx0XHR0aGlzLmRlY2F5ID0gc3RhdGUuZGVjYXk7XG5cdFx0dGhpcy5yZXZlcnNlID0gc3RhdGUucmV2ZXJzZTtcblx0XHR0aGlzLmRyeWxldmVsID0gc3RhdGUuZHJ5bGV2ZWw7XG5cdFx0dGhpcy5kcnlHYWluLmdhaW4udmFsdWUgPSBzdGF0ZS5kcnlsZXZlbCAvIDEwO1xuXHRcdHRoaXMud2V0R2Fpbi5nYWluLnZhbHVlID0gc3RhdGUud2V0bGV2ZWwgLyAxMDtcblx0XHR0aGlzLmJ1aWxkSW1wdWxzZSgpO1xuXHR9XG5cbiAgYnVpbGRJbXB1bHNlICgpIHtcblx0bGV0IHJhdGUgPSB0aGlzLmN0eC5zYW1wbGVSYXRlO1xuXHRsZXQgbGVuZ3RoID0gcmF0ZSAqIHRoaXMuc2Vjb25kc1xuXHRsZXQgZGVjYXkgPSB0aGlzLmRlY2F5XG5cdGxldCBpbXB1bHNlID0gdGhpcy5jdHguY3JlYXRlQnVmZmVyKDIsIGxlbmd0aCwgcmF0ZSlcblx0bGV0IGltcHVsc2VMID0gaW1wdWxzZS5nZXRDaGFubmVsRGF0YSgwKTtcblx0bGV0IGltcHVsc2VSID0gaW1wdWxzZS5nZXRDaGFubmVsRGF0YSgxKTtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0bGV0IG4gPSB0aGlzLnJldmVyc2UgPyBsZW5ndGggLSBpIDogaTtcblx0XHRpbXB1bHNlTFtpXSA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogTWF0aC5wb3coMSAtIG4gLyBsZW5ndGgsIGRlY2F5KTtcblx0XHRpbXB1bHNlUltpXSA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogTWF0aC5wb3coMSAtIG4gLyBsZW5ndGgsIGRlY2F5KTtcblx0IH1cblx0dGhpcy5jb252b2x2ZXIuYnVmZmVyID0gaW1wdWxzZTtcblx0dGhpcy5jb252b2x2ZXIubm9ybWFsaXplID0gdHJ1ZTtcbiAgfVxuXG4gIG9wZW5HdWkod2hlcmVUb1B1dCkge1xuXHRcdHN1cGVyLm9wZW5HdWkod2hlcmVUb1B1dCk7XG5cdFx0bGV0IHRoYXQgPSB0aGlzO1xuXHRcdCQoXCIuZGlhbFwiKS5rbm9iKHtjaGFuZ2U6IGZ1bmN0aW9uICh2KSB7XG5cdFx0XHRsZXQgaW5wID0gdGhpcy5pWzBdO1xuXHRcdFx0bGV0IGN0bElkID0gaW5wLmdldEF0dHJpYnV0ZSgnaWQnKS5zdWJzdHJpbmcoMyk7XG5cdFx0XHR0aGF0W2N0bElkXSA9IHY7XG5cdFx0XHRpZiAoY3RsSWQgPT09ICdkcnlsZXZlbCcpIHtcblx0XHRcdFx0dGhhdC5kcnlHYWluLmdhaW4udmFsdWUgPSB2IC8gMTA7XG5cdFx0XHR9IGVsc2UgaWYgKGN0bElkID09PSAnd2V0bGV2ZWwnKSB7XG5cdFx0XHRcdHRoYXQud2V0R2Fpbi5nYWluLnZhbHVlID0gdiAvIDEwO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhhdC5idWlsZEltcHVsc2UoKTtcblx0XHRcdH1cblx0XHR9fSk7XG4gIH1cbn07XG5cbiIsIi8vIEEgZ2VuZXJhbGl6ZWQgJ1VuZG8gc3RhY2snIHdoaWNoIGNhbiBrZWVwIE4gbGV2ZWxzIG9mIHJldmVydGFibGUgc3RhdGUuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVbmRvU3RhY2sge1xuXHRjb25zdHJ1Y3RvcihsaW1pdCkge1xuXHRcdHRoaXMuc3RhY2sgPSBbXTtcblx0XHR0aGlzLmluZGV4ID0gLTE7XG5cdFx0dGhpcy5saW1pdCA9IGxpbWl0O1xuXHR9XG5cdFxuXHRhdFRvcCgpIHtcblx0XHRyZXR1cm4gdGhpcy5pbmRleCA9PT0gLTE7XG5cdH1cblxuXHRjYW5VbmRvKCkge1xuXHRcdGlmKHRoaXMuc3RhY2subGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIHRoaXMuaW5kZXggPT09IC0xIHx8IHRoaXMuaW5kZXggPiAwO1xuXHR9XG5cblx0Y2FuUmVkbygpIHtcblx0XHRpZih0aGlzLnN0YWNrLmxlbmd0aCA9PT0gMCB8fCB0aGlzLmluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiB0aGlzLmluZGV4IDwgdGhpcy5zdGFjay5sZW5ndGggLSAxO1xuXHR9XG5cblx0cHVzaChpdGVtKSB7XG5cdFx0aWYgKHRoaXMuaW5kZXggPj0gMCkge1xuXHRcdFx0d2hpbGUgKHRoaXMuaW5kZXggPCB0aGlzLnN0YWNrLmxlbmd0aCkgdGhpcy5zdGFjay5wb3AoKTtcblx0XHRcdHRoaXMuaW5kZXggPSAtMTtcblx0XHR9XG5cdFx0aWYgKHRoaXMubGltaXQgJiYgdGhpcy5zdGFjay5sZW5ndGggPiB0aGlzLmxpbWl0KSB7XG5cdFx0XHR0aGlzLnN0YWNrLnNoaWZ0KCk7XG5cdFx0fVxuXHRcdHRoaXMuc3RhY2sucHVzaChpdGVtKTtcblx0fVxuXG5cdHVuZG8oKSB7XG5cdFx0aWYgKHRoaXMuc3RhY2subGVuZ3RoID09PSAwKSByZXR1cm4gdW5kZWZpbmVkO1xuXHRcdGlmICh0aGlzLmluZGV4ID09PSAtMSkgeyAvLyBzdGFydCBvbmUgYmVoaW5kIHRoZSByZWRvIGJ1ZmZlclxuXHRcdFx0dGhpcy5pbmRleCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaW5kZXggPiAwKSB0aGlzLmluZGV4LS07XG5cdFx0bGV0IHYgPSB0aGlzLnN0YWNrW3RoaXMuaW5kZXhdO1xuXHRcdHJldHVybiB2O1xuXHR9XG5cblx0cmVkbygpIHtcblx0XHRpZiAodGhpcy5zdGFjay5sZW5ndGggPT09IDAgfHwgdGhpcy5pbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWQ7XG5cdFx0bGV0IG5leHRYID0gdGhpcy5pbmRleCArIDE7XG5cdFx0aWYgKG5leHRYID49IHRoaXMuc3RhY2subGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuXHRcdHRoaXMuaW5kZXggPSBuZXh0WDtcblx0XHRyZXR1cm4gdGhpcy5zdGFja1t0aGlzLmluZGV4XTtcblx0fVxufTtcblxudmFyIHVuZG9TdGFjayA9IG5ldyBVbmRvU3RhY2soMTApO1xuXG5leHBvcnQge3VuZG9TdGFja307IiwiaW1wb3J0ICQgZnJvbScuL2pzL2pxdWVyeS0zLjIuMS5taW4uanMnO1xuaW1wb3J0IFdhdmVTdXJmZXIgZnJvbSAnLi9qcy93YXZlc3VyZmVyLmpzJztcbmltcG9ydCBUaW1lbGluZVBsdWdpbiBmcm9tJy4vanMvcGx1Z2lucy93YXZlc3VyZmVyLnRpbWVsaW5lLmpzJztcbmltcG9ydCBSZWdpb25QbHVnaW4gIGZyb20nLi9qcy9wbHVnaW5zL3dhdmVzdXJmZXIucmVnaW9ucy5qcyc7XG5pbXBvcnQgTWluaW1hcCBmcm9tJy4vanMvcGx1Z2lucy93YXZlc3VyZmVyLm1pbmltYXAuanMnO1xuaW1wb3J0IHtUaWxlZFJlbmRlcmVyLCB0aWxlZERyYXdCdWZmZXJ9IGZyb20gJy4vanMvcGx1Z2lucy93YXZlc3VyZmVyLnRpbGVkcmVuZGVyZXIuanMnO1xuaW1wb3J0IHthdWRpb0N0eCwgT2ZmbGluZUNvbnRleHR9IGZyb20gJy4vQXVkaW9DdHguanMnO1xuaW1wb3J0IHt1bmRvU3RhY2t9IGZyb20gJy4vVW5kb1N0YWNrLmpzJztcblxuZnVuY3Rpb24gc2Vjb25kc1RvU2FtcGxlTnVtKHQsIGJ1ZmZlcikge1xuXHRsZXQgc24gPSB0ICogYnVmZmVyLnNhbXBsZVJhdGU7XG5cdGlmIChzbiA8IDApIHJldHVybiAwO1xuXHRpZiAoc24gPiBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCkubGVuZ3RoKSByZXR1cm4gYnVmZmVyLmdldENoYW5uZWxEYXRhKDApLmxlbmd0aFxuXHRyZXR1cm4gTWF0aC5yb3VuZChzbik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhdmUge1xuXHRjb25zdHJ1Y3Rvcihyb290RGl2SWQpIHtcblx0XHR0aGlzLnJvb3REaXZJZCA9IHJvb3REaXZJZDtcblx0fVxuXG5cdHJlZHJhd1dhdmUoKVxuXHR7XG5cdFx0dGhpcy5zdXJmZXIuZHJhd0J1ZmZlcigpO1xuXHRcdHRoaXMuc3VyZmVyLm1pbmltYXAucmVuZGVyKCk7XG5cdH1cblxuXHRvcGVuT25CdWZmZXIoZGVjb2RlZCkge1xuLy9cdHZhciB0aWxlZFJlbmRlcmVyID0gbmV3IFRpbGVkUmVuZGVyZXIuZGVmYXVsdCgpO1xuXHR2YXIgcGx1Z3MgPSAgW1xuXHRcdFRpbWVsaW5lUGx1Z2luLmNyZWF0ZSh7XG5cdFx0XHRjb250YWluZXI6ICcjd2F2ZWZvcm0tdGltZWxpbmUnXG5cdFx0XHR9KSxcblx0XHRSZWdpb25QbHVnaW4uY3JlYXRlKHtcblx0XHRcdGRyYWdTZWxlY3Rpb246IGZhbHNlLFxuXHRcdFx0fSksXG5cdFx0XHRcblx0XHRNaW5pbWFwLmNyZWF0ZSh7XG5cdFx0XHRjb250YWluZXI6ICcjbWluaW1hcCcsXG5cdFx0XHRoZWlnaHQ6IDMwLFxuXHRcdFx0YmFySGVpZ2h0OiAxLjQsXG5cdFx0XHRpbnRlcmFjdDpcdHRydWUsXG5cdFx0XHQvLyBzaG93T3ZlcnZpZXc6IHRydWUsXG5cdFx0XHR9KVxuXHRcdF07XG5cblx0JCgnI3dhdmVmb3JtJykuZW1wdHkoKTtcblx0JCgnI3dhdmVmb3JtLXRpbWVsaW5lJykuZW1wdHkoKTtcblx0JCgnI21pbmltYXAnKS5lbXB0eSgpO1xuXG5cdHRoaXMuc3VyZmVyID0gV2F2ZVN1cmZlci5jcmVhdGUoe1xuXHRcdGNvbnRhaW5lcjpcdFx0JyN3YXZlZm9ybScsXG5cdFx0d2F2ZUNvbG9yOlx0XHQndmlvbGV0Jyxcblx0XHRwcm9ncmVzc0NvbG9yOlx0J3B1cnBsZScsXG5cdFx0c3BsaXRDaGFubmVsczpcdHRydWUsXG5cdFx0aW50ZXJhY3Q6XHRcdGZhbHNlLFxuXHRcdGZpbGxQYXJlbnQ6XHRcdGZhbHNlLFxuXHRcdHNjcm9sbFBhcmVudDpcdHRydWUsXG5cdFx0cGx1Z2luczpcdFx0cGx1Z3MsXG5cdFx0cGFydGlhbFJlbmRlcjogIGZhbHNlLFxuXHRcdHJlbmRlcmVyOlx0XHQgVGlsZWRSZW5kZXJlcixcblx0XHQvLyBiYXJXaWR0aDpcdFx0MSxcblx0fSk7XG4vLyBQYXRjaCBpbiBhbiBvdmVycmlkZSB0byB0aGUgZHJhd0J1ZmZlciBmdW5jdGlvbi5cblx0dGhpcy5zdXJmZXIuZHJhd0J1ZmZlciA9IHRpbGVkRHJhd0J1ZmZlcjtcblxuXHR0aGlzLnN1cmZlci5sb2FkQmxvYihkZWNvZGVkKTtcblxuLy8gRXhwb3NlIHNvbWUgd2F2ZXN1cmZlciBvYmplY3RzOlxuXHR0aGlzLmJhY2tlbmQgPSB0aGlzLnN1cmZlci5iYWNrZW5kO1xuXHR0aGlzLmF1ZGlvQ29udGV4dCA9IHRoaXMuc3VyZmVyLmJhY2tlbmQuYWM7XG5cblx0bGV0IHRoYXQgPSB0aGlzO1xuXHR0aGlzLnN1cmZlci5vbigncmVhZHknLCBmdW5jdGlvbiAoKSB7XG5cdFx0bGV0IGJ1ZiA9IHRoYXQuc3VyZmVyLmJhY2tlbmQuYnVmZmVyO1xuXHRcdGxldCBkYXQgPSBidWYuZ2V0Q2hhbm5lbERhdGEoMCk7XG5cdFx0XG5cdFx0bGV0IGR1ciA9IHRoYXQuc3VyZmVyLmdldER1cmF0aW9uKCk7XG5cdFx0bGV0IHcgPSB0aGF0LnN1cmZlci5kcmF3ZXIuZ2V0V2lkdGgoKTtcblx0XHRpZiAoZHVyICE9PSAwKSB7XG5cdFx0XHRsZXQgcHBzID0gdyAvIGR1ciAqIDAuOTtcblx0XHRcdHRoYXQuc3VyZmVyLnpvb20ocHBzKTtcblx0XHR9XG5cdFx0dGhhdC5kaXNhYmxlV2F2ZVRyYWNrZXIgPSB0aGF0LnNldHVwV2F2ZVRyYWNrZXIoKTtcblxuXHRcdC8vIHRoYXQuc3RhcnRHdWlDaGVjaygpO1xuXHR9KVxufVx0XG5cbiAgZ2V0U2VsZWN0aW9uKCkge1xuXHRsZXQgYnVmZmVyID0gdGhpcy5zdXJmZXIuYmFja2VuZC5idWZmZXI7XG5cdGxldCBzcmNMZW4gPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCkubGVuZ3RoO1xuXHRsZXQgcmVnaW9uTWFwID0gdGhpcy5zdXJmZXIucmVnaW9ucy5saXN0O1xuXHRcblx0bGV0IHN0YXJ0VCA9IDA7XG5cdGxldCByZWdpb25hbCA9IGZhbHNlO1xuXHRsZXQgZHVyID0gIHRoaXMuc3VyZmVyLmdldER1cmF0aW9uKClcblx0bGV0IGVuZFQgPSBkdXI7XG5cdGxldCBwcm9nUyA9IHRoaXMuc3VyZmVyLmRyYXdlci5wcm9ncmVzcygpICogZW5kVDtcblx0bGV0IHJlZ2lvbiA9IHJlZ2lvbk1hcFtmdW5jdGlvbigpIHsgZm9yICh2YXIgayBpbiByZWdpb25NYXApIHJldHVybiBrIH0oKV07XG5cdGxldCBjdXJzb3JUaW1lID0gdGhpcy5zdXJmZXIuZ2V0Q3VycmVudFRpbWUoKTtcblxuXHRpZiAocmVnaW9uICYmIHJlZ2lvbi5zdGFydCA8IHJlZ2lvbi5lbmQpIHtcblx0XHRzdGFydFQgPSByZWdpb24uc3RhcnQ7XG5cdFx0ZW5kVCA9IHJlZ2lvbi5lbmQ7XG5cdFx0cmVnaW9uYWwgPSB0cnVlO1xuXHR9XG5cdGxldCBjdXJzb3JQb3MgPSBzZWNvbmRzVG9TYW1wbGVOdW0oY3Vyc29yVGltZSwgYnVmZmVyKTtcblx0bGV0IHN0YXJ0UyA9IHNlY29uZHNUb1NhbXBsZU51bShzdGFydFQsIGJ1ZmZlcik7XG5cdGxldCBlbmRTID0gc2Vjb25kc1RvU2FtcGxlTnVtKGVuZFQsIGJ1ZmZlcik7XG5cblx0cmV0dXJuIHtcblx0XHRsZW5ndGg6IHNyY0xlbixcblx0XHRyZWdpb25hbDogcmVnaW9uYWwsXG5cdFx0c3RhcnQ6XHRzdGFydFQsXG5cdFx0ZW5kOlx0ZW5kVCxcblx0XHRmaXJzdDogIHN0YXJ0Uyxcblx0XHRsYXN0Olx0ZW5kUyxcblx0XHRwcm9ncmVzczogcHJvZ1MsXG5cdFx0cmVnaW9uOiByZWdpb24sXG5cdFx0Y3Vyc29yVGltZTogY3Vyc29yVGltZSxcblx0XHRjdXJzb3JQb3M6IFx0Y3Vyc29yUG9zLFxuXHRcdGR1cmF0aW9uOlx0ZHVyLFxuXHR9O1xufVxuXG4gIHNldHVwV2F2ZVRyYWNrZXIoKSB7XG5cdHZhciByZWdpb247XG5cdHZhciBkcmFnQWN0aXZlO1xuXHR2YXIgdDA7XG5cdHZhciB0MTtcblx0dmFyIGR1cmF0aW9uO1xuXHR2YXIgc2Nyb2xsID0gdGhpcy5zdXJmZXIucGFyYW1zLnNjcm9sbFBhcmVudDtcblx0dmFyIHNjcm9sbFNwZWVkID0gdGhpcy5zdXJmZXIucGFyYW1zLnNjcm9sbFNwZWVkIHx8IDE7XG5cdHZhciBzY3JvbGxUaHJlc2hvbGQgPSB0aGlzLnN1cmZlci5wYXJhbXMuc2Nyb2xsVGhyZXNob2xkIHx8IDEwO1xuXHR2YXIgbWF4U2Nyb2xsID0gdm9pZCAwO1xuXHR2YXIgc2Nyb2xsRGlyZWN0aW9uID0gdm9pZCAwO1xuXHR2YXIgd3JhcHBlclJlY3QgPSB2b2lkIDA7XG5cdHZhciB3cmFwcGVyID0gdGhpcy5zdXJmZXIuZHJhd2VyLndyYXBwZXI7XG5cdHZhciByZXBlYXRlcjtcblx0XG5cdHZhciB0aGF0ID0gdGhpcztcblxuXHR2YXIgcmFuZ2VVcGRhdGVyID0gZnVuY3Rpb24oZSkge1xuXHRcdHQxID0gdGhhdC5zdXJmZXIuZHJhd2VyLmhhbmRsZUV2ZW50KGUpO1xuXHRcdGxldCB0UyA9IHQwO1xuXHRcdGxldCB0RSA9IHQxO1xuXHRcdGlmICh0MSA8IHQwKSB7XG5cdFx0XHR0UyA9IHQxO1xuXHRcdFx0dEUgPSB0MDtcblx0XHRcdHRoYXQuc3VyZmVyLnNlZWtUbyh0MSk7XG5cdFx0fVxuXHRcdHJlZ2lvbi51cGRhdGUoe1xuXHRcdFx0c3RhcnQ6XHR0UyAqIGR1cmF0aW9uLFxuXHRcdFx0ZW5kOlx0dEUgKiBkdXJhdGlvblxuXHRcdH0pO1xuXHR9XG5cblx0dmFyIGVkZ2VTY3JvbGwgPSBmdW5jdGlvbiBlZGdlU2Nyb2xsKGUpIHtcblx0XHRpZiAoIXJlZ2lvbiB8fCAhc2Nyb2xsRGlyZWN0aW9uKSByZXR1cm47XG5cblx0Ly8gVXBkYXRlIHNjcm9sbCBwb3NpdGlvblxuXHRcdHZhciBzY3JvbGxMZWZ0ID0gd3JhcHBlci5zY3JvbGxMZWZ0ICsgc2Nyb2xsU3BlZWQgKiBzY3JvbGxEaXJlY3Rpb247XG5cdFx0dmFyIG5leHRMZWZ0ID0gIE1hdGgubWluKG1heFNjcm9sbCwgTWF0aC5tYXgoMCwgc2Nyb2xsTGVmdCkpO1xuXHRcdHdyYXBwZXIuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQgPSBNYXRoLm1pbihtYXhTY3JvbGwsIE1hdGgubWF4KDAsIHNjcm9sbExlZnQpKTtcblx0XHRyYW5nZVVwZGF0ZXIoZSk7XG5cdFx0Ly8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBtb3JlIHRvIHNjcm9sbCBhbmQgcmVwZWF0XG5cdFx0aWYoc2Nyb2xsTGVmdCA8IG1heFNjcm9sbCAmJiBzY3JvbGxMZWZ0ID4gMCkge1xuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRlZGdlU2Nyb2xsKGUpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBldmVudE1vdmUgPSBmdW5jdGlvbiAoZSkge1xuXHRcdGlmICghZHJhZ0FjdGl2ZSkgcmV0dXJuO1xuXHRcdHJhbmdlVXBkYXRlcihlKTtcblx0XHQvLyBJZiBzY3JvbGxpbmcgaXMgZW5hYmxlZFxuXHRcdGlmIChzY3JvbGwgJiYgdGhhdC5zdXJmZXIuZHJhd2VyLmNvbnRhaW5lci5jbGllbnRXaWR0aCA8IHdyYXBwZXIuc2Nyb2xsV2lkdGgpIHtcblx0XHRcdC8vIENoZWNrIHRocmVzaG9sZCBiYXNlZCBvbiBtb3VzZVxuXHRcdFx0dmFyIHggPSBlLmNsaWVudFggLSB3cmFwcGVyUmVjdC5sZWZ0O1xuXHRcdFx0aWYgKHggPD0gc2Nyb2xsVGhyZXNob2xkKSB7XG5cdFx0XHRcdHNjcm9sbERpcmVjdGlvbiA9IC0xO1xuXHRcdFx0fSBlbHNlIGlmICh4ID49IHdyYXBwZXJSZWN0LnJpZ2h0IC0gc2Nyb2xsVGhyZXNob2xkKSB7XG5cdFx0XHRcdHNjcm9sbERpcmVjdGlvbiA9IDE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzY3JvbGxEaXJlY3Rpb24gPSBudWxsO1xuXHRcdFx0fVxuXHRcdFx0c2Nyb2xsRGlyZWN0aW9uICYmIGVkZ2VTY3JvbGwoZSk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIGV2ZW50VXAgPSBmdW5jdGlvbiAoZSkge1xuXHRcdGRyYWdBY3RpdmUgPSBmYWxzZTtcblx0XHRpZiAocmVnaW9uKSB7XG5cdFx0XHRyZWdpb24uZmlyZUV2ZW50KCd1cGRhdGUtZW5kJywgZSk7XG5cdFx0XHR0aGF0LnN1cmZlci5maXJlRXZlbnQoJ3JlZ2lvbi11cGRhdGUtZW5kJywgcmVnaW9uLCBlKTtcblx0XHR9XG5cdFx0cmVnaW9uID0gbnVsbDtcblx0XHRsZXQgd2luID0gJCh3aW5kb3cpOyAvLyBkaXNjb25uZWN0IGxpc3RlbmVycy5cblx0XHR3aW4ub2ZmKCdtb3VzZW1vdmUnLCBldmVudE1vdmUpO1xuXHRcdHdpbi5vZmYoJ3RvdWNobW92ZScsIGV2ZW50TW92ZSk7XG5cdFx0d2luLm9mZignbW91c2V1cCcsIGV2ZW50VXApO1xuXHRcdHdpbi5vZmYoJ3RvdWNoZW5kJywgZXZlbnRVcCk7XG5cdH1cblxuXG5cdHZhciBldmVudERvd24gPSBmdW5jdGlvbiAoZSkge1xuXHRcdGR1cmF0aW9uID0gdGhhdC5zdXJmZXIuZ2V0RHVyYXRpb24oKTtcblx0XHQvLyBGaWx0ZXIgb3V0IGV2ZW50cyBpbnRlbmRlZCBmb3IgdGhlIHNjcm9sbCBiYXJcblx0XHRsZXQgaGFzU2Nyb2xsID0gdGhhdC5zdXJmZXIucGFyYW1zLnNjcm9sbFBhcmVudDtcblx0XHRsZXQgciA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0aWYgKGhhc1Njcm9sbCAmJiBlLmNsaWVudFkgPiAoci5ib3R0b20gLSAxNikpIHJldHVybjsgLy8gKioqIEpGRiBIYWNrIG1hZ2ljIG51bWJlci5cblxuXHRcdG1heFNjcm9sbCA9IHdyYXBwZXIuc2Nyb2xsV2lkdGggLSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuXHRcdHdyYXBwZXJSZWN0ID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdHQwID0gdGhhdC5zdXJmZXIuZHJhd2VyLmhhbmRsZUV2ZW50KGUpO1xuXG5cdFx0bGV0IHhEID0gZS5jbGllbnRYO1xuXG5cdFx0aWYgKGhhc1Njcm9sbCkge1xuXHRcdFx0eEQgKz0gd3JhcHBlci5zY3JvbGxMZWZ0O1xuXHRcdH1cblxuXHRcdHQxID0gdDA7XG5cdFx0aWYgKHRoYXQuc3VyZmVyLmlzUGxheWluZygpKSB7XG5cdFx0XHRkcmFnQWN0aXZlID0gZmFsc2U7XG5cdFx0XHRsZXQgcHJvZ3Jlc3MgPSB0aGF0LnN1cmZlci5kcmF3ZXIuaGFuZGxlRXZlbnQoZSk7XG5cdFx0XHR0aGF0LnN1cmZlci5zZWVrVG8ocHJvZ3Jlc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkcmFnQWN0aXZlID0gdHJ1ZTtcblx0XHRcdHRoYXQuc3VyZmVyLnJlZ2lvbnMuY2xlYXIoKTtcblx0XHRcdHRoYXQuc3VyZmVyLnNlZWtUbyh0MCk7XG5cdFx0XHRsZXQgcG9zID0ge1xuXHRcdFx0XHRzdGFydDpcdHQwICogZHVyYXRpb24sXG5cdFx0XHRcdGVuZDpcdHQxICogZHVyYXRpb24sXG5cdFx0XHRcdGRyYWc6XHRmYWxzZSxcblx0XHRcdFx0cmVzaXplOiBmYWxzZSxcblx0XHRcdH07XG5cdFx0XHRyZWdpb24gPSB0aGF0LnN1cmZlci5yZWdpb25zLmFkZChwb3MpO1xuXHRcdH1cblx0XHRsZXQgd2luID0gJCh3aW5kb3cpO1xuXHRcdHdpbi5vbignbW91c2Vtb3ZlJywgZXZlbnRNb3ZlKTsgLy8gZHluYW1pYyBsaXN0ZW5lcnNcblx0XHR3aW4ub24oJ3RvdWNobW92ZScsIGV2ZW50TW92ZSk7XG5cdFx0d2luLm9uKCdtb3VzZXVwJywgZXZlbnRVcCk7XG5cdFx0d2luLm9uKCd0b3VjaGVuZCcsIGV2ZW50VXApO1xuXHRcdC8vY29uc29sZS5sb2coJ2Rvd24nKTtcblx0fVxuXG5cdGxldCB3YXZlRWxlbSA9ICQoJyN3YXZlZm9ybScpO1xuXG5cdHdhdmVFbGVtLm9uKCdtb3VzZWRvd24nLCBldmVudERvd24pO1xuXHR3YXZlRWxlbS5vbigndG91Y2hzdGFydCcsIGV2ZW50RG93bik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdHdhdmVFbGVtLm9mZignbW91c2Vkb3duJywgZXZlbnREb3duKTtcblx0XHR3YXZlRWxlbS5vZmYoJ3RvdWNoc3RhcnQnLCBldmVudERvd24pO1xuXHQgfTtcbn1cblxuICBjaGFuZ2VCdWZmZXIoYnVmZmVyKSB7XG5cdGlmICghYnVmZmVyKSByZXR1cm47XG5cblx0bGV0IHBsYXlTdGF0ZSA9IHRoaXMuc3VyZmVyLmlzUGxheWluZygpO1xuXHRsZXQgc29uZ1Bvcztcblx0aWYgKHBsYXlTdGF0ZSkge1xuXHRcdGNvbnNvbGUubG9nKCdwYXVzaW5nJyk7XG5cdFx0dGhpcy5zdXJmZXIucGF1c2UoKTtcblx0XHRzb25nUG9zID0gdGhpcy5zdXJmZXIuZ2V0Q3VycmVudFRpbWUoKTtcblx0fVxuXG5cdHRoaXMuYmFja2VuZC5sb2FkKGJ1ZmZlcik7XG5cdHRoaXMucmVkcmF3V2F2ZSgpO1xuXHRpZiAocGxheVN0YXRlKSB7XG5cdFx0aWYgKHNvbmdQb3MgPCAwKSBzb25nUG9zID0gMDtcblx0XHRsZXQgZHVyID0gdGhpcy5zdXJmZXIuZ2V0RHVyYXRpb24oKTtcblx0XHRpZiAoc29uZ1BvcyA8IGR1cikge1xuXHRcdFx0dGhpcy5zdXJmZXIucGxheShzb25nUG9zKTtcblx0XHRcdGNvbnNvbGUubG9nKCdwbGF5aW5nJyk7XG5cdFx0fVxuXHR9XG59XG4gIGNvcHlTZWxlY3RlZCAoKSB7XG5cdGxldCBidWZmZXIgPSB0aGlzLnN1cmZlci5iYWNrZW5kLmJ1ZmZlcjtcblx0bGV0IHtsZW5ndGgsIGZpcnN0LCBsYXN0LCByZWdpb259ID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcblx0bGV0IGRzID0gbGFzdCAtIGZpcnN0O1xuXHRsZXQge251bWJlck9mQ2hhbm5lbHMsIHNhbXBsZVJhdGV9ID0gYnVmZmVyO1xuXHRsZXQgbmV4dEJ1ZmZlciA9IGF1ZGlvQ3R4LmNyZWF0ZUJ1ZmZlcihudW1iZXJPZkNoYW5uZWxzLCBkcywgc2FtcGxlUmF0ZSk7XG5cblx0Zm9yICh2YXIgY3ggPSAwOyBjeCA8IG51bWJlck9mQ2hhbm5lbHM7ICsrY3gpIHtcblx0XHRsZXQgc2EgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY3gpO1xuXHRcdGxldCBkYSA9IG5leHRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoY3gpO1xuXHRcdGxldCBkeCA9IDA7XG5cdFx0Zm9yKHZhciBpID0gZmlyc3Q7IGkgPCBsYXN0OyArK2kpIHtcblx0XHRcdGRhW2R4KytdID0gc2FbaV07XG5cdFx0fVxuXHR9XG5cdHJldHVybiBuZXh0QnVmZmVyO1xufVxuXG4gIHBhc3RlU2VsZWN0ZWQocGFzdGVEYXRhLCBjaGVja0luc2VydCkge1xuXHRsZXQgYnVmZmVyID0gdGhpcy5zdXJmZXIuYmFja2VuZC5idWZmZXI7XG5cblx0bGV0IHtyZWdpb25hbCwgY3Vyc29yVGltZSwgY3Vyc29yUG9zLCBsZW5ndGgsIGZpcnN0LCBsYXN0LCByZWdpb259ID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcblxuXHRpZiAoY2hlY2tJbnNlcnQgJiYgIXJlZ2lvbmFsKSB7IC8vIHJlZ2lvbmwgPT09IGZhbHNlIG1lYW5zIGl0cyBhbiBpbnNlcnRpb24gcG9pbnQuXG5cdFx0Zmlyc3QgPSBjdXJzb3JQb3M7XG5cdFx0bGFzdCA9IGN1cnNvclBvcztcblx0fVxuXG5cdGxldCBwYXN0ZUxlbiA9IHBhc3RlRGF0YS5nZXRDaGFubmVsRGF0YSgwKS5sZW5ndGg7XG5cdGxldCBkVHMgPSBsYXN0IC0gZmlyc3Q7XG5cdGxldCB7bnVtYmVyT2ZDaGFubmVscywgc2FtcGxlUmF0ZX0gPSBidWZmZXI7XG5cdGxldCBudW1QYXN0ZUNoYW5uZWxzID0gcGFzdGVEYXRhLm51bWJlck9mQ2hhbm5lbHM7XG5cdGxldCBidWZMZW4gPSBsZW5ndGggLSBkVHMgKyBwYXN0ZUxlbjtcblx0bGV0IG5leHRCdWZmZXIgPSBhdWRpb0N0eC5jcmVhdGVCdWZmZXIobnVtYmVyT2ZDaGFubmVscywgYnVmTGVuLCBzYW1wbGVSYXRlKTtcblxuXHRmb3IgKHZhciBjeCA9IDA7IGN4IDwgbnVtYmVyT2ZDaGFubmVsczsgKytjeCkge1xuXHRcdGxldCBzYSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YShjeCk7XG5cdFx0bGV0IGRhID0gbmV4dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShjeCk7XG5cdFx0bGV0IHBkeCA9IGN4IDwgbnVtUGFzdGVDaGFubmVscyA/IGN4IDogMDtcblx0XHRsZXQgY2IgPSBwYXN0ZURhdGEuZ2V0Q2hhbm5lbERhdGEocGR4KTtcblx0XHRsZXQgZHggPSAwO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBmaXJzdDsgKytpKSB7XG5cdFx0XHRkYVtkeCsrXSA9IHNhW2ldO1xuXHRcdH1cblxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBwYXN0ZUxlbjsgKytpKSB7XG5cdFx0XHRkYVtkeCsrXSA9IGNiW2ldO1xuXHRcdH1cblxuXHRcdGZvcih2YXIgaSA9IGxhc3Q7IGkgPCBsZW5ndGg7ICsraSkge1xuXHRcdFx0ZGFbZHgrK10gPSBzYVtpXTtcblx0XHR9XG5cdH1cblx0dW5kb1N0YWNrLnB1c2goYnVmZmVyKTtcblx0dGhpcy5jaGFuZ2VCdWZmZXIobmV4dEJ1ZmZlcik7XG4gIH1cblxufSAvLyBFbmQgY2xhc3NcblxuZXhwb3J0IHtXYXZlfTtcbiIsIi8vIFNuYXJmZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL0phbTMvYXVkaW9idWZmZXItdG8td2F2L2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBhdWRpb0J1ZmZlclRvV2F2IChidWZmZXIsIG9wdCkge1xuICBvcHQgPSBvcHQgfHwge31cblxuICBsZXQge251bWJlck9mQ2hhbm5lbHMsIHNhbXBsZVJhdGV9ID0gYnVmZmVyO1xuICB2YXIgZm9ybWF0ID0gb3B0LmZsb2F0MzIgPyAzIDogMVxuICB2YXIgYml0RGVwdGggPSBmb3JtYXQgPT09IDMgPyAzMiA6IDE2XG5cbiAgdmFyIHJlc3VsdFxuICBpZiAobnVtYmVyT2ZDaGFubmVscyA9PT0gMikge1xuICAgIHJlc3VsdCA9IGludGVybGVhdmUoYnVmZmVyLmdldENoYW5uZWxEYXRhKDApLCBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMSkpXG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKDApXG4gIH1cblxuICByZXR1cm4gZW5jb2RlV0FWKHJlc3VsdCwgZm9ybWF0LCBzYW1wbGVSYXRlLCBudW1iZXJPZkNoYW5uZWxzLCBiaXREZXB0aClcbn1cblxuZnVuY3Rpb24gZW5jb2RlV0FWIChzYW1wbGVzLCBmb3JtYXQsIHNhbXBsZVJhdGUsIG51bUNoYW5uZWxzLCBiaXREZXB0aCkge1xuICB2YXIgYnl0ZXNQZXJTYW1wbGUgPSBiaXREZXB0aCAvIDhcbiAgdmFyIGJsb2NrQWxpZ24gPSBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlXG5cbiAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig0NCArIHNhbXBsZXMubGVuZ3RoICogYnl0ZXNQZXJTYW1wbGUpXG4gIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcblxuICAvKiBSSUZGIGlkZW50aWZpZXIgKi9cbiAgd3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKVxuICAvKiBSSUZGIGNodW5rIGxlbmd0aCAqL1xuICB2aWV3LnNldFVpbnQzMig0LCAzNiArIHNhbXBsZXMubGVuZ3RoICogYnl0ZXNQZXJTYW1wbGUsIHRydWUpXG4gIC8qIFJJRkYgdHlwZSAqL1xuICB3cml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpXG4gIC8qIGZvcm1hdCBjaHVuayBpZGVudGlmaWVyICovXG4gIHdyaXRlU3RyaW5nKHZpZXcsIDEyLCAnZm10ICcpXG4gIC8qIGZvcm1hdCBjaHVuayBsZW5ndGggKi9cbiAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKVxuICAvKiBzYW1wbGUgZm9ybWF0IChyYXcpICovXG4gIHZpZXcuc2V0VWludDE2KDIwLCBmb3JtYXQsIHRydWUpXG4gIC8qIGNoYW5uZWwgY291bnQgKi9cbiAgdmlldy5zZXRVaW50MTYoMjIsIG51bUNoYW5uZWxzLCB0cnVlKVxuICAvKiBzYW1wbGUgcmF0ZSAqL1xuICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSlcbiAgLyogYnl0ZSByYXRlIChzYW1wbGUgcmF0ZSAqIGJsb2NrIGFsaWduKSAqL1xuICB2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIGJsb2NrQWxpZ24sIHRydWUpXG4gIC8qIGJsb2NrIGFsaWduIChjaGFubmVsIGNvdW50ICogYnl0ZXMgcGVyIHNhbXBsZSkgKi9cbiAgdmlldy5zZXRVaW50MTYoMzIsIGJsb2NrQWxpZ24sIHRydWUpXG4gIC8qIGJpdHMgcGVyIHNhbXBsZSAqL1xuICB2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpXG4gIC8qIGRhdGEgY2h1bmsgaWRlbnRpZmllciAqL1xuICB3cml0ZVN0cmluZyh2aWV3LCAzNiwgJ2RhdGEnKVxuICAvKiBkYXRhIGNodW5rIGxlbmd0aCAqL1xuICB2aWV3LnNldFVpbnQzMig0MCwgc2FtcGxlcy5sZW5ndGggKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSlcbiAgaWYgKGZvcm1hdCA9PT0gMSkgeyAvLyBSYXcgUENNXG4gICAgZmxvYXRUbzE2Qml0UENNKHZpZXcsIDQ0LCBzYW1wbGVzKVxuICB9IGVsc2Uge1xuICAgIHdyaXRlRmxvYXQzMih2aWV3LCA0NCwgc2FtcGxlcylcbiAgfVxuXG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gaW50ZXJsZWF2ZSAoaW5wdXRMLCBpbnB1dFIpIHtcbiAgdmFyIGxlbmd0aCA9IGlucHV0TC5sZW5ndGggKyBpbnB1dFIubGVuZ3RoXG4gIHZhciByZXN1bHQgPSBuZXcgRmxvYXQzMkFycmF5KGxlbmd0aClcblxuICB2YXIgaW5kZXggPSAwXG4gIHZhciBpbnB1dEluZGV4ID0gMFxuXG4gIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleCsrXSA9IGlucHV0TFtpbnB1dEluZGV4XVxuICAgIHJlc3VsdFtpbmRleCsrXSA9IGlucHV0UltpbnB1dEluZGV4XVxuICAgIGlucHV0SW5kZXgrK1xuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdDMyIChvdXRwdXQsIG9mZnNldCwgaW5wdXQpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDQpIHtcbiAgICBvdXRwdXQuc2V0RmxvYXQzMihvZmZzZXQsIGlucHV0W2ldLCB0cnVlKVxuICB9XG59XG5cbmZ1bmN0aW9uIGZsb2F0VG8xNkJpdFBDTSAob3V0cHV0LCBvZmZzZXQsIGlucHV0KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyssIG9mZnNldCArPSAyKSB7XG4gICAgdmFyIHMgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgaW5wdXRbaV0pKVxuICAgIG91dHB1dC5zZXRJbnQxNihvZmZzZXQsIHMgPCAwID8gcyAqIDB4ODAwMCA6IHMgKiAweDdGRkYsIHRydWUpXG4gIH1cbn1cblxuZnVuY3Rpb24gd3JpdGVTdHJpbmcgKHZpZXcsIG9mZnNldCwgc3RyaW5nKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSlcbiAgfVxufVxuXG5leHBvcnQge2F1ZGlvQnVmZmVyVG9XYXZ9O1xuIiwiLy8gRnVuY3Rpb25zIHRvIG1hbmFnZSBiYXNlNjQgZW5jb2RlZCBhcnJheUJ1ZmZlciBkYXRhLlxuLy8gVXNlZCBmb3IgZXh0ZXJuYWwgY2xpcGJvYXJkIGRhdGEuXG5cbmZ1bmN0aW9uIGJhc2U2NEFycmF5QnVmZmVyKGFycmF5QnVmZmVyKSB7XG4gIHZhciBiYXNlNjQgICAgPSAnJ1xuICB2YXIgZW5jb2RpbmdzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5cbiAgdmFyIGJ5dGVzICAgICAgICAgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XG4gIHZhciBieXRlTGVuZ3RoICAgID0gYnl0ZXMuYnl0ZUxlbmd0aDtcbiAgdmFyIGJ5dGVSZW1haW5kZXIgPSBieXRlTGVuZ3RoICUgMztcbiAgdmFyIG1haW5MZW5ndGggICAgPSBieXRlTGVuZ3RoIC0gYnl0ZVJlbWFpbmRlcjtcblxuICB2YXIgYSwgYiwgYywgZDtcbiAgdmFyIGNodW5rO1xuXG4gIC8vIE1haW4gbG9vcCBkZWFscyB3aXRoIGJ5dGVzIGluIGNodW5rcyBvZiAzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWFpbkxlbmd0aDsgaSA9IGkgKyAzKSB7XG4gICAgLy8gSW5zZXJ0IG5ld2xpbmVzIHRvIGF2b2lkIHN1cGVyLWxvbmcgc3RyaW5ncy5cbiAgXHRpZiAoKGkgIT09IDApICYmICgoaSAlIDcyKSA9PT0gMCkpIHtcbiAgICBcdGJhc2U2NCArPSAnXFxuJztcbiAgICB9XG4gICAgLy8gQ29tYmluZSB0aGUgdGhyZWUgYnl0ZXMgaW50byBhIHNpbmdsZSBpbnRlZ2VyXG4gICAgY2h1bmsgPSAoYnl0ZXNbaV0gPDwgMTYpIHwgKGJ5dGVzW2kgKyAxXSA8PCA4KSB8IGJ5dGVzW2kgKyAyXTtcblxuICAgIC8vIFVzZSBiaXRtYXNrcyB0byBleHRyYWN0IDYtYml0IHNlZ21lbnRzIGZyb20gdGhlIHRyaXBsZXRcbiAgICBhID0gKGNodW5rICYgMTY1MTUwNzIpID4+IDE4IC8vIDE2NTE1MDcyID0gKDJeNiAtIDEpIDw8IDE4XG4gICAgYiA9IChjaHVuayAmIDI1ODA0OCkgICA+PiAxMiAvLyAyNTgwNDggICA9ICgyXjYgLSAxKSA8PCAxMlxuICAgIGMgPSAoY2h1bmsgJiA0MDMyKSAgICAgPj4gIDYgLy8gNDAzMiAgICAgPSAoMl42IC0gMSkgPDwgNlxuICAgIGQgPSBjaHVuayAmIDYzICAgICAgICAgICAgICAgLy8gNjMgICAgICAgPSAyXjYgLSAxXG5cbiAgICAvLyBDb252ZXJ0IHRoZSByYXcgYmluYXJ5IHNlZ21lbnRzIHRvIHRoZSBhcHByb3ByaWF0ZSBBU0NJSSBlbmNvZGluZ1xuICAgIGJhc2U2NCArPSBlbmNvZGluZ3NbYV0gKyBlbmNvZGluZ3NbYl0gKyBlbmNvZGluZ3NbY10gKyBlbmNvZGluZ3NbZF07XG4gIH1cblxuICAvLyBEZWFsIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcyBhbmQgcGFkZGluZ1xuICBpZiAoYnl0ZVJlbWFpbmRlciA9PSAxKSB7XG4gICAgY2h1bmsgPSBieXRlc1ttYWluTGVuZ3RoXVxuXG4gICAgYSA9IChjaHVuayAmIDI1MikgPj4gMiAvLyAyNTIgPSAoMl42IC0gMSkgPDwgMlxuXG4gICAgLy8gU2V0IHRoZSA0IGxlYXN0IHNpZ25pZmljYW50IGJpdHMgdG8gemVyb1xuICAgIGIgPSAoY2h1bmsgJiAzKSAgIDw8IDQgLy8gMyAgID0gMl4yIC0gMVxuXG4gICAgYmFzZTY0ICs9IGVuY29kaW5nc1thXSArIGVuY29kaW5nc1tiXSArICc9PSdcbiAgfSBlbHNlIGlmIChieXRlUmVtYWluZGVyID09IDIpIHtcbiAgICBjaHVuayA9IChieXRlc1ttYWluTGVuZ3RoXSA8PCA4KSB8IGJ5dGVzW21haW5MZW5ndGggKyAxXVxuXG4gICAgYSA9IChjaHVuayAmIDY0NTEyKSA+PiAxMCAvLyA2NDUxMiA9ICgyXjYgLSAxKSA8PCAxMFxuICAgIGIgPSAoY2h1bmsgJiAxMDA4KSAgPj4gIDQgLy8gMTAwOCAgPSAoMl42IC0gMSkgPDwgNFxuXG4gICAgLy8gU2V0IHRoZSAyIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgdG8gemVyb1xuICAgIGMgPSAoY2h1bmsgJiAxNSkgICAgPDwgIDIgLy8gMTUgICAgPSAyXjQgLSAxXG5cbiAgICBiYXNlNjQgKz0gZW5jb2RpbmdzW2FdICsgZW5jb2RpbmdzW2JdICsgZW5jb2RpbmdzW2NdICsgJz0nXG4gIH1cblxuICByZXR1cm4gYmFzZTY0XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7XG4gICAgdmFyIGJpbmFyeV9zdHJpbmcgPSAgd2luZG93LmF0b2IoYmFzZTY0KTtcbiAgICB2YXIgbGVuID0gYmluYXJ5X3N0cmluZy5sZW5ndGg7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoIGxlbiApO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspICAgICAgICB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5X3N0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXMuYnVmZmVyO1xufVxuXG5leHBvcnQge2Jhc2U2NEFycmF5QnVmZmVyLCBiYXNlNjRUb0FycmF5QnVmZmVyfTsiLCIvKiohXG5cbiBAbGljZW5zZVxuIGhhbmRsZWJhcnMgdjQuMC4xMVxuXG5Db3B5cmlnaHQgKEMpIDIwMTEtMjAxNyBieSBZZWh1ZGEgS2F0elxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG5USEUgU09GVFdBUkUuXG5cbiovXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1iKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxiKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLkhhbmRsZWJhcnM9YigpOmEuSGFuZGxlYmFycz1iKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihkKXtpZihjW2RdKXJldHVybiBjW2RdLmV4cG9ydHM7dmFyIGU9Y1tkXT17ZXhwb3J0czp7fSxpZDpkLGxvYWRlZDohMX07cmV0dXJuIGFbZF0uY2FsbChlLmV4cG9ydHMsZSxlLmV4cG9ydHMsYiksZS5sb2FkZWQ9ITAsZS5leHBvcnRzfXZhciBjPXt9O3JldHVybiBiLm09YSxiLmM9YyxiLnA9XCJcIixiKDApfShbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXt2YXIgYT1yKCk7cmV0dXJuIGEuY29tcGlsZT1mdW5jdGlvbihiLGMpe3JldHVybiBrLmNvbXBpbGUoYixjLGEpfSxhLnByZWNvbXBpbGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gay5wcmVjb21waWxlKGIsYyxhKX0sYS5BU1Q9aVtcImRlZmF1bHRcIl0sYS5Db21waWxlcj1rLkNvbXBpbGVyLGEuSmF2YVNjcmlwdENvbXBpbGVyPW1bXCJkZWZhdWx0XCJdLGEuUGFyc2VyPWoucGFyc2VyLGEucGFyc2U9ai5wYXJzZSxhfXZhciBlPWMoMSlbXCJkZWZhdWx0XCJdO2IuX19lc01vZHVsZT0hMDt2YXIgZj1jKDIpLGc9ZShmKSxoPWMoMzUpLGk9ZShoKSxqPWMoMzYpLGs9Yyg0MSksbD1jKDQyKSxtPWUobCksbj1jKDM5KSxvPWUobikscD1jKDM0KSxxPWUocCkscj1nW1wiZGVmYXVsdFwiXS5jcmVhdGUscz1kKCk7cy5jcmVhdGU9ZCxxW1wiZGVmYXVsdFwiXShzKSxzLlZpc2l0b3I9b1tcImRlZmF1bHRcIl0sc1tcImRlZmF1bHRcIl09cyxiW1wiZGVmYXVsdFwiXT1zLGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtiW1wiZGVmYXVsdFwiXT1mdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6e1wiZGVmYXVsdFwiOmF9fSxiLl9fZXNNb2R1bGU9ITB9LGZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7dmFyIGE9bmV3IGguSGFuZGxlYmFyc0Vudmlyb25tZW50O3JldHVybiBuLmV4dGVuZChhLGgpLGEuU2FmZVN0cmluZz1qW1wiZGVmYXVsdFwiXSxhLkV4Y2VwdGlvbj1sW1wiZGVmYXVsdFwiXSxhLlV0aWxzPW4sYS5lc2NhcGVFeHByZXNzaW9uPW4uZXNjYXBlRXhwcmVzc2lvbixhLlZNPXAsYS50ZW1wbGF0ZT1mdW5jdGlvbihiKXtyZXR1cm4gcC50ZW1wbGF0ZShiLGEpfSxhfXZhciBlPWMoMylbXCJkZWZhdWx0XCJdLGY9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwO3ZhciBnPWMoNCksaD1lKGcpLGk9YygyMSksaj1mKGkpLGs9Yyg2KSxsPWYoayksbT1jKDUpLG49ZShtKSxvPWMoMjIpLHA9ZShvKSxxPWMoMzQpLHI9ZihxKSxzPWQoKTtzLmNyZWF0ZT1kLHJbXCJkZWZhdWx0XCJdKHMpLHNbXCJkZWZhdWx0XCJdPXMsYltcImRlZmF1bHRcIl09cyxhLmV4cG9ydHM9YltcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7YltcImRlZmF1bHRcIl09ZnVuY3Rpb24oYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiW1wiZGVmYXVsdFwiXT1hLGJ9LGIuX19lc01vZHVsZT0hMH0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiLGMpe3RoaXMuaGVscGVycz1hfHx7fSx0aGlzLnBhcnRpYWxzPWJ8fHt9LHRoaXMuZGVjb3JhdG9ycz1jfHx7fSxpLnJlZ2lzdGVyRGVmYXVsdEhlbHBlcnModGhpcyksai5yZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzKHRoaXMpfXZhciBlPWMoMSlbXCJkZWZhdWx0XCJdO2IuX19lc01vZHVsZT0hMCxiLkhhbmRsZWJhcnNFbnZpcm9ubWVudD1kO3ZhciBmPWMoNSksZz1jKDYpLGg9ZShnKSxpPWMoMTApLGo9YygxOCksaz1jKDIwKSxsPWUoayksbT1cIjQuMC4xMVwiO2IuVkVSU0lPTj1tO3ZhciBuPTc7Yi5DT01QSUxFUl9SRVZJU0lPTj1uO3ZhciBvPXsxOlwiPD0gMS4wLnJjLjJcIiwyOlwiPT0gMS4wLjAtcmMuM1wiLDM6XCI9PSAxLjAuMC1yYy40XCIsNDpcIj09IDEueC54XCIsNTpcIj09IDIuMC4wLWFscGhhLnhcIiw2OlwiPj0gMi4wLjAtYmV0YS4xXCIsNzpcIj49IDQuMC4wXCJ9O2IuUkVWSVNJT05fQ0hBTkdFUz1vO3ZhciBwPVwiW29iamVjdCBPYmplY3RdXCI7ZC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmQsbG9nZ2VyOmxbXCJkZWZhdWx0XCJdLGxvZzpsW1wiZGVmYXVsdFwiXS5sb2cscmVnaXN0ZXJIZWxwZXI6ZnVuY3Rpb24oYSxiKXtpZihmLnRvU3RyaW5nLmNhbGwoYSk9PT1wKXtpZihiKXRocm93IG5ldyBoW1wiZGVmYXVsdFwiXShcIkFyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgaGVscGVyc1wiKTtmLmV4dGVuZCh0aGlzLmhlbHBlcnMsYSl9ZWxzZSB0aGlzLmhlbHBlcnNbYV09Yn0sdW5yZWdpc3RlckhlbHBlcjpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5oZWxwZXJzW2FdfSxyZWdpc3RlclBhcnRpYWw6ZnVuY3Rpb24oYSxiKXtpZihmLnRvU3RyaW5nLmNhbGwoYSk9PT1wKWYuZXh0ZW5kKHRoaXMucGFydGlhbHMsYSk7ZWxzZXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYil0aHJvdyBuZXcgaFtcImRlZmF1bHRcIl0oJ0F0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCBcIicrYSsnXCIgYXMgdW5kZWZpbmVkJyk7dGhpcy5wYXJ0aWFsc1thXT1ifX0sdW5yZWdpc3RlclBhcnRpYWw6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMucGFydGlhbHNbYV19LHJlZ2lzdGVyRGVjb3JhdG9yOmZ1bmN0aW9uKGEsYil7aWYoZi50b1N0cmluZy5jYWxsKGEpPT09cCl7aWYoYil0aHJvdyBuZXcgaFtcImRlZmF1bHRcIl0oXCJBcmcgbm90IHN1cHBvcnRlZCB3aXRoIG11bHRpcGxlIGRlY29yYXRvcnNcIik7Zi5leHRlbmQodGhpcy5kZWNvcmF0b3JzLGEpfWVsc2UgdGhpcy5kZWNvcmF0b3JzW2FdPWJ9LHVucmVnaXN0ZXJEZWNvcmF0b3I6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZGVjb3JhdG9yc1thXX19O3ZhciBxPWxbXCJkZWZhdWx0XCJdLmxvZztiLmxvZz1xLGIuY3JlYXRlRnJhbWU9Zi5jcmVhdGVGcmFtZSxiLmxvZ2dlcj1sW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKGEpe3JldHVybiBrW2FdfWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKylmb3IodmFyIGMgaW4gYXJndW1lbnRzW2JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcmd1bWVudHNbYl0sYykmJihhW2NdPWFyZ3VtZW50c1tiXVtjXSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBmKGEpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXtpZihhJiZhLnRvSFRNTClyZXR1cm4gYS50b0hUTUwoKTtpZihudWxsPT1hKXJldHVyblwiXCI7aWYoIWEpcmV0dXJuIGErXCJcIjthPVwiXCIrYX1yZXR1cm4gbS50ZXN0KGEpP2EucmVwbGFjZShsLGMpOmF9ZnVuY3Rpb24gZyhhKXtyZXR1cm4hYSYmMCE9PWF8fCEoIXAoYSl8fDAhPT1hLmxlbmd0aCl9ZnVuY3Rpb24gaChhKXt2YXIgYj1kKHt9LGEpO3JldHVybiBiLl9wYXJlbnQ9YSxifWZ1bmN0aW9uIGkoYSxiKXtyZXR1cm4gYS5wYXRoPWIsYX1mdW5jdGlvbiBqKGEsYil7cmV0dXJuKGE/YStcIi5cIjpcIlwiKStifWIuX19lc01vZHVsZT0hMCxiLmV4dGVuZD1kLGIuaW5kZXhPZj1lLGIuZXNjYXBlRXhwcmVzc2lvbj1mLGIuaXNFbXB0eT1nLGIuY3JlYXRlRnJhbWU9aCxiLmJsb2NrUGFyYW1zPWksYi5hcHBlbmRDb250ZXh0UGF0aD1qO3ZhciBrPXtcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiN4Mjc7XCIsXCJgXCI6XCImI3g2MDtcIixcIj1cIjpcIiYjeDNEO1wifSxsPS9bJjw+XCInYD1dL2csbT0vWyY8PlwiJ2A9XS8sbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2IudG9TdHJpbmc9bjt2YXIgbz1mdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhfTtvKC94LykmJihiLmlzRnVuY3Rpb249bz1mdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZcIltvYmplY3QgRnVuY3Rpb25dXCI9PT1uLmNhbGwoYSl9KSxiLmlzRnVuY3Rpb249bzt2YXIgcD1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4hKCFhfHxcIm9iamVjdFwiIT10eXBlb2YgYSkmJlwiW29iamVjdCBBcnJheV1cIj09PW4uY2FsbChhKX07Yi5pc0FycmF5PXB9LGZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYil7dmFyIGM9YiYmYi5sb2MsZz12b2lkIDAsaD12b2lkIDA7YyYmKGc9Yy5zdGFydC5saW5lLGg9Yy5zdGFydC5jb2x1bW4sYSs9XCIgLSBcIitnK1wiOlwiK2gpO2Zvcih2YXIgaT1FcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpLGo9MDtqPGYubGVuZ3RoO2orKyl0aGlzW2Zbal1dPWlbZltqXV07RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsZCk7dHJ5e2MmJih0aGlzLmxpbmVOdW1iZXI9ZyxlP09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29sdW1uXCIse3ZhbHVlOmgsZW51bWVyYWJsZTohMH0pOnRoaXMuY29sdW1uPWgpfWNhdGNoKGspe319dmFyIGU9Yyg3KVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwO3ZhciBmPVtcImRlc2NyaXB0aW9uXCIsXCJmaWxlTmFtZVwiLFwibGluZU51bWJlclwiLFwibWVzc2FnZVwiLFwibmFtZVwiLFwibnVtYmVyXCIsXCJzdGFja1wiXTtkLnByb3RvdHlwZT1uZXcgRXJyb3IsYltcImRlZmF1bHRcIl09ZCxhLmV4cG9ydHM9YltcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGEsYixjKXthLmV4cG9ydHM9e1wiZGVmYXVsdFwiOmMoOCksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDkpO2EuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGQuc2V0RGVzYyhhLGIsYyl9fSxmdW5jdGlvbihhLGIpe3ZhciBjPU9iamVjdDthLmV4cG9ydHM9e2NyZWF0ZTpjLmNyZWF0ZSxnZXRQcm90bzpjLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOmMuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6Yy5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpjLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpjLmtleXMsZ2V0TmFtZXM6Yy5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6Yy5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Z1tcImRlZmF1bHRcIl0oYSksaVtcImRlZmF1bHRcIl0oYSksa1tcImRlZmF1bHRcIl0oYSksbVtcImRlZmF1bHRcIl0oYSksb1tcImRlZmF1bHRcIl0oYSkscVtcImRlZmF1bHRcIl0oYSksc1tcImRlZmF1bHRcIl0oYSl9dmFyIGU9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwLGIucmVnaXN0ZXJEZWZhdWx0SGVscGVycz1kO3ZhciBmPWMoMTEpLGc9ZShmKSxoPWMoMTIpLGk9ZShoKSxqPWMoMTMpLGs9ZShqKSxsPWMoMTQpLG09ZShsKSxuPWMoMTUpLG89ZShuKSxwPWMoMTYpLHE9ZShwKSxyPWMoMTcpLHM9ZShyKX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2IuX19lc01vZHVsZT0hMDt2YXIgZD1jKDUpO2JbXCJkZWZhdWx0XCJdPWZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJIZWxwZXIoXCJibG9ja0hlbHBlck1pc3NpbmdcIixmdW5jdGlvbihiLGMpe3ZhciBlPWMuaW52ZXJzZSxmPWMuZm47aWYoYj09PSEwKXJldHVybiBmKHRoaXMpO2lmKGI9PT0hMXx8bnVsbD09YilyZXR1cm4gZSh0aGlzKTtpZihkLmlzQXJyYXkoYikpcmV0dXJuIGIubGVuZ3RoPjA/KGMuaWRzJiYoYy5pZHM9W2MubmFtZV0pLGEuaGVscGVycy5lYWNoKGIsYykpOmUodGhpcyk7aWYoYy5kYXRhJiZjLmlkcyl7dmFyIGc9ZC5jcmVhdGVGcmFtZShjLmRhdGEpO2cuY29udGV4dFBhdGg9ZC5hcHBlbmRDb250ZXh0UGF0aChjLmRhdGEuY29udGV4dFBhdGgsYy5uYW1lKSxjPXtkYXRhOmd9fXJldHVybiBmKGIsYyl9KX0sYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwO3ZhciBlPWMoNSksZj1jKDYpLGc9ZChmKTtiW1wiZGVmYXVsdFwiXT1mdW5jdGlvbihhKXthLnJlZ2lzdGVySGVscGVyKFwiZWFjaFwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhiLGMsZil7aiYmKGoua2V5PWIsai5pbmRleD1jLGouZmlyc3Q9MD09PWMsai5sYXN0PSEhZixrJiYoai5jb250ZXh0UGF0aD1rK2IpKSxpKz1kKGFbYl0se2RhdGE6aixibG9ja1BhcmFtczplLmJsb2NrUGFyYW1zKFthW2JdLGJdLFtrK2IsbnVsbF0pfSl9aWYoIWIpdGhyb3cgbmV3IGdbXCJkZWZhdWx0XCJdKFwiTXVzdCBwYXNzIGl0ZXJhdG9yIHRvICNlYWNoXCIpO3ZhciBkPWIuZm4sZj1iLmludmVyc2UsaD0wLGk9XCJcIixqPXZvaWQgMCxrPXZvaWQgMDtpZihiLmRhdGEmJmIuaWRzJiYoaz1lLmFwcGVuZENvbnRleHRQYXRoKGIuZGF0YS5jb250ZXh0UGF0aCxiLmlkc1swXSkrXCIuXCIpLGUuaXNGdW5jdGlvbihhKSYmKGE9YS5jYWxsKHRoaXMpKSxiLmRhdGEmJihqPWUuY3JlYXRlRnJhbWUoYi5kYXRhKSksYSYmXCJvYmplY3RcIj09dHlwZW9mIGEpaWYoZS5pc0FycmF5KGEpKWZvcih2YXIgbD1hLmxlbmd0aDtoPGw7aCsrKWggaW4gYSYmYyhoLGgsaD09PWEubGVuZ3RoLTEpO2Vsc2V7dmFyIG09dm9pZCAwO2Zvcih2YXIgbiBpbiBhKWEuaGFzT3duUHJvcGVydHkobikmJih2b2lkIDAhPT1tJiZjKG0saC0xKSxtPW4saCsrKTt2b2lkIDAhPT1tJiZjKG0saC0xLCEwKX1yZXR1cm4gMD09PWgmJihpPWYodGhpcykpLGl9KX0sYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwO3ZhciBlPWMoNiksZj1kKGUpO2JbXCJkZWZhdWx0XCJdPWZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJIZWxwZXIoXCJoZWxwZXJNaXNzaW5nXCIsZnVuY3Rpb24oKXtpZigxIT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgZltcImRlZmF1bHRcIl0oJ01pc3NpbmcgaGVscGVyOiBcIicrYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0ubmFtZSsnXCInKX0pfSxhLmV4cG9ydHM9YltcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtiLl9fZXNNb2R1bGU9ITA7dmFyIGQ9Yyg1KTtiW1wiZGVmYXVsdFwiXT1mdW5jdGlvbihhKXthLnJlZ2lzdGVySGVscGVyKFwiaWZcIixmdW5jdGlvbihhLGIpe3JldHVybiBkLmlzRnVuY3Rpb24oYSkmJihhPWEuY2FsbCh0aGlzKSksIWIuaGFzaC5pbmNsdWRlWmVybyYmIWF8fGQuaXNFbXB0eShhKT9iLmludmVyc2UodGhpcyk6Yi5mbih0aGlzKX0pLGEucmVnaXN0ZXJIZWxwZXIoXCJ1bmxlc3NcIixmdW5jdGlvbihiLGMpe3JldHVybiBhLmhlbHBlcnNbXCJpZlwiXS5jYWxsKHRoaXMsYix7Zm46Yy5pbnZlcnNlLGludmVyc2U6Yy5mbixoYXNoOmMuaGFzaH0pfSl9LGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtiLl9fZXNNb2R1bGU9ITAsYltcImRlZmF1bHRcIl09ZnVuY3Rpb24oYSl7YS5yZWdpc3RlckhlbHBlcihcImxvZ1wiLGZ1bmN0aW9uKCl7Zm9yKHZhciBiPVt2b2lkIDBdLGM9YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0sZD0wO2Q8YXJndW1lbnRzLmxlbmd0aC0xO2QrKyliLnB1c2goYXJndW1lbnRzW2RdKTt2YXIgZT0xO251bGwhPWMuaGFzaC5sZXZlbD9lPWMuaGFzaC5sZXZlbDpjLmRhdGEmJm51bGwhPWMuZGF0YS5sZXZlbCYmKGU9Yy5kYXRhLmxldmVsKSxiWzBdPWUsYS5sb2cuYXBwbHkoYSxiKX0pfSxhLmV4cG9ydHM9YltcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7Yi5fX2VzTW9kdWxlPSEwLGJbXCJkZWZhdWx0XCJdPWZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJIZWxwZXIoXCJsb29rdXBcIixmdW5jdGlvbihhLGIpe3JldHVybiBhJiZhW2JdfSl9LGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2IuX19lc01vZHVsZT0hMDt2YXIgZD1jKDUpO2JbXCJkZWZhdWx0XCJdPWZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJIZWxwZXIoXCJ3aXRoXCIsZnVuY3Rpb24oYSxiKXtkLmlzRnVuY3Rpb24oYSkmJihhPWEuY2FsbCh0aGlzKSk7dmFyIGM9Yi5mbjtpZihkLmlzRW1wdHkoYSkpcmV0dXJuIGIuaW52ZXJzZSh0aGlzKTt2YXIgZT1iLmRhdGE7cmV0dXJuIGIuZGF0YSYmYi5pZHMmJihlPWQuY3JlYXRlRnJhbWUoYi5kYXRhKSxlLmNvbnRleHRQYXRoPWQuYXBwZW5kQ29udGV4dFBhdGgoYi5kYXRhLmNvbnRleHRQYXRoLGIuaWRzWzBdKSksYyhhLHtkYXRhOmUsYmxvY2tQYXJhbXM6ZC5ibG9ja1BhcmFtcyhbYV0sW2UmJmUuY29udGV4dFBhdGhdKX0pfSl9LGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Z1tcImRlZmF1bHRcIl0oYSl9dmFyIGU9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwLGIucmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycz1kO3ZhciBmPWMoMTkpLGc9ZShmKX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2IuX19lc01vZHVsZT0hMDt2YXIgZD1jKDUpO2JbXCJkZWZhdWx0XCJdPWZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJEZWNvcmF0b3IoXCJpbmxpbmVcIixmdW5jdGlvbihhLGIsYyxlKXt2YXIgZj1hO3JldHVybiBiLnBhcnRpYWxzfHwoYi5wYXJ0aWFscz17fSxmPWZ1bmN0aW9uKGUsZil7dmFyIGc9Yy5wYXJ0aWFscztjLnBhcnRpYWxzPWQuZXh0ZW5kKHt9LGcsYi5wYXJ0aWFscyk7dmFyIGg9YShlLGYpO3JldHVybiBjLnBhcnRpYWxzPWcsaH0pLGIucGFydGlhbHNbZS5hcmdzWzBdXT1lLmZuLGZ9KX0sYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yi5fX2VzTW9kdWxlPSEwO3ZhciBkPWMoNSksZT17bWV0aG9kTWFwOltcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXSxsZXZlbDpcImluZm9cIixsb29rdXBMZXZlbDpmdW5jdGlvbihhKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7dmFyIGI9ZC5pbmRleE9mKGUubWV0aG9kTWFwLGEudG9Mb3dlckNhc2UoKSk7YT1iPj0wP2I6cGFyc2VJbnQoYSwxMCl9cmV0dXJuIGF9LGxvZzpmdW5jdGlvbihhKXtpZihhPWUubG9va3VwTGV2ZWwoYSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmUubG9va3VwTGV2ZWwoZS5sZXZlbCk8PWEpe3ZhciBiPWUubWV0aG9kTWFwW2FdO2NvbnNvbGVbYl18fChiPVwibG9nXCIpO2Zvcih2YXIgYz1hcmd1bWVudHMubGVuZ3RoLGQ9QXJyYXkoYz4xP2MtMTowKSxmPTE7ZjxjO2YrKylkW2YtMV09YXJndW1lbnRzW2ZdO2NvbnNvbGVbYl0uYXBwbHkoY29uc29sZSxkKX19fTtiW1wiZGVmYXVsdFwiXT1lLGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKGEpe3RoaXMuc3RyaW5nPWF9Yi5fX2VzTW9kdWxlPSEwLGMucHJvdG90eXBlLnRvU3RyaW5nPWMucHJvdG90eXBlLnRvSFRNTD1mdW5jdGlvbigpe3JldHVyblwiXCIrdGhpcy5zdHJpbmd9LGJbXCJkZWZhdWx0XCJdPWMsYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt2YXIgYj1hJiZhWzBdfHwxLGM9cy5DT01QSUxFUl9SRVZJU0lPTjtpZihiIT09Yyl7aWYoYjxjKXt2YXIgZD1zLlJFVklTSU9OX0NIQU5HRVNbY10sZT1zLlJFVklTSU9OX0NIQU5HRVNbYl07dGhyb3cgbmV3IHJbXCJkZWZhdWx0XCJdKFwiVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYW4gb2xkZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gUGxlYXNlIHVwZGF0ZSB5b3VyIHByZWNvbXBpbGVyIHRvIGEgbmV3ZXIgdmVyc2lvbiAoXCIrZCtcIikgb3IgZG93bmdyYWRlIHlvdXIgcnVudGltZSB0byBhbiBvbGRlciB2ZXJzaW9uIChcIitlK1wiKS5cIil9dGhyb3cgbmV3IHJbXCJkZWZhdWx0XCJdKFwiVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYSBuZXdlciB2ZXJzaW9uIG9mIEhhbmRsZWJhcnMgdGhhbiB0aGUgY3VycmVudCBydW50aW1lLiBQbGVhc2UgdXBkYXRlIHlvdXIgcnVudGltZSB0byBhIG5ld2VyIHZlcnNpb24gKFwiK2FbMV0rXCIpLlwiKX19ZnVuY3Rpb24gZShhLGIpe2Z1bmN0aW9uIGMoYyxkLGUpe2UuaGFzaCYmKGQ9cC5leHRlbmQoe30sZCxlLmhhc2gpLGUuaWRzJiYoZS5pZHNbMF09ITApKSxjPWIuVk0ucmVzb2x2ZVBhcnRpYWwuY2FsbCh0aGlzLGMsZCxlKTt2YXIgZj1iLlZNLmludm9rZVBhcnRpYWwuY2FsbCh0aGlzLGMsZCxlKTtpZihudWxsPT1mJiZiLmNvbXBpbGUmJihlLnBhcnRpYWxzW2UubmFtZV09Yi5jb21waWxlKGMsYS5jb21waWxlck9wdGlvbnMsYiksZj1lLnBhcnRpYWxzW2UubmFtZV0oZCxlKSksbnVsbCE9Zil7aWYoZS5pbmRlbnQpe2Zvcih2YXIgZz1mLnNwbGl0KFwiXFxuXCIpLGg9MCxpPWcubGVuZ3RoO2g8aSYmKGdbaF18fGgrMSE9PWkpO2grKylnW2hdPWUuaW5kZW50K2dbaF07Zj1nLmpvaW4oXCJcXG5cIil9cmV0dXJuIGZ9dGhyb3cgbmV3IHJbXCJkZWZhdWx0XCJdKFwiVGhlIHBhcnRpYWwgXCIrZS5uYW1lK1wiIGNvdWxkIG5vdCBiZSBjb21waWxlZCB3aGVuIHJ1bm5pbmcgaW4gcnVudGltZS1vbmx5IG1vZGVcIil9ZnVuY3Rpb24gZChiKXtmdW5jdGlvbiBjKGIpe3JldHVyblwiXCIrYS5tYWluKGUsYixlLmhlbHBlcnMsZS5wYXJ0aWFscyxnLGksaCl9dmFyIGY9YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3t9OmFyZ3VtZW50c1sxXSxnPWYuZGF0YTtkLl9zZXR1cChmKSwhZi5wYXJ0aWFsJiZhLnVzZURhdGEmJihnPWooYixnKSk7dmFyIGg9dm9pZCAwLGk9YS51c2VCbG9ja1BhcmFtcz9bXTp2b2lkIDA7cmV0dXJuIGEudXNlRGVwdGhzJiYoaD1mLmRlcHRocz9iIT1mLmRlcHRoc1swXT9bYl0uY29uY2F0KGYuZGVwdGhzKTpmLmRlcHRoczpbYl0pLChjPWsoYS5tYWluLGMsZSxmLmRlcHRoc3x8W10sZyxpKSkoYixmKX1pZighYil0aHJvdyBuZXcgcltcImRlZmF1bHRcIl0oXCJObyBlbnZpcm9ubWVudCBwYXNzZWQgdG8gdGVtcGxhdGVcIik7aWYoIWF8fCFhLm1haW4pdGhyb3cgbmV3IHJbXCJkZWZhdWx0XCJdKFwiVW5rbm93biB0ZW1wbGF0ZSBvYmplY3Q6IFwiK3R5cGVvZiBhKTthLm1haW4uZGVjb3JhdG9yPWEubWFpbl9kLGIuVk0uY2hlY2tSZXZpc2lvbihhLmNvbXBpbGVyKTt2YXIgZT17c3RyaWN0OmZ1bmN0aW9uKGEsYil7aWYoIShiIGluIGEpKXRocm93IG5ldyByW1wiZGVmYXVsdFwiXSgnXCInK2IrJ1wiIG5vdCBkZWZpbmVkIGluICcrYSk7cmV0dXJuIGFbYl19LGxvb2t1cDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKylpZihhW2RdJiZudWxsIT1hW2RdW2JdKXJldHVybiBhW2RdW2JdfSxsYW1iZGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2EuY2FsbChiKTphfSxlc2NhcGVFeHByZXNzaW9uOnAuZXNjYXBlRXhwcmVzc2lvbixpbnZva2VQYXJ0aWFsOmMsZm46ZnVuY3Rpb24oYil7dmFyIGM9YVtiXTtyZXR1cm4gYy5kZWNvcmF0b3I9YVtiK1wiX2RcIl0sY30scHJvZ3JhbXM6W10scHJvZ3JhbTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBnPXRoaXMucHJvZ3JhbXNbYV0saD10aGlzLmZuKGEpO3JldHVybiBifHxlfHxkfHxjP2c9Zih0aGlzLGEsaCxiLGMsZCxlKTpnfHwoZz10aGlzLnByb2dyYW1zW2FdPWYodGhpcyxhLGgpKSxnfSxkYXRhOmZ1bmN0aW9uKGEsYil7Zm9yKDthJiZiLS07KWE9YS5fcGFyZW50O3JldHVybiBhfSxtZXJnZTpmdW5jdGlvbihhLGIpe3ZhciBjPWF8fGI7cmV0dXJuIGEmJmImJmEhPT1iJiYoYz1wLmV4dGVuZCh7fSxiLGEpKSxjfSxudWxsQ29udGV4dDpsKHt9KSxub29wOmIuVk0ubm9vcCxjb21waWxlckluZm86YS5jb21waWxlcn07cmV0dXJuIGQuaXNUb3A9ITAsZC5fc2V0dXA9ZnVuY3Rpb24oYyl7Yy5wYXJ0aWFsPyhlLmhlbHBlcnM9Yy5oZWxwZXJzLGUucGFydGlhbHM9Yy5wYXJ0aWFscyxlLmRlY29yYXRvcnM9Yy5kZWNvcmF0b3JzKTooZS5oZWxwZXJzPWUubWVyZ2UoYy5oZWxwZXJzLGIuaGVscGVycyksYS51c2VQYXJ0aWFsJiYoZS5wYXJ0aWFscz1lLm1lcmdlKGMucGFydGlhbHMsYi5wYXJ0aWFscykpLChhLnVzZVBhcnRpYWx8fGEudXNlRGVjb3JhdG9ycykmJihlLmRlY29yYXRvcnM9ZS5tZXJnZShjLmRlY29yYXRvcnMsYi5kZWNvcmF0b3JzKSkpfSxkLl9jaGlsZD1mdW5jdGlvbihiLGMsZCxnKXtpZihhLnVzZUJsb2NrUGFyYW1zJiYhZCl0aHJvdyBuZXcgcltcImRlZmF1bHRcIl0oXCJtdXN0IHBhc3MgYmxvY2sgcGFyYW1zXCIpO2lmKGEudXNlRGVwdGhzJiYhZyl0aHJvdyBuZXcgcltcImRlZmF1bHRcIl0oXCJtdXN0IHBhc3MgcGFyZW50IGRlcHRoc1wiKTtyZXR1cm4gZihlLGIsYVtiXSxjLDAsZCxnKX0sZH1mdW5jdGlvbiBmKGEsYixjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYil7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3t9OmFyZ3VtZW50c1sxXSxoPWc7cmV0dXJuIWd8fGI9PWdbMF18fGI9PT1hLm51bGxDb250ZXh0JiZudWxsPT09Z1swXXx8KGg9W2JdLmNvbmNhdChnKSksYyhhLGIsYS5oZWxwZXJzLGEucGFydGlhbHMsZS5kYXRhfHxkLGYmJltlLmJsb2NrUGFyYW1zXS5jb25jYXQoZiksaCl9cmV0dXJuIGg9ayhjLGgsYSxnLGQsZiksaC5wcm9ncmFtPWIsaC5kZXB0aD1nP2cubGVuZ3RoOjAsaC5ibG9ja1BhcmFtcz1lfHwwLGh9ZnVuY3Rpb24gZyhhLGIsYyl7cmV0dXJuIGE/YS5jYWxsfHxjLm5hbWV8fChjLm5hbWU9YSxhPWMucGFydGlhbHNbYV0pOmE9XCJAcGFydGlhbC1ibG9ja1wiPT09Yy5uYW1lP2MuZGF0YVtcInBhcnRpYWwtYmxvY2tcIl06Yy5wYXJ0aWFsc1tjLm5hbWVdLGF9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Yy5kYXRhJiZjLmRhdGFbXCJwYXJ0aWFsLWJsb2NrXCJdO2MucGFydGlhbD0hMCxjLmlkcyYmKGMuZGF0YS5jb250ZXh0UGF0aD1jLmlkc1swXXx8Yy5kYXRhLmNvbnRleHRQYXRoKTt2YXIgZT12b2lkIDA7aWYoYy5mbiYmYy5mbiE9PWkmJiFmdW5jdGlvbigpe2MuZGF0YT1zLmNyZWF0ZUZyYW1lKGMuZGF0YSk7dmFyIGE9Yy5mbjtlPWMuZGF0YVtcInBhcnRpYWwtYmxvY2tcIl09ZnVuY3Rpb24oYil7dmFyIGM9YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3t9OmFyZ3VtZW50c1sxXTtyZXR1cm4gYy5kYXRhPXMuY3JlYXRlRnJhbWUoYy5kYXRhKSxjLmRhdGFbXCJwYXJ0aWFsLWJsb2NrXCJdPWQsYShiLGMpfSxhLnBhcnRpYWxzJiYoYy5wYXJ0aWFscz1wLmV4dGVuZCh7fSxjLnBhcnRpYWxzLGEucGFydGlhbHMpKX0oKSx2b2lkIDA9PT1hJiZlJiYoYT1lKSx2b2lkIDA9PT1hKXRocm93IG5ldyByW1wiZGVmYXVsdFwiXShcIlRoZSBwYXJ0aWFsIFwiK2MubmFtZStcIiBjb3VsZCBub3QgYmUgZm91bmRcIik7aWYoYSBpbnN0YW5jZW9mIEZ1bmN0aW9uKXJldHVybiBhKGIsYyl9ZnVuY3Rpb24gaSgpe3JldHVyblwiXCJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiBiJiZcInJvb3RcImluIGJ8fChiPWI/cy5jcmVhdGVGcmFtZShiKTp7fSxiLnJvb3Q9YSksYn1mdW5jdGlvbiBrKGEsYixjLGQsZSxmKXtpZihhLmRlY29yYXRvcil7dmFyIGc9e307Yj1hLmRlY29yYXRvcihiLGcsYyxkJiZkWzBdLGUsZixkKSxwLmV4dGVuZChiLGcpfXJldHVybiBifXZhciBsPWMoMjMpW1wiZGVmYXVsdFwiXSxtPWMoMylbXCJkZWZhdWx0XCJdLG49YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwLGIuY2hlY2tSZXZpc2lvbj1kLGIudGVtcGxhdGU9ZSxiLndyYXBQcm9ncmFtPWYsYi5yZXNvbHZlUGFydGlhbD1nLGIuaW52b2tlUGFydGlhbD1oLGIubm9vcD1pO3ZhciBvPWMoNSkscD1tKG8pLHE9Yyg2KSxyPW4ocSkscz1jKDQpfSxmdW5jdGlvbihhLGIsYyl7YS5leHBvcnRzPXtcImRlZmF1bHRcIjpjKDI0KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oYSxiLGMpe2MoMjUpLGEuZXhwb3J0cz1jKDMwKS5PYmplY3Quc2VhbH0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMoMjYpO2MoMjcpKFwic2VhbFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYSYmZChiKT9hKGIpOmJ9fSl9LGZ1bmN0aW9uKGEsYil7YS5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP251bGwhPT1hOlwiZnVuY3Rpb25cIj09dHlwZW9mIGF9fSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygyOCksZT1jKDMwKSxmPWMoMzMpO2EuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjPShlLk9iamVjdHx8e30pW2FdfHxPYmplY3RbYV0sZz17fTtnW2FdPWIoYyksZChkLlMrZC5GKmYoZnVuY3Rpb24oKXtjKDEpfSksXCJPYmplY3RcIixnKX19LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jKDI5KSxlPWMoMzApLGY9YygzMSksZz1cInByb3RvdHlwZVwiLGg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBpLGosayxsPWEmaC5GLG09YSZoLkcsbj1hJmguUyxvPWEmaC5QLHA9YSZoLkIscT1hJmguVyxyPW0/ZTplW2JdfHwoZVtiXT17fSkscz1tP2Q6bj9kW2JdOihkW2JdfHx7fSlbZ107bSYmKGM9Yik7Zm9yKGkgaW4gYylqPSFsJiZzJiZpIGluIHMsaiYmaSBpbiByfHwoaz1qP3NbaV06Y1tpXSxyW2ldPW0mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHNbaV0/Y1tpXTpwJiZqP2YoayxkKTpxJiZzW2ldPT1rP2Z1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgYT9uZXcgYShiKTphKGIpfTtyZXR1cm4gYltnXT1hW2ddLGJ9KGspOm8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGs/ZihGdW5jdGlvbi5jYWxsLGspOmssbyYmKChyW2ddfHwocltnXT17fSkpW2ldPWspKX07aC5GPTEsaC5HPTIsaC5TPTQsaC5QPTgsaC5CPTE2LGguVz0zMixhLmV4cG9ydHM9aH0sZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1jKX0sZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmV4cG9ydHM9e3ZlcnNpb246XCIxLjIuNlwifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPWMpfSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YygzMik7YS5leHBvcnRzPWZ1bmN0aW9uKGEsYixjKXtpZihkKGEpLHZvaWQgMD09PWIpcmV0dXJuIGE7c3dpdGNoKGMpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIGEuY2FsbChiLGMpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGEuY2FsbChiLGMsZCl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe3JldHVybiBhLmNhbGwoYixjLGQsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19fSxmdW5jdGlvbihhLGIpe2EuZXhwb3J0cz1mdW5jdGlvbihhKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihhK1wiIGlzIG5vdCBhIGZ1bmN0aW9uIVwiKTtyZXR1cm4gYX19LGZ1bmN0aW9uKGEsYil7YS5leHBvcnRzPWZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4hIWEoKX1jYXRjaChiKXtyZXR1cm4hMH19fSxmdW5jdGlvbihhLGIpeyhmdW5jdGlvbihjKXtcInVzZSBzdHJpY3RcIjtiLl9fZXNNb2R1bGU9ITAsYltcImRlZmF1bHRcIl09ZnVuY3Rpb24oYSl7dmFyIGI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGM/Yzp3aW5kb3csZD1iLkhhbmRsZWJhcnM7YS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGIuSGFuZGxlYmFycz09PWEmJihiLkhhbmRsZWJhcnM9ZCksYX19LGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0pLmNhbGwoYixmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtiLl9fZXNNb2R1bGU9ITA7dmFyIGM9e2hlbHBlcnM6e2hlbHBlckV4cHJlc3Npb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJTdWJFeHByZXNzaW9uXCI9PT1hLnR5cGV8fChcIk11c3RhY2hlU3RhdGVtZW50XCI9PT1hLnR5cGV8fFwiQmxvY2tTdGF0ZW1lbnRcIj09PWEudHlwZSkmJiEhKGEucGFyYW1zJiZhLnBhcmFtcy5sZW5ndGh8fGEuaGFzaCl9LHNjb3BlZElkOmZ1bmN0aW9uKGEpe3JldHVybi9eXFwufHRoaXNcXGIvLnRlc3QoYS5vcmlnaW5hbCl9LHNpbXBsZUlkOmZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5wYXJ0cy5sZW5ndGgmJiFjLmhlbHBlcnMuc2NvcGVkSWQoYSkmJiFhLmRlcHRofX19O2JbXCJkZWZhdWx0XCJdPWMsYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe2lmKFwiUHJvZ3JhbVwiPT09YS50eXBlKXJldHVybiBhO2hbXCJkZWZhdWx0XCJdLnl5PW4sbi5sb2NJbmZvPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgbi5Tb3VyY2VMb2NhdGlvbihiJiZiLnNyY05hbWUsYSl9O3ZhciBjPW5ldyBqW1wiZGVmYXVsdFwiXShiKTtyZXR1cm4gYy5hY2NlcHQoaFtcImRlZmF1bHRcIl0ucGFyc2UoYSkpfXZhciBlPWMoMSlbXCJkZWZhdWx0XCJdLGY9YygzKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwLGIucGFyc2U9ZDt2YXIgZz1jKDM3KSxoPWUoZyksaT1jKDM4KSxqPWUoaSksaz1jKDQwKSxsPWYoayksbT1jKDUpO2IucGFyc2VyPWhbXCJkZWZhdWx0XCJdO3ZhciBuPXt9O20uZXh0ZW5kKG4sbCl9LGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7Yi5fX2VzTW9kdWxlPSEwO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMueXk9e319dmFyIGI9e3RyYWNlOmZ1bmN0aW9uKCl7fSx5eTp7fSxzeW1ib2xzXzp7ZXJyb3I6Mixyb290OjMscHJvZ3JhbTo0LEVPRjo1LHByb2dyYW1fcmVwZXRpdGlvbjA6NixzdGF0ZW1lbnQ6NyxtdXN0YWNoZTo4LGJsb2NrOjkscmF3QmxvY2s6MTAscGFydGlhbDoxMSxwYXJ0aWFsQmxvY2s6MTIsY29udGVudDoxMyxDT01NRU5UOjE0LENPTlRFTlQ6MTUsb3BlblJhd0Jsb2NrOjE2LHJhd0Jsb2NrX3JlcGV0aXRpb25fcGx1czA6MTcsRU5EX1JBV19CTE9DSzoxOCxPUEVOX1JBV19CTE9DSzoxOSxoZWxwZXJOYW1lOjIwLG9wZW5SYXdCbG9ja19yZXBldGl0aW9uMDoyMSxvcGVuUmF3QmxvY2tfb3B0aW9uMDoyMixDTE9TRV9SQVdfQkxPQ0s6MjMsb3BlbkJsb2NrOjI0LGJsb2NrX29wdGlvbjA6MjUsY2xvc2VCbG9jazoyNixvcGVuSW52ZXJzZToyNyxibG9ja19vcHRpb24xOjI4LE9QRU5fQkxPQ0s6Mjksb3BlbkJsb2NrX3JlcGV0aXRpb24wOjMwLG9wZW5CbG9ja19vcHRpb24wOjMxLG9wZW5CbG9ja19vcHRpb24xOjMyLENMT1NFOjMzLE9QRU5fSU5WRVJTRTozNCxvcGVuSW52ZXJzZV9yZXBldGl0aW9uMDozNSxvcGVuSW52ZXJzZV9vcHRpb24wOjM2LG9wZW5JbnZlcnNlX29wdGlvbjE6Mzcsb3BlbkludmVyc2VDaGFpbjozOCxPUEVOX0lOVkVSU0VfQ0hBSU46Mzksb3BlbkludmVyc2VDaGFpbl9yZXBldGl0aW9uMDo0MCxvcGVuSW52ZXJzZUNoYWluX29wdGlvbjA6NDEsb3BlbkludmVyc2VDaGFpbl9vcHRpb24xOjQyLGludmVyc2VBbmRQcm9ncmFtOjQzLElOVkVSU0U6NDQsaW52ZXJzZUNoYWluOjQ1LGludmVyc2VDaGFpbl9vcHRpb24wOjQ2LE9QRU5fRU5EQkxPQ0s6NDcsT1BFTjo0OCxtdXN0YWNoZV9yZXBldGl0aW9uMDo0OSxtdXN0YWNoZV9vcHRpb24wOjUwLE9QRU5fVU5FU0NBUEVEOjUxLG11c3RhY2hlX3JlcGV0aXRpb24xOjUyLG11c3RhY2hlX29wdGlvbjE6NTMsQ0xPU0VfVU5FU0NBUEVEOjU0LE9QRU5fUEFSVElBTDo1NSxwYXJ0aWFsTmFtZTo1NixwYXJ0aWFsX3JlcGV0aXRpb24wOjU3LHBhcnRpYWxfb3B0aW9uMDo1OCxvcGVuUGFydGlhbEJsb2NrOjU5LE9QRU5fUEFSVElBTF9CTE9DSzo2MCxvcGVuUGFydGlhbEJsb2NrX3JlcGV0aXRpb24wOjYxLG9wZW5QYXJ0aWFsQmxvY2tfb3B0aW9uMDo2MixwYXJhbTo2MyxzZXhwcjo2NCxPUEVOX1NFWFBSOjY1LHNleHByX3JlcGV0aXRpb24wOjY2LHNleHByX29wdGlvbjA6NjcsQ0xPU0VfU0VYUFI6NjgsaGFzaDo2OSxoYXNoX3JlcGV0aXRpb25fcGx1czA6NzAsaGFzaFNlZ21lbnQ6NzEsSUQ6NzIsRVFVQUxTOjczLGJsb2NrUGFyYW1zOjc0LE9QRU5fQkxPQ0tfUEFSQU1TOjc1LGJsb2NrUGFyYW1zX3JlcGV0aXRpb25fcGx1czA6NzYsQ0xPU0VfQkxPQ0tfUEFSQU1TOjc3LHBhdGg6NzgsZGF0YU5hbWU6NzksU1RSSU5HOjgwLE5VTUJFUjo4MSxCT09MRUFOOjgyLFVOREVGSU5FRDo4MyxOVUxMOjg0LERBVEE6ODUscGF0aFNlZ21lbnRzOjg2LFNFUDo4NywkYWNjZXB0OjAsJGVuZDoxfSx0ZXJtaW5hbHNfOnsyOlwiZXJyb3JcIiw1OlwiRU9GXCIsMTQ6XCJDT01NRU5UXCIsMTU6XCJDT05URU5UXCIsMTg6XCJFTkRfUkFXX0JMT0NLXCIsMTk6XCJPUEVOX1JBV19CTE9DS1wiLDIzOlwiQ0xPU0VfUkFXX0JMT0NLXCIsMjk6XCJPUEVOX0JMT0NLXCIsMzM6XCJDTE9TRVwiLDM0OlwiT1BFTl9JTlZFUlNFXCIsMzk6XCJPUEVOX0lOVkVSU0VfQ0hBSU5cIiw0NDpcIklOVkVSU0VcIiw0NzpcIk9QRU5fRU5EQkxPQ0tcIiw0ODpcIk9QRU5cIiw1MTpcIk9QRU5fVU5FU0NBUEVEXCIsNTQ6XCJDTE9TRV9VTkVTQ0FQRURcIiw1NTpcIk9QRU5fUEFSVElBTFwiLDYwOlwiT1BFTl9QQVJUSUFMX0JMT0NLXCIsNjU6XCJPUEVOX1NFWFBSXCIsNjg6XCJDTE9TRV9TRVhQUlwiLDcyOlwiSURcIiw3MzpcIkVRVUFMU1wiLDc1OlwiT1BFTl9CTE9DS19QQVJBTVNcIiw3NzpcIkNMT1NFX0JMT0NLX1BBUkFNU1wiLDgwOlwiU1RSSU5HXCIsODE6XCJOVU1CRVJcIiw4MjpcIkJPT0xFQU5cIiw4MzpcIlVOREVGSU5FRFwiLDg0OlwiTlVMTFwiLDg1OlwiREFUQVwiLDg3OlwiU0VQXCJ9LHByb2R1Y3Rpb25zXzpbMCxbMywyXSxbNCwxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbMTMsMV0sWzEwLDNdLFsxNiw1XSxbOSw0XSxbOSw0XSxbMjQsNl0sWzI3LDZdLFszOCw2XSxbNDMsMl0sWzQ1LDNdLFs0NSwxXSxbMjYsM10sWzgsNV0sWzgsNV0sWzExLDVdLFsxMiwzXSxbNTksNV0sWzYzLDFdLFs2MywxXSxbNjQsNV0sWzY5LDFdLFs3MSwzXSxbNzQsM10sWzIwLDFdLFsyMCwxXSxbMjAsMV0sWzIwLDFdLFsyMCwxXSxbMjAsMV0sWzIwLDFdLFs1NiwxXSxbNTYsMV0sWzc5LDJdLFs3OCwxXSxbODYsM10sWzg2LDFdLFs2LDBdLFs2LDJdLFsxNywxXSxbMTcsMl0sWzIxLDBdLFsyMSwyXSxbMjIsMF0sWzIyLDFdLFsyNSwwXSxbMjUsMV0sWzI4LDBdLFsyOCwxXSxbMzAsMF0sWzMwLDJdLFszMSwwXSxbMzEsMV0sWzMyLDBdLFszMiwxXSxbMzUsMF0sWzM1LDJdLFszNiwwXSxbMzYsMV0sWzM3LDBdLFszNywxXSxbNDAsMF0sWzQwLDJdLFs0MSwwXSxbNDEsMV0sWzQyLDBdLFs0MiwxXSxbNDYsMF0sWzQ2LDFdLFs0OSwwXSxbNDksMl0sWzUwLDBdLFs1MCwxXSxbNTIsMF0sWzUyLDJdLFs1MywwXSxbNTMsMV0sWzU3LDBdLFs1NywyXSxbNTgsMF0sWzU4LDFdLFs2MSwwXSxbNjEsMl0sWzYyLDBdLFs2MiwxXSxbNjYsMF0sWzY2LDJdLFs2NywwXSxbNjcsMV0sWzcwLDFdLFs3MCwyXSxbNzYsMV0sWzc2LDJdXSxwZXJmb3JtQWN0aW9uOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPWYubGVuZ3RoLTE7c3dpdGNoKGUpe2Nhc2UgMTpyZXR1cm4gZltoLTFdO2Nhc2UgMjp0aGlzLiQ9ZC5wcmVwYXJlUHJvZ3JhbShmW2hdKTticmVhaztjYXNlIDM6dGhpcy4kPWZbaF07YnJlYWs7Y2FzZSA0OnRoaXMuJD1mW2hdO2JyZWFrO2Nhc2UgNTp0aGlzLiQ9ZltoXTticmVhaztjYXNlIDY6dGhpcy4kPWZbaF07YnJlYWs7Y2FzZSA3OnRoaXMuJD1mW2hdO2JyZWFrO2Nhc2UgODp0aGlzLiQ9ZltoXTticmVhaztjYXNlIDk6dGhpcy4kPXt0eXBlOlwiQ29tbWVudFN0YXRlbWVudFwiLHZhbHVlOmQuc3RyaXBDb21tZW50KGZbaF0pLHN0cmlwOmQuc3RyaXBGbGFncyhmW2hdLGZbaF0pLGxvYzpkLmxvY0luZm8odGhpcy5fJCl9O2JyZWFrO2Nhc2UgMTA6dGhpcy4kPXt0eXBlOlwiQ29udGVudFN0YXRlbWVudFwiLG9yaWdpbmFsOmZbaF0sdmFsdWU6ZltoXSxsb2M6ZC5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDExOnRoaXMuJD1kLnByZXBhcmVSYXdCbG9jayhmW2gtMl0sZltoLTFdLGZbaF0sdGhpcy5fJCk7YnJlYWs7Y2FzZSAxMjp0aGlzLiQ9e3BhdGg6ZltoLTNdLHBhcmFtczpmW2gtMl0saGFzaDpmW2gtMV19O2JyZWFrO2Nhc2UgMTM6dGhpcy4kPWQucHJlcGFyZUJsb2NrKGZbaC0zXSxmW2gtMl0sZltoLTFdLGZbaF0sITEsdGhpcy5fJCk7YnJlYWs7Y2FzZSAxNDp0aGlzLiQ9ZC5wcmVwYXJlQmxvY2soZltoLTNdLGZbaC0yXSxmW2gtMV0sZltoXSwhMCx0aGlzLl8kKTticmVhaztjYXNlIDE1OnRoaXMuJD17b3BlbjpmW2gtNV0scGF0aDpmW2gtNF0scGFyYW1zOmZbaC0zXSxoYXNoOmZbaC0yXSxibG9ja1BhcmFtczpmW2gtMV0sc3RyaXA6ZC5zdHJpcEZsYWdzKGZbaC01XSxmW2hdKX07YnJlYWs7Y2FzZSAxNjp0aGlzLiQ9e3BhdGg6ZltoLTRdLHBhcmFtczpmW2gtM10saGFzaDpmW2gtMl0sYmxvY2tQYXJhbXM6ZltoLTFdLHN0cmlwOmQuc3RyaXBGbGFncyhmW2gtNV0sZltoXSl9O2JyZWFrO2Nhc2UgMTc6dGhpcy4kPXtwYXRoOmZbaC00XSxwYXJhbXM6ZltoLTNdLGhhc2g6ZltoLTJdLGJsb2NrUGFyYW1zOmZbaC0xXSxzdHJpcDpkLnN0cmlwRmxhZ3MoZltoLTVdLGZbaF0pfTticmVhaztjYXNlIDE4OnRoaXMuJD17c3RyaXA6ZC5zdHJpcEZsYWdzKGZbaC0xXSxmW2gtMV0pLHByb2dyYW06ZltoXX07YnJlYWs7Y2FzZSAxOTp2YXIgaT1kLnByZXBhcmVCbG9jayhmW2gtMl0sZltoLTFdLGZbaF0sZltoXSwhMSx0aGlzLl8kKSxqPWQucHJlcGFyZVByb2dyYW0oW2ldLGZbaC0xXS5sb2MpO2ouY2hhaW5lZD0hMCx0aGlzLiQ9e3N0cmlwOmZbaC0yXS5zdHJpcCxwcm9ncmFtOmosY2hhaW46ITB9O2JyZWFrO2Nhc2UgMjA6dGhpcy4kPWZbaF07YnJlYWs7Y2FzZSAyMTp0aGlzLiQ9e3BhdGg6ZltoLTFdLHN0cmlwOmQuc3RyaXBGbGFncyhmW2gtMl0sZltoXSl9O2JyZWFrO2Nhc2UgMjI6dGhpcy4kPWQucHJlcGFyZU11c3RhY2hlKGZbaC0zXSxmW2gtMl0sZltoLTFdLGZbaC00XSxkLnN0cmlwRmxhZ3MoZltoLTRdLGZbaF0pLHRoaXMuXyQpO2JyZWFrO2Nhc2UgMjM6dGhpcy4kPWQucHJlcGFyZU11c3RhY2hlKGZbaC0zXSxmW2gtMl0sZltoLTFdLGZbaC00XSxkLnN0cmlwRmxhZ3MoZltoLTRdLGZbaF0pLHRoaXMuXyQpO2JyZWFrO2Nhc2UgMjQ6dGhpcy4kPXt0eXBlOlwiUGFydGlhbFN0YXRlbWVudFwiLG5hbWU6ZltoLTNdLHBhcmFtczpmW2gtMl0saGFzaDpmW2gtMV0saW5kZW50OlwiXCIsc3RyaXA6ZC5zdHJpcEZsYWdzKGZbaC00XSxmW2hdKSxsb2M6ZC5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDI1OnRoaXMuJD1kLnByZXBhcmVQYXJ0aWFsQmxvY2soZltoLTJdLGZbaC0xXSxmW2hdLHRoaXMuXyQpO2JyZWFrO2Nhc2UgMjY6dGhpcy4kPXtwYXRoOmZbaC0zXSxwYXJhbXM6ZltoLTJdLGhhc2g6ZltoLTFdLHN0cmlwOmQuc3RyaXBGbGFncyhmW2gtNF0sZltoXSl9O2JyZWFrO2Nhc2UgMjc6dGhpcy4kPWZbaF07YnJlYWs7Y2FzZSAyODp0aGlzLiQ9ZltoXTticmVhaztjYXNlIDI5OnRoaXMuJD17dHlwZTpcIlN1YkV4cHJlc3Npb25cIixwYXRoOmZbaC0zXSxwYXJhbXM6ZltoLTJdLGhhc2g6ZltoLTFdLGxvYzpkLmxvY0luZm8odGhpcy5fJCl9O2JyZWFrO2Nhc2UgMzA6dGhpcy4kPXt0eXBlOlwiSGFzaFwiLHBhaXJzOmZbaF0sbG9jOmQubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAzMTp0aGlzLiQ9e3R5cGU6XCJIYXNoUGFpclwiLGtleTpkLmlkKGZbaC0yXSksdmFsdWU6ZltoXSxsb2M6ZC5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDMyOnRoaXMuJD1kLmlkKGZbaC0xXSk7YnJlYWs7Y2FzZSAzMzp0aGlzLiQ9ZltoXTticmVhaztjYXNlIDM0OnRoaXMuJD1mW2hdO2JyZWFrO2Nhc2UgMzU6dGhpcy4kPXt0eXBlOlwiU3RyaW5nTGl0ZXJhbFwiLHZhbHVlOmZbaF0sb3JpZ2luYWw6ZltoXSxsb2M6ZC5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDM2OnRoaXMuJD17dHlwZTpcIk51bWJlckxpdGVyYWxcIix2YWx1ZTpOdW1iZXIoZltoXSksb3JpZ2luYWw6TnVtYmVyKGZbaF0pLGxvYzpkLmxvY0luZm8odGhpcy5fJCl9O2JyZWFrO2Nhc2UgMzc6dGhpcy4kPXt0eXBlOlwiQm9vbGVhbkxpdGVyYWxcIix2YWx1ZTpcInRydWVcIj09PWZbaF0sb3JpZ2luYWw6XCJ0cnVlXCI9PT1mW2hdLGxvYzpkLmxvY0luZm8odGhpcy5fJCl9O2JyZWFrO2Nhc2UgMzg6dGhpcy4kPXt0eXBlOlwiVW5kZWZpbmVkTGl0ZXJhbFwiLG9yaWdpbmFsOnZvaWQgMCx2YWx1ZTp2b2lkIDAsbG9jOmQubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAzOTp0aGlzLiQ9e3R5cGU6XCJOdWxsTGl0ZXJhbFwiLG9yaWdpbmFsOm51bGwsdmFsdWU6bnVsbCxsb2M6ZC5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDQwOnRoaXMuJD1mW2hdO2JyZWFrO2Nhc2UgNDE6dGhpcy4kPWZbaF07YnJlYWs7Y2FzZSA0Mjp0aGlzLiQ9ZC5wcmVwYXJlUGF0aCghMCxmW2hdLHRoaXMuXyQpO2JyZWFrO2Nhc2UgNDM6dGhpcy4kPWQucHJlcGFyZVBhdGgoITEsZltoXSx0aGlzLl8kKTticmVhaztjYXNlIDQ0OmZbaC0yXS5wdXNoKHtwYXJ0OmQuaWQoZltoXSksb3JpZ2luYWw6ZltoXSxzZXBhcmF0b3I6ZltoLTFdfSksdGhpcy4kPWZbaC0yXTticmVhaztjYXNlIDQ1OnRoaXMuJD1be3BhcnQ6ZC5pZChmW2hdKSxvcmlnaW5hbDpmW2hdfV07YnJlYWs7Y2FzZSA0Njp0aGlzLiQ9W107YnJlYWs7Y2FzZSA0NzpmW2gtMV0ucHVzaChmW2hdKTticmVhaztjYXNlIDQ4OnRoaXMuJD1bZltoXV07YnJlYWs7Y2FzZSA0OTpmW2gtMV0ucHVzaChmW2hdKTticmVhaztjYXNlIDUwOnRoaXMuJD1bXTticmVhaztjYXNlIDUxOmZbaC0xXS5wdXNoKGZbaF0pO2JyZWFrO2Nhc2UgNTg6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgNTk6ZltoLTFdLnB1c2goZltoXSk7YnJlYWs7Y2FzZSA2NDp0aGlzLiQ9W107YnJlYWs7Y2FzZSA2NTpmW2gtMV0ucHVzaChmW2hdKTticmVhaztjYXNlIDcwOnRoaXMuJD1bXTticmVhaztjYXNlIDcxOmZbaC0xXS5wdXNoKGZbaF0pO2JyZWFrO2Nhc2UgNzg6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgNzk6ZltoLTFdLnB1c2goZltoXSk7YnJlYWs7Y2FzZSA4Mjp0aGlzLiQ9W107YnJlYWs7Y2FzZSA4MzpmW2gtMV0ucHVzaChmW2hdKTticmVhaztjYXNlIDg2OnRoaXMuJD1bXTticmVhaztjYXNlIDg3OmZbaC0xXS5wdXNoKGZbaF0pO2JyZWFrO2Nhc2UgOTA6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgOTE6ZltoLTFdLnB1c2goZltoXSk7YnJlYWs7Y2FzZSA5NDp0aGlzLiQ9W107YnJlYWs7Y2FzZSA5NTpmW2gtMV0ucHVzaChmW2hdKTticmVhaztjYXNlIDk4OnRoaXMuJD1bZltoXV07YnJlYWs7Y2FzZSA5OTpmW2gtMV0ucHVzaChmW2hdKTticmVhaztjYXNlIDEwMDp0aGlzLiQ9W2ZbaF1dO2JyZWFrO2Nhc2UgMTAxOmZbaC0xXS5wdXNoKGZbaF0pfX0sdGFibGU6W3szOjEsNDoyLDU6WzIsNDZdLDY6MywxNDpbMiw0Nl0sMTU6WzIsNDZdLDE5OlsyLDQ2XSwyOTpbMiw0Nl0sMzQ6WzIsNDZdLDQ4OlsyLDQ2XSw1MTpbMiw0Nl0sNTU6WzIsNDZdLDYwOlsyLDQ2XX0sezE6WzNdfSx7NTpbMSw0XX0sezU6WzIsMl0sNzo1LDg6Niw5OjcsMTA6OCwxMTo5LDEyOjEwLDEzOjExLDE0OlsxLDEyXSwxNTpbMSwyMF0sMTY6MTcsMTk6WzEsMjNdLDI0OjE1LDI3OjE2LDI5OlsxLDIxXSwzNDpbMSwyMl0sMzk6WzIsMl0sNDQ6WzIsMl0sNDc6WzIsMl0sNDg6WzEsMTNdLDUxOlsxLDE0XSw1NTpbMSwxOF0sNTk6MTksNjA6WzEsMjRdfSx7MTpbMiwxXX0sezU6WzIsNDddLDE0OlsyLDQ3XSwxNTpbMiw0N10sMTk6WzIsNDddLDI5OlsyLDQ3XSwzNDpbMiw0N10sMzk6WzIsNDddLDQ0OlsyLDQ3XSw0NzpbMiw0N10sNDg6WzIsNDddLDUxOlsyLDQ3XSw1NTpbMiw0N10sNjA6WzIsNDddfSx7NTpbMiwzXSwxNDpbMiwzXSwxNTpbMiwzXSwxOTpbMiwzXSwyOTpbMiwzXSwzNDpbMiwzXSwzOTpbMiwzXSw0NDpbMiwzXSw0NzpbMiwzXSw0ODpbMiwzXSw1MTpbMiwzXSw1NTpbMiwzXSw2MDpbMiwzXX0sezU6WzIsNF0sMTQ6WzIsNF0sMTU6WzIsNF0sMTk6WzIsNF0sMjk6WzIsNF0sMzQ6WzIsNF0sMzk6WzIsNF0sNDQ6WzIsNF0sNDc6WzIsNF0sNDg6WzIsNF0sNTE6WzIsNF0sNTU6WzIsNF0sNjA6WzIsNF19LHs1OlsyLDVdLDE0OlsyLDVdLDE1OlsyLDVdLDE5OlsyLDVdLDI5OlsyLDVdLDM0OlsyLDVdLDM5OlsyLDVdLDQ0OlsyLDVdLDQ3OlsyLDVdLDQ4OlsyLDVdLDUxOlsyLDVdLDU1OlsyLDVdLDYwOlsyLDVdfSx7NTpbMiw2XSwxNDpbMiw2XSwxNTpbMiw2XSwxOTpbMiw2XSwyOTpbMiw2XSwzNDpbMiw2XSwzOTpbMiw2XSw0NDpbMiw2XSw0NzpbMiw2XSw0ODpbMiw2XSw1MTpbMiw2XSw1NTpbMiw2XSw2MDpbMiw2XX0sezU6WzIsN10sMTQ6WzIsN10sMTU6WzIsN10sMTk6WzIsN10sMjk6WzIsN10sMzQ6WzIsN10sMzk6WzIsN10sNDQ6WzIsN10sNDc6WzIsN10sNDg6WzIsN10sNTE6WzIsN10sNTU6WzIsN10sNjA6WzIsN119LHs1OlsyLDhdLDE0OlsyLDhdLDE1OlsyLDhdLDE5OlsyLDhdLDI5OlsyLDhdLDM0OlsyLDhdLDM5OlsyLDhdLDQ0OlsyLDhdLDQ3OlsyLDhdLDQ4OlsyLDhdLDUxOlsyLDhdLDU1OlsyLDhdLDYwOlsyLDhdfSx7NTpbMiw5XSwxNDpbMiw5XSwxNTpbMiw5XSwxOTpbMiw5XSwyOTpbMiw5XSwzNDpbMiw5XSwzOTpbMiw5XSw0NDpbMiw5XSw0NzpbMiw5XSw0ODpbMiw5XSw1MTpbMiw5XSw1NTpbMiw5XSw2MDpbMiw5XX0sezIwOjI1LDcyOlsxLDM1XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezIwOjM2LDcyOlsxLDM1XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezQ6MzcsNjozLDE0OlsyLDQ2XSwxNTpbMiw0Nl0sMTk6WzIsNDZdLDI5OlsyLDQ2XSwzNDpbMiw0Nl0sMzk6WzIsNDZdLDQ0OlsyLDQ2XSw0NzpbMiw0Nl0sNDg6WzIsNDZdLDUxOlsyLDQ2XSw1NTpbMiw0Nl0sNjA6WzIsNDZdfSx7NDozOCw2OjMsMTQ6WzIsNDZdLDE1OlsyLDQ2XSwxOTpbMiw0Nl0sMjk6WzIsNDZdLDM0OlsyLDQ2XSw0NDpbMiw0Nl0sNDc6WzIsNDZdLDQ4OlsyLDQ2XSw1MTpbMiw0Nl0sNTU6WzIsNDZdLDYwOlsyLDQ2XX0sezEzOjQwLDE1OlsxLDIwXSwxNzozOX0sezIwOjQyLDU2OjQxLDY0OjQzLDY1OlsxLDQ0XSw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHs0OjQ1LDY6MywxNDpbMiw0Nl0sMTU6WzIsNDZdLDE5OlsyLDQ2XSwyOTpbMiw0Nl0sMzQ6WzIsNDZdLDQ3OlsyLDQ2XSw0ODpbMiw0Nl0sNTE6WzIsNDZdLDU1OlsyLDQ2XSw2MDpbMiw0Nl19LHs1OlsyLDEwXSwxNDpbMiwxMF0sMTU6WzIsMTBdLDE4OlsyLDEwXSwxOTpbMiwxMF0sMjk6WzIsMTBdLDM0OlsyLDEwXSwzOTpbMiwxMF0sNDQ6WzIsMTBdLDQ3OlsyLDEwXSw0ODpbMiwxMF0sNTE6WzIsMTBdLDU1OlsyLDEwXSw2MDpbMiwxMF19LHsyMDo0Niw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDo0Nyw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDo0OCw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDo0Miw1Njo0OSw2NDo0Myw2NTpbMSw0NF0sNzI6WzEsMzVdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MzM6WzIsNzhdLDQ5OjUwLDY1OlsyLDc4XSw3MjpbMiw3OF0sODA6WzIsNzhdLDgxOlsyLDc4XSw4MjpbMiw3OF0sODM6WzIsNzhdLDg0OlsyLDc4XSw4NTpbMiw3OF19LHsyMzpbMiwzM10sMzM6WzIsMzNdLDU0OlsyLDMzXSw2NTpbMiwzM10sNjg6WzIsMzNdLDcyOlsyLDMzXSw3NTpbMiwzM10sODA6WzIsMzNdLDgxOlsyLDMzXSw4MjpbMiwzM10sODM6WzIsMzNdLDg0OlsyLDMzXSw4NTpbMiwzM119LHsyMzpbMiwzNF0sMzM6WzIsMzRdLDU0OlsyLDM0XSw2NTpbMiwzNF0sNjg6WzIsMzRdLDcyOlsyLDM0XSw3NTpbMiwzNF0sODA6WzIsMzRdLDgxOlsyLDM0XSw4MjpbMiwzNF0sODM6WzIsMzRdLDg0OlsyLDM0XSw4NTpbMiwzNF19LHsyMzpbMiwzNV0sMzM6WzIsMzVdLDU0OlsyLDM1XSw2NTpbMiwzNV0sNjg6WzIsMzVdLDcyOlsyLDM1XSw3NTpbMiwzNV0sODA6WzIsMzVdLDgxOlsyLDM1XSw4MjpbMiwzNV0sODM6WzIsMzVdLDg0OlsyLDM1XSw4NTpbMiwzNV19LHsyMzpbMiwzNl0sMzM6WzIsMzZdLDU0OlsyLDM2XSw2NTpbMiwzNl0sNjg6WzIsMzZdLDcyOlsyLDM2XSw3NTpbMiwzNl0sODA6WzIsMzZdLDgxOlsyLDM2XSw4MjpbMiwzNl0sODM6WzIsMzZdLDg0OlsyLDM2XSw4NTpbMiwzNl19LHsyMzpbMiwzN10sMzM6WzIsMzddLDU0OlsyLDM3XSw2NTpbMiwzN10sNjg6WzIsMzddLDcyOlsyLDM3XSw3NTpbMiwzN10sODA6WzIsMzddLDgxOlsyLDM3XSw4MjpbMiwzN10sODM6WzIsMzddLDg0OlsyLDM3XSw4NTpbMiwzN119LHsyMzpbMiwzOF0sMzM6WzIsMzhdLDU0OlsyLDM4XSw2NTpbMiwzOF0sNjg6WzIsMzhdLDcyOlsyLDM4XSw3NTpbMiwzOF0sODA6WzIsMzhdLDgxOlsyLDM4XSw4MjpbMiwzOF0sODM6WzIsMzhdLDg0OlsyLDM4XSw4NTpbMiwzOF19LHsyMzpbMiwzOV0sMzM6WzIsMzldLDU0OlsyLDM5XSw2NTpbMiwzOV0sNjg6WzIsMzldLDcyOlsyLDM5XSw3NTpbMiwzOV0sODA6WzIsMzldLDgxOlsyLDM5XSw4MjpbMiwzOV0sODM6WzIsMzldLDg0OlsyLDM5XSw4NTpbMiwzOV19LHsyMzpbMiw0M10sMzM6WzIsNDNdLDU0OlsyLDQzXSw2NTpbMiw0M10sNjg6WzIsNDNdLDcyOlsyLDQzXSw3NTpbMiw0M10sODA6WzIsNDNdLDgxOlsyLDQzXSw4MjpbMiw0M10sODM6WzIsNDNdLDg0OlsyLDQzXSw4NTpbMiw0M10sODc6WzEsNTFdfSx7NzI6WzEsMzVdLDg2OjUyfSx7MjM6WzIsNDVdLDMzOlsyLDQ1XSw1NDpbMiw0NV0sNjU6WzIsNDVdLDY4OlsyLDQ1XSw3MjpbMiw0NV0sNzU6WzIsNDVdLDgwOlsyLDQ1XSw4MTpbMiw0NV0sODI6WzIsNDVdLDgzOlsyLDQ1XSw4NDpbMiw0NV0sODU6WzIsNDVdLDg3OlsyLDQ1XX0sezUyOjUzLDU0OlsyLDgyXSw2NTpbMiw4Ml0sNzI6WzIsODJdLDgwOlsyLDgyXSw4MTpbMiw4Ml0sODI6WzIsODJdLDgzOlsyLDgyXSw4NDpbMiw4Ml0sODU6WzIsODJdfSx7MjU6NTQsMzg6NTYsMzk6WzEsNThdLDQzOjU3LDQ0OlsxLDU5XSw0NTo1NSw0NzpbMiw1NF19LHsyODo2MCw0Mzo2MSw0NDpbMSw1OV0sNDc6WzIsNTZdfSx7MTM6NjMsMTU6WzEsMjBdLDE4OlsxLDYyXX0sezE1OlsyLDQ4XSwxODpbMiw0OF19LHszMzpbMiw4Nl0sNTc6NjQsNjU6WzIsODZdLDcyOlsyLDg2XSw4MDpbMiw4Nl0sODE6WzIsODZdLDgyOlsyLDg2XSw4MzpbMiw4Nl0sODQ6WzIsODZdLDg1OlsyLDg2XX0sezMzOlsyLDQwXSw2NTpbMiw0MF0sNzI6WzIsNDBdLDgwOlsyLDQwXSw4MTpbMiw0MF0sODI6WzIsNDBdLDgzOlsyLDQwXSw4NDpbMiw0MF0sODU6WzIsNDBdfSx7MzM6WzIsNDFdLDY1OlsyLDQxXSw3MjpbMiw0MV0sODA6WzIsNDFdLDgxOlsyLDQxXSw4MjpbMiw0MV0sODM6WzIsNDFdLDg0OlsyLDQxXSw4NTpbMiw0MV19LHsyMDo2NSw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyNjo2Niw0NzpbMSw2N119LHszMDo2OCwzMzpbMiw1OF0sNjU6WzIsNThdLDcyOlsyLDU4XSw3NTpbMiw1OF0sODA6WzIsNThdLDgxOlsyLDU4XSw4MjpbMiw1OF0sODM6WzIsNThdLDg0OlsyLDU4XSw4NTpbMiw1OF19LHszMzpbMiw2NF0sMzU6NjksNjU6WzIsNjRdLDcyOlsyLDY0XSw3NTpbMiw2NF0sODA6WzIsNjRdLDgxOlsyLDY0XSw4MjpbMiw2NF0sODM6WzIsNjRdLDg0OlsyLDY0XSw4NTpbMiw2NF19LHsyMTo3MCwyMzpbMiw1MF0sNjU6WzIsNTBdLDcyOlsyLDUwXSw4MDpbMiw1MF0sODE6WzIsNTBdLDgyOlsyLDUwXSw4MzpbMiw1MF0sODQ6WzIsNTBdLDg1OlsyLDUwXX0sezMzOlsyLDkwXSw2MTo3MSw2NTpbMiw5MF0sNzI6WzIsOTBdLDgwOlsyLDkwXSw4MTpbMiw5MF0sODI6WzIsOTBdLDgzOlsyLDkwXSw4NDpbMiw5MF0sODU6WzIsOTBdfSx7MjA6NzUsMzM6WzIsODBdLDUwOjcyLDYzOjczLDY0Ojc2LDY1OlsxLDQ0XSw2OTo3NCw3MDo3Nyw3MTo3OCw3MjpbMSw3OV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHs3MjpbMSw4MF19LHsyMzpbMiw0Ml0sMzM6WzIsNDJdLDU0OlsyLDQyXSw2NTpbMiw0Ml0sNjg6WzIsNDJdLDcyOlsyLDQyXSw3NTpbMiw0Ml0sODA6WzIsNDJdLDgxOlsyLDQyXSw4MjpbMiw0Ml0sODM6WzIsNDJdLDg0OlsyLDQyXSw4NTpbMiw0Ml0sODc6WzEsNTFdfSx7MjA6NzUsNTM6ODEsNTQ6WzIsODRdLDYzOjgyLDY0Ojc2LDY1OlsxLDQ0XSw2OTo4Myw3MDo3Nyw3MTo3OCw3MjpbMSw3OV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyNjo4NCw0NzpbMSw2N119LHs0NzpbMiw1NV19LHs0Ojg1LDY6MywxNDpbMiw0Nl0sMTU6WzIsNDZdLDE5OlsyLDQ2XSwyOTpbMiw0Nl0sMzQ6WzIsNDZdLDM5OlsyLDQ2XSw0NDpbMiw0Nl0sNDc6WzIsNDZdLDQ4OlsyLDQ2XSw1MTpbMiw0Nl0sNTU6WzIsNDZdLDYwOlsyLDQ2XX0sezQ3OlsyLDIwXX0sezIwOjg2LDcyOlsxLDM1XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezQ6ODcsNjozLDE0OlsyLDQ2XSwxNTpbMiw0Nl0sMTk6WzIsNDZdLDI5OlsyLDQ2XSwzNDpbMiw0Nl0sNDc6WzIsNDZdLDQ4OlsyLDQ2XSw1MTpbMiw0Nl0sNTU6WzIsNDZdLDYwOlsyLDQ2XX0sezI2Ojg4LDQ3OlsxLDY3XX0sezQ3OlsyLDU3XX0sezU6WzIsMTFdLDE0OlsyLDExXSwxNTpbMiwxMV0sMTk6WzIsMTFdLDI5OlsyLDExXSwzNDpbMiwxMV0sMzk6WzIsMTFdLDQ0OlsyLDExXSw0NzpbMiwxMV0sNDg6WzIsMTFdLDUxOlsyLDExXSw1NTpbMiwxMV0sNjA6WzIsMTFdfSx7MTU6WzIsNDldLDE4OlsyLDQ5XX0sezIwOjc1LDMzOlsyLDg4XSw1ODo4OSw2Mzo5MCw2NDo3Niw2NTpbMSw0NF0sNjk6OTEsNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7NjU6WzIsOTRdLDY2OjkyLDY4OlsyLDk0XSw3MjpbMiw5NF0sODA6WzIsOTRdLDgxOlsyLDk0XSw4MjpbMiw5NF0sODM6WzIsOTRdLDg0OlsyLDk0XSw4NTpbMiw5NF19LHs1OlsyLDI1XSwxNDpbMiwyNV0sMTU6WzIsMjVdLDE5OlsyLDI1XSwyOTpbMiwyNV0sMzQ6WzIsMjVdLDM5OlsyLDI1XSw0NDpbMiwyNV0sNDc6WzIsMjVdLDQ4OlsyLDI1XSw1MTpbMiwyNV0sNTU6WzIsMjVdLDYwOlsyLDI1XX0sezIwOjkzLDcyOlsxLDM1XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezIwOjc1LDMxOjk0LDMzOlsyLDYwXSw2Mzo5NSw2NDo3Niw2NTpbMSw0NF0sNjk6OTYsNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc1OlsyLDYwXSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezIwOjc1LDMzOlsyLDY2XSwzNjo5Nyw2Mzo5OCw2NDo3Niw2NTpbMSw0NF0sNjk6OTksNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc1OlsyLDY2XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezIwOjc1LDIyOjEwMCwyMzpbMiw1Ml0sNjM6MTAxLDY0Ojc2LDY1OlsxLDQ0XSw2OToxMDIsNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjA6NzUsMzM6WzIsOTJdLDYyOjEwMyw2MzoxMDQsNjQ6NzYsNjU6WzEsNDRdLDY5OjEwNSw3MDo3Nyw3MTo3OCw3MjpbMSw3OV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHszMzpbMSwxMDZdfSx7MzM6WzIsNzldLDY1OlsyLDc5XSw3MjpbMiw3OV0sODA6WzIsNzldLDgxOlsyLDc5XSw4MjpbMiw3OV0sODM6WzIsNzldLDg0OlsyLDc5XSw4NTpbMiw3OV19LHszMzpbMiw4MV19LHsyMzpbMiwyN10sMzM6WzIsMjddLDU0OlsyLDI3XSw2NTpbMiwyN10sNjg6WzIsMjddLDcyOlsyLDI3XSw3NTpbMiwyN10sODA6WzIsMjddLDgxOlsyLDI3XSw4MjpbMiwyN10sODM6WzIsMjddLDg0OlsyLDI3XSw4NTpbMiwyN119LHsyMzpbMiwyOF0sMzM6WzIsMjhdLDU0OlsyLDI4XSw2NTpbMiwyOF0sNjg6WzIsMjhdLDcyOlsyLDI4XSw3NTpbMiwyOF0sODA6WzIsMjhdLDgxOlsyLDI4XSw4MjpbMiwyOF0sODM6WzIsMjhdLDg0OlsyLDI4XSw4NTpbMiwyOF19LHsyMzpbMiwzMF0sMzM6WzIsMzBdLDU0OlsyLDMwXSw2ODpbMiwzMF0sNzE6MTA3LDcyOlsxLDEwOF0sNzU6WzIsMzBdfSx7MjM6WzIsOThdLDMzOlsyLDk4XSw1NDpbMiw5OF0sNjg6WzIsOThdLDcyOlsyLDk4XSw3NTpbMiw5OF19LHsyMzpbMiw0NV0sMzM6WzIsNDVdLDU0OlsyLDQ1XSw2NTpbMiw0NV0sNjg6WzIsNDVdLDcyOlsyLDQ1XSw3MzpbMSwxMDldLDc1OlsyLDQ1XSw4MDpbMiw0NV0sODE6WzIsNDVdLDgyOlsyLDQ1XSw4MzpbMiw0NV0sODQ6WzIsNDVdLDg1OlsyLDQ1XSw4NzpbMiw0NV19LHsyMzpbMiw0NF0sMzM6WzIsNDRdLDU0OlsyLDQ0XSw2NTpbMiw0NF0sNjg6WzIsNDRdLDcyOlsyLDQ0XSw3NTpbMiw0NF0sODA6WzIsNDRdLDgxOlsyLDQ0XSw4MjpbMiw0NF0sODM6WzIsNDRdLDg0OlsyLDQ0XSw4NTpbMiw0NF0sODc6WzIsNDRdfSx7NTQ6WzEsMTEwXX0sezU0OlsyLDgzXSw2NTpbMiw4M10sNzI6WzIsODNdLDgwOlsyLDgzXSw4MTpbMiw4M10sODI6WzIsODNdLDgzOlsyLDgzXSw4NDpbMiw4M10sODU6WzIsODNdfSx7NTQ6WzIsODVdfSx7NTpbMiwxM10sMTQ6WzIsMTNdLDE1OlsyLDEzXSwxOTpbMiwxM10sMjk6WzIsMTNdLDM0OlsyLDEzXSwzOTpbMiwxM10sNDQ6WzIsMTNdLDQ3OlsyLDEzXSw0ODpbMiwxM10sNTE6WzIsMTNdLDU1OlsyLDEzXSw2MDpbMiwxM119LHszODo1NiwzOTpbMSw1OF0sNDM6NTcsNDQ6WzEsNTldLDQ1OjExMiw0NjoxMTEsNDc6WzIsNzZdfSx7MzM6WzIsNzBdLDQwOjExMyw2NTpbMiw3MF0sNzI6WzIsNzBdLDc1OlsyLDcwXSw4MDpbMiw3MF0sODE6WzIsNzBdLDgyOlsyLDcwXSw4MzpbMiw3MF0sODQ6WzIsNzBdLDg1OlsyLDcwXX0sezQ3OlsyLDE4XX0sezU6WzIsMTRdLDE0OlsyLDE0XSwxNTpbMiwxNF0sMTk6WzIsMTRdLDI5OlsyLDE0XSwzNDpbMiwxNF0sMzk6WzIsMTRdLDQ0OlsyLDE0XSw0NzpbMiwxNF0sNDg6WzIsMTRdLDUxOlsyLDE0XSw1NTpbMiwxNF0sNjA6WzIsMTRdfSx7MzM6WzEsMTE0XX0sezMzOlsyLDg3XSw2NTpbMiw4N10sNzI6WzIsODddLDgwOlsyLDg3XSw4MTpbMiw4N10sODI6WzIsODddLDgzOlsyLDg3XSw4NDpbMiw4N10sXG44NTpbMiw4N119LHszMzpbMiw4OV19LHsyMDo3NSw2MzoxMTYsNjQ6NzYsNjU6WzEsNDRdLDY3OjExNSw2ODpbMiw5Nl0sNjk6MTE3LDcwOjc3LDcxOjc4LDcyOlsxLDc5XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezMzOlsxLDExOF19LHszMjoxMTksMzM6WzIsNjJdLDc0OjEyMCw3NTpbMSwxMjFdfSx7MzM6WzIsNTldLDY1OlsyLDU5XSw3MjpbMiw1OV0sNzU6WzIsNTldLDgwOlsyLDU5XSw4MTpbMiw1OV0sODI6WzIsNTldLDgzOlsyLDU5XSw4NDpbMiw1OV0sODU6WzIsNTldfSx7MzM6WzIsNjFdLDc1OlsyLDYxXX0sezMzOlsyLDY4XSwzNzoxMjIsNzQ6MTIzLDc1OlsxLDEyMV19LHszMzpbMiw2NV0sNjU6WzIsNjVdLDcyOlsyLDY1XSw3NTpbMiw2NV0sODA6WzIsNjVdLDgxOlsyLDY1XSw4MjpbMiw2NV0sODM6WzIsNjVdLDg0OlsyLDY1XSw4NTpbMiw2NV19LHszMzpbMiw2N10sNzU6WzIsNjddfSx7MjM6WzEsMTI0XX0sezIzOlsyLDUxXSw2NTpbMiw1MV0sNzI6WzIsNTFdLDgwOlsyLDUxXSw4MTpbMiw1MV0sODI6WzIsNTFdLDgzOlsyLDUxXSw4NDpbMiw1MV0sODU6WzIsNTFdfSx7MjM6WzIsNTNdfSx7MzM6WzEsMTI1XX0sezMzOlsyLDkxXSw2NTpbMiw5MV0sNzI6WzIsOTFdLDgwOlsyLDkxXSw4MTpbMiw5MV0sODI6WzIsOTFdLDgzOlsyLDkxXSw4NDpbMiw5MV0sODU6WzIsOTFdfSx7MzM6WzIsOTNdfSx7NTpbMiwyMl0sMTQ6WzIsMjJdLDE1OlsyLDIyXSwxOTpbMiwyMl0sMjk6WzIsMjJdLDM0OlsyLDIyXSwzOTpbMiwyMl0sNDQ6WzIsMjJdLDQ3OlsyLDIyXSw0ODpbMiwyMl0sNTE6WzIsMjJdLDU1OlsyLDIyXSw2MDpbMiwyMl19LHsyMzpbMiw5OV0sMzM6WzIsOTldLDU0OlsyLDk5XSw2ODpbMiw5OV0sNzI6WzIsOTldLDc1OlsyLDk5XX0sezczOlsxLDEwOV19LHsyMDo3NSw2MzoxMjYsNjQ6NzYsNjU6WzEsNDRdLDcyOlsxLDM1XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezU6WzIsMjNdLDE0OlsyLDIzXSwxNTpbMiwyM10sMTk6WzIsMjNdLDI5OlsyLDIzXSwzNDpbMiwyM10sMzk6WzIsMjNdLDQ0OlsyLDIzXSw0NzpbMiwyM10sNDg6WzIsMjNdLDUxOlsyLDIzXSw1NTpbMiwyM10sNjA6WzIsMjNdfSx7NDc6WzIsMTldfSx7NDc6WzIsNzddfSx7MjA6NzUsMzM6WzIsNzJdLDQxOjEyNyw2MzoxMjgsNjQ6NzYsNjU6WzEsNDRdLDY5OjEyOSw3MDo3Nyw3MTo3OCw3MjpbMSw3OV0sNzU6WzIsNzJdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7NTpbMiwyNF0sMTQ6WzIsMjRdLDE1OlsyLDI0XSwxOTpbMiwyNF0sMjk6WzIsMjRdLDM0OlsyLDI0XSwzOTpbMiwyNF0sNDQ6WzIsMjRdLDQ3OlsyLDI0XSw0ODpbMiwyNF0sNTE6WzIsMjRdLDU1OlsyLDI0XSw2MDpbMiwyNF19LHs2ODpbMSwxMzBdfSx7NjU6WzIsOTVdLDY4OlsyLDk1XSw3MjpbMiw5NV0sODA6WzIsOTVdLDgxOlsyLDk1XSw4MjpbMiw5NV0sODM6WzIsOTVdLDg0OlsyLDk1XSw4NTpbMiw5NV19LHs2ODpbMiw5N119LHs1OlsyLDIxXSwxNDpbMiwyMV0sMTU6WzIsMjFdLDE5OlsyLDIxXSwyOTpbMiwyMV0sMzQ6WzIsMjFdLDM5OlsyLDIxXSw0NDpbMiwyMV0sNDc6WzIsMjFdLDQ4OlsyLDIxXSw1MTpbMiwyMV0sNTU6WzIsMjFdLDYwOlsyLDIxXX0sezMzOlsxLDEzMV19LHszMzpbMiw2M119LHs3MjpbMSwxMzNdLDc2OjEzMn0sezMzOlsxLDEzNF19LHszMzpbMiw2OV19LHsxNTpbMiwxMl19LHsxNDpbMiwyNl0sMTU6WzIsMjZdLDE5OlsyLDI2XSwyOTpbMiwyNl0sMzQ6WzIsMjZdLDQ3OlsyLDI2XSw0ODpbMiwyNl0sNTE6WzIsMjZdLDU1OlsyLDI2XSw2MDpbMiwyNl19LHsyMzpbMiwzMV0sMzM6WzIsMzFdLDU0OlsyLDMxXSw2ODpbMiwzMV0sNzI6WzIsMzFdLDc1OlsyLDMxXX0sezMzOlsyLDc0XSw0MjoxMzUsNzQ6MTM2LDc1OlsxLDEyMV19LHszMzpbMiw3MV0sNjU6WzIsNzFdLDcyOlsyLDcxXSw3NTpbMiw3MV0sODA6WzIsNzFdLDgxOlsyLDcxXSw4MjpbMiw3MV0sODM6WzIsNzFdLDg0OlsyLDcxXSw4NTpbMiw3MV19LHszMzpbMiw3M10sNzU6WzIsNzNdfSx7MjM6WzIsMjldLDMzOlsyLDI5XSw1NDpbMiwyOV0sNjU6WzIsMjldLDY4OlsyLDI5XSw3MjpbMiwyOV0sNzU6WzIsMjldLDgwOlsyLDI5XSw4MTpbMiwyOV0sODI6WzIsMjldLDgzOlsyLDI5XSw4NDpbMiwyOV0sODU6WzIsMjldfSx7MTQ6WzIsMTVdLDE1OlsyLDE1XSwxOTpbMiwxNV0sMjk6WzIsMTVdLDM0OlsyLDE1XSwzOTpbMiwxNV0sNDQ6WzIsMTVdLDQ3OlsyLDE1XSw0ODpbMiwxNV0sNTE6WzIsMTVdLDU1OlsyLDE1XSw2MDpbMiwxNV19LHs3MjpbMSwxMzhdLDc3OlsxLDEzN119LHs3MjpbMiwxMDBdLDc3OlsyLDEwMF19LHsxNDpbMiwxNl0sMTU6WzIsMTZdLDE5OlsyLDE2XSwyOTpbMiwxNl0sMzQ6WzIsMTZdLDQ0OlsyLDE2XSw0NzpbMiwxNl0sNDg6WzIsMTZdLDUxOlsyLDE2XSw1NTpbMiwxNl0sNjA6WzIsMTZdfSx7MzM6WzEsMTM5XX0sezMzOlsyLDc1XX0sezMzOlsyLDMyXX0sezcyOlsyLDEwMV0sNzc6WzIsMTAxXX0sezE0OlsyLDE3XSwxNTpbMiwxN10sMTk6WzIsMTddLDI5OlsyLDE3XSwzNDpbMiwxN10sMzk6WzIsMTddLDQ0OlsyLDE3XSw0NzpbMiwxN10sNDg6WzIsMTddLDUxOlsyLDE3XSw1NTpbMiwxN10sNjA6WzIsMTddfV0sZGVmYXVsdEFjdGlvbnM6ezQ6WzIsMV0sNTU6WzIsNTVdLDU3OlsyLDIwXSw2MTpbMiw1N10sNzQ6WzIsODFdLDgzOlsyLDg1XSw4NzpbMiwxOF0sOTE6WzIsODldLDEwMjpbMiw1M10sMTA1OlsyLDkzXSwxMTE6WzIsMTldLDExMjpbMiw3N10sMTE3OlsyLDk3XSwxMjA6WzIsNjNdLDEyMzpbMiw2OV0sMTI0OlsyLDEyXSwxMzY6WzIsNzVdLDEzNzpbMiwzMl19LHBhcnNlRXJyb3I6ZnVuY3Rpb24oYSxiKXt0aHJvdyBuZXcgRXJyb3IoYSl9LHBhcnNlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYTtyZXR1cm4gYT1jLmxleGVyLmxleCgpfHwxLFwibnVtYmVyXCIhPXR5cGVvZiBhJiYoYT1jLnN5bWJvbHNfW2FdfHxhKSxhfXZhciBjPXRoaXMsZD1bMF0sZT1bbnVsbF0sZj1bXSxnPXRoaXMudGFibGUsaD1cIlwiLGk9MCxqPTAsaz0wO3RoaXMubGV4ZXIuc2V0SW5wdXQoYSksdGhpcy5sZXhlci55eT10aGlzLnl5LHRoaXMueXkubGV4ZXI9dGhpcy5sZXhlcix0aGlzLnl5LnBhcnNlcj10aGlzLFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0aGlzLmxleGVyLnl5bGxvYyYmKHRoaXMubGV4ZXIueXlsbG9jPXt9KTt2YXIgbD10aGlzLmxleGVyLnl5bGxvYztmLnB1c2gobCk7dmFyIG09dGhpcy5sZXhlci5vcHRpb25zJiZ0aGlzLmxleGVyLm9wdGlvbnMucmFuZ2VzO1wiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMueXkucGFyc2VFcnJvciYmKHRoaXMucGFyc2VFcnJvcj10aGlzLnl5LnBhcnNlRXJyb3IpO2Zvcih2YXIgbixvLHAscSxyLHMsdCx1LHYsdz17fTs7KXtpZihwPWRbZC5sZW5ndGgtMV0sdGhpcy5kZWZhdWx0QWN0aW9uc1twXT9xPXRoaXMuZGVmYXVsdEFjdGlvbnNbcF06KG51bGwhPT1uJiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygbnx8KG49YigpKSxxPWdbcF0mJmdbcF1bbl0pLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBxfHwhcS5sZW5ndGh8fCFxWzBdKXt2YXIgeD1cIlwiO2lmKCFrKXt2PVtdO2ZvcihzIGluIGdbcF0pdGhpcy50ZXJtaW5hbHNfW3NdJiZzPjImJnYucHVzaChcIidcIit0aGlzLnRlcm1pbmFsc19bc10rXCInXCIpO3g9dGhpcy5sZXhlci5zaG93UG9zaXRpb24/XCJQYXJzZSBlcnJvciBvbiBsaW5lIFwiKyhpKzEpK1wiOlxcblwiK3RoaXMubGV4ZXIuc2hvd1Bvc2l0aW9uKCkrXCJcXG5FeHBlY3RpbmcgXCIrdi5qb2luKFwiLCBcIikrXCIsIGdvdCAnXCIrKHRoaXMudGVybWluYWxzX1tuXXx8bikrXCInXCI6XCJQYXJzZSBlcnJvciBvbiBsaW5lIFwiKyhpKzEpK1wiOiBVbmV4cGVjdGVkIFwiKygxPT1uP1wiZW5kIG9mIGlucHV0XCI6XCInXCIrKHRoaXMudGVybWluYWxzX1tuXXx8bikrXCInXCIpLHRoaXMucGFyc2VFcnJvcih4LHt0ZXh0OnRoaXMubGV4ZXIubWF0Y2gsdG9rZW46dGhpcy50ZXJtaW5hbHNfW25dfHxuLGxpbmU6dGhpcy5sZXhlci55eWxpbmVubyxsb2M6bCxleHBlY3RlZDp2fSl9fWlmKHFbMF1pbnN0YW5jZW9mIEFycmF5JiZxLmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcihcIlBhcnNlIEVycm9yOiBtdWx0aXBsZSBhY3Rpb25zIHBvc3NpYmxlIGF0IHN0YXRlOiBcIitwK1wiLCB0b2tlbjogXCIrbik7c3dpdGNoKHFbMF0pe2Nhc2UgMTpkLnB1c2gobiksZS5wdXNoKHRoaXMubGV4ZXIueXl0ZXh0KSxmLnB1c2godGhpcy5sZXhlci55eWxsb2MpLGQucHVzaChxWzFdKSxuPW51bGwsbz8obj1vLG89bnVsbCk6KGo9dGhpcy5sZXhlci55eWxlbmcsaD10aGlzLmxleGVyLnl5dGV4dCxpPXRoaXMubGV4ZXIueXlsaW5lbm8sbD10aGlzLmxleGVyLnl5bGxvYyxrPjAmJmstLSk7YnJlYWs7Y2FzZSAyOmlmKHQ9dGhpcy5wcm9kdWN0aW9uc19bcVsxXV1bMV0sdy4kPWVbZS5sZW5ndGgtdF0sdy5fJD17Zmlyc3RfbGluZTpmW2YubGVuZ3RoLSh0fHwxKV0uZmlyc3RfbGluZSxsYXN0X2xpbmU6ZltmLmxlbmd0aC0xXS5sYXN0X2xpbmUsZmlyc3RfY29sdW1uOmZbZi5sZW5ndGgtKHR8fDEpXS5maXJzdF9jb2x1bW4sbGFzdF9jb2x1bW46ZltmLmxlbmd0aC0xXS5sYXN0X2NvbHVtbn0sbSYmKHcuXyQucmFuZ2U9W2ZbZi5sZW5ndGgtKHR8fDEpXS5yYW5nZVswXSxmW2YubGVuZ3RoLTFdLnJhbmdlWzFdXSkscj10aGlzLnBlcmZvcm1BY3Rpb24uY2FsbCh3LGgsaixpLHRoaXMueXkscVsxXSxlLGYpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiByKXJldHVybiByO3QmJihkPWQuc2xpY2UoMCwtMSp0KjIpLGU9ZS5zbGljZSgwLC0xKnQpLGY9Zi5zbGljZSgwLC0xKnQpKSxkLnB1c2godGhpcy5wcm9kdWN0aW9uc19bcVsxXV1bMF0pLGUucHVzaCh3LiQpLGYucHVzaCh3Ll8kKSx1PWdbZFtkLmxlbmd0aC0yXV1bZFtkLmxlbmd0aC0xXV0sZC5wdXNoKHUpO2JyZWFrO2Nhc2UgMzpyZXR1cm4hMH19cmV0dXJuITB9fSxjPWZ1bmN0aW9uKCl7dmFyIGE9e0VPRjoxLHBhcnNlRXJyb3I6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy55eS5wYXJzZXIpdGhyb3cgbmV3IEVycm9yKGEpO3RoaXMueXkucGFyc2VyLnBhcnNlRXJyb3IoYSxiKX0sc2V0SW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2lucHV0PWEsdGhpcy5fbW9yZT10aGlzLl9sZXNzPXRoaXMuZG9uZT0hMSx0aGlzLnl5bGluZW5vPXRoaXMueXlsZW5nPTAsdGhpcy55eXRleHQ9dGhpcy5tYXRjaGVkPXRoaXMubWF0Y2g9XCJcIix0aGlzLmNvbmRpdGlvblN0YWNrPVtcIklOSVRJQUxcIl0sdGhpcy55eWxsb2M9e2ZpcnN0X2xpbmU6MSxmaXJzdF9jb2x1bW46MCxsYXN0X2xpbmU6MSxsYXN0X2NvbHVtbjowfSx0aGlzLm9wdGlvbnMucmFuZ2VzJiYodGhpcy55eWxsb2MucmFuZ2U9WzAsMF0pLHRoaXMub2Zmc2V0PTAsdGhpc30saW5wdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9pbnB1dFswXTt0aGlzLnl5dGV4dCs9YSx0aGlzLnl5bGVuZysrLHRoaXMub2Zmc2V0KyssdGhpcy5tYXRjaCs9YSx0aGlzLm1hdGNoZWQrPWE7dmFyIGI9YS5tYXRjaCgvKD86XFxyXFxuP3xcXG4pLiovZyk7cmV0dXJuIGI/KHRoaXMueXlsaW5lbm8rKyx0aGlzLnl5bGxvYy5sYXN0X2xpbmUrKyk6dGhpcy55eWxsb2MubGFzdF9jb2x1bW4rKyx0aGlzLm9wdGlvbnMucmFuZ2VzJiZ0aGlzLnl5bGxvYy5yYW5nZVsxXSsrLHRoaXMuX2lucHV0PXRoaXMuX2lucHV0LnNsaWNlKDEpLGF9LHVucHV0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGVuZ3RoLGM9YS5zcGxpdCgvKD86XFxyXFxuP3xcXG4pL2cpO3RoaXMuX2lucHV0PWErdGhpcy5faW5wdXQsdGhpcy55eXRleHQ9dGhpcy55eXRleHQuc3Vic3RyKDAsdGhpcy55eXRleHQubGVuZ3RoLWItMSksdGhpcy5vZmZzZXQtPWI7dmFyIGQ9dGhpcy5tYXRjaC5zcGxpdCgvKD86XFxyXFxuP3xcXG4pL2cpO3RoaXMubWF0Y2g9dGhpcy5tYXRjaC5zdWJzdHIoMCx0aGlzLm1hdGNoLmxlbmd0aC0xKSx0aGlzLm1hdGNoZWQ9dGhpcy5tYXRjaGVkLnN1YnN0cigwLHRoaXMubWF0Y2hlZC5sZW5ndGgtMSksYy5sZW5ndGgtMSYmKHRoaXMueXlsaW5lbm8tPWMubGVuZ3RoLTEpO3ZhciBlPXRoaXMueXlsbG9jLnJhbmdlO3JldHVybiB0aGlzLnl5bGxvYz17Zmlyc3RfbGluZTp0aGlzLnl5bGxvYy5maXJzdF9saW5lLGxhc3RfbGluZTp0aGlzLnl5bGluZW5vKzEsZmlyc3RfY29sdW1uOnRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbixsYXN0X2NvbHVtbjpjPyhjLmxlbmd0aD09PWQubGVuZ3RoP3RoaXMueXlsbG9jLmZpcnN0X2NvbHVtbjowKStkW2QubGVuZ3RoLWMubGVuZ3RoXS5sZW5ndGgtY1swXS5sZW5ndGg6dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uLWJ9LHRoaXMub3B0aW9ucy5yYW5nZXMmJih0aGlzLnl5bGxvYy5yYW5nZT1bZVswXSxlWzBdK3RoaXMueXlsZW5nLWJdKSx0aGlzfSxtb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vcmU9ITAsdGhpc30sbGVzczpmdW5jdGlvbihhKXt0aGlzLnVucHV0KHRoaXMubWF0Y2guc2xpY2UoYSkpfSxwYXN0SW5wdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hdGNoZWQuc3Vic3RyKDAsdGhpcy5tYXRjaGVkLmxlbmd0aC10aGlzLm1hdGNoLmxlbmd0aCk7cmV0dXJuKGEubGVuZ3RoPjIwP1wiLi4uXCI6XCJcIikrYS5zdWJzdHIoLTIwKS5yZXBsYWNlKC9cXG4vZyxcIlwiKX0sdXBjb21pbmdJbnB1dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWF0Y2g7cmV0dXJuIGEubGVuZ3RoPDIwJiYoYSs9dGhpcy5faW5wdXQuc3Vic3RyKDAsMjAtYS5sZW5ndGgpKSwoYS5zdWJzdHIoMCwyMCkrKGEubGVuZ3RoPjIwP1wiLi4uXCI6XCJcIikpLnJlcGxhY2UoL1xcbi9nLFwiXCIpfSxzaG93UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhc3RJbnB1dCgpLGI9bmV3IEFycmF5KGEubGVuZ3RoKzEpLmpvaW4oXCItXCIpO3JldHVybiBhK3RoaXMudXBjb21pbmdJbnB1dCgpK1wiXFxuXCIrYitcIl5cIn0sbmV4dDpmdW5jdGlvbigpe2lmKHRoaXMuZG9uZSlyZXR1cm4gdGhpcy5FT0Y7dGhpcy5faW5wdXR8fCh0aGlzLmRvbmU9ITApO3ZhciBhLGIsYyxkLGU7dGhpcy5fbW9yZXx8KHRoaXMueXl0ZXh0PVwiXCIsdGhpcy5tYXRjaD1cIlwiKTtmb3IodmFyIGY9dGhpcy5fY3VycmVudFJ1bGVzKCksZz0wO2c8Zi5sZW5ndGgmJihjPXRoaXMuX2lucHV0Lm1hdGNoKHRoaXMucnVsZXNbZltnXV0pLCFjfHxiJiYhKGNbMF0ubGVuZ3RoPmJbMF0ubGVuZ3RoKXx8KGI9YyxkPWcsdGhpcy5vcHRpb25zLmZsZXgpKTtnKyspO3JldHVybiBiPyhlPWJbMF0ubWF0Y2goLyg/Olxcclxcbj98XFxuKS4qL2cpLGUmJih0aGlzLnl5bGluZW5vKz1lLmxlbmd0aCksdGhpcy55eWxsb2M9e2ZpcnN0X2xpbmU6dGhpcy55eWxsb2MubGFzdF9saW5lLGxhc3RfbGluZTp0aGlzLnl5bGluZW5vKzEsZmlyc3RfY29sdW1uOnRoaXMueXlsbG9jLmxhc3RfY29sdW1uLGxhc3RfY29sdW1uOmU/ZVtlLmxlbmd0aC0xXS5sZW5ndGgtZVtlLmxlbmd0aC0xXS5tYXRjaCgvXFxyP1xcbj8vKVswXS5sZW5ndGg6dGhpcy55eWxsb2MubGFzdF9jb2x1bW4rYlswXS5sZW5ndGh9LHRoaXMueXl0ZXh0Kz1iWzBdLHRoaXMubWF0Y2grPWJbMF0sdGhpcy5tYXRjaGVzPWIsdGhpcy55eWxlbmc9dGhpcy55eXRleHQubGVuZ3RoLHRoaXMub3B0aW9ucy5yYW5nZXMmJih0aGlzLnl5bGxvYy5yYW5nZT1bdGhpcy5vZmZzZXQsdGhpcy5vZmZzZXQrPXRoaXMueXlsZW5nXSksdGhpcy5fbW9yZT0hMSx0aGlzLl9pbnB1dD10aGlzLl9pbnB1dC5zbGljZShiWzBdLmxlbmd0aCksdGhpcy5tYXRjaGVkKz1iWzBdLGE9dGhpcy5wZXJmb3JtQWN0aW9uLmNhbGwodGhpcyx0aGlzLnl5LHRoaXMsZltkXSx0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTFdKSx0aGlzLmRvbmUmJnRoaXMuX2lucHV0JiYodGhpcy5kb25lPSExKSxhP2E6dm9pZCAwKTpcIlwiPT09dGhpcy5faW5wdXQ/dGhpcy5FT0Y6dGhpcy5wYXJzZUVycm9yKFwiTGV4aWNhbCBlcnJvciBvbiBsaW5lIFwiKyh0aGlzLnl5bGluZW5vKzEpK1wiLiBVbnJlY29nbml6ZWQgdGV4dC5cXG5cIit0aGlzLnNob3dQb3NpdGlvbigpLHt0ZXh0OlwiXCIsdG9rZW46bnVsbCxsaW5lOnRoaXMueXlsaW5lbm99KX0sbGV4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0KCk7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGE/YTp0aGlzLmxleCgpfSxiZWdpbjpmdW5jdGlvbihhKXt0aGlzLmNvbmRpdGlvblN0YWNrLnB1c2goYSl9LHBvcFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZGl0aW9uU3RhY2sucG9wKCl9LF9jdXJyZW50UnVsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25kaXRpb25zW3RoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMV1dLnJ1bGVzfSx0b3BTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTJdfSxwdXNoU3RhdGU6ZnVuY3Rpb24oYSl7dGhpcy5iZWdpbihhKX19O3JldHVybiBhLm9wdGlvbnM9e30sYS5wZXJmb3JtQWN0aW9uPWZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSxjKXtyZXR1cm4gYi55eXRleHQ9Yi55eXRleHQuc3Vic3RyKGEsYi55eWxlbmctYyl9c3dpdGNoKGMpe2Nhc2UgMDppZihcIlxcXFxcXFxcXCI9PT1iLnl5dGV4dC5zbGljZSgtMik/KGUoMCwxKSx0aGlzLmJlZ2luKFwibXVcIikpOlwiXFxcXFwiPT09Yi55eXRleHQuc2xpY2UoLTEpPyhlKDAsMSksdGhpcy5iZWdpbihcImVtdVwiKSk6dGhpcy5iZWdpbihcIm11XCIpLGIueXl0ZXh0KXJldHVybiAxNTticmVhaztjYXNlIDE6cmV0dXJuIDE1O2Nhc2UgMjpyZXR1cm4gdGhpcy5wb3BTdGF0ZSgpLDE1O2Nhc2UgMzpyZXR1cm4gdGhpcy5iZWdpbihcInJhd1wiKSwxNTtjYXNlIDQ6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSxcInJhd1wiPT09dGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aC0xXT8xNTooYi55eXRleHQ9Yi55eXRleHQuc3Vic3RyKDUsYi55eWxlbmctOSksXCJFTkRfUkFXX0JMT0NLXCIpO2Nhc2UgNTpyZXR1cm4gMTU7Y2FzZSA2OnJldHVybiB0aGlzLnBvcFN0YXRlKCksMTQ7Y2FzZSA3OnJldHVybiA2NTtjYXNlIDg6cmV0dXJuIDY4O2Nhc2UgOTpyZXR1cm4gMTk7Y2FzZSAxMDpyZXR1cm4gdGhpcy5wb3BTdGF0ZSgpLHRoaXMuYmVnaW4oXCJyYXdcIiksMjM7Y2FzZSAxMTpyZXR1cm4gNTU7Y2FzZSAxMjpyZXR1cm4gNjA7Y2FzZSAxMzpyZXR1cm4gMjk7Y2FzZSAxNDpyZXR1cm4gNDc7Y2FzZSAxNTpyZXR1cm4gdGhpcy5wb3BTdGF0ZSgpLDQ0O2Nhc2UgMTY6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSw0NDtjYXNlIDE3OnJldHVybiAzNDtjYXNlIDE4OnJldHVybiAzOTtjYXNlIDE5OnJldHVybiA1MTtjYXNlIDIwOnJldHVybiA0ODtjYXNlIDIxOnRoaXMudW5wdXQoYi55eXRleHQpLHRoaXMucG9wU3RhdGUoKSx0aGlzLmJlZ2luKFwiY29tXCIpO2JyZWFrO2Nhc2UgMjI6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSwxNDtjYXNlIDIzOnJldHVybiA0ODtjYXNlIDI0OnJldHVybiA3MztjYXNlIDI1OnJldHVybiA3MjtjYXNlIDI2OnJldHVybiA3MjtjYXNlIDI3OnJldHVybiA4NztjYXNlIDI4OmJyZWFrO2Nhc2UgMjk6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSw1NDtjYXNlIDMwOnJldHVybiB0aGlzLnBvcFN0YXRlKCksMzM7Y2FzZSAzMTpyZXR1cm4gYi55eXRleHQ9ZSgxLDIpLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpLDgwO2Nhc2UgMzI6cmV0dXJuIGIueXl0ZXh0PWUoMSwyKS5yZXBsYWNlKC9cXFxcJy9nLFwiJ1wiKSw4MDtjYXNlIDMzOnJldHVybiA4NTtjYXNlIDM0OnJldHVybiA4MjtjYXNlIDM1OnJldHVybiA4MjtjYXNlIDM2OnJldHVybiA4MztjYXNlIDM3OnJldHVybiA4NDtjYXNlIDM4OnJldHVybiA4MTtjYXNlIDM5OnJldHVybiA3NTtjYXNlIDQwOnJldHVybiA3NztjYXNlIDQxOnJldHVybiA3MjtjYXNlIDQyOnJldHVybiBiLnl5dGV4dD1iLnl5dGV4dC5yZXBsYWNlKC9cXFxcKFtcXFxcXFxdXSkvZyxcIiQxXCIpLDcyO2Nhc2UgNDM6cmV0dXJuXCJJTlZBTElEXCI7Y2FzZSA0NDpyZXR1cm4gNX19LGEucnVsZXM9Wy9eKD86W15cXHgwMF0qPyg/PShcXHtcXHspKSkvLC9eKD86W15cXHgwMF0rKS8sL14oPzpbXlxceDAwXXsyLH0/KD89KFxce1xce3xcXFxcXFx7XFx7fFxcXFxcXFxcXFx7XFx7fCQpKSkvLC9eKD86XFx7XFx7XFx7XFx7KD89W15cXC9dKSkvLC9eKD86XFx7XFx7XFx7XFx7XFwvW15cXHMhXCIjJS0sXFwuXFwvOy0+QFxcWy1cXF5gXFx7LX5dKyg/PVs9fVxcc1xcLy5dKVxcfVxcfVxcfVxcfSkvLC9eKD86W15cXHgwMF0qPyg/PShcXHtcXHtcXHtcXHspKSkvLC9eKD86W1xcc1xcU10qPy0tKH4pP1xcfVxcfSkvLC9eKD86XFwoKS8sL14oPzpcXCkpLywvXig/Olxce1xce1xce1xceykvLC9eKD86XFx9XFx9XFx9XFx9KS8sL14oPzpcXHtcXHsofik/PikvLC9eKD86XFx7XFx7KH4pPyM+KS8sL14oPzpcXHtcXHsofik/I1xcKj8pLywvXig/Olxce1xceyh+KT9cXC8pLywvXig/Olxce1xceyh+KT9cXF5cXHMqKH4pP1xcfVxcfSkvLC9eKD86XFx7XFx7KH4pP1xccyplbHNlXFxzKih+KT9cXH1cXH0pLywvXig/Olxce1xceyh+KT9cXF4pLywvXig/Olxce1xceyh+KT9cXHMqZWxzZVxcYikvLC9eKD86XFx7XFx7KH4pP1xceykvLC9eKD86XFx7XFx7KH4pPyYpLywvXig/Olxce1xceyh+KT8hLS0pLywvXig/Olxce1xceyh+KT8hW1xcc1xcU10qP1xcfVxcfSkvLC9eKD86XFx7XFx7KH4pP1xcKj8pLywvXig/Oj0pLywvXig/OlxcLlxcLikvLC9eKD86XFwuKD89KFs9fn1cXHNcXC8uKXxdKSkpLywvXig/OltcXC8uXSkvLC9eKD86XFxzKykvLC9eKD86XFx9KH4pP1xcfVxcfSkvLC9eKD86KH4pP1xcfVxcfSkvLC9eKD86XCIoXFxcXFtcIl18W15cIl0pKlwiKS8sL14oPzonKFxcXFxbJ118W14nXSkqJykvLC9eKD86QCkvLC9eKD86dHJ1ZSg/PShbfn1cXHMpXSkpKS8sL14oPzpmYWxzZSg/PShbfn1cXHMpXSkpKS8sL14oPzp1bmRlZmluZWQoPz0oW359XFxzKV0pKSkvLC9eKD86bnVsbCg/PShbfn1cXHMpXSkpKS8sL14oPzotP1swLTldKyg/OlxcLlswLTldKyk/KD89KFt+fVxccyldKSkpLywvXig/OmFzXFxzK1xcfCkvLC9eKD86XFx8KS8sL14oPzooW15cXHMhXCIjJS0sXFwuXFwvOy0+QFxcWy1cXF5gXFx7LX5dKyg/PShbPX59XFxzXFwvLil8XSkpKSkvLC9eKD86XFxbKFxcXFxcXF18W15cXF1dKSpcXF0pLywvXig/Oi4pLywvXig/OiQpL10sYS5jb25kaXRpb25zPXttdTp7cnVsZXM6WzcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0XSxpbmNsdXNpdmU6ITF9LGVtdTp7cnVsZXM6WzJdLGluY2x1c2l2ZTohMX0sY29tOntydWxlczpbNl0saW5jbHVzaXZlOiExfSxyYXc6e3J1bGVzOlszLDQsNV0saW5jbHVzaXZlOiExfSxJTklUSUFMOntydWxlczpbMCwxLDQ0XSxpbmNsdXNpdmU6ITB9fSxhfSgpO3JldHVybiBiLmxleGVyPWMsYS5wcm90b3R5cGU9YixiLlBhcnNlcj1hLG5ldyBhfSgpO2JbXCJkZWZhdWx0XCJdPWMsYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZCgpe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF07dGhpcy5vcHRpb25zPWF9ZnVuY3Rpb24gZShhLGIsYyl7dm9pZCAwPT09YiYmKGI9YS5sZW5ndGgpO3ZhciBkPWFbYi0xXSxlPWFbYi0yXTtyZXR1cm4gZD9cIkNvbnRlbnRTdGF0ZW1lbnRcIj09PWQudHlwZT8oZXx8IWM/L1xccj9cXG5cXHMqPyQvOi8oXnxcXHI/XFxuKVxccyo/JC8pLnRlc3QoZC5vcmlnaW5hbCk6dm9pZCAwOmN9ZnVuY3Rpb24gZihhLGIsYyl7dm9pZCAwPT09YiYmKGI9LTEpO3ZhciBkPWFbYisxXSxlPWFbYisyXTtyZXR1cm4gZD9cIkNvbnRlbnRTdGF0ZW1lbnRcIj09PWQudHlwZT8oZXx8IWM/L15cXHMqP1xccj9cXG4vOi9eXFxzKj8oXFxyP1xcbnwkKS8pLnRlc3QoZC5vcmlnaW5hbCk6dm9pZCAwOmN9ZnVuY3Rpb24gZyhhLGIsYyl7dmFyIGQ9YVtudWxsPT1iPzA6YisxXTtpZihkJiZcIkNvbnRlbnRTdGF0ZW1lbnRcIj09PWQudHlwZSYmKGN8fCFkLnJpZ2h0U3RyaXBwZWQpKXt2YXIgZT1kLnZhbHVlO2QudmFsdWU9ZC52YWx1ZS5yZXBsYWNlKGM/L15cXHMrLzovXlsgXFx0XSpcXHI/XFxuPy8sXCJcIiksZC5yaWdodFN0cmlwcGVkPWQudmFsdWUhPT1lfX1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1hW251bGw9PWI/YS5sZW5ndGgtMTpiLTFdO2lmKGQmJlwiQ29udGVudFN0YXRlbWVudFwiPT09ZC50eXBlJiYoY3x8IWQubGVmdFN0cmlwcGVkKSl7dmFyIGU9ZC52YWx1ZTtyZXR1cm4gZC52YWx1ZT1kLnZhbHVlLnJlcGxhY2UoYz8vXFxzKyQvOi9bIFxcdF0rJC8sXCJcIiksZC5sZWZ0U3RyaXBwZWQ9ZC52YWx1ZSE9PWUsZC5sZWZ0U3RyaXBwZWR9fXZhciBpPWMoMSlbXCJkZWZhdWx0XCJdO2IuX19lc01vZHVsZT0hMDt2YXIgaj1jKDM5KSxrPWkoaik7ZC5wcm90b3R5cGU9bmV3IGtbXCJkZWZhdWx0XCJdLGQucHJvdG90eXBlLlByb2dyYW09ZnVuY3Rpb24oYSl7dmFyIGI9IXRoaXMub3B0aW9ucy5pZ25vcmVTdGFuZGFsb25lLGM9IXRoaXMuaXNSb290U2Vlbjt0aGlzLmlzUm9vdFNlZW49ITA7Zm9yKHZhciBkPWEuYm9keSxpPTAsaj1kLmxlbmd0aDtpPGo7aSsrKXt2YXIgaz1kW2ldLGw9dGhpcy5hY2NlcHQoayk7aWYobCl7dmFyIG09ZShkLGksYyksbj1mKGQsaSxjKSxvPWwub3BlblN0YW5kYWxvbmUmJm0scD1sLmNsb3NlU3RhbmRhbG9uZSYmbixxPWwuaW5saW5lU3RhbmRhbG9uZSYmbSYmbjtsLmNsb3NlJiZnKGQsaSwhMCksbC5vcGVuJiZoKGQsaSwhMCksYiYmcSYmKGcoZCxpKSxoKGQsaSkmJlwiUGFydGlhbFN0YXRlbWVudFwiPT09ay50eXBlJiYoay5pbmRlbnQ9LyhbIFxcdF0rJCkvLmV4ZWMoZFtpLTFdLm9yaWdpbmFsKVsxXSkpLGImJm8mJihnKChrLnByb2dyYW18fGsuaW52ZXJzZSkuYm9keSksaChkLGkpKSxiJiZwJiYoZyhkLGkpLGgoKGsuaW52ZXJzZXx8ay5wcm9ncmFtKS5ib2R5KSl9fXJldHVybiBhfSxkLnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudD1kLnByb3RvdHlwZS5EZWNvcmF0b3JCbG9jaz1kLnByb3RvdHlwZS5QYXJ0aWFsQmxvY2tTdGF0ZW1lbnQ9ZnVuY3Rpb24oYSl7dGhpcy5hY2NlcHQoYS5wcm9ncmFtKSx0aGlzLmFjY2VwdChhLmludmVyc2UpO3ZhciBiPWEucHJvZ3JhbXx8YS5pbnZlcnNlLGM9YS5wcm9ncmFtJiZhLmludmVyc2UsZD1jLGk9YztpZihjJiZjLmNoYWluZWQpZm9yKGQ9Yy5ib2R5WzBdLnByb2dyYW07aS5jaGFpbmVkOylpPWkuYm9keVtpLmJvZHkubGVuZ3RoLTFdLnByb2dyYW07dmFyIGo9e29wZW46YS5vcGVuU3RyaXAub3BlbixjbG9zZTphLmNsb3NlU3RyaXAuY2xvc2Usb3BlblN0YW5kYWxvbmU6ZihiLmJvZHkpLGNsb3NlU3RhbmRhbG9uZTplKChkfHxiKS5ib2R5KX07aWYoYS5vcGVuU3RyaXAuY2xvc2UmJmcoYi5ib2R5LG51bGwsITApLGMpe3ZhciBrPWEuaW52ZXJzZVN0cmlwO2sub3BlbiYmaChiLmJvZHksbnVsbCwhMCksay5jbG9zZSYmZyhkLmJvZHksbnVsbCwhMCksYS5jbG9zZVN0cmlwLm9wZW4mJmgoaS5ib2R5LG51bGwsITApLCF0aGlzLm9wdGlvbnMuaWdub3JlU3RhbmRhbG9uZSYmZShiLmJvZHkpJiZmKGQuYm9keSkmJihoKGIuYm9keSksZyhkLmJvZHkpKX1lbHNlIGEuY2xvc2VTdHJpcC5vcGVuJiZoKGIuYm9keSxudWxsLCEwKTtyZXR1cm4gan0sZC5wcm90b3R5cGUuRGVjb3JhdG9yPWQucHJvdG90eXBlLk11c3RhY2hlU3RhdGVtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBhLnN0cmlwfSxkLnByb3RvdHlwZS5QYXJ0aWFsU3RhdGVtZW50PWQucHJvdG90eXBlLkNvbW1lbnRTdGF0ZW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHJpcHx8e307cmV0dXJue2lubGluZVN0YW5kYWxvbmU6ITAsb3BlbjpiLm9wZW4sY2xvc2U6Yi5jbG9zZX19LGJbXCJkZWZhdWx0XCJdPWQsYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZCgpe3RoaXMucGFyZW50cz1bXX1mdW5jdGlvbiBlKGEpe3RoaXMuYWNjZXB0UmVxdWlyZWQoYSxcInBhdGhcIiksdGhpcy5hY2NlcHRBcnJheShhLnBhcmFtcyksdGhpcy5hY2NlcHRLZXkoYSxcImhhc2hcIil9ZnVuY3Rpb24gZihhKXtlLmNhbGwodGhpcyxhKSx0aGlzLmFjY2VwdEtleShhLFwicHJvZ3JhbVwiKSx0aGlzLmFjY2VwdEtleShhLFwiaW52ZXJzZVwiKX1mdW5jdGlvbiBnKGEpe3RoaXMuYWNjZXB0UmVxdWlyZWQoYSxcIm5hbWVcIiksdGhpcy5hY2NlcHRBcnJheShhLnBhcmFtcyksdGhpcy5hY2NlcHRLZXkoYSxcImhhc2hcIil9dmFyIGg9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwO3ZhciBpPWMoNiksaj1oKGkpO2QucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpkLG11dGF0aW5nOiExLGFjY2VwdEtleTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWNjZXB0KGFbYl0pO2lmKHRoaXMubXV0YXRpbmcpe2lmKGMmJiFkLnByb3RvdHlwZVtjLnR5cGVdKXRocm93IG5ldyBqW1wiZGVmYXVsdFwiXSgnVW5leHBlY3RlZCBub2RlIHR5cGUgXCInK2MudHlwZSsnXCIgZm91bmQgd2hlbiBhY2NlcHRpbmcgJytiK1wiIG9uIFwiK2EudHlwZSk7YVtiXT1jfX0sYWNjZXB0UmVxdWlyZWQ6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmFjY2VwdEtleShhLGIpLCFhW2JdKXRocm93IG5ldyBqW1wiZGVmYXVsdFwiXShhLnR5cGUrXCIgcmVxdWlyZXMgXCIrYil9LGFjY2VwdEFycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFjY2VwdEtleShhLGIpLGFbYl18fChhLnNwbGljZShiLDEpLGItLSxjLS0pfSxhY2NlcHQ6ZnVuY3Rpb24oYSl7aWYoYSl7aWYoIXRoaXNbYS50eXBlXSl0aHJvdyBuZXcgaltcImRlZmF1bHRcIl0oXCJVbmtub3duIHR5cGU6IFwiK2EudHlwZSxhKTt0aGlzLmN1cnJlbnQmJnRoaXMucGFyZW50cy51bnNoaWZ0KHRoaXMuY3VycmVudCksdGhpcy5jdXJyZW50PWE7dmFyIGI9dGhpc1thLnR5cGVdKGEpO3JldHVybiB0aGlzLmN1cnJlbnQ9dGhpcy5wYXJlbnRzLnNoaWZ0KCksIXRoaXMubXV0YXRpbmd8fGI/YjpiIT09ITE/YTp2b2lkIDB9fSxQcm9ncmFtOmZ1bmN0aW9uKGEpe3RoaXMuYWNjZXB0QXJyYXkoYS5ib2R5KX0sTXVzdGFjaGVTdGF0ZW1lbnQ6ZSxEZWNvcmF0b3I6ZSxCbG9ja1N0YXRlbWVudDpmLERlY29yYXRvckJsb2NrOmYsUGFydGlhbFN0YXRlbWVudDpnLFBhcnRpYWxCbG9ja1N0YXRlbWVudDpmdW5jdGlvbihhKXtnLmNhbGwodGhpcyxhKSx0aGlzLmFjY2VwdEtleShhLFwicHJvZ3JhbVwiKX0sQ29udGVudFN0YXRlbWVudDpmdW5jdGlvbigpe30sQ29tbWVudFN0YXRlbWVudDpmdW5jdGlvbigpe30sU3ViRXhwcmVzc2lvbjplLFBhdGhFeHByZXNzaW9uOmZ1bmN0aW9uKCl7fSxTdHJpbmdMaXRlcmFsOmZ1bmN0aW9uKCl7fSxOdW1iZXJMaXRlcmFsOmZ1bmN0aW9uKCl7fSxCb29sZWFuTGl0ZXJhbDpmdW5jdGlvbigpe30sVW5kZWZpbmVkTGl0ZXJhbDpmdW5jdGlvbigpe30sTnVsbExpdGVyYWw6ZnVuY3Rpb24oKXt9LEhhc2g6ZnVuY3Rpb24oYSl7dGhpcy5hY2NlcHRBcnJheShhLnBhaXJzKX0sSGFzaFBhaXI6ZnVuY3Rpb24oYSl7dGhpcy5hY2NlcHRSZXF1aXJlZChhLFwidmFsdWVcIil9fSxiW1wiZGVmYXVsdFwiXT1kLGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiKXtpZihiPWIucGF0aD9iLnBhdGgub3JpZ2luYWw6YixhLnBhdGgub3JpZ2luYWwhPT1iKXt2YXIgYz17bG9jOmEucGF0aC5sb2N9O3Rocm93IG5ldyBxW1wiZGVmYXVsdFwiXShhLnBhdGgub3JpZ2luYWwrXCIgZG9lc24ndCBtYXRjaCBcIitiLGMpfX1mdW5jdGlvbiBlKGEsYil7dGhpcy5zb3VyY2U9YSx0aGlzLnN0YXJ0PXtsaW5lOmIuZmlyc3RfbGluZSxjb2x1bW46Yi5maXJzdF9jb2x1bW59LHRoaXMuZW5kPXtsaW5lOmIubGFzdF9saW5lLGNvbHVtbjpiLmxhc3RfY29sdW1ufX1mdW5jdGlvbiBmKGEpe3JldHVybi9eXFxbLipcXF0kLy50ZXN0KGEpP2Euc3Vic3RyKDEsYS5sZW5ndGgtMik6YX1mdW5jdGlvbiBnKGEsYil7cmV0dXJue29wZW46XCJ+XCI9PT1hLmNoYXJBdCgyKSxjbG9zZTpcIn5cIj09PWIuY2hhckF0KGIubGVuZ3RoLTMpfX1mdW5jdGlvbiBoKGEpe3JldHVybiBhLnJlcGxhY2UoL15cXHtcXHt+P1xcIS0/LT8vLFwiXCIpLnJlcGxhY2UoLy0/LT9+P1xcfVxcfSQvLFwiXCIpfWZ1bmN0aW9uIGkoYSxiLGMpe2M9dGhpcy5sb2NJbmZvKGMpO2Zvcih2YXIgZD1hP1wiQFwiOlwiXCIsZT1bXSxmPTAsZz1cIlwiLGg9MCxpPWIubGVuZ3RoO2g8aTtoKyspe3ZhciBqPWJbaF0ucGFydCxrPWJbaF0ub3JpZ2luYWwhPT1qO2lmKGQrPShiW2hdLnNlcGFyYXRvcnx8XCJcIikraixrfHxcIi4uXCIhPT1qJiZcIi5cIiE9PWomJlwidGhpc1wiIT09aillLnB1c2goaik7ZWxzZXtpZihlLmxlbmd0aD4wKXRocm93IG5ldyBxW1wiZGVmYXVsdFwiXShcIkludmFsaWQgcGF0aDogXCIrZCx7bG9jOmN9KTtcIi4uXCI9PT1qJiYoZisrLGcrPVwiLi4vXCIpfX1yZXR1cm57dHlwZTpcIlBhdGhFeHByZXNzaW9uXCIsZGF0YTphLGRlcHRoOmYscGFydHM6ZSxvcmlnaW5hbDpkLGxvYzpjfX1mdW5jdGlvbiBqKGEsYixjLGQsZSxmKXt2YXIgZz1kLmNoYXJBdCgzKXx8ZC5jaGFyQXQoMiksaD1cIntcIiE9PWcmJlwiJlwiIT09ZyxpPS9cXCovLnRlc3QoZCk7cmV0dXJue3R5cGU6aT9cIkRlY29yYXRvclwiOlwiTXVzdGFjaGVTdGF0ZW1lbnRcIixwYXRoOmEscGFyYW1zOmIsaGFzaDpjLGVzY2FwZWQ6aCxzdHJpcDplLGxvYzp0aGlzLmxvY0luZm8oZil9fWZ1bmN0aW9uIGsoYSxiLGMsZSl7ZChhLGMpLGU9dGhpcy5sb2NJbmZvKGUpO3ZhciBmPXt0eXBlOlwiUHJvZ3JhbVwiLGJvZHk6YixzdHJpcDp7fSxsb2M6ZX07cmV0dXJue3R5cGU6XCJCbG9ja1N0YXRlbWVudFwiLHBhdGg6YS5wYXRoLHBhcmFtczphLnBhcmFtcyxoYXNoOmEuaGFzaCxwcm9ncmFtOmYsb3BlblN0cmlwOnt9LGludmVyc2VTdHJpcDp7fSxjbG9zZVN0cmlwOnt9LGxvYzplfX1mdW5jdGlvbiBsKGEsYixjLGUsZixnKXtlJiZlLnBhdGgmJmQoYSxlKTt2YXIgaD0vXFwqLy50ZXN0KGEub3Blbik7Yi5ibG9ja1BhcmFtcz1hLmJsb2NrUGFyYW1zO3ZhciBpPXZvaWQgMCxqPXZvaWQgMDtpZihjKXtpZihoKXRocm93IG5ldyBxW1wiZGVmYXVsdFwiXShcIlVuZXhwZWN0ZWQgaW52ZXJzZSBibG9jayBvbiBkZWNvcmF0b3JcIixjKTtjLmNoYWluJiYoYy5wcm9ncmFtLmJvZHlbMF0uY2xvc2VTdHJpcD1lLnN0cmlwKSxqPWMuc3RyaXAsaT1jLnByb2dyYW19cmV0dXJuIGYmJihmPWksaT1iLGI9Zikse3R5cGU6aD9cIkRlY29yYXRvckJsb2NrXCI6XCJCbG9ja1N0YXRlbWVudFwiLHBhdGg6YS5wYXRoLHBhcmFtczphLnBhcmFtcyxoYXNoOmEuaGFzaCxwcm9ncmFtOmIsaW52ZXJzZTppLG9wZW5TdHJpcDphLnN0cmlwLGludmVyc2VTdHJpcDpqLGNsb3NlU3RyaXA6ZSYmZS5zdHJpcCxsb2M6dGhpcy5sb2NJbmZvKGcpfX1mdW5jdGlvbiBtKGEsYil7aWYoIWImJmEubGVuZ3RoKXt2YXIgYz1hWzBdLmxvYyxkPWFbYS5sZW5ndGgtMV0ubG9jO2MmJmQmJihiPXtzb3VyY2U6Yy5zb3VyY2Usc3RhcnQ6e2xpbmU6Yy5zdGFydC5saW5lLGNvbHVtbjpjLnN0YXJ0LmNvbHVtbn0sZW5kOntsaW5lOmQuZW5kLmxpbmUsY29sdW1uOmQuZW5kLmNvbHVtbn19KX1yZXR1cm57dHlwZTpcIlByb2dyYW1cIixib2R5OmEsc3RyaXA6e30sbG9jOmJ9fWZ1bmN0aW9uIG4oYSxiLGMsZSl7cmV0dXJuIGQoYSxjKSx7dHlwZTpcIlBhcnRpYWxCbG9ja1N0YXRlbWVudFwiLG5hbWU6YS5wYXRoLHBhcmFtczphLnBhcmFtcyxoYXNoOmEuaGFzaCxwcm9ncmFtOmIsb3BlblN0cmlwOmEuc3RyaXAsY2xvc2VTdHJpcDpjJiZjLnN0cmlwLGxvYzp0aGlzLmxvY0luZm8oZSl9fXZhciBvPWMoMSlbXCJkZWZhdWx0XCJdO2IuX19lc01vZHVsZT0hMCxiLlNvdXJjZUxvY2F0aW9uPWUsYi5pZD1mLGIuc3RyaXBGbGFncz1nLGIuc3RyaXBDb21tZW50PWgsYi5wcmVwYXJlUGF0aD1pLGIucHJlcGFyZU11c3RhY2hlPWosYi5wcmVwYXJlUmF3QmxvY2s9ayxiLnByZXBhcmVCbG9jaz1sLGIucHJlcGFyZVByb2dyYW09bSxiLnByZXBhcmVQYXJ0aWFsQmxvY2s9bjt2YXIgcD1jKDYpLHE9byhwKX0sZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXt9ZnVuY3Rpb24gZShhLGIsYyl7aWYobnVsbD09YXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEmJlwiUHJvZ3JhbVwiIT09YS50eXBlKXRocm93IG5ldyBrW1wiZGVmYXVsdFwiXShcIllvdSBtdXN0IHBhc3MgYSBzdHJpbmcgb3IgSGFuZGxlYmFycyBBU1QgdG8gSGFuZGxlYmFycy5wcmVjb21waWxlLiBZb3UgcGFzc2VkIFwiK2EpO2I9Ynx8e30sXCJkYXRhXCJpbiBifHwoYi5kYXRhPSEwKSxiLmNvbXBhdCYmKGIudXNlRGVwdGhzPSEwKTt2YXIgZD1jLnBhcnNlKGEsYiksZT0obmV3IGMuQ29tcGlsZXIpLmNvbXBpbGUoZCxiKTtyZXR1cm4obmV3IGMuSmF2YVNjcmlwdENvbXBpbGVyKS5jb21waWxlKGUsYil9ZnVuY3Rpb24gZihhLGIsYyl7ZnVuY3Rpb24gZCgpe3ZhciBkPWMucGFyc2UoYSxiKSxlPShuZXcgYy5Db21waWxlcikuY29tcGlsZShkLGIpLGY9KG5ldyBjLkphdmFTY3JpcHRDb21waWxlcikuY29tcGlsZShlLGIsdm9pZCAwLCEwKTtyZXR1cm4gYy50ZW1wbGF0ZShmKX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ8fChmPWQoKSksZi5jYWxsKHRoaXMsYSxiKX1pZih2b2lkIDA9PT1iJiYoYj17fSksbnVsbD09YXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEmJlwiUHJvZ3JhbVwiIT09YS50eXBlKXRocm93IG5ldyBrW1wiZGVmYXVsdFwiXShcIllvdSBtdXN0IHBhc3MgYSBzdHJpbmcgb3IgSGFuZGxlYmFycyBBU1QgdG8gSGFuZGxlYmFycy5jb21waWxlLiBZb3UgcGFzc2VkIFwiK2EpO2I9bC5leHRlbmQoe30sYiksXCJkYXRhXCJpbiBifHwoYi5kYXRhPSEwKSxiLmNvbXBhdCYmKGIudXNlRGVwdGhzPSEwKTt2YXIgZj12b2lkIDA7cmV0dXJuIGUuX3NldHVwPWZ1bmN0aW9uKGEpe3JldHVybiBmfHwoZj1kKCkpLGYuX3NldHVwKGEpfSxlLl9jaGlsZD1mdW5jdGlvbihhLGIsYyxlKXtyZXR1cm4gZnx8KGY9ZCgpKSxmLl9jaGlsZChhLGIsYyxlKX0sZX1mdW5jdGlvbiBnKGEsYil7aWYoYT09PWIpcmV0dXJuITA7aWYobC5pc0FycmF5KGEpJiZsLmlzQXJyYXkoYikmJmEubGVuZ3RoPT09Yi5sZW5ndGgpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKCFnKGFbY10sYltjXSkpcmV0dXJuITE7cmV0dXJuITB9fWZ1bmN0aW9uIGgoYSl7aWYoIWEucGF0aC5wYXJ0cyl7dmFyIGI9YS5wYXRoO2EucGF0aD17dHlwZTpcIlBhdGhFeHByZXNzaW9uXCIsZGF0YTohMSxkZXB0aDowLHBhcnRzOltiLm9yaWdpbmFsK1wiXCJdLG9yaWdpbmFsOmIub3JpZ2luYWwrXCJcIixsb2M6Yi5sb2N9fX12YXIgaT1jKDEpW1wiZGVmYXVsdFwiXTtiLl9fZXNNb2R1bGU9ITAsYi5Db21waWxlcj1kLGIucHJlY29tcGlsZT1lLGIuY29tcGlsZT1mO3ZhciBqPWMoNiksaz1pKGopLGw9Yyg1KSxtPWMoMzUpLG49aShtKSxvPVtdLnNsaWNlO2QucHJvdG90eXBlPXtjb21waWxlcjpkLGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wY29kZXMubGVuZ3RoO2lmKGEub3Bjb2Rlcy5sZW5ndGghPT1iKXJldHVybiExO2Zvcih2YXIgYz0wO2M8YjtjKyspe3ZhciBkPXRoaXMub3Bjb2Rlc1tjXSxlPWEub3Bjb2Rlc1tjXTtpZihkLm9wY29kZSE9PWUub3Bjb2RlfHwhZyhkLmFyZ3MsZS5hcmdzKSlyZXR1cm4hMX1iPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2Zvcih2YXIgYz0wO2M8YjtjKyspaWYoIXRoaXMuY2hpbGRyZW5bY10uZXF1YWxzKGEuY2hpbGRyZW5bY10pKXJldHVybiExO3JldHVybiEwfSxndWlkOjAsY29tcGlsZTpmdW5jdGlvbihhLGIpe3RoaXMuc291cmNlTm9kZT1bXSx0aGlzLm9wY29kZXM9W10sdGhpcy5jaGlsZHJlbj1bXSx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0cmluZ1BhcmFtcz1iLnN0cmluZ1BhcmFtcyx0aGlzLnRyYWNrSWRzPWIudHJhY2tJZHMsYi5ibG9ja1BhcmFtcz1iLmJsb2NrUGFyYW1zfHxbXTt2YXIgYz1iLmtub3duSGVscGVycztpZihiLmtub3duSGVscGVycz17aGVscGVyTWlzc2luZzohMCxibG9ja0hlbHBlck1pc3Npbmc6ITAsZWFjaDohMCxcImlmXCI6ITAsdW5sZXNzOiEwLFwid2l0aFwiOiEwLGxvZzohMCxsb29rdXA6ITB9LGMpZm9yKHZhciBkIGluIGMpZCBpbiBjJiYodGhpcy5vcHRpb25zLmtub3duSGVscGVyc1tkXT1jW2RdKTtyZXR1cm4gdGhpcy5hY2NlcHQoYSl9LGNvbXBpbGVQcm9ncmFtOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyB0aGlzLmNvbXBpbGVyLGM9Yi5jb21waWxlKGEsdGhpcy5vcHRpb25zKSxkPXRoaXMuZ3VpZCsrO3JldHVybiB0aGlzLnVzZVBhcnRpYWw9dGhpcy51c2VQYXJ0aWFsfHxjLnVzZVBhcnRpYWwsdGhpcy5jaGlsZHJlbltkXT1jLHRoaXMudXNlRGVwdGhzPXRoaXMudXNlRGVwdGhzfHxjLnVzZURlcHRocyxkfSxhY2NlcHQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXNbYS50eXBlXSl0aHJvdyBuZXcga1tcImRlZmF1bHRcIl0oXCJVbmtub3duIHR5cGU6IFwiK2EudHlwZSxhKTt0aGlzLnNvdXJjZU5vZGUudW5zaGlmdChhKTt2YXIgYj10aGlzW2EudHlwZV0oYSk7cmV0dXJuIHRoaXMuc291cmNlTm9kZS5zaGlmdCgpLGJ9LFByb2dyYW06ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zLmJsb2NrUGFyYW1zLnVuc2hpZnQoYS5ibG9ja1BhcmFtcyk7Zm9yKHZhciBiPWEuYm9keSxjPWIubGVuZ3RoLGQ9MDtkPGM7ZCsrKXRoaXMuYWNjZXB0KGJbZF0pO3JldHVybiB0aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXMuc2hpZnQoKSx0aGlzLmlzU2ltcGxlPTE9PT1jLHRoaXMuYmxvY2tQYXJhbXM9YS5ibG9ja1BhcmFtcz9hLmJsb2NrUGFyYW1zLmxlbmd0aDowLHRoaXN9LEJsb2NrU3RhdGVtZW50OmZ1bmN0aW9uKGEpe2goYSk7dmFyIGI9YS5wcm9ncmFtLGM9YS5pbnZlcnNlO2I9YiYmdGhpcy5jb21waWxlUHJvZ3JhbShiKSxjPWMmJnRoaXMuY29tcGlsZVByb2dyYW0oYyk7dmFyIGQ9dGhpcy5jbGFzc2lmeVNleHByKGEpO1wiaGVscGVyXCI9PT1kP3RoaXMuaGVscGVyU2V4cHIoYSxiLGMpOlwic2ltcGxlXCI9PT1kPyh0aGlzLnNpbXBsZVNleHByKGEpLHRoaXMub3Bjb2RlKFwicHVzaFByb2dyYW1cIixiKSx0aGlzLm9wY29kZShcInB1c2hQcm9ncmFtXCIsYyksdGhpcy5vcGNvZGUoXCJlbXB0eUhhc2hcIiksdGhpcy5vcGNvZGUoXCJibG9ja1ZhbHVlXCIsYS5wYXRoLm9yaWdpbmFsKSk6KHRoaXMuYW1iaWd1b3VzU2V4cHIoYSxiLGMpLHRoaXMub3Bjb2RlKFwicHVzaFByb2dyYW1cIixiKSx0aGlzLm9wY29kZShcInB1c2hQcm9ncmFtXCIsYyksdGhpcy5vcGNvZGUoXCJlbXB0eUhhc2hcIiksdGhpcy5vcGNvZGUoXCJhbWJpZ3VvdXNCbG9ja1ZhbHVlXCIpKSx0aGlzLm9wY29kZShcImFwcGVuZFwiKX0sRGVjb3JhdG9yQmxvY2s6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm9ncmFtJiZ0aGlzLmNvbXBpbGVQcm9ncmFtKGEucHJvZ3JhbSksYz10aGlzLnNldHVwRnVsbE11c3RhY2hlUGFyYW1zKGEsYix2b2lkIDApLGQ9YS5wYXRoO3RoaXMudXNlRGVjb3JhdG9ycz0hMCx0aGlzLm9wY29kZShcInJlZ2lzdGVyRGVjb3JhdG9yXCIsYy5sZW5ndGgsZC5vcmlnaW5hbCl9LFBhcnRpYWxTdGF0ZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy51c2VQYXJ0aWFsPSEwO3ZhciBiPWEucHJvZ3JhbTtiJiYoYj10aGlzLmNvbXBpbGVQcm9ncmFtKGEucHJvZ3JhbSkpO3ZhciBjPWEucGFyYW1zO2lmKGMubGVuZ3RoPjEpdGhyb3cgbmV3IGtbXCJkZWZhdWx0XCJdKFwiVW5zdXBwb3J0ZWQgbnVtYmVyIG9mIHBhcnRpYWwgYXJndW1lbnRzOiBcIitjLmxlbmd0aCxhKTtjLmxlbmd0aHx8KHRoaXMub3B0aW9ucy5leHBsaWNpdFBhcnRpYWxDb250ZXh0P3RoaXMub3Bjb2RlKFwicHVzaExpdGVyYWxcIixcInVuZGVmaW5lZFwiKTpjLnB1c2goe3R5cGU6XCJQYXRoRXhwcmVzc2lvblwiLHBhcnRzOltdLGRlcHRoOjB9KSk7dmFyIGQ9YS5uYW1lLm9yaWdpbmFsLGU9XCJTdWJFeHByZXNzaW9uXCI9PT1hLm5hbWUudHlwZTtlJiZ0aGlzLmFjY2VwdChhLm5hbWUpLHRoaXMuc2V0dXBGdWxsTXVzdGFjaGVQYXJhbXMoYSxiLHZvaWQgMCwhMCk7dmFyIGY9YS5pbmRlbnR8fFwiXCI7dGhpcy5vcHRpb25zLnByZXZlbnRJbmRlbnQmJmYmJih0aGlzLm9wY29kZShcImFwcGVuZENvbnRlbnRcIixmKSxmPVwiXCIpLHRoaXMub3Bjb2RlKFwiaW52b2tlUGFydGlhbFwiLGUsZCxmKSx0aGlzLm9wY29kZShcImFwcGVuZFwiKX0sUGFydGlhbEJsb2NrU3RhdGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuUGFydGlhbFN0YXRlbWVudChhKX0sTXVzdGFjaGVTdGF0ZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5TdWJFeHByZXNzaW9uKGEpLGEuZXNjYXBlZCYmIXRoaXMub3B0aW9ucy5ub0VzY2FwZT90aGlzLm9wY29kZShcImFwcGVuZEVzY2FwZWRcIik6dGhpcy5vcGNvZGUoXCJhcHBlbmRcIil9LERlY29yYXRvcjpmdW5jdGlvbihhKXt0aGlzLkRlY29yYXRvckJsb2NrKGEpfSxDb250ZW50U3RhdGVtZW50OmZ1bmN0aW9uKGEpe2EudmFsdWUmJnRoaXMub3Bjb2RlKFwiYXBwZW5kQ29udGVudFwiLGEudmFsdWUpfSxDb21tZW50U3RhdGVtZW50OmZ1bmN0aW9uKCl7fSxTdWJFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2goYSk7dmFyIGI9dGhpcy5jbGFzc2lmeVNleHByKGEpO1wic2ltcGxlXCI9PT1iP3RoaXMuc2ltcGxlU2V4cHIoYSk6XCJoZWxwZXJcIj09PWI/dGhpcy5oZWxwZXJTZXhwcihhKTp0aGlzLmFtYmlndW91c1NleHByKGEpfSxhbWJpZ3VvdXNTZXhwcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5wYXRoLGU9ZC5wYXJ0c1swXSxmPW51bGwhPWJ8fG51bGwhPWM7dGhpcy5vcGNvZGUoXCJnZXRDb250ZXh0XCIsZC5kZXB0aCksdGhpcy5vcGNvZGUoXCJwdXNoUHJvZ3JhbVwiLGIpLHRoaXMub3Bjb2RlKFwicHVzaFByb2dyYW1cIixjKSxkLnN0cmljdD0hMCx0aGlzLmFjY2VwdChkKSx0aGlzLm9wY29kZShcImludm9rZUFtYmlndW91c1wiLGUsZil9LHNpbXBsZVNleHByOmZ1bmN0aW9uKGEpe3ZhciBiPWEucGF0aDtiLnN0cmljdD0hMCx0aGlzLmFjY2VwdChiKSx0aGlzLm9wY29kZShcInJlc29sdmVQb3NzaWJsZUxhbWJkYVwiKX0saGVscGVyU2V4cHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuc2V0dXBGdWxsTXVzdGFjaGVQYXJhbXMoYSxiLGMpLGU9YS5wYXRoLGY9ZS5wYXJ0c1swXTtpZih0aGlzLm9wdGlvbnMua25vd25IZWxwZXJzW2ZdKXRoaXMub3Bjb2RlKFwiaW52b2tlS25vd25IZWxwZXJcIixkLmxlbmd0aCxmKTtlbHNle2lmKHRoaXMub3B0aW9ucy5rbm93bkhlbHBlcnNPbmx5KXRocm93IG5ldyBrW1wiZGVmYXVsdFwiXShcIllvdSBzcGVjaWZpZWQga25vd25IZWxwZXJzT25seSwgYnV0IHVzZWQgdGhlIHVua25vd24gaGVscGVyIFwiK2YsYSk7ZS5zdHJpY3Q9ITAsZS5mYWxzeT0hMCx0aGlzLmFjY2VwdChlKSx0aGlzLm9wY29kZShcImludm9rZUhlbHBlclwiLGQubGVuZ3RoLGUub3JpZ2luYWwsbltcImRlZmF1bHRcIl0uaGVscGVycy5zaW1wbGVJZChlKSl9fSxQYXRoRXhwcmVzc2lvbjpmdW5jdGlvbihhKXt0aGlzLmFkZERlcHRoKGEuZGVwdGgpLHRoaXMub3Bjb2RlKFwiZ2V0Q29udGV4dFwiLGEuZGVwdGgpO3ZhciBiPWEucGFydHNbMF0sYz1uW1wiZGVmYXVsdFwiXS5oZWxwZXJzLnNjb3BlZElkKGEpLGQ9IWEuZGVwdGgmJiFjJiZ0aGlzLmJsb2NrUGFyYW1JbmRleChiKTtkP3RoaXMub3Bjb2RlKFwibG9va3VwQmxvY2tQYXJhbVwiLGQsYS5wYXJ0cyk6Yj9hLmRhdGE/KHRoaXMub3B0aW9ucy5kYXRhPSEwLHRoaXMub3Bjb2RlKFwibG9va3VwRGF0YVwiLGEuZGVwdGgsYS5wYXJ0cyxhLnN0cmljdCkpOnRoaXMub3Bjb2RlKFwibG9va3VwT25Db250ZXh0XCIsYS5wYXJ0cyxhLmZhbHN5LGEuc3RyaWN0LGMpOnRoaXMub3Bjb2RlKFwicHVzaENvbnRleHRcIil9LFN0cmluZ0xpdGVyYWw6ZnVuY3Rpb24oYSl7dGhpcy5vcGNvZGUoXCJwdXNoU3RyaW5nXCIsYS52YWx1ZSl9LE51bWJlckxpdGVyYWw6ZnVuY3Rpb24oYSl7dGhpcy5vcGNvZGUoXCJwdXNoTGl0ZXJhbFwiLGEudmFsdWUpfSxCb29sZWFuTGl0ZXJhbDpmdW5jdGlvbihhKXt0aGlzLm9wY29kZShcInB1c2hMaXRlcmFsXCIsYS52YWx1ZSl9LFVuZGVmaW5lZExpdGVyYWw6ZnVuY3Rpb24oKXt0aGlzLm9wY29kZShcInB1c2hMaXRlcmFsXCIsXCJ1bmRlZmluZWRcIil9LE51bGxMaXRlcmFsOmZ1bmN0aW9uKCl7dGhpcy5vcGNvZGUoXCJwdXNoTGl0ZXJhbFwiLFwibnVsbFwiKX0sSGFzaDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhaXJzLGM9MCxkPWIubGVuZ3RoO2Zvcih0aGlzLm9wY29kZShcInB1c2hIYXNoXCIpO2M8ZDtjKyspdGhpcy5wdXNoUGFyYW0oYltjXS52YWx1ZSk7Zm9yKDtjLS07KXRoaXMub3Bjb2RlKFwiYXNzaWduVG9IYXNoXCIsYltjXS5rZXkpO3RoaXMub3Bjb2RlKFwicG9wSGFzaFwiKX0sb3Bjb2RlOmZ1bmN0aW9uKGEpe3RoaXMub3Bjb2Rlcy5wdXNoKHtvcGNvZGU6YSxhcmdzOm8uY2FsbChhcmd1bWVudHMsMSksbG9jOnRoaXMuc291cmNlTm9kZVswXS5sb2N9KX0sYWRkRGVwdGg6ZnVuY3Rpb24oYSl7YSYmKHRoaXMudXNlRGVwdGhzPSEwKX0sY2xhc3NpZnlTZXhwcjpmdW5jdGlvbihhKXt2YXIgYj1uW1wiZGVmYXVsdFwiXS5oZWxwZXJzLnNpbXBsZUlkKGEucGF0aCksYz1iJiYhIXRoaXMuYmxvY2tQYXJhbUluZGV4KGEucGF0aC5wYXJ0c1swXSksZD0hYyYmbltcImRlZmF1bHRcIl0uaGVscGVycy5oZWxwZXJFeHByZXNzaW9uKGEpLGU9IWMmJihkfHxiKTtpZihlJiYhZCl7dmFyIGY9YS5wYXRoLnBhcnRzWzBdLGc9dGhpcy5vcHRpb25zO2cua25vd25IZWxwZXJzW2ZdP2Q9ITA6Zy5rbm93bkhlbHBlcnNPbmx5JiYoZT0hMSl9cmV0dXJuIGQ/XCJoZWxwZXJcIjplP1wiYW1iaWd1b3VzXCI6XCJzaW1wbGVcIn0scHVzaFBhcmFtczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5wdXNoUGFyYW0oYVtiXSl9LHB1c2hQYXJhbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1hLnZhbHVlP2EudmFsdWU6YS5vcmlnaW5hbHx8XCJcIjtpZih0aGlzLnN0cmluZ1BhcmFtcyliLnJlcGxhY2UmJihiPWIucmVwbGFjZSgvXihcXC4/XFwuXFwvKSovZyxcIlwiKS5yZXBsYWNlKC9cXC8vZyxcIi5cIikpLGEuZGVwdGgmJnRoaXMuYWRkRGVwdGgoYS5kZXB0aCksdGhpcy5vcGNvZGUoXCJnZXRDb250ZXh0XCIsYS5kZXB0aHx8MCksdGhpcy5vcGNvZGUoXCJwdXNoU3RyaW5nUGFyYW1cIixiLGEudHlwZSksXCJTdWJFeHByZXNzaW9uXCI9PT1hLnR5cGUmJnRoaXMuYWNjZXB0KGEpO2Vsc2V7aWYodGhpcy50cmFja0lkcyl7dmFyIGM9dm9pZCAwO2lmKCFhLnBhcnRzfHxuW1wiZGVmYXVsdFwiXS5oZWxwZXJzLnNjb3BlZElkKGEpfHxhLmRlcHRofHwoYz10aGlzLmJsb2NrUGFyYW1JbmRleChhLnBhcnRzWzBdKSksYyl7dmFyIGQ9YS5wYXJ0cy5zbGljZSgxKS5qb2luKFwiLlwiKTt0aGlzLm9wY29kZShcInB1c2hJZFwiLFwiQmxvY2tQYXJhbVwiLGMsZCl9ZWxzZSBiPWEub3JpZ2luYWx8fGIsYi5yZXBsYWNlJiYoYj1iLnJlcGxhY2UoL150aGlzKD86XFwufCQpLyxcIlwiKS5yZXBsYWNlKC9eXFwuXFwvLyxcIlwiKS5yZXBsYWNlKC9eXFwuJC8sXCJcIikpLHRoaXMub3Bjb2RlKFwicHVzaElkXCIsYS50eXBlLGIpfXRoaXMuYWNjZXB0KGEpfX0sc2V0dXBGdWxsTXVzdGFjaGVQYXJhbXM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5wYXJhbXM7cmV0dXJuIHRoaXMucHVzaFBhcmFtcyhlKSx0aGlzLm9wY29kZShcInB1c2hQcm9ncmFtXCIsYiksdGhpcy5vcGNvZGUoXCJwdXNoUHJvZ3JhbVwiLGMpLGEuaGFzaD90aGlzLmFjY2VwdChhLmhhc2gpOnRoaXMub3Bjb2RlKFwiZW1wdHlIYXNoXCIsZCksZX0sYmxvY2tQYXJhbUluZGV4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5vcHRpb25zLmJsb2NrUGFyYW1zLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXNbYl0sZT1kJiZsLmluZGV4T2YoZCxhKTtpZihkJiZlPj0wKXJldHVybltiLGVdfX19fSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt0aGlzLnZhbHVlPWF9ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBmKGEsYixjLGQpe3ZhciBlPWIucG9wU3RhY2soKSxmPTAsZz1jLmxlbmd0aDtmb3IoYSYmZy0tO2Y8ZztmKyspZT1iLm5hbWVMb29rdXAoZSxjW2ZdLGQpO3JldHVybiBhP1tiLmFsaWFzYWJsZShcImNvbnRhaW5lci5zdHJpY3RcIiksXCIoXCIsZSxcIiwgXCIsYi5xdW90ZWRTdHJpbmcoY1tmXSksXCIpXCJdOmV9dmFyIGc9YygxKVtcImRlZmF1bHRcIl07Yi5fX2VzTW9kdWxlPSEwO3ZhciBoPWMoNCksaT1jKDYpLGo9ZyhpKSxrPWMoNSksbD1jKDQzKSxtPWcobCk7ZS5wcm90b3R5cGU9e25hbWVMb29rdXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZS5pc1ZhbGlkSmF2YVNjcmlwdFZhcmlhYmxlTmFtZShiKT9bYSxcIi5cIixiXTpbYSxcIltcIixKU09OLnN0cmluZ2lmeShiKSxcIl1cIl19LGRlcHRoZWRMb29rdXA6ZnVuY3Rpb24oYSl7cmV0dXJuW3RoaXMuYWxpYXNhYmxlKFwiY29udGFpbmVyLmxvb2t1cFwiKSwnKGRlcHRocywgXCInLGEsJ1wiKSddfSxjb21waWxlckluZm86ZnVuY3Rpb24oKXt2YXIgYT1oLkNPTVBJTEVSX1JFVklTSU9OLGI9aC5SRVZJU0lPTl9DSEFOR0VTW2FdO3JldHVyblthLGJdfSxhcHBlbmRUb0J1ZmZlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGsuaXNBcnJheShhKXx8KGE9W2FdKSxhPXRoaXMuc291cmNlLndyYXAoYSxiKSx0aGlzLmVudmlyb25tZW50LmlzU2ltcGxlP1tcInJldHVybiBcIixhLFwiO1wiXTpjP1tcImJ1ZmZlciArPSBcIixhLFwiO1wiXTooYS5hcHBlbmRUb0J1ZmZlcj0hMCxhKX0saW5pdGlhbGl6ZUJ1ZmZlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1b3RlZFN0cmluZyhcIlwiKX0sY29tcGlsZTpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmVudmlyb25tZW50PWEsdGhpcy5vcHRpb25zPWIsdGhpcy5zdHJpbmdQYXJhbXM9dGhpcy5vcHRpb25zLnN0cmluZ1BhcmFtcyx0aGlzLnRyYWNrSWRzPXRoaXMub3B0aW9ucy50cmFja0lkcyx0aGlzLnByZWNvbXBpbGU9IWQsdGhpcy5uYW1lPXRoaXMuZW52aXJvbm1lbnQubmFtZSx0aGlzLmlzQ2hpbGQ9ISFjLHRoaXMuY29udGV4dD1jfHx7ZGVjb3JhdG9yczpbXSxwcm9ncmFtczpbXSxlbnZpcm9ubWVudHM6W119LHRoaXMucHJlYW1ibGUoKSx0aGlzLnN0YWNrU2xvdD0wLHRoaXMuc3RhY2tWYXJzPVtdLHRoaXMuYWxpYXNlcz17fSx0aGlzLnJlZ2lzdGVycz17bGlzdDpbXX0sdGhpcy5oYXNoZXM9W10sdGhpcy5jb21waWxlU3RhY2s9W10sdGhpcy5pbmxpbmVTdGFjaz1bXSx0aGlzLmJsb2NrUGFyYW1zPVtdLHRoaXMuY29tcGlsZUNoaWxkcmVuKGEsYiksdGhpcy51c2VEZXB0aHM9dGhpcy51c2VEZXB0aHN8fGEudXNlRGVwdGhzfHxhLnVzZURlY29yYXRvcnN8fHRoaXMub3B0aW9ucy5jb21wYXQsdGhpcy51c2VCbG9ja1BhcmFtcz10aGlzLnVzZUJsb2NrUGFyYW1zfHxhLnVzZUJsb2NrUGFyYW1zO3ZhciBlPWEub3Bjb2RlcyxmPXZvaWQgMCxnPXZvaWQgMCxoPXZvaWQgMCxpPXZvaWQgMDtmb3IoaD0wLGk9ZS5sZW5ndGg7aDxpO2grKylmPWVbaF0sdGhpcy5zb3VyY2UuY3VycmVudExvY2F0aW9uPWYubG9jLGc9Z3x8Zi5sb2MsdGhpc1tmLm9wY29kZV0uYXBwbHkodGhpcyxmLmFyZ3MpO2lmKHRoaXMuc291cmNlLmN1cnJlbnRMb2NhdGlvbj1nLHRoaXMucHVzaFNvdXJjZShcIlwiKSx0aGlzLnN0YWNrU2xvdHx8dGhpcy5pbmxpbmVTdGFjay5sZW5ndGh8fHRoaXMuY29tcGlsZVN0YWNrLmxlbmd0aCl0aHJvdyBuZXcgaltcImRlZmF1bHRcIl0oXCJDb21waWxlIGNvbXBsZXRlZCB3aXRoIGNvbnRlbnQgbGVmdCBvbiBzdGFja1wiKTt0aGlzLmRlY29yYXRvcnMuaXNFbXB0eSgpP3RoaXMuZGVjb3JhdG9ycz12b2lkIDA6KHRoaXMudXNlRGVjb3JhdG9ycz0hMCx0aGlzLmRlY29yYXRvcnMucHJlcGVuZChcInZhciBkZWNvcmF0b3JzID0gY29udGFpbmVyLmRlY29yYXRvcnM7XFxuXCIpLHRoaXMuZGVjb3JhdG9ycy5wdXNoKFwicmV0dXJuIGZuO1wiKSxkP3RoaXMuZGVjb3JhdG9ycz1GdW5jdGlvbi5hcHBseSh0aGlzLFtcImZuXCIsXCJwcm9wc1wiLFwiY29udGFpbmVyXCIsXCJkZXB0aDBcIixcImRhdGFcIixcImJsb2NrUGFyYW1zXCIsXCJkZXB0aHNcIix0aGlzLmRlY29yYXRvcnMubWVyZ2UoKV0pOih0aGlzLmRlY29yYXRvcnMucHJlcGVuZChcImZ1bmN0aW9uKGZuLCBwcm9wcywgY29udGFpbmVyLCBkZXB0aDAsIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHtcXG5cIiksdGhpcy5kZWNvcmF0b3JzLnB1c2goXCJ9XFxuXCIpLHRoaXMuZGVjb3JhdG9ycz10aGlzLmRlY29yYXRvcnMubWVyZ2UoKSkpO3ZhciBrPXRoaXMuY3JlYXRlRnVuY3Rpb25Db250ZXh0KGQpO2lmKHRoaXMuaXNDaGlsZClyZXR1cm4gazt2YXIgbD17Y29tcGlsZXI6dGhpcy5jb21waWxlckluZm8oKSxtYWluOmt9O3RoaXMuZGVjb3JhdG9ycyYmKGwubWFpbl9kPXRoaXMuZGVjb3JhdG9ycyxsLnVzZURlY29yYXRvcnM9ITApO3ZhciBtPXRoaXMuY29udGV4dCxuPW0ucHJvZ3JhbXMsbz1tLmRlY29yYXRvcnM7Zm9yKGg9MCxpPW4ubGVuZ3RoO2g8aTtoKyspbltoXSYmKGxbaF09bltoXSxvW2hdJiYobFtoK1wiX2RcIl09b1toXSxsLnVzZURlY29yYXRvcnM9ITApKTtyZXR1cm4gdGhpcy5lbnZpcm9ubWVudC51c2VQYXJ0aWFsJiYobC51c2VQYXJ0aWFsPSEwKSx0aGlzLm9wdGlvbnMuZGF0YSYmKGwudXNlRGF0YT0hMCksdGhpcy51c2VEZXB0aHMmJihsLnVzZURlcHRocz0hMCksdGhpcy51c2VCbG9ja1BhcmFtcyYmKGwudXNlQmxvY2tQYXJhbXM9ITApLHRoaXMub3B0aW9ucy5jb21wYXQmJihsLmNvbXBhdD0hMCksZD9sLmNvbXBpbGVyT3B0aW9ucz10aGlzLm9wdGlvbnM6KGwuY29tcGlsZXI9SlNPTi5zdHJpbmdpZnkobC5jb21waWxlciksdGhpcy5zb3VyY2UuY3VycmVudExvY2F0aW9uPXtzdGFydDp7bGluZToxLGNvbHVtbjowfX0sbD10aGlzLm9iamVjdExpdGVyYWwobCksYi5zcmNOYW1lPyhsPWwudG9TdHJpbmdXaXRoU291cmNlTWFwKHtmaWxlOmIuZGVzdE5hbWV9KSxsLm1hcD1sLm1hcCYmbC5tYXAudG9TdHJpbmcoKSk6bD1sLnRvU3RyaW5nKCkpLGx9LHByZWFtYmxlOmZ1bmN0aW9uKCl7dGhpcy5sYXN0Q29udGV4dD0wLHRoaXMuc291cmNlPW5ldyBtW1wiZGVmYXVsdFwiXSh0aGlzLm9wdGlvbnMuc3JjTmFtZSksdGhpcy5kZWNvcmF0b3JzPW5ldyBtW1wiZGVmYXVsdFwiXSh0aGlzLm9wdGlvbnMuc3JjTmFtZSl9LGNyZWF0ZUZ1bmN0aW9uQ29udGV4dDpmdW5jdGlvbihhKXt2YXIgYj1cIlwiLGM9dGhpcy5zdGFja1ZhcnMuY29uY2F0KHRoaXMucmVnaXN0ZXJzLmxpc3QpO2MubGVuZ3RoPjAmJihiKz1cIiwgXCIrYy5qb2luKFwiLCBcIikpO3ZhciBkPTA7Zm9yKHZhciBlIGluIHRoaXMuYWxpYXNlcyl7dmFyIGY9dGhpcy5hbGlhc2VzW2VdO3RoaXMuYWxpYXNlcy5oYXNPd25Qcm9wZXJ0eShlKSYmZi5jaGlsZHJlbiYmZi5yZWZlcmVuY2VDb3VudD4xJiYoYis9XCIsIGFsaWFzXCIrICsrZCtcIj1cIitlLGYuY2hpbGRyZW5bMF09XCJhbGlhc1wiK2QpfXZhciBnPVtcImNvbnRhaW5lclwiLFwiZGVwdGgwXCIsXCJoZWxwZXJzXCIsXCJwYXJ0aWFsc1wiLFwiZGF0YVwiXTsodGhpcy51c2VCbG9ja1BhcmFtc3x8dGhpcy51c2VEZXB0aHMpJiZnLnB1c2goXCJibG9ja1BhcmFtc1wiKSx0aGlzLnVzZURlcHRocyYmZy5wdXNoKFwiZGVwdGhzXCIpO3ZhciBoPXRoaXMubWVyZ2VTb3VyY2UoYik7cmV0dXJuIGE/KGcucHVzaChoKSxGdW5jdGlvbi5hcHBseSh0aGlzLGcpKTp0aGlzLnNvdXJjZS53cmFwKFtcImZ1bmN0aW9uKFwiLGcuam9pbihcIixcIiksXCIpIHtcXG4gIFwiLGgsXCJ9XCJdKX0sbWVyZ2VTb3VyY2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbnZpcm9ubWVudC5pc1NpbXBsZSxjPSF0aGlzLmZvcmNlQnVmZmVyLGQ9dm9pZCAwLGU9dm9pZCAwLGY9dm9pZCAwLGc9dm9pZCAwO3JldHVybiB0aGlzLnNvdXJjZS5lYWNoKGZ1bmN0aW9uKGEpe2EuYXBwZW5kVG9CdWZmZXI/KGY/YS5wcmVwZW5kKFwiICArIFwiKTpmPWEsZz1hKTooZiYmKGU/Zi5wcmVwZW5kKFwiYnVmZmVyICs9IFwiKTpkPSEwLGcuYWRkKFwiO1wiKSxmPWc9dm9pZCAwKSxlPSEwLGJ8fChjPSExKSl9KSxjP2Y/KGYucHJlcGVuZChcInJldHVybiBcIiksZy5hZGQoXCI7XCIpKTplfHx0aGlzLnNvdXJjZS5wdXNoKCdyZXR1cm4gXCJcIjsnKTooYSs9XCIsIGJ1ZmZlciA9IFwiKyhkP1wiXCI6dGhpcy5pbml0aWFsaXplQnVmZmVyKCkpLGY/KGYucHJlcGVuZChcInJldHVybiBidWZmZXIgKyBcIiksZy5hZGQoXCI7XCIpKTp0aGlzLnNvdXJjZS5wdXNoKFwicmV0dXJuIGJ1ZmZlcjtcIikpLGEmJnRoaXMuc291cmNlLnByZXBlbmQoXCJ2YXIgXCIrYS5zdWJzdHJpbmcoMikrKGQ/XCJcIjpcIjtcXG5cIikpLHRoaXMuc291cmNlLm1lcmdlKCl9LGJsb2NrVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hbGlhc2FibGUoXCJoZWxwZXJzLmJsb2NrSGVscGVyTWlzc2luZ1wiKSxjPVt0aGlzLmNvbnRleHROYW1lKDApXTt0aGlzLnNldHVwSGVscGVyQXJncyhhLDAsYyk7dmFyIGQ9dGhpcy5wb3BTdGFjaygpO2Muc3BsaWNlKDEsMCxkKSx0aGlzLnB1c2godGhpcy5zb3VyY2UuZnVuY3Rpb25DYWxsKGIsXCJjYWxsXCIsYykpfSxhbWJpZ3VvdXNCbG9ja1ZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hbGlhc2FibGUoXCJoZWxwZXJzLmJsb2NrSGVscGVyTWlzc2luZ1wiKSxiPVt0aGlzLmNvbnRleHROYW1lKDApXTt0aGlzLnNldHVwSGVscGVyQXJncyhcIlwiLDAsYiwhMCksdGhpcy5mbHVzaElubGluZSgpO3ZhciBjPXRoaXMudG9wU3RhY2soKTtiLnNwbGljZSgxLDAsYyksdGhpcy5wdXNoU291cmNlKFtcImlmICghXCIsdGhpcy5sYXN0SGVscGVyLFwiKSB7IFwiLGMsXCIgPSBcIix0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoYSxcImNhbGxcIixiKSxcIn1cIl0pfSxhcHBlbmRDb250ZW50OmZ1bmN0aW9uKGEpe3RoaXMucGVuZGluZ0NvbnRlbnQ/YT10aGlzLnBlbmRpbmdDb250ZW50K2E6dGhpcy5wZW5kaW5nTG9jYXRpb249dGhpcy5zb3VyY2UuY3VycmVudExvY2F0aW9uLHRoaXMucGVuZGluZ0NvbnRlbnQ9YX0sYXBwZW5kOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0lubGluZSgpKXRoaXMucmVwbGFjZVN0YWNrKGZ1bmN0aW9uKGEpe3JldHVybltcIiAhPSBudWxsID8gXCIsYSwnIDogXCJcIiddfSksdGhpcy5wdXNoU291cmNlKHRoaXMuYXBwZW5kVG9CdWZmZXIodGhpcy5wb3BTdGFjaygpKSk7ZWxzZXt2YXIgYT10aGlzLnBvcFN0YWNrKCk7dGhpcy5wdXNoU291cmNlKFtcImlmIChcIixhLFwiICE9IG51bGwpIHsgXCIsdGhpcy5hcHBlbmRUb0J1ZmZlcihhLHZvaWQgMCwhMCksXCIgfVwiXSksdGhpcy5lbnZpcm9ubWVudC5pc1NpbXBsZSYmdGhpcy5wdXNoU291cmNlKFtcImVsc2UgeyBcIix0aGlzLmFwcGVuZFRvQnVmZmVyKFwiJydcIix2b2lkIDAsITApLFwiIH1cIl0pfX0sYXBwZW5kRXNjYXBlZDpmdW5jdGlvbigpe3RoaXMucHVzaFNvdXJjZSh0aGlzLmFwcGVuZFRvQnVmZmVyKFt0aGlzLmFsaWFzYWJsZShcImNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uXCIpLFwiKFwiLHRoaXMucG9wU3RhY2soKSxcIilcIl0pKX0sZ2V0Q29udGV4dDpmdW5jdGlvbihhKXt0aGlzLmxhc3RDb250ZXh0PWF9LHB1c2hDb250ZXh0OmZ1bmN0aW9uKCl7dGhpcy5wdXNoU3RhY2tMaXRlcmFsKHRoaXMuY29udGV4dE5hbWUodGhpcy5sYXN0Q29udGV4dCkpfSxsb29rdXBPbkNvbnRleHQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9MDtkfHwhdGhpcy5vcHRpb25zLmNvbXBhdHx8dGhpcy5sYXN0Q29udGV4dD90aGlzLnB1c2hDb250ZXh0KCk6dGhpcy5wdXNoKHRoaXMuZGVwdGhlZExvb2t1cChhW2UrK10pKSx0aGlzLnJlc29sdmVQYXRoKFwiY29udGV4dFwiLGEsZSxiLGMpfSxsb29rdXBCbG9ja1BhcmFtOmZ1bmN0aW9uKGEsYil7dGhpcy51c2VCbG9ja1BhcmFtcz0hMCx0aGlzLnB1c2goW1wiYmxvY2tQYXJhbXNbXCIsYVswXSxcIl1bXCIsYVsxXSxcIl1cIl0pLHRoaXMucmVzb2x2ZVBhdGgoXCJjb250ZXh0XCIsYiwxKX0sbG9va3VwRGF0YTpmdW5jdGlvbihhLGIsYyl7YT90aGlzLnB1c2hTdGFja0xpdGVyYWwoXCJjb250YWluZXIuZGF0YShkYXRhLCBcIithK1wiKVwiKTp0aGlzLnB1c2hTdGFja0xpdGVyYWwoXCJkYXRhXCIpLHRoaXMucmVzb2x2ZVBhdGgoXCJkYXRhXCIsYiwwLCEwLGMpfSxyZXNvbHZlUGF0aDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBnPXRoaXM7aWYodGhpcy5vcHRpb25zLnN0cmljdHx8dGhpcy5vcHRpb25zLmFzc3VtZU9iamVjdHMpcmV0dXJuIHZvaWQgdGhpcy5wdXNoKGYodGhpcy5vcHRpb25zLnN0cmljdCYmZSx0aGlzLGIsYSkpO2Zvcih2YXIgaD1iLmxlbmd0aDtjPGg7YysrKXRoaXMucmVwbGFjZVN0YWNrKGZ1bmN0aW9uKGUpe1xudmFyIGY9Zy5uYW1lTG9va3VwKGUsYltjXSxhKTtyZXR1cm4gZD9bXCIgJiYgXCIsZl06W1wiICE9IG51bGwgPyBcIixmLFwiIDogXCIsZV19KX0scmVzb2x2ZVBvc3NpYmxlTGFtYmRhOmZ1bmN0aW9uKCl7dGhpcy5wdXNoKFt0aGlzLmFsaWFzYWJsZShcImNvbnRhaW5lci5sYW1iZGFcIiksXCIoXCIsdGhpcy5wb3BTdGFjaygpLFwiLCBcIix0aGlzLmNvbnRleHROYW1lKDApLFwiKVwiXSl9LHB1c2hTdHJpbmdQYXJhbTpmdW5jdGlvbihhLGIpe3RoaXMucHVzaENvbnRleHQoKSx0aGlzLnB1c2hTdHJpbmcoYiksXCJTdWJFeHByZXNzaW9uXCIhPT1iJiYoXCJzdHJpbmdcIj09dHlwZW9mIGE/dGhpcy5wdXNoU3RyaW5nKGEpOnRoaXMucHVzaFN0YWNrTGl0ZXJhbChhKSl9LGVtcHR5SGFzaDpmdW5jdGlvbihhKXt0aGlzLnRyYWNrSWRzJiZ0aGlzLnB1c2goXCJ7fVwiKSx0aGlzLnN0cmluZ1BhcmFtcyYmKHRoaXMucHVzaChcInt9XCIpLHRoaXMucHVzaChcInt9XCIpKSx0aGlzLnB1c2hTdGFja0xpdGVyYWwoYT9cInVuZGVmaW5lZFwiOlwie31cIil9LHB1c2hIYXNoOmZ1bmN0aW9uKCl7dGhpcy5oYXNoJiZ0aGlzLmhhc2hlcy5wdXNoKHRoaXMuaGFzaCksdGhpcy5oYXNoPXt2YWx1ZXM6W10sdHlwZXM6W10sY29udGV4dHM6W10saWRzOltdfX0scG9wSGFzaDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaGFzaDt0aGlzLmhhc2g9dGhpcy5oYXNoZXMucG9wKCksdGhpcy50cmFja0lkcyYmdGhpcy5wdXNoKHRoaXMub2JqZWN0TGl0ZXJhbChhLmlkcykpLHRoaXMuc3RyaW5nUGFyYW1zJiYodGhpcy5wdXNoKHRoaXMub2JqZWN0TGl0ZXJhbChhLmNvbnRleHRzKSksdGhpcy5wdXNoKHRoaXMub2JqZWN0TGl0ZXJhbChhLnR5cGVzKSkpLHRoaXMucHVzaCh0aGlzLm9iamVjdExpdGVyYWwoYS52YWx1ZXMpKX0scHVzaFN0cmluZzpmdW5jdGlvbihhKXt0aGlzLnB1c2hTdGFja0xpdGVyYWwodGhpcy5xdW90ZWRTdHJpbmcoYSkpfSxwdXNoTGl0ZXJhbDpmdW5jdGlvbihhKXt0aGlzLnB1c2hTdGFja0xpdGVyYWwoYSl9LHB1c2hQcm9ncmFtOmZ1bmN0aW9uKGEpe251bGwhPWE/dGhpcy5wdXNoU3RhY2tMaXRlcmFsKHRoaXMucHJvZ3JhbUV4cHJlc3Npb24oYSkpOnRoaXMucHVzaFN0YWNrTGl0ZXJhbChudWxsKX0scmVnaXN0ZXJEZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm5hbWVMb29rdXAoXCJkZWNvcmF0b3JzXCIsYixcImRlY29yYXRvclwiKSxkPXRoaXMuc2V0dXBIZWxwZXJBcmdzKGIsYSk7dGhpcy5kZWNvcmF0b3JzLnB1c2goW1wiZm4gPSBcIix0aGlzLmRlY29yYXRvcnMuZnVuY3Rpb25DYWxsKGMsXCJcIixbXCJmblwiLFwicHJvcHNcIixcImNvbnRhaW5lclwiLGRdKSxcIiB8fCBmbjtcIl0pfSxpbnZva2VIZWxwZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucG9wU3RhY2soKSxlPXRoaXMuc2V0dXBIZWxwZXIoYSxiKSxmPWM/W2UubmFtZSxcIiB8fCBcIl06XCJcIixnPVtcIihcIl0uY29uY2F0KGYsZCk7dGhpcy5vcHRpb25zLnN0cmljdHx8Zy5wdXNoKFwiIHx8IFwiLHRoaXMuYWxpYXNhYmxlKFwiaGVscGVycy5oZWxwZXJNaXNzaW5nXCIpKSxnLnB1c2goXCIpXCIpLHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoZyxcImNhbGxcIixlLmNhbGxQYXJhbXMpKX0saW52b2tlS25vd25IZWxwZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNldHVwSGVscGVyKGEsYik7dGhpcy5wdXNoKHRoaXMuc291cmNlLmZ1bmN0aW9uQ2FsbChjLm5hbWUsXCJjYWxsXCIsYy5jYWxsUGFyYW1zKSl9LGludm9rZUFtYmlndW91czpmdW5jdGlvbihhLGIpe3RoaXMudXNlUmVnaXN0ZXIoXCJoZWxwZXJcIik7dmFyIGM9dGhpcy5wb3BTdGFjaygpO3RoaXMuZW1wdHlIYXNoKCk7dmFyIGQ9dGhpcy5zZXR1cEhlbHBlcigwLGEsYiksZT10aGlzLmxhc3RIZWxwZXI9dGhpcy5uYW1lTG9va3VwKFwiaGVscGVyc1wiLGEsXCJoZWxwZXJcIiksZj1bXCIoXCIsXCIoaGVscGVyID0gXCIsZSxcIiB8fCBcIixjLFwiKVwiXTt0aGlzLm9wdGlvbnMuc3RyaWN0fHwoZlswXT1cIihoZWxwZXIgPSBcIixmLnB1c2goXCIgIT0gbnVsbCA/IGhlbHBlciA6IFwiLHRoaXMuYWxpYXNhYmxlKFwiaGVscGVycy5oZWxwZXJNaXNzaW5nXCIpKSksdGhpcy5wdXNoKFtcIihcIixmLGQucGFyYW1zSW5pdD9bXCIpLChcIixkLnBhcmFtc0luaXRdOltdLFwiKSxcIixcIih0eXBlb2YgaGVscGVyID09PSBcIix0aGlzLmFsaWFzYWJsZSgnXCJmdW5jdGlvblwiJyksXCIgPyBcIix0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoXCJoZWxwZXJcIixcImNhbGxcIixkLmNhbGxQYXJhbXMpLFwiIDogaGVscGVyKSlcIl0pfSxpbnZva2VQYXJ0aWFsOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXRoaXMuc2V0dXBQYXJhbXMoYiwxLGQpO2EmJihiPXRoaXMucG9wU3RhY2soKSxkZWxldGUgZS5uYW1lKSxjJiYoZS5pbmRlbnQ9SlNPTi5zdHJpbmdpZnkoYykpLGUuaGVscGVycz1cImhlbHBlcnNcIixlLnBhcnRpYWxzPVwicGFydGlhbHNcIixlLmRlY29yYXRvcnM9XCJjb250YWluZXIuZGVjb3JhdG9yc1wiLGE/ZC51bnNoaWZ0KGIpOmQudW5zaGlmdCh0aGlzLm5hbWVMb29rdXAoXCJwYXJ0aWFsc1wiLGIsXCJwYXJ0aWFsXCIpKSx0aGlzLm9wdGlvbnMuY29tcGF0JiYoZS5kZXB0aHM9XCJkZXB0aHNcIiksZT10aGlzLm9iamVjdExpdGVyYWwoZSksZC5wdXNoKGUpLHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoXCJjb250YWluZXIuaW52b2tlUGFydGlhbFwiLFwiXCIsZCkpfSxhc3NpZ25Ub0hhc2g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wb3BTdGFjaygpLGM9dm9pZCAwLGQ9dm9pZCAwLGU9dm9pZCAwO3RoaXMudHJhY2tJZHMmJihlPXRoaXMucG9wU3RhY2soKSksdGhpcy5zdHJpbmdQYXJhbXMmJihkPXRoaXMucG9wU3RhY2soKSxjPXRoaXMucG9wU3RhY2soKSk7dmFyIGY9dGhpcy5oYXNoO2MmJihmLmNvbnRleHRzW2FdPWMpLGQmJihmLnR5cGVzW2FdPWQpLGUmJihmLmlkc1thXT1lKSxmLnZhbHVlc1thXT1ifSxwdXNoSWQ6ZnVuY3Rpb24oYSxiLGMpe1wiQmxvY2tQYXJhbVwiPT09YT90aGlzLnB1c2hTdGFja0xpdGVyYWwoXCJibG9ja1BhcmFtc1tcIitiWzBdK1wiXS5wYXRoW1wiK2JbMV0rXCJdXCIrKGM/XCIgKyBcIitKU09OLnN0cmluZ2lmeShcIi5cIitjKTpcIlwiKSk6XCJQYXRoRXhwcmVzc2lvblwiPT09YT90aGlzLnB1c2hTdHJpbmcoYik6XCJTdWJFeHByZXNzaW9uXCI9PT1hP3RoaXMucHVzaFN0YWNrTGl0ZXJhbChcInRydWVcIik6dGhpcy5wdXNoU3RhY2tMaXRlcmFsKFwibnVsbFwiKX0sY29tcGlsZXI6ZSxjb21waWxlQ2hpbGRyZW46ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5jaGlsZHJlbixkPXZvaWQgMCxlPXZvaWQgMCxmPTAsZz1jLmxlbmd0aDtmPGc7ZisrKXtkPWNbZl0sZT1uZXcgdGhpcy5jb21waWxlcjt2YXIgaD10aGlzLm1hdGNoRXhpc3RpbmdQcm9ncmFtKGQpO2lmKG51bGw9PWgpe3RoaXMuY29udGV4dC5wcm9ncmFtcy5wdXNoKFwiXCIpO3ZhciBpPXRoaXMuY29udGV4dC5wcm9ncmFtcy5sZW5ndGg7ZC5pbmRleD1pLGQubmFtZT1cInByb2dyYW1cIitpLHRoaXMuY29udGV4dC5wcm9ncmFtc1tpXT1lLmNvbXBpbGUoZCxiLHRoaXMuY29udGV4dCwhdGhpcy5wcmVjb21waWxlKSx0aGlzLmNvbnRleHQuZGVjb3JhdG9yc1tpXT1lLmRlY29yYXRvcnMsdGhpcy5jb250ZXh0LmVudmlyb25tZW50c1tpXT1kLHRoaXMudXNlRGVwdGhzPXRoaXMudXNlRGVwdGhzfHxlLnVzZURlcHRocyx0aGlzLnVzZUJsb2NrUGFyYW1zPXRoaXMudXNlQmxvY2tQYXJhbXN8fGUudXNlQmxvY2tQYXJhbXMsZC51c2VEZXB0aHM9dGhpcy51c2VEZXB0aHMsZC51c2VCbG9ja1BhcmFtcz10aGlzLnVzZUJsb2NrUGFyYW1zfWVsc2UgZC5pbmRleD1oLmluZGV4LGQubmFtZT1cInByb2dyYW1cIitoLmluZGV4LHRoaXMudXNlRGVwdGhzPXRoaXMudXNlRGVwdGhzfHxoLnVzZURlcHRocyx0aGlzLnVzZUJsb2NrUGFyYW1zPXRoaXMudXNlQmxvY2tQYXJhbXN8fGgudXNlQmxvY2tQYXJhbXN9fSxtYXRjaEV4aXN0aW5nUHJvZ3JhbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuY29udGV4dC5lbnZpcm9ubWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMuY29udGV4dC5lbnZpcm9ubWVudHNbYl07aWYoZCYmZC5lcXVhbHMoYSkpcmV0dXJuIGR9fSxwcm9ncmFtRXhwcmVzc2lvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVudmlyb25tZW50LmNoaWxkcmVuW2FdLGM9W2IuaW5kZXgsXCJkYXRhXCIsYi5ibG9ja1BhcmFtc107cmV0dXJuKHRoaXMudXNlQmxvY2tQYXJhbXN8fHRoaXMudXNlRGVwdGhzKSYmYy5wdXNoKFwiYmxvY2tQYXJhbXNcIiksdGhpcy51c2VEZXB0aHMmJmMucHVzaChcImRlcHRoc1wiKSxcImNvbnRhaW5lci5wcm9ncmFtKFwiK2Muam9pbihcIiwgXCIpK1wiKVwifSx1c2VSZWdpc3RlcjpmdW5jdGlvbihhKXt0aGlzLnJlZ2lzdGVyc1thXXx8KHRoaXMucmVnaXN0ZXJzW2FdPSEwLHRoaXMucmVnaXN0ZXJzLmxpc3QucHVzaChhKSl9LHB1c2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBkfHwoYT10aGlzLnNvdXJjZS53cmFwKGEpKSx0aGlzLmlubGluZVN0YWNrLnB1c2goYSksYX0scHVzaFN0YWNrTGl0ZXJhbDpmdW5jdGlvbihhKXt0aGlzLnB1c2gobmV3IGQoYSkpfSxwdXNoU291cmNlOmZ1bmN0aW9uKGEpe3RoaXMucGVuZGluZ0NvbnRlbnQmJih0aGlzLnNvdXJjZS5wdXNoKHRoaXMuYXBwZW5kVG9CdWZmZXIodGhpcy5zb3VyY2UucXVvdGVkU3RyaW5nKHRoaXMucGVuZGluZ0NvbnRlbnQpLHRoaXMucGVuZGluZ0xvY2F0aW9uKSksdGhpcy5wZW5kaW5nQ29udGVudD12b2lkIDApLGEmJnRoaXMuc291cmNlLnB1c2goYSl9LHJlcGxhY2VTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1bXCIoXCJdLGM9dm9pZCAwLGU9dm9pZCAwLGY9dm9pZCAwO2lmKCF0aGlzLmlzSW5saW5lKCkpdGhyb3cgbmV3IGpbXCJkZWZhdWx0XCJdKFwicmVwbGFjZVN0YWNrIG9uIG5vbi1pbmxpbmVcIik7dmFyIGc9dGhpcy5wb3BTdGFjayghMCk7aWYoZyBpbnN0YW5jZW9mIGQpYz1bZy52YWx1ZV0sYj1bXCIoXCIsY10sZj0hMDtlbHNle2U9ITA7dmFyIGg9dGhpcy5pbmNyU3RhY2soKTtiPVtcIigoXCIsdGhpcy5wdXNoKGgpLFwiID0gXCIsZyxcIilcIl0sYz10aGlzLnRvcFN0YWNrKCl9dmFyIGk9YS5jYWxsKHRoaXMsYyk7Znx8dGhpcy5wb3BTdGFjaygpLGUmJnRoaXMuc3RhY2tTbG90LS0sdGhpcy5wdXNoKGIuY29uY2F0KGksXCIpXCIpKX0saW5jclN0YWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhY2tTbG90KyssdGhpcy5zdGFja1Nsb3Q+dGhpcy5zdGFja1ZhcnMubGVuZ3RoJiZ0aGlzLnN0YWNrVmFycy5wdXNoKFwic3RhY2tcIit0aGlzLnN0YWNrU2xvdCksdGhpcy50b3BTdGFja05hbWUoKX0sdG9wU3RhY2tOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJzdGFja1wiK3RoaXMuc3RhY2tTbG90fSxmbHVzaElubGluZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5saW5lU3RhY2s7dGhpcy5pbmxpbmVTdGFjaz1bXTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBlPWFbYl07aWYoZSBpbnN0YW5jZW9mIGQpdGhpcy5jb21waWxlU3RhY2sucHVzaChlKTtlbHNle3ZhciBmPXRoaXMuaW5jclN0YWNrKCk7dGhpcy5wdXNoU291cmNlKFtmLFwiID0gXCIsZSxcIjtcIl0pLHRoaXMuY29tcGlsZVN0YWNrLnB1c2goZil9fX0saXNJbmxpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmxpbmVTdGFjay5sZW5ndGh9LHBvcFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaXNJbmxpbmUoKSxjPShiP3RoaXMuaW5saW5lU3RhY2s6dGhpcy5jb21waWxlU3RhY2spLnBvcCgpO2lmKCFhJiZjIGluc3RhbmNlb2YgZClyZXR1cm4gYy52YWx1ZTtpZighYil7aWYoIXRoaXMuc3RhY2tTbG90KXRocm93IG5ldyBqW1wiZGVmYXVsdFwiXShcIkludmFsaWQgc3RhY2sgcG9wXCIpO3RoaXMuc3RhY2tTbG90LS19cmV0dXJuIGN9LHRvcFN0YWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pc0lubGluZSgpP3RoaXMuaW5saW5lU3RhY2s6dGhpcy5jb21waWxlU3RhY2ssYj1hW2EubGVuZ3RoLTFdO3JldHVybiBiIGluc3RhbmNlb2YgZD9iLnZhbHVlOmJ9LGNvbnRleHROYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVzZURlcHRocyYmYT9cImRlcHRoc1tcIithK1wiXVwiOlwiZGVwdGhcIithfSxxdW90ZWRTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc291cmNlLnF1b3RlZFN0cmluZyhhKX0sb2JqZWN0TGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zb3VyY2Uub2JqZWN0TGl0ZXJhbChhKX0sYWxpYXNhYmxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYWxpYXNlc1thXTtyZXR1cm4gYj8oYi5yZWZlcmVuY2VDb3VudCsrLGIpOihiPXRoaXMuYWxpYXNlc1thXT10aGlzLnNvdXJjZS53cmFwKGEpLGIuYWxpYXNhYmxlPSEwLGIucmVmZXJlbmNlQ291bnQ9MSxiKX0sc2V0dXBIZWxwZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dGhpcy5zZXR1cEhlbHBlckFyZ3MoYixhLGQsYyksZj10aGlzLm5hbWVMb29rdXAoXCJoZWxwZXJzXCIsYixcImhlbHBlclwiKSxnPXRoaXMuYWxpYXNhYmxlKHRoaXMuY29udGV4dE5hbWUoMCkrXCIgIT0gbnVsbCA/IFwiK3RoaXMuY29udGV4dE5hbWUoMCkrXCIgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KVwiKTtyZXR1cm57cGFyYW1zOmQscGFyYW1zSW5pdDplLG5hbWU6ZixjYWxsUGFyYW1zOltnXS5jb25jYXQoZCl9fSxzZXR1cFBhcmFtczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9e30sZT1bXSxmPVtdLGc9W10saD0hYyxpPXZvaWQgMDtoJiYoYz1bXSksZC5uYW1lPXRoaXMucXVvdGVkU3RyaW5nKGEpLGQuaGFzaD10aGlzLnBvcFN0YWNrKCksdGhpcy50cmFja0lkcyYmKGQuaGFzaElkcz10aGlzLnBvcFN0YWNrKCkpLHRoaXMuc3RyaW5nUGFyYW1zJiYoZC5oYXNoVHlwZXM9dGhpcy5wb3BTdGFjaygpLGQuaGFzaENvbnRleHRzPXRoaXMucG9wU3RhY2soKSk7dmFyIGo9dGhpcy5wb3BTdGFjaygpLGs9dGhpcy5wb3BTdGFjaygpOyhrfHxqKSYmKGQuZm49a3x8XCJjb250YWluZXIubm9vcFwiLGQuaW52ZXJzZT1qfHxcImNvbnRhaW5lci5ub29wXCIpO2Zvcih2YXIgbD1iO2wtLTspaT10aGlzLnBvcFN0YWNrKCksY1tsXT1pLHRoaXMudHJhY2tJZHMmJihnW2xdPXRoaXMucG9wU3RhY2soKSksdGhpcy5zdHJpbmdQYXJhbXMmJihmW2xdPXRoaXMucG9wU3RhY2soKSxlW2xdPXRoaXMucG9wU3RhY2soKSk7cmV0dXJuIGgmJihkLmFyZ3M9dGhpcy5zb3VyY2UuZ2VuZXJhdGVBcnJheShjKSksdGhpcy50cmFja0lkcyYmKGQuaWRzPXRoaXMuc291cmNlLmdlbmVyYXRlQXJyYXkoZykpLHRoaXMuc3RyaW5nUGFyYW1zJiYoZC50eXBlcz10aGlzLnNvdXJjZS5nZW5lcmF0ZUFycmF5KGYpLGQuY29udGV4dHM9dGhpcy5zb3VyY2UuZ2VuZXJhdGVBcnJheShlKSksdGhpcy5vcHRpb25zLmRhdGEmJihkLmRhdGE9XCJkYXRhXCIpLHRoaXMudXNlQmxvY2tQYXJhbXMmJihkLmJsb2NrUGFyYW1zPVwiYmxvY2tQYXJhbXNcIiksZH0sc2V0dXBIZWxwZXJBcmdzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuc2V0dXBQYXJhbXMoYSxiLGMpO3JldHVybiBlPXRoaXMub2JqZWN0TGl0ZXJhbChlKSxkPyh0aGlzLnVzZVJlZ2lzdGVyKFwib3B0aW9uc1wiKSxjLnB1c2goXCJvcHRpb25zXCIpLFtcIm9wdGlvbnM9XCIsZV0pOmM/KGMucHVzaChlKSxcIlwiKTplfX0sZnVuY3Rpb24oKXtmb3IodmFyIGE9XCJicmVhayBlbHNlIG5ldyB2YXIgY2FzZSBmaW5hbGx5IHJldHVybiB2b2lkIGNhdGNoIGZvciBzd2l0Y2ggd2hpbGUgY29udGludWUgZnVuY3Rpb24gdGhpcyB3aXRoIGRlZmF1bHQgaWYgdGhyb3cgZGVsZXRlIGluIHRyeSBkbyBpbnN0YW5jZW9mIHR5cGVvZiBhYnN0cmFjdCBlbnVtIGludCBzaG9ydCBib29sZWFuIGV4cG9ydCBpbnRlcmZhY2Ugc3RhdGljIGJ5dGUgZXh0ZW5kcyBsb25nIHN1cGVyIGNoYXIgZmluYWwgbmF0aXZlIHN5bmNocm9uaXplZCBjbGFzcyBmbG9hdCBwYWNrYWdlIHRocm93cyBjb25zdCBnb3RvIHByaXZhdGUgdHJhbnNpZW50IGRlYnVnZ2VyIGltcGxlbWVudHMgcHJvdGVjdGVkIHZvbGF0aWxlIGRvdWJsZSBpbXBvcnQgcHVibGljIGxldCB5aWVsZCBhd2FpdCBudWxsIHRydWUgZmFsc2VcIi5zcGxpdChcIiBcIiksYj1lLlJFU0VSVkVEX1dPUkRTPXt9LGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYlthW2NdXT0hMH0oKSxlLmlzVmFsaWRKYXZhU2NyaXB0VmFyaWFibGVOYW1lPWZ1bmN0aW9uKGEpe3JldHVybiFlLlJFU0VSVkVEX1dPUkRTW2FdJiYvXlthLXpBLVpfJF1bMC05YS16QS1aXyRdKiQvLnRlc3QoYSl9LGJbXCJkZWZhdWx0XCJdPWUsYS5leHBvcnRzPWJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIsYyl7aWYoZi5pc0FycmF5KGEpKXtmb3IodmFyIGQ9W10sZT0wLGc9YS5sZW5ndGg7ZTxnO2UrKylkLnB1c2goYi53cmFwKGFbZV0sYykpO3JldHVybiBkfXJldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYXx8XCJudW1iZXJcIj09dHlwZW9mIGE/YStcIlwiOmF9ZnVuY3Rpb24gZShhKXt0aGlzLnNyY0ZpbGU9YSx0aGlzLnNvdXJjZT1bXX1iLl9fZXNNb2R1bGU9ITA7dmFyIGY9Yyg1KSxnPXZvaWQgMDt0cnl7fWNhdGNoKGgpe31nfHwoZz1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnNyYz1cIlwiLGQmJnRoaXMuYWRkKGQpfSxnLnByb3RvdHlwZT17YWRkOmZ1bmN0aW9uKGEpe2YuaXNBcnJheShhKSYmKGE9YS5qb2luKFwiXCIpKSx0aGlzLnNyYys9YX0scHJlcGVuZDpmdW5jdGlvbihhKXtmLmlzQXJyYXkoYSkmJihhPWEuam9pbihcIlwiKSksdGhpcy5zcmM9YSt0aGlzLnNyY30sdG9TdHJpbmdXaXRoU291cmNlTWFwOmZ1bmN0aW9uKCl7cmV0dXJue2NvZGU6dGhpcy50b1N0cmluZygpfX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcmN9fSksZS5wcm90b3R5cGU9e2lzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5zb3VyY2UubGVuZ3RofSxwcmVwZW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5zb3VyY2UudW5zaGlmdCh0aGlzLndyYXAoYSxiKSl9LHB1c2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnNvdXJjZS5wdXNoKHRoaXMud3JhcChhLGIpKX0sbWVyZ2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVtcHR5KCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXthLmFkZChbXCIgIFwiLGIsXCJcXG5cIl0pfSksYX0sZWFjaDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuc291cmNlLmxlbmd0aDtiPGM7YisrKWEodGhpcy5zb3VyY2VbYl0pfSxlbXB0eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY3VycmVudExvY2F0aW9ufHx7c3RhcnQ6e319O3JldHVybiBuZXcgZyhhLnN0YXJ0LmxpbmUsYS5zdGFydC5jb2x1bW4sdGhpcy5zcmNGaWxlKX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/dGhpcy5jdXJyZW50TG9jYXRpb258fHtzdGFydDp7fX06YXJndW1lbnRzWzFdO3JldHVybiBhIGluc3RhbmNlb2YgZz9hOihhPWQoYSx0aGlzLGIpLG5ldyBnKGIuc3RhcnQubGluZSxiLnN0YXJ0LmNvbHVtbix0aGlzLnNyY0ZpbGUsYSkpfSxmdW5jdGlvbkNhbGw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjPXRoaXMuZ2VuZXJhdGVMaXN0KGMpLHRoaXMud3JhcChbYSxiP1wiLlwiK2IrXCIoXCI6XCIoXCIsYyxcIilcIl0pfSxxdW90ZWRTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuJ1wiJysoYStcIlwiKS5yZXBsYWNlKC9cXFxcL2csXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9cIi9nLCdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxcXHJcIikucmVwbGFjZSgvXFx1MjAyOC9nLFwiXFxcXHUyMDI4XCIpLnJlcGxhY2UoL1xcdTIwMjkvZyxcIlxcXFx1MjAyOVwiKSsnXCInfSxvYmplY3RMaXRlcmFsOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYykpe3ZhciBlPWQoYVtjXSx0aGlzKTtcInVuZGVmaW5lZFwiIT09ZSYmYi5wdXNoKFt0aGlzLnF1b3RlZFN0cmluZyhjKSxcIjpcIixlXSl9dmFyIGY9dGhpcy5nZW5lcmF0ZUxpc3QoYik7cmV0dXJuIGYucHJlcGVuZChcIntcIiksZi5hZGQoXCJ9XCIpLGZ9LGdlbmVyYXRlTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5lbXB0eSgpLGM9MCxlPWEubGVuZ3RoO2M8ZTtjKyspYyYmYi5hZGQoXCIsXCIpLGIuYWRkKGQoYVtjXSx0aGlzKSk7cmV0dXJuIGJ9LGdlbmVyYXRlQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZW5lcmF0ZUxpc3QoYSk7cmV0dXJuIGIucHJlcGVuZChcIltcIiksYi5hZGQoXCJdXCIpLGJ9fSxiW1wiZGVmYXVsdFwiXT1lLGEuZXhwb3J0cz1iW1wiZGVmYXVsdFwiXX1dKX0pOyIsIi8qISBqUXVlcnkgdjMuMi4xIHwgKGMpIEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGM9W10sZD1hLmRvY3VtZW50LGU9T2JqZWN0LmdldFByb3RvdHlwZU9mLGY9Yy5zbGljZSxnPWMuY29uY2F0LGg9Yy5wdXNoLGk9Yy5pbmRleE9mLGo9e30saz1qLnRvU3RyaW5nLGw9ai5oYXNPd25Qcm9wZXJ0eSxtPWwudG9TdHJpbmcsbj1tLmNhbGwoT2JqZWN0KSxvPXt9O2Z1bmN0aW9uIHAoYSxiKXtiPWJ8fGQ7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2MudGV4dD1hLGIuaGVhZC5hcHBlbmRDaGlsZChjKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfXZhciBxPVwiMy4yLjFcIixyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByLmZuLmluaXQoYSxiKX0scz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csdD0vXi1tcy0vLHU9Ly0oW2Etel0pL2csdj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O3IuZm49ci5wcm90b3R5cGU9e2pxdWVyeTpxLGNvbnN0cnVjdG9yOnIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9mLmNhbGwodGhpcyk6YTwwP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXIubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiByLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoYTwwP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmM8Yj9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6aCxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LHIuZXh0ZW5kPXIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSxcIm9iamVjdFwiPT10eXBlb2YgZ3x8ci5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtoPGk7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKHIuaXNQbGFpbk9iamVjdChkKXx8KGU9QXJyYXkuaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmQXJyYXkuaXNBcnJheShjKT9jOltdKTpmPWMmJnIuaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09ci5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LHIuZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKHErTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09ci50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7dmFyIGI9ci50eXBlKGEpO3JldHVybihcIm51bWJlclwiPT09Ynx8XCJzdHJpbmdcIj09PWIpJiYhaXNOYU4oYS1wYXJzZUZsb2F0KGEpKX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYixjO3JldHVybiEoIWF8fFwiW29iamVjdCBPYmplY3RdXCIhPT1rLmNhbGwoYSkpJiYoIShiPWUoYSkpfHwoYz1sLmNhbGwoYixcImNvbnN0cnVjdG9yXCIpJiZiLmNvbnN0cnVjdG9yLFwiZnVuY3Rpb25cIj09dHlwZW9mIGMmJm0uY2FsbChjKT09PW4pKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9qW2suY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7cChhKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UodCxcIm1zLVwiKS5yZXBsYWNlKHUsdil9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYodyhhKSl7Zm9yKGM9YS5sZW5ndGg7ZDxjO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOihhK1wiXCIpLnJlcGxhY2UocyxcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJih3KE9iamVjdChhKSk/ci5tZXJnZShjLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpoLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aS5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2Q8YztkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztmPGc7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj0wLGg9W107aWYodyhhKSlmb3IoZD1hLmxlbmd0aDtmPGQ7ZisrKWU9YihhW2ZdLGYsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGYgaW4gYSllPWIoYVtmXSxmLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZy5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLHIuaXNGdW5jdGlvbihhKSlyZXR1cm4gZD1mLmNhbGwoYXJndW1lbnRzLDIpLGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGQuY29uY2F0KGYuY2FsbChhcmd1bWVudHMpKSl9LGUuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxyLmd1aWQrKyxlfSxub3c6RGF0ZS5ub3csc3VwcG9ydDpvfSksXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYoci5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksci5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtqW1wiW29iamVjdCBcIitiK1wiXVwiXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiB3KGEpe3ZhciBiPSEhYSYmXCJsZW5ndGhcImluIGEmJmEubGVuZ3RoLGM9ci50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIiE9PWMmJiFyLmlzV2luZG93KGEpJiYoXCJhcnJheVwiPT09Y3x8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhKX12YXIgeD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PVwic2l6emxlXCIrMSpuZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWhhKCksej1oYSgpLEE9aGEoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz17fS5oYXNPd25Qcm9wZXJ0eSxEPVtdLEU9RC5wb3AsRj1ELnB1c2gsRz1ELnB1c2gsSD1ELnNsaWNlLEk9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEo9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLEs9XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLEw9XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXDAtXFxcXHhhMF0pK1wiLE09XCJcXFxcW1wiK0srXCIqKFwiK0wrXCIpKD86XCIrSytcIiooWypeJHwhfl0/PSlcIitLK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrTCtcIikpfClcIitLK1wiKlxcXFxdXCIsTj1cIjooXCIrTCtcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrTStcIikqKXwuKilcXFxcKXwpXCIsTz1uZXcgUmVnRXhwKEsrXCIrXCIsXCJnXCIpLFA9bmV3IFJlZ0V4cChcIl5cIitLK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitLK1wiKyRcIixcImdcIiksUT1uZXcgUmVnRXhwKFwiXlwiK0srXCIqLFwiK0srXCIqXCIpLFI9bmV3IFJlZ0V4cChcIl5cIitLK1wiKihbPit+XXxcIitLK1wiKVwiK0srXCIqXCIpLFM9bmV3IFJlZ0V4cChcIj1cIitLK1wiKihbXlxcXFxdJ1xcXCJdKj8pXCIrSytcIipcXFxcXVwiLFwiZ1wiKSxUPW5ldyBSZWdFeHAoTiksVT1uZXcgUmVnRXhwKFwiXlwiK0wrXCIkXCIpLFY9e0lEOm5ldyBSZWdFeHAoXCJeIyhcIitMK1wiKVwiKSxDTEFTUzpuZXcgUmVnRXhwKFwiXlxcXFwuKFwiK0wrXCIpXCIpLFRBRzpuZXcgUmVnRXhwKFwiXihcIitMK1wifFsqXSlcIiksQVRUUjpuZXcgUmVnRXhwKFwiXlwiK00pLFBTRVVETzpuZXcgUmVnRXhwKFwiXlwiK04pLENISUxEOm5ldyBSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK0srXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitLK1wiKig/OihbKy1dfClcIitLK1wiKihcXFxcZCspfCkpXCIrSytcIipcXFxcKXwpXCIsXCJpXCIpLGJvb2w6bmV3IFJlZ0V4cChcIl4oPzpcIitKK1wiKSRcIixcImlcIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoXCJeXCIrSytcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrSytcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrSytcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sVz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFg9L15oXFxkJC9pLFk9L15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxaPS9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLCQ9L1srfl0vLF89bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK0srXCI/fChcIitLK1wiKXwuKVwiLFwiaWdcIiksYWE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOmQ8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sYmE9LyhbXFwwLVxceDFmXFx4N2ZdfF4tP1xcZCl8Xi0kfFteXFwwLVxceDFmXFx4N2YtXFx1RkZGRlxcdy1dL2csY2E9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9cIlxcMFwiPT09YT9cIlxcdWZmZmRcIjphLnNsaWNlKDAsLTEpK1wiXFxcXFwiK2EuY2hhckNvZGVBdChhLmxlbmd0aC0xKS50b1N0cmluZygxNikrXCIgXCI6XCJcXFxcXCIrYX0sZGE9ZnVuY3Rpb24oKXttKCl9LGVhPXRhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITAmJihcImZvcm1cImluIGF8fFwibGFiZWxcImluIGEpfSx7ZGlyOlwicGFyZW50Tm9kZVwiLG5leHQ6XCJsZWdlbmRcIn0pO3RyeXtHLmFwcGx5KEQ9SC5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxEW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGZhKXtHPXthcHBseTpELmxlbmd0aD9mdW5jdGlvbihhLGIpe0YuYXBwbHkoYSxILmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBnYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzPWImJmIub3duZXJEb2N1bWVudCx3PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sXCJzdHJpbmdcIiE9dHlwZW9mIGF8fCFhfHwxIT09dyYmOSE9PXcmJjExIT09dylyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXcmJihsPVouZXhlYyhhKSkpaWYoZj1sWzFdKXtpZig5PT09dyl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHMmJihqPXMuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKGxbMl0pcmV0dXJuIEcuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPWxbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYStcIiBcIl0mJighcXx8IXEudGVzdChhKSkpe2lmKDEhPT13KXM9YixyPWE7ZWxzZSBpZihcIm9iamVjdFwiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9rPWsucmVwbGFjZShiYSxjYSk6Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLGs9dSksbz1nKGEpLGg9by5sZW5ndGg7d2hpbGUoaC0tKW9baF09XCIjXCIraytcIiBcIitzYShvW2hdKTtyPW8uam9pbihcIixcIikscz0kLnRlc3QoYSkmJnFhKGIucGFyZW50Tm9kZSl8fGJ9aWYocil0cnl7cmV0dXJuIEcuYXBwbHkoZCxzLnF1ZXJ5U2VsZWN0b3JBbGwocikpLGR9Y2F0Y2goeCl7fWZpbmFsbHl7az09PXUmJmIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUCxcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGlhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KFwifFwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBsYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJmEuc291cmNlSW5kZXgtYi5zb3VyY2VJbmRleDtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihcImlucHV0XCI9PT1jfHxcImJ1dHRvblwiPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG9hKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm5cImZvcm1cImluIGI/Yi5wYXJlbnROb2RlJiZiLmRpc2FibGVkPT09ITE/XCJsYWJlbFwiaW4gYj9cImxhYmVsXCJpbiBiLnBhcmVudE5vZGU/Yi5wYXJlbnROb2RlLmRpc2FibGVkPT09YTpiLmRpc2FibGVkPT09YTpiLmlzRGlzYWJsZWQ9PT1hfHxiLmlzRGlzYWJsZWQhPT0hYSYmZWEoYik9PT1hOmIuZGlzYWJsZWQ9PT1hOlwibGFiZWxcImluIGImJmIuZGlzYWJsZWQ9PT1hfX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gaWEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaWEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBxYShhKXtyZXR1cm4gYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhYiYmXCJIVE1MXCIhPT1iLm5vZGVOYW1lfSxtPWdhLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGUsZz1hP2Eub3duZXJEb2N1bWVudHx8YTp2O3JldHVybiBnIT09biYmOT09PWcubm9kZVR5cGUmJmcuZG9jdW1lbnRFbGVtZW50PyhuPWcsbz1uLmRvY3VtZW50RWxlbWVudCxwPSFmKG4pLHYhPT1uJiYoZT1uLmRlZmF1bHRWaWV3KSYmZS50b3AhPT1lJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGRhLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixkYSkpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChuLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9WS50ZXN0KG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWphKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIW4uZ2V0RWxlbWVudHNCeU5hbWV8fCFuLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSxkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSk6KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0sZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjLGQsZSxmPWIuZ2V0RWxlbWVudEJ5SWQoYSk7aWYoZil7aWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKSxjJiZjLnZhbHVlPT09YSlyZXR1cm5bZl07ZT1iLmdldEVsZW1lbnRzQnlOYW1lKGEpLGQ9MDt3aGlsZShmPWVbZCsrXSlpZihjPWYuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpLGMmJmMudmFsdWU9PT1hKXJldHVybltmXX1yZXR1cm5bXX19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKFwiKlwiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZwKXJldHVybiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSl9LHI9W10scT1bXSwoYy5xc2E9WS50ZXN0KG4ucXVlcnlTZWxlY3RvckFsbCkpJiYoamEoZnVuY3Rpb24oYSl7by5hcHBlbmRDaGlsZChhKS5pbm5lckhUTUw9XCI8YSBpZD0nXCIrdStcIic+PC9hPjxzZWxlY3QgaWQ9J1wiK3UrXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK0srXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK0srXCIqKD86dmFsdWV8XCIrSitcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkfj1cIit1K1wiLV1cIikubGVuZ3RofHxxLnB1c2goXCJ+PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcImEjXCIrdStcIisqXCIpLmxlbmd0aHx8cS5wdXNoKFwiLiMuK1srfl1cIil9KSxqYShmdW5jdGlvbihhKXthLmlubmVySFRNTD1cIjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PlwiO3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Iuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiaGlkZGVuXCIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiRFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGgmJnEucHVzaChcIm5hbWVcIitLK1wiKlsqXiR8IX5dPz1cIiksMiE9PWEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCYmcS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxvLmFwcGVuZENoaWxkKGEpLmRpc2FibGVkPSEwLDIhPT1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZGlzYWJsZWRcIikubGVuZ3RoJiZxLnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIikscS5wdXNoKFwiLC4qOlwiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9WS50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZqYShmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLFwiKlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLE4pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9WS50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8WS50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09bnx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1ufHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0koayxhKS1JKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsZz1bYV0saD1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09bj8tMTpiPT09bj8xOmU/LTE6Zj8xOms/SShrLGEpLUkoayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSlnLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTt3aGlsZShnW2RdPT09aFtkXSlkKys7cmV0dXJuIGQ/bGEoZ1tkXSxoW2RdKTpnW2RdPT09dj8tMTpoW2RdPT09dj8xOjB9LG4pOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShTLFwiPSckMSddXCIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiK1wiIFwiXSYmKCFyfHwhci50ZXN0KGIpKSYmKCFxfHwhcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZ2EoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZ2EuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxnYS5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmQy5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZ2EuZXNjYXBlPWZ1bmN0aW9uKGEpe3JldHVybihhK1wiXCIpLnJlcGxhY2UoYmEsY2EpfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZ2EudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWdhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShfLGFhKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHxcIlwiKS5yZXBsYWNlKF8sYWEpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGdhLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmdhLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBWLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fFwiXCI6YyYmVC50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKFwiKVwiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK0srXCIpXCIrYStcIihcIitLK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9Z2EuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6IWJ8fChlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZS5yZXBsYWNlKE8sXCIgXCIpK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWImJihlPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YytcIi1cIikpfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWgsdD0hMTtpZihxKXtpZihmKXt3aGlsZShwKXttPWI7d2hpbGUobT1tW3BdKWlmKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9pYShmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SShhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDppYShmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUCxcIiQxXCIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoXyxhYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFUudGVzdChhfHxcIlwiKXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShfLGFhKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhK1wiLVwiKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOm9hKCExKSxkaXNhYmxlZDpvYSghMCksY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWC50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0OnBhKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpwYShmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6cGEoZnVuY3Rpb24oYSxiLGMpe3JldHVybltjPDA/YytiOmNdfSksZXZlbjpwYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YjtjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpwYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2M8YjtjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0OnBhKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YzwwP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6cGEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1jPDA/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPW1hKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW5hKGIpO2Z1bmN0aW9uIHJhKCl7fXJhLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcmEsZz1nYS50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthK1wiIFwiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1RLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1SLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFAsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVZbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9nYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHNhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2I8YztiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiB0YShhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1iLm5leHQsZj1lfHxkLGc9YyYmXCJwYXJlbnROb2RlXCI9PT1mLGg9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxlKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGcpcmV0dXJuIGEoYixjLGUpO3JldHVybiExfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG09W3csaF07aWYoaSl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZykmJmEoYixjLGkpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxnKWlmKGw9Ylt1XXx8KGJbdV09e30pLGs9bFtiLnVuaXF1ZUlEXXx8KGxbYi51bmlxdWVJRF09e30pLGUmJmU9PT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpYj1iW2RdfHxiO2Vsc2V7aWYoKGo9a1tmXSkmJmpbMF09PT13JiZqWzFdPT09aClyZXR1cm4gbVsyXT1qWzJdO2lmKGtbZl09bSxtWzJdPWEoYixjLGkpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB1YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB3YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtoPGk7aCsrKShmPWFbaF0pJiYoYyYmIWMoZixkLGUpfHwoZy5wdXNoKGYpLGomJmIucHVzaChoKSkpO3JldHVybiBnfWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXhhKGQpKSxlJiYhZVt1XSYmKGU9eGEoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dmEoYnx8XCIqXCIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp3YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9d2EocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0koZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXdhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpHLmFwcGx5KGcscil9KX1mdW5jdGlvbiB5YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlW1wiIFwiXSxpPWc/MTowLGs9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXRhKGZ1bmN0aW9uKGEpe3JldHVybiBJKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXt2YXIgZT0hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKTtyZXR1cm4gYj1udWxsLGV9XTtpPGY7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3RhKHVhKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2U8ZjtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB4YShpPjEmJnVhKG0pLGk+MSYmc2EoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTpcIiBcIj09PWFbaS0yXS50eXBlP1wiKlwiOlwiXCJ9KSkucmVwbGFjZShQLFwiJDFcIiksYyxpPGUmJnlhKGEuc2xpY2UoaSxlKSksZTxmJiZ5YShhPWEuc2xpY2UoZSkpLGU8ZiYmc2EoYSkpfW0ucHVzaChjKX1yZXR1cm4gdWEobSl9ZnVuY3Rpb24gemEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbyxxLHI9MCxzPVwiMFwiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKFwiKlwiLGspLHk9dys9bnVsbD09dj8xOk1hdGgucmFuZG9tKCl8fC4xLHo9eC5sZW5ndGg7Zm9yKGsmJihqPWc9PT1ufHxnfHxrKTtzIT09eiYmbnVsbCE9KGw9eFtzXSk7cysrKXtpZihlJiZsKXtvPTAsZ3x8bC5vd25lckRvY3VtZW50PT09bnx8KG0obCksaD0hcCk7d2hpbGUocT1hW28rK10paWYocShsLGd8fG4saCkpe2kucHVzaChsKTticmVha31rJiYodz15KX1jJiYoKGw9IXEmJmwpJiZyLS0sZiYmdC5wdXNoKGwpKX1pZihyKz1zLGMmJnMhPT1yKXtvPTA7d2hpbGUocT1iW28rK10pcSh0LHUsZyxoKTtpZihmKXtpZihyPjApd2hpbGUocy0tKXRbc118fHVbc118fCh1W3NdPUUuY2FsbChpKSk7dT13YSh1KX1HLmFwcGx5KGksdSksayYmIWYmJnUubGVuZ3RoPjAmJnIrYi5sZW5ndGg+MSYmZ2EudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9eSxqPXYpLHR9O3JldHVybiBjP2lhKGYpOmZ9cmV0dXJuIGg9Z2EuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYStcIiBcIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eWEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHphKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsaSxqLGssbCxtPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEsbj0hZSYmZyhhPW0uc2VsZWN0b3J8fGEpO2lmKGM9Y3x8W10sMT09PW4ubGVuZ3RoKXtpZihpPW5bMF09blswXS5zbGljZSgwKSxpLmxlbmd0aD4yJiZcIklEXCI9PT0oaj1pWzBdKS50eXBlJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtpWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoai5tYXRjaGVzWzBdLnJlcGxhY2UoXyxhYSksYil8fFtdKVswXSwhYilyZXR1cm4gYzttJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShpLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1mPVYubmVlZHNDb250ZXh0LnRlc3QoYSk/MDppLmxlbmd0aDt3aGlsZShmLS0pe2lmKGo9aVtmXSxkLnJlbGF0aXZlW2s9ai50eXBlXSlicmVhaztpZigobD1kLmZpbmRba10pJiYoZT1sKGoubWF0Y2hlc1swXS5yZXBsYWNlKF8sYWEpLCQudGVzdChpWzBdLnR5cGUpJiZxYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGkuc3BsaWNlKGYsMSksYT1lLmxlbmd0aCYmc2EoaSksIWEpcmV0dXJuIEcuYXBwbHkoYyxlKSxjO2JyZWFrfX19cmV0dXJuKG18fGgoYSxuKSkoZSxiLCFwLGMsIWJ8fCQudGVzdChhKSYmcWEoYi5wYXJlbnROb2RlKXx8YiksY30sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpKX0pLGphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGthKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGEsYixjKXtpZighYylyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYixcInR5cGVcIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8a2EoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEsYixjKXtpZighYyYmXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBhLmRlZmF1bHRWYWx1ZX0pLGphKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGthKEosZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKCFjKXJldHVybiBhW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTtyLmZpbmQ9eCxyLmV4cHI9eC5zZWxlY3RvcnMsci5leHByW1wiOlwiXT1yLmV4cHIucHNldWRvcyxyLnVuaXF1ZVNvcnQ9ci51bmlxdWU9eC51bmlxdWVTb3J0LHIudGV4dD14LmdldFRleHQsci5pc1hNTERvYz14LmlzWE1MLHIuY29udGFpbnM9eC5jb250YWlucyxyLmVzY2FwZVNlbGVjdG9yPXguZXNjYXBlO3ZhciB5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZyKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sej1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sQT1yLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O2Z1bmN0aW9uIEIoYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfXZhciBDPS9ePChbYS16XVteXFwvXFwwPjpcXHgyMFxcdFxcclxcblxcZl0qKVtcXHgyMFxcdFxcclxcblxcZl0qXFwvPz4oPzo8XFwvXFwxPnwpJC9pLEQ9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIEUoYSxiLGMpe3JldHVybiByLmlzRnVuY3Rpb24oYik/ci5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk6Yi5ub2RlVHlwZT9yLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk6XCJzdHJpbmdcIiE9dHlwZW9mIGI/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09Y30pOkQudGVzdChiKT9yLmZpbHRlcihiLGEsYyk6KGI9ci5maWx0ZXIoYixhKSxyLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaS5jYWxsKGIsYSk+LTEhPT1jJiYxPT09YS5ub2RlVHlwZX0pKX1yLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/ci5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpyLmZpbmQubWF0Y2hlcyhhLHIuZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sci5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMubGVuZ3RoLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2socihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2I8ZDtiKyspaWYoci5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihjPXRoaXMucHVzaFN0YWNrKFtdKSxiPTA7YjxkO2IrKylyLmZpbmQoYSxlW2JdLGMpO3JldHVybiBkPjE/ci51bmlxdWVTb3J0KGMpOmN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhRSh0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBhJiZBLnRlc3QoYSk/cihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBGLEc9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC8sSD1yLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxGLFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihlPVwiPFwiPT09YVswXSYmXCI+XCI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkcuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiByP2JbMF06YixyLm1lcmdlKHRoaXMsci5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSksQy50ZXN0KGVbMV0pJiZyLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYilyLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJih0aGlzWzBdPWYsdGhpcy5sZW5ndGg9MSksdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6ci5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKHIpOnIubWFrZUFycmF5KGEsdGhpcyl9O0gucHJvdG90eXBlPXIuZm4sRj1yKGQpO3ZhciBJPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEo9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07ci5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1yKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGM7YSsrKWlmKHIuY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPVwic3RyaW5nXCIhPXR5cGVvZiBhJiZyKGEpO2lmKCFBLnRlc3QoYSkpZm9yKDtkPGU7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmci5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP3IudW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09dHlwZW9mIGE/aS5jYWxsKHIoYSksdGhpc1swXSk6aS5jYWxsKHRoaXMsYS5qcXVlcnk/YVswXTphKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLnVuaXF1ZVNvcnQoci5tZXJnZSh0aGlzLmdldCgpLHIoYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gSyhhLGIpe3doaWxlKChhPWFbYl0pJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9ci5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiB5KGEsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBLKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB5KGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4geigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHooYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIEIoYSxcImlmcmFtZVwiKT9hLmNvbnRlbnREb2N1bWVudDooQihhLFwidGVtcGxhdGVcIikmJihhPWEuY29udGVudHx8YSksci5tZXJnZShbXSxhLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKGEsYil7ci5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPXIubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPXIuZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihKW2FdfHxyLnVuaXF1ZVNvcnQoZSksSS50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEw9L1teXFx4MjBcXHRcXHJcXG5cXGZdKy9nO2Z1bmN0aW9uIE0oYSl7dmFyIGI9e307cmV0dXJuIHIuZWFjaChhLm1hdGNoKEwpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifXIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9XCJzdHJpbmdcIj09dHlwZW9mIGE/TShhKTpyLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9ZXx8YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOlwiXCIpfSxqPXthZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGMmJiFiJiYoaD1mLmxlbmd0aC0xLGcucHVzaChjKSksZnVuY3Rpb24gZChiKXtyLmVhY2goYixmdW5jdGlvbihiLGMpe3IuaXNGdW5jdGlvbihjKT9hLnVuaXF1ZSYmai5oYXMoYyl8fGYucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PXIudHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiByLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9ci5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxjPD1oJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ci5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz1cIlwiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGN8fGJ8fChmPWM9XCJcIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFlfSxmaXJlV2l0aDpmdW5jdGlvbihhLGMpe3JldHVybiBlfHwoYz1jfHxbXSxjPVthLGMuc2xpY2U/Yy5zbGljZSgpOmNdLGcucHVzaChjKSxifHxpKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gai5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWR9fTtyZXR1cm4gan07ZnVuY3Rpb24gTihhKXtyZXR1cm4gYX1mdW5jdGlvbiBPKGEpe3Rocm93IGF9ZnVuY3Rpb24gUChhLGIsYyxkKXt2YXIgZTt0cnl7YSYmci5pc0Z1bmN0aW9uKGU9YS5wcm9taXNlKT9lLmNhbGwoYSkuZG9uZShiKS5mYWlsKGMpOmEmJnIuaXNGdW5jdGlvbihlPWEudGhlbik/ZS5jYWxsKGEsYixjKTpiLmFwcGx5KHZvaWQgMCxbYV0uc2xpY2UoZCkpfWNhdGNoKGEpe2MuYXBwbHkodm9pZCAwLFthXSl9fXIuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihiKXt2YXIgYz1bW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLHIuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLHIuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLDJdLFtcInJlc29sdmVcIixcImRvbmVcIixyLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksMCxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLHIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksci5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwxLFwicmVqZWN0ZWRcIl1dLGQ9XCJwZW5kaW5nXCIsZT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZH0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudGhlbihudWxsLGEpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGIpe3IuZWFjaChjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5pc0Z1bmN0aW9uKGFbZFs0XV0pJiZhW2RbNF1dO2ZbZFsxXV0oZnVuY3Rpb24oKXt2YXIgYT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZyLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhiLm5vdGlmeSkuZG9uZShiLnJlc29sdmUpLmZhaWwoYi5yZWplY3QpOmJbZFswXStcIldpdGhcIl0odGhpcyxlP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24oYixkLGUpe3ZhciBmPTA7ZnVuY3Rpb24gZyhiLGMsZCxlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaD10aGlzLGk9YXJndW1lbnRzLGo9ZnVuY3Rpb24oKXt2YXIgYSxqO2lmKCEoYjxmKSl7aWYoYT1kLmFwcGx5KGgsaSksYT09PWMucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIik7aj1hJiYoXCJvYmplY3RcIj09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGEpJiZhLnRoZW4sci5pc0Z1bmN0aW9uKGopP2U/ai5jYWxsKGEsZyhmLGMsTixlKSxnKGYsYyxPLGUpKTooZisrLGouY2FsbChhLGcoZixjLE4sZSksZyhmLGMsTyxlKSxnKGYsYyxOLGMubm90aWZ5V2l0aCkpKTooZCE9PU4mJihoPXZvaWQgMCxpPVthXSksKGV8fGMucmVzb2x2ZVdpdGgpKGgsaSkpfX0saz1lP2o6ZnVuY3Rpb24oKXt0cnl7aigpfWNhdGNoKGEpe3IuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayYmci5EZWZlcnJlZC5leGNlcHRpb25Ib29rKGEsay5zdGFja1RyYWNlKSxiKzE+PWYmJihkIT09TyYmKGg9dm9pZCAwLGk9W2FdKSxjLnJlamVjdFdpdGgoaCxpKSl9fTtiP2soKTooci5EZWZlcnJlZC5nZXRTdGFja0hvb2smJihrLnN0YWNrVHJhY2U9ci5EZWZlcnJlZC5nZXRTdGFja0hvb2soKSksYS5zZXRUaW1lb3V0KGspKX19cmV0dXJuIHIuRGVmZXJyZWQoZnVuY3Rpb24oYSl7Y1swXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGUpP2U6TixhLm5vdGlmeVdpdGgpKSxjWzFdWzNdLmFkZChnKDAsYSxyLmlzRnVuY3Rpb24oYik/YjpOKSksY1syXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGQpP2Q6TykpfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP3IuZXh0ZW5kKGEsZSk6ZX19LGY9e307cmV0dXJuIHIuZWFjaChjLGZ1bmN0aW9uKGEsYil7dmFyIGc9YlsyXSxoPWJbNV07ZVtiWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2Q9aH0sY1szLWFdWzJdLmRpc2FibGUsY1swXVsyXS5sb2NrKSxnLmFkZChiWzNdLmZpcmUpLGZbYlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZltiWzBdK1wiV2l0aFwiXSh0aGlzPT09Zj92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LGZbYlswXStcIldpdGhcIl09Zy5maXJlV2l0aH0pLGUucHJvbWlzZShmKSxiJiZiLmNhbGwoZixmKSxmfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGgsYz1iLGQ9QXJyYXkoYyksZT1mLmNhbGwoYXJndW1lbnRzKSxnPXIuRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtkW2FdPXRoaXMsZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6YywtLWJ8fGcucmVzb2x2ZVdpdGgoZCxlKX19O2lmKGI8PTEmJihQKGEsZy5kb25lKGgoYykpLnJlc29sdmUsZy5yZWplY3QsIWIpLFwicGVuZGluZ1wiPT09Zy5zdGF0ZSgpfHxyLmlzRnVuY3Rpb24oZVtjXSYmZVtjXS50aGVuKSkpcmV0dXJuIGcudGhlbigpO3doaWxlKGMtLSlQKGVbY10saChjKSxnLnJlamVjdCk7cmV0dXJuIGcucHJvbWlzZSgpfX0pO3ZhciBRPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO3IuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihiLGMpe2EuY29uc29sZSYmYS5jb25zb2xlLndhcm4mJmImJlEudGVzdChiLm5hbWUpJiZhLmNvbnNvbGUud2FybihcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiK2IubWVzc2FnZSxiLnN0YWNrLGMpfSxyLnJlYWR5RXhjZXB0aW9uPWZ1bmN0aW9uKGIpe2Euc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGJ9KX07dmFyIFI9ci5EZWZlcnJlZCgpO3IuZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIFIudGhlbihhKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3IucmVhZHlFeGNlcHRpb24oYSl9KSx0aGlzfSxyLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tci5yZWFkeVdhaXQ6ci5pc1JlYWR5KXx8KHIuaXNSZWFkeT0hMCxhIT09ITAmJi0tci5yZWFkeVdhaXQ+MHx8Ui5yZXNvbHZlV2l0aChkLFtyXSkpfX0pLHIucmVhZHkudGhlbj1SLnRoZW47ZnVuY3Rpb24gUygpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixTKSxcbmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixTKSxyLnJlYWR5KCl9XCJjb21wbGV0ZVwiPT09ZC5yZWFkeVN0YXRlfHxcImxvYWRpbmdcIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChyLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLFMpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixTKSk7dmFyIFQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09ci50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpVChhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxyLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwocihhKSxjKX0pKSxiKSlmb3IoO2g8aTtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxVPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gVigpe3RoaXMuZXhwYW5kbz1yLmV4cGFuZG8rVi51aWQrK31WLnVpZD0xLFYucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LFUoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWVbci5jYW1lbENhc2UoYildPWM7ZWxzZSBmb3IoZCBpbiBiKWVbci5jYW1lbENhc2UoZCldPWJbZF07cmV0dXJuIGV9LGdldDpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDA9PT1iP3RoaXMuY2FjaGUoYSk6YVt0aGlzLmV4cGFuZG9dJiZhW3RoaXMuZXhwYW5kb11bci5jYW1lbENhc2UoYildfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz90aGlzLmdldChhLGIpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWFbdGhpcy5leHBhbmRvXTtpZih2b2lkIDAhPT1kKXtpZih2b2lkIDAhPT1iKXtBcnJheS5pc0FycmF5KGIpP2I9Yi5tYXAoci5jYW1lbENhc2UpOihiPXIuY2FtZWxDYXNlKGIpLGI9YiBpbiBkP1tiXTpiLm1hdGNoKEwpfHxbXSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGRbYltjXV19KHZvaWQgMD09PWJ8fHIuaXNFbXB0eU9iamVjdChkKSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGFbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09YiYmIXIuaXNFbXB0eU9iamVjdChiKX19O3ZhciBXPW5ldyBWLFg9bmV3IFYsWT0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sWj0vW0EtWl0vZztmdW5jdGlvbiAkKGEpe3JldHVyblwidHJ1ZVwiPT09YXx8XCJmYWxzZVwiIT09YSYmKFwibnVsbFwiPT09YT9udWxsOmE9PT0rYStcIlwiPythOlkudGVzdChhKT9KU09OLnBhcnNlKGEpOmEpfWZ1bmN0aW9uIF8oYSxiLGMpe3ZhciBkO2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKWlmKGQ9XCJkYXRhLVwiK2IucmVwbGFjZShaLFwiLSQmXCIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSxcInN0cmluZ1wiPT10eXBlb2YgYyl7dHJ5e2M9JChjKX1jYXRjaChlKXt9WC5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9ci5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIFguaGFzRGF0YShhKXx8Vy5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gWC5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7WC5yZW1vdmUoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBXLmFjY2VzcyhhLGIsYyl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7Vy5yZW1vdmUoYSxiKX19KSxyLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPVguZ2V0KGYpLDE9PT1mLm5vZGVUeXBlJiYhVy5nZXQoZixcImhhc0RhdGFBdHRyc1wiKSkpe2M9Zy5sZW5ndGg7d2hpbGUoYy0tKWdbY10mJihkPWdbY10ubmFtZSwwPT09ZC5pbmRleE9mKFwiZGF0YS1cIikmJihkPXIuY2FtZWxDYXNlKGQuc2xpY2UoNSkpLF8oZixkLGVbZF0pKSk7Vy5zZXQoZixcImhhc0RhdGFBdHRyc1wiLCEwKX1yZXR1cm4gZX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtYLnNldCh0aGlzLGEpfSk6VCh0aGlzLGZ1bmN0aW9uKGIpe3ZhciBjO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9WC5nZXQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9XyhmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGN9ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXtYLnNldCh0aGlzLGEsYil9KX0sbnVsbCxiLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7WC5yZW1vdmUodGhpcyxhKX0pfX0pLHIuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7aWYoYSlyZXR1cm4gYj0oYnx8XCJmeFwiKStcInF1ZXVlXCIsZD1XLmdldChhLGIpLGMmJighZHx8QXJyYXkuaXNBcnJheShjKT9kPVcuYWNjZXNzKGEsYixyLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPXIucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9ci5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtyLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBXLmdldChhLGMpfHxXLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7Vy5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxyLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP3IucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9ci5xdWV1ZSh0aGlzLGEsYik7ci5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9ci5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9Vy5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgYWE9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLGJhPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK2FhK1wiKShbYS16JV0qKSRcIixcImlcIiksY2E9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGRhPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PWEuc3R5bGUuZGlzcGxheXx8XCJcIj09PWEuc3R5bGUuZGlzcGxheSYmci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkmJlwibm9uZVwiPT09ci5jc3MoYSxcImRpc3BsYXlcIil9LGVhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTtmdW5jdGlvbiBmYShhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gci5jc3MoYSxiLFwiXCIpfSxpPWgoKSxqPWMmJmNbM118fChyLmNzc051bWJlcltiXT9cIlwiOlwicHhcIiksaz0oci5jc3NOdW1iZXJbYl18fFwicHhcIiE9PWomJitpKSYmYmEuZXhlYyhyLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fFwiLjVcIixrLz1mLHIuc3R5bGUoYSxiLGsraik7d2hpbGUoZiE9PShmPWgoKS9pKSYmMSE9PWYmJi0tZyl9cmV0dXJuIGMmJihrPStrfHwraXx8MCxlPWNbMV0/aysoY1sxXSsxKSpjWzJdOitjWzJdLGQmJihkLnVuaXQ9aixkLnN0YXJ0PWssZC5lbmQ9ZSkpLGV9dmFyIGdhPXt9O2Z1bmN0aW9uIGhhKGEpe3ZhciBiLGM9YS5vd25lckRvY3VtZW50LGQ9YS5ub2RlTmFtZSxlPWdhW2RdO3JldHVybiBlP2U6KGI9Yy5ib2R5LmFwcGVuZENoaWxkKGMuY3JlYXRlRWxlbWVudChkKSksZT1yLmNzcyhiLFwiZGlzcGxheVwiKSxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksXCJub25lXCI9PT1lJiYoZT1cImJsb2NrXCIpLGdhW2RdPWUsZSl9ZnVuY3Rpb24gaWEoYSxiKXtmb3IodmFyIGMsZCxlPVtdLGY9MCxnPWEubGVuZ3RoO2Y8ZztmKyspZD1hW2ZdLGQuc3R5bGUmJihjPWQuc3R5bGUuZGlzcGxheSxiPyhcIm5vbmVcIj09PWMmJihlW2ZdPVcuZ2V0KGQsXCJkaXNwbGF5XCIpfHxudWxsLGVbZl18fChkLnN0eWxlLmRpc3BsYXk9XCJcIikpLFwiXCI9PT1kLnN0eWxlLmRpc3BsYXkmJmRhKGQpJiYoZVtmXT1oYShkKSkpOlwibm9uZVwiIT09YyYmKGVbZl09XCJub25lXCIsVy5zZXQoZCxcImRpc3BsYXlcIixjKSkpO2ZvcihmPTA7ZjxnO2YrKyludWxsIT1lW2ZdJiYoYVtmXS5zdHlsZS5kaXNwbGF5PWVbZl0pO3JldHVybiBhfXIuZm4uZXh0ZW5kKHtzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIGlhKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIGlhKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGEodGhpcyk/cih0aGlzKS5zaG93KCk6cih0aGlzKS5oaWRlKCl9KX19KTt2YXIgamE9L14oPzpjaGVja2JveHxyYWRpbykkL2ksa2E9LzwoW2Etel1bXlxcL1xcMD5cXHgyMFxcdFxcclxcblxcZl0rKS9pLGxhPS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksbWE9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTttYS5vcHRncm91cD1tYS5vcHRpb24sbWEudGJvZHk9bWEudGZvb3Q9bWEuY29sZ3JvdXA9bWEuY2FwdGlvbj1tYS50aGVhZCxtYS50aD1tYS50ZDtmdW5jdGlvbiBuYShhLGIpe3ZhciBjO3JldHVybiBjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTpbXSx2b2lkIDA9PT1ifHxiJiZCKGEsYik/ci5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBvYShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylXLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxXLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9dmFyIHBhPS88fCYjP1xcdys7LztmdW5jdGlvbiBxYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG49MCxvPWEubGVuZ3RoO248bztuKyspaWYoZj1hW25dLGZ8fDA9PT1mKWlmKFwib2JqZWN0XCI9PT1yLnR5cGUoZikpci5tZXJnZShtLGYubm9kZVR5cGU/W2ZdOmYpO2Vsc2UgaWYocGEudGVzdChmKSl7Zz1nfHxsLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSksaD0oa2EuZXhlYyhmKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksaT1tYVtoXXx8bWEuX2RlZmF1bHQsZy5pbm5lckhUTUw9aVsxXStyLmh0bWxQcmVmaWx0ZXIoZikraVsyXSxrPWlbMF07d2hpbGUoay0tKWc9Zy5sYXN0Q2hpbGQ7ci5tZXJnZShtLGcuY2hpbGROb2RlcyksZz1sLmZpcnN0Q2hpbGQsZy50ZXh0Q29udGVudD1cIlwifWVsc2UgbS5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZikpO2wudGV4dENvbnRlbnQ9XCJcIixuPTA7d2hpbGUoZj1tW24rK10paWYoZCYmci5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1yLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPW5hKGwuYXBwZW5kQ2hpbGQoZiksXCJzY3JpcHRcIiksaiYmb2EoZyksYyl7az0wO3doaWxlKGY9Z1trKytdKWxhLnRlc3QoZi50eXBlfHxcIlwiKSYmYy5wdXNoKGYpfXJldHVybiBsfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGM9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSxjLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcImNoZWNrZWRcIiksYy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLGIuYXBwZW5kQ2hpbGQoYyksby5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLG8ubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgcmE9ZC5kb2N1bWVudEVsZW1lbnQsc2E9L15rZXkvLHRhPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyx1YT0vXihbXi5dKikoPzpcXC4oLispfCkvO2Z1bmN0aW9uIHZhKCl7cmV0dXJuITB9ZnVuY3Rpb24gd2EoKXtyZXR1cm4hMX1mdW5jdGlvbiB4YSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24geWEoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoXCJvYmplY3RcIj09dHlwZW9mIGIpe1wic3RyaW5nXCIhPXR5cGVvZiBjJiYoZD1kfHxjLGM9dm9pZCAwKTtmb3IoaCBpbiBiKXlhKGEsaCxjLGQsYltoXSxmKTtyZXR1cm4gYX1pZihudWxsPT1kJiZudWxsPT1lPyhlPWMsZD1jPXZvaWQgMCk6bnVsbD09ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9d2E7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gcigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1yLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1yLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxuLG8scCxxPVcuZ2V0KGEpO2lmKHEpe2MuaGFuZGxlciYmKGY9YyxjPWYuaGFuZGxlcixlPWYuc2VsZWN0b3IpLGUmJnIuZmluZC5tYXRjaGVzU2VsZWN0b3IocmEsZSksYy5ndWlkfHwoYy5ndWlkPXIuZ3VpZCsrKSwoaT1xLmV2ZW50cyl8fChpPXEuZXZlbnRzPXt9KSwoZz1xLmhhbmRsZSl8fChnPXEuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiByJiZyLmV2ZW50LnRyaWdnZXJlZCE9PWIudHlwZT9yLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGEsYXJndW1lbnRzKTp2b2lkIDB9KSxiPShifHxcIlwiKS5tYXRjaChMKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9dWEuZXhlYyhiW2pdKXx8W10sbj1wPWhbMV0sbz0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxuJiYobD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LGs9ci5leHRlbmQoe3R5cGU6bixvcmlnVHlwZTpwLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmci5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpvLmpvaW4oXCIuXCIpfSxmKSwobT1pW25dKXx8KG09aVtuXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLG8sZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobixnKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLHIuZXZlbnQuZ2xvYmFsW25dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1XLmhhc0RhdGEoYSkmJlcuZ2V0KGEpO2lmKHEmJihpPXEuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goTCl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbil7bD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbT1pW25dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitvLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcCE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxvLHEuaGFuZGxlKSE9PSExfHxyLnJlbW92ZUV2ZW50KGEsbixxLmhhbmRsZSksZGVsZXRlIGlbbl0pfWVsc2UgZm9yKG4gaW4gaSlyLmV2ZW50LnJlbW92ZShhLG4rYltqXSxjLGQsITApO3IuaXNFbXB0eU9iamVjdChpKSYmVy5yZW1vdmUoYSxcImhhbmRsZSBldmVudHNcIil9fSxkaXNwYXRjaDpmdW5jdGlvbihhKXt2YXIgYj1yLmV2ZW50LmZpeChhKSxjLGQsZSxmLGcsaCxpPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxqPShXLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXXx8W10saz1yLmV2ZW50LnNwZWNpYWxbYi50eXBlXXx8e307Zm9yKGlbMF09YixjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylpW2NdPWFyZ3VtZW50c1tjXTtpZihiLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGIpIT09ITEpe2g9ci5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYixqKSxjPTA7d2hpbGUoKGY9aFtjKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7Yi5jdXJyZW50VGFyZ2V0PWYuZWxlbSxkPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tkKytdKSYmIWIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSliLnJuYW1lc3BhY2UmJiFiLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChiLmhhbmRsZU9iaj1nLGIuZGF0YT1nLmRhdGEsZT0oKHIuZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGIucmVzdWx0PWUpPT09ITEmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGIpLGIucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9W10saT1iLmRlbGVnYXRlQ291bnQsaj1hLnRhcmdldDtpZihpJiZqLm5vZGVUeXBlJiYhKFwiY2xpY2tcIj09PWEudHlwZSYmYS5idXR0b24+PTEpKWZvcig7aiE9PXRoaXM7aj1qLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWoubm9kZVR5cGUmJihcImNsaWNrXCIhPT1hLnR5cGV8fGouZGlzYWJsZWQhPT0hMCkpe2ZvcihmPVtdLGc9e30sYz0wO2M8aTtjKyspZD1iW2NdLGU9ZC5zZWxlY3RvcitcIiBcIix2b2lkIDA9PT1nW2VdJiYoZ1tlXT1kLm5lZWRzQ29udGV4dD9yKGUsdGhpcykuaW5kZXgoaik+LTE6ci5maW5kKGUsdGhpcyxudWxsLFtqXSkubGVuZ3RoKSxnW2VdJiZmLnB1c2goZCk7Zi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmZ9KX1yZXR1cm4gaj10aGlzLGk8Yi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmIuc2xpY2UoaSl9KSxofSxhZGRQcm9wOmZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIuRXZlbnQucHJvdG90eXBlLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpyLmlzRnVuY3Rpb24oYik/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGIodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFthXX0sc2V0OmZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmJ9KX19KX0sZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhW3IuZXhwYW5kb10/YTpuZXcgci5FdmVudChhKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PXhhKCkmJnRoaXMuZm9jdXMpcmV0dXJuIHRoaXMuZm9jdXMoKSwhMX0sZGVsZWdhdGVUeXBlOlwiZm9jdXNpblwifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcz09PXhhKCkmJnRoaXMuYmx1cilyZXR1cm4gdGhpcy5ibHVyKCksITF9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYoXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZCKHRoaXMsXCJpbnB1dFwiKSlyZXR1cm4gdGhpcy5jbGljaygpLCExfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gQihhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fX0sci5yZW1vdmVFdmVudD1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjKX0sci5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygci5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/dmE6d2EsdGhpcy50YXJnZXQ9YS50YXJnZXQmJjM9PT1hLnRhcmdldC5ub2RlVHlwZT9hLnRhcmdldC5wYXJlbnROb2RlOmEudGFyZ2V0LHRoaXMuY3VycmVudFRhcmdldD1hLmN1cnJlbnRUYXJnZXQsdGhpcy5yZWxhdGVkVGFyZ2V0PWEucmVsYXRlZFRhcmdldCk6dGhpcy50eXBlPWEsYiYmci5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8ci5ub3coKSx2b2lkKHRoaXNbci5leHBhbmRvXT0hMCkpOm5ldyByLkV2ZW50KGEsYil9LHIuRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpyLkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDp3YSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDp3YSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDp3YSxpc1NpbXVsYXRlZDohMSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD12YSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD12YSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9dmEsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LHIuZWFjaCh7YWx0S2V5OiEwLGJ1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjaGFuZ2VkVG91Y2hlczohMCxjdHJsS2V5OiEwLGRldGFpbDohMCxldmVudFBoYXNlOiEwLG1ldGFLZXk6ITAscGFnZVg6ITAscGFnZVk6ITAsc2hpZnRLZXk6ITAsdmlldzohMCxcImNoYXJcIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihhKXt2YXIgYj1hLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS53aGljaCYmc2EudGVzdChhLnR5cGUpP251bGwhPWEuY2hhckNvZGU/YS5jaGFyQ29kZTphLmtleUNvZGU6IWEud2hpY2gmJnZvaWQgMCE9PWImJnRhLnRlc3QoYS50eXBlKT8xJmI/MToyJmI/Mzo0JmI/MjowOmEud2hpY2h9fSxyLmV2ZW50LmFkZFByb3ApLHIuZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe3IuZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuIGUmJihlPT09ZHx8ci5jb250YWlucyhkLGUpKXx8KGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksci5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB5YSh0aGlzLGEsYixjLGQpfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHlhKHRoaXMsYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLHIoYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrXCIuXCIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmXCJmdW5jdGlvblwiIT10eXBlb2YgYnx8KGM9YixiPXZvaWQgMCksYz09PSExJiYoYz13YSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX19KTt2YXIgemE9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW2Etel1bXlxcL1xcMD5cXHgyMFxcdFxcclxcblxcZl0qKVtePl0qKVxcLz4vZ2ksQWE9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksQmE9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxDYT0vXnRydWVcXC8oLiopLyxEYT0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2c7ZnVuY3Rpb24gRWEoYSxiKXtyZXR1cm4gQihhLFwidGFibGVcIikmJkIoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLFwidHJcIik/cihcIj50Ym9keVwiLGEpWzBdfHxhOmF9ZnVuY3Rpb24gRmEoYSl7cmV0dXJuIGEudHlwZT0obnVsbCE9PWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkrXCIvXCIrYS50eXBlLGF9ZnVuY3Rpb24gR2EoYSl7dmFyIGI9Q2EuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxhfWZ1bmN0aW9uIEhhKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoVy5oYXNEYXRhKGEpJiYoZj1XLmFjY2VzcyhhKSxnPVcuc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtjPGQ7YysrKXIuZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1YLmhhc0RhdGEoYSkmJihoPVguYWNjZXNzKGEpLGk9ci5leHRlbmQoe30saCksWC5zZXQoYixpKSl9fWZ1bmN0aW9uIElhKGEsYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1wiaW5wdXRcIj09PWMmJmphLnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOlwiaW5wdXRcIiE9PWMmJlwidGV4dGFyZWFcIiE9PWN8fChiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gSmEoYSxiLGMsZCl7Yj1nLmFwcGx5KFtdLGIpO3ZhciBlLGYsaCxpLGosayxsPTAsbT1hLmxlbmd0aCxuPW0tMSxxPWJbMF0scz1yLmlzRnVuY3Rpb24ocSk7aWYoc3x8bT4xJiZcInN0cmluZ1wiPT10eXBlb2YgcSYmIW8uY2hlY2tDbG9uZSYmQmEudGVzdChxKSlyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEuZXEoZSk7cyYmKGJbMF09cS5jYWxsKHRoaXMsZSxmLmh0bWwoKSkpLEphKGYsYixjLGQpfSk7aWYobSYmKGU9cWEoYixhWzBdLm93bmVyRG9jdW1lbnQsITEsYSxkKSxmPWUuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZiksZnx8ZCkpe2ZvcihoPXIubWFwKG5hKGUsXCJzY3JpcHRcIiksRmEpLGk9aC5sZW5ndGg7bDxtO2wrKylqPWUsbCE9PW4mJihqPXIuY2xvbmUoaiwhMCwhMCksaSYmci5tZXJnZShoLG5hKGosXCJzY3JpcHRcIikpKSxjLmNhbGwoYVtsXSxqLGwpO2lmKGkpZm9yKGs9aFtoLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LHIubWFwKGgsR2EpLGw9MDtsPGk7bCsrKWo9aFtsXSxsYS50ZXN0KGoudHlwZXx8XCJcIikmJiFXLmFjY2VzcyhqLFwiZ2xvYmFsRXZhbFwiKSYmci5jb250YWlucyhrLGopJiYoai5zcmM/ci5fZXZhbFVybCYmci5fZXZhbFVybChqLnNyYyk6cChqLnRleHRDb250ZW50LnJlcGxhY2UoRGEsXCJcIiksaykpfXJldHVybiBhfWZ1bmN0aW9uIEthKGEsYixjKXtmb3IodmFyIGQsZT1iP3IuZmlsdGVyKGIsYSk6YSxmPTA7bnVsbCE9KGQ9ZVtmXSk7ZisrKWN8fDEhPT1kLm5vZGVUeXBlfHxyLmNsZWFuRGF0YShuYShkKSksZC5wYXJlbnROb2RlJiYoYyYmci5jb250YWlucyhkLm93bmVyRG9jdW1lbnQsZCkmJm9hKG5hKGQsXCJzY3JpcHRcIikpLGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSk7cmV0dXJuIGF9ci5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh6YSxcIjwkMT48LyQyPlwiKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9ci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShvLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxyLmlzWE1MRG9jKGEpKSlmb3IoZz1uYShoKSxmPW5hKGEpLGQ9MCxlPWYubGVuZ3RoO2Q8ZTtkKyspSWEoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8bmEoYSksZz1nfHxuYShoKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUhhKGZbZF0sZ1tkXSk7ZWxzZSBIYShhLGgpO3JldHVybiBnPW5hKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmb2EoZywhaSYmbmEoYSxcInNjcmlwdFwiKSksaH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZT1yLmV2ZW50LnNwZWNpYWwsZj0wO3ZvaWQgMCE9PShjPWFbZl0pO2YrKylpZihVKGMpKXtpZihiPWNbVy5leHBhbmRvXSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZVtkXT9yLmV2ZW50LnJlbW92ZShjLGQpOnIucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtjW1cuZXhwYW5kb109dm9pZCAwfWNbWC5leHBhbmRvXSYmKGNbWC5leHBhbmRvXT12b2lkIDApfX19KSxyLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBLYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIEthKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9yLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUVhKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9RWEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYoci5jbGVhbkRhdGEobmEoYSwhMSkpLGEudGV4dENvbnRlbnQ9XCJcIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbCE9YSYmYSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHIuY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJiFBYS50ZXN0KGEpJiYhbWFbKGthLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1yLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7YzxkO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYoci5jbGVhbkRhdGEobmEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSmEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO3IuaW5BcnJheSh0aGlzLGEpPDAmJihyLmNsZWFuRGF0YShuYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLHIuZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1yKGEpLGY9ZS5sZW5ndGgtMSxnPTA7Zzw9ZjtnKyspYz1nPT09Zj90aGlzOnRoaXMuY2xvbmUoITApLHIoZVtnXSlbYl0oYyksaC5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgTGE9L15tYXJnaW4vLE1hPW5ldyBSZWdFeHAoXCJeKFwiK2FhK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLE5hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD1cImJveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJVwiLGkuaW5uZXJIVE1MPVwiXCIscmEuYXBwZW5kQ2hpbGQoaCk7dmFyIGI9YS5nZXRDb21wdXRlZFN0eWxlKGkpO2M9XCIxJVwiIT09Yi50b3AsZz1cIjJweFwiPT09Yi5tYXJnaW5MZWZ0LGU9XCI0cHhcIj09PWIud2lkdGgsaS5zdHlsZS5tYXJnaW5SaWdodD1cIjUwJVwiLGY9XCI0cHhcIj09PWIubWFyZ2luUmlnaHQscmEucmVtb3ZlQ2hpbGQoaCksaT1udWxsfX12YXIgYyxlLGYsZyxoPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsaS5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsby5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O3BhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGguYXBwZW5kQ2hpbGQoaSksci5leHRlbmQobyx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBiKCksY30sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGV9LHBpeGVsTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGZ9LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBiKCksZ319KSl9KCk7ZnVuY3Rpb24gT2EoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxOYShhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0sXCJcIiE9PWd8fHIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1yLnN0eWxlKGEsYikpLCFvLnBpeGVsTWFyZ2luUmlnaHQoKSYmTWEudGVzdChnKSYmTGEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiBQYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUWE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFJhPS9eLS0vLFNhPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxUYT17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LFVhPVtcIldlYmtpdFwiLFwiTW96XCIsXCJtc1wiXSxWYT1kLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGU7ZnVuY3Rpb24gV2EoYSl7aWYoYSBpbiBWYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVVhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1VYVtjXStiLGEgaW4gVmEpcmV0dXJuIGF9ZnVuY3Rpb24gWGEoYSl7dmFyIGI9ci5jc3NQcm9wc1thXTtyZXR1cm4gYnx8KGI9ci5jc3NQcm9wc1thXT1XYShhKXx8YSksYn1mdW5jdGlvbiBZYShhLGIsYyl7dmFyIGQ9YmEuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMl0tKGN8fDApKSsoZFszXXx8XCJweFwiKTpifWZ1bmN0aW9uIFphKGEsYixjLGQsZSl7dmFyIGYsZz0wO2ZvcihmPWM9PT0oZD9cImJvcmRlclwiOlwiY29udGVudFwiKT80Olwid2lkdGhcIj09PWI/MTowO2Y8NDtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9ci5jc3MoYSxjK2NhW2ZdLCEwLGUpKSxkPyhcImNvbnRlbnRcIj09PWMmJihnLT1yLmNzcyhhLFwicGFkZGluZ1wiK2NhW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPXIuY3NzKGEsXCJib3JkZXJcIitjYVtmXStcIldpZHRoXCIsITAsZSkpKTooZys9ci5jc3MoYSxcInBhZGRpbmdcIitjYVtmXSwhMCxlKSxcInBhZGRpbmdcIiE9PWMmJihnKz1yLmNzcyhhLFwiYm9yZGVyXCIrY2FbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gJGEoYSxiLGMpe3ZhciBkLGU9TmEoYSksZj1PYShhLGIsZSksZz1cImJvcmRlci1ib3hcIj09PXIuY3NzKGEsXCJib3hTaXppbmdcIiwhMSxlKTtyZXR1cm4gTWEudGVzdChmKT9mOihkPWcmJihvLmJveFNpemluZ1JlbGlhYmxlKCl8fGY9PT1hLnN0eWxlW2JdKSxcImF1dG9cIj09PWYmJihmPWFbXCJvZmZzZXRcIitiWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKV0pLGY9cGFyc2VGbG9hdChmKXx8MCxmK1phKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGUpK1wicHhcIil9ci5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1PYShhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLGNvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6XCJjc3NGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPXIuY2FtZWxDYXNlKGIpLGk9UmEudGVzdChiKSxqPWEuc3R5bGU7cmV0dXJuIGl8fChiPVhhKGgpKSxnPXIuY3NzSG9va3NbYl18fHIuY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiZcImdldFwiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTpqW2JdOihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1iYS5leGVjKGMpKSYmZVsxXSYmKGM9ZmEoYSxiLGUpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiPT09ZiYmKGMrPWUmJmVbM118fChyLmNzc051bWJlcltoXT9cIlwiOlwicHhcIikpLG8uY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChqW2JdPVwiaW5oZXJpdFwiKSxnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGk/ai5zZXRQcm9wZXJ0eShiLGMpOmpbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpO3JldHVybiBpfHwoYj1YYShoKSksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT1PYShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIFRhJiYoZT1UYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7aWYoYylyZXR1cm4hUWEudGVzdChyLmNzcyhhLFwiZGlzcGxheVwiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/JGEoYSxiLGQpOmVhKGEsU2EsZnVuY3Rpb24oKXtyZXR1cm4gJGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZOYShhKSxnPWQmJlphKGEsYixkLFwiYm9yZGVyLWJveFwiPT09ci5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpLGYpO3JldHVybiBnJiYoZT1iYS5leGVjKGMpKSYmXCJweFwiIT09KGVbM118fFwicHhcIikmJihhLnN0eWxlW2JdPWMsYz1yLmNzcyhhLGIpKSxZYShhLGMsZyl9fX0pLHIuY3NzSG9va3MubWFyZ2luTGVmdD1QYShvLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe2lmKGIpcmV0dXJuKHBhcnNlRmxvYXQoT2EoYSxcIm1hcmdpbkxlZnRcIikpfHxhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtZWEoYSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrXCJweFwifSksci5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdO2Q8NDtkKyspZVthK2NhW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LExhLnRlc3QoYSl8fChyLmNzc0hvb2tzW2ErYl0uc2V0PVlhKX0pLHIuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKEFycmF5LmlzQXJyYXkoYikpe2ZvcihkPU5hKGEpLGU9Yi5sZW5ndGg7ZzxlO2crKylmW2JbZ11dPXIuY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9yLnN0eWxlKGEsYixjKTpyLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX19KTtmdW5jdGlvbiBfYShhLGIsYyxkLGUpe3JldHVybiBuZXcgX2EucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKX1yLlR3ZWVuPV9hLF9hLnByb3RvdHlwZT17Y29uc3RydWN0b3I6X2EsaW5pdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsdGhpcy5lYXNpbmc9ZXx8ci5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChyLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPV9hLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpfYS5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1fYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9ci5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOl9hLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LF9hLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1fYS5wcm90b3R5cGUsX2EucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9ci5jc3MoYS5lbGVtLGEucHJvcCxcIlwiKSxiJiZcImF1dG9cIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe3IuZnguc3RlcFthLnByb3BdP3IuZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtyLmNzc1Byb3BzW2EucHJvcF1dJiYhci5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93OnIuc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LF9hLnByb3BIb29rcy5zY3JvbGxUb3A9X2EucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sci5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDpcInN3aW5nXCJ9LHIuZng9X2EucHJvdG90eXBlLmluaXQsci5meC5zdGVwPXt9O3ZhciBhYixiYixjYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sZGI9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBlYigpe2JiJiYoZC5oaWRkZW49PT0hMSYmYS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZWIpOmEuc2V0VGltZW91dChlYixyLmZ4LmludGVydmFsKSxyLmZ4LnRpY2soKSl9ZnVuY3Rpb24gZmIoKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YWI9dm9pZCAwfSksYWI9ci5ub3coKX1mdW5jdGlvbiBnYihhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ZDw0O2QrPTItYiljPWNhW2RdLGVbXCJtYXJnaW5cIitjXT1lW1wicGFkZGluZ1wiK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIGhiKGEsYixjKXtmb3IodmFyIGQsZT0oa2IudHdlZW5lcnNbYl18fFtdKS5jb25jYXQoa2IudHdlZW5lcnNbXCIqXCJdKSxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWlmKGQ9ZVtmXS5jYWxsKGMsYixhKSlyZXR1cm4gZH1mdW5jdGlvbiBpYihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosayxsPVwid2lkdGhcImluIGJ8fFwiaGVpZ2h0XCJpbiBiLG09dGhpcyxuPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJmRhKGEpLHE9Vy5nZXQoYSxcImZ4c2hvd1wiKTtjLnF1ZXVlfHwoZz1yLl9xdWV1ZUhvb2tzKGEsXCJmeFwiKSxudWxsPT1nLnVucXVldWVkJiYoZy51bnF1ZXVlZD0wLGg9Zy5lbXB0eS5maXJlLGcuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2cudW5xdWV1ZWR8fGgoKX0pLGcudW5xdWV1ZWQrKyxtLmFsd2F5cyhmdW5jdGlvbigpe20uYWx3YXlzKGZ1bmN0aW9uKCl7Zy51bnF1ZXVlZC0tLHIucXVldWUoYSxcImZ4XCIpLmxlbmd0aHx8Zy5lbXB0eS5maXJlKCl9KX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxjYi50ZXN0KGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fFwidG9nZ2xlXCI9PT1lLGU9PT0ocD9cImhpZGVcIjpcInNob3dcIikpe2lmKFwic2hvd1wiIT09ZXx8IXF8fHZvaWQgMD09PXFbZF0pY29udGludWU7cD0hMH1uW2RdPXEmJnFbZF18fHIuc3R5bGUoYSxkKX1pZihpPSFyLmlzRW1wdHlPYmplY3QoYiksaXx8IXIuaXNFbXB0eU9iamVjdChuKSl7bCYmMT09PWEubm9kZVR5cGUmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPXEmJnEuZGlzcGxheSxudWxsPT1qJiYoaj1XLmdldChhLFwiZGlzcGxheVwiKSksaz1yLmNzcyhhLFwiZGlzcGxheVwiKSxcIm5vbmVcIj09PWsmJihqP2s9ajooaWEoW2FdLCEwKSxqPWEuc3R5bGUuZGlzcGxheXx8aixrPXIuY3NzKGEsXCJkaXNwbGF5XCIpLGlhKFthXSkpKSwoXCJpbmxpbmVcIj09PWt8fFwiaW5saW5lLWJsb2NrXCI9PT1rJiZudWxsIT1qKSYmXCJub25lXCI9PT1yLmNzcyhhLFwiZmxvYXRcIikmJihpfHwobS5kb25lKGZ1bmN0aW9uKCl7by5kaXNwbGF5PWp9KSxudWxsPT1qJiYoaz1vLmRpc3BsYXksaj1cIm5vbmVcIj09PWs/XCJcIjprKSksby5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz1cImhpZGRlblwiLG0uYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKSxpPSExO2ZvcihkIGluIG4paXx8KHE/XCJoaWRkZW5cImluIHEmJihwPXEuaGlkZGVuKTpxPVcuYWNjZXNzKGEsXCJmeHNob3dcIix7ZGlzcGxheTpqfSksZiYmKHEuaGlkZGVuPSFwKSxwJiZpYShbYV0sITApLG0uZG9uZShmdW5jdGlvbigpe3B8fGlhKFthXSksVy5yZW1vdmUoYSxcImZ4c2hvd1wiKTtmb3IoZCBpbiBuKXIuc3R5bGUoYSxkLG5bZF0pfSkpLGk9aGIocD9xW2RdOjAsZCxtKSxkIGluIHF8fChxW2RdPWkuc3RhcnQscCYmKGkuZW5kPWkuc3RhcnQsaS5zdGFydD0wKSl9fWZ1bmN0aW9uIGpiKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9ci5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxBcnJheS5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1yLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24ga2IoYSxiLGMpe3ZhciBkLGUsZj0wLGc9a2IucHJlZmlsdGVycy5sZW5ndGgsaD1yLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1hYnx8ZmIoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7ZzxpO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLGY8MSYmaT9jOihpfHxoLm5vdGlmeVdpdGgoYSxbaiwxLDBdKSxoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6ci5leHRlbmQoe30sYiksb3B0czpyLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6ci5lYXNpbmcuX2RlZmF1bHR9LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTphYnx8ZmIoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPXIuVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7YzxkO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/KGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbaixiXSkpOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoamIoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7ZjxnO2YrKylpZihkPWtiLnByZWZpbHRlcnNbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiByLmlzRnVuY3Rpb24oZC5zdG9wKSYmKHIuX3F1ZXVlSG9va3Moai5lbGVtLGoub3B0cy5xdWV1ZSkuc3RvcD1yLnByb3h5KGQuc3RvcCxkKSksZDtyZXR1cm4gci5tYXAoayxoYixqKSxyLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKSxyLmZ4LnRpbWVyKHIuZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGp9ci5BbmltYXRpb249ci5leHRlbmQoa2Ise3R3ZWVuZXJzOntcIipcIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYik7cmV0dXJuIGZhKGMuZWxlbSxhLGJhLmV4ZWMoYiksYyksY31dfSx0d2VlbmVyOmZ1bmN0aW9uKGEsYil7ci5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bXCIqXCJdKTphPWEubWF0Y2goTCk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspYz1hW2RdLGtiLnR3ZWVuZXJzW2NdPWtiLnR3ZWVuZXJzW2NdfHxbXSxrYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltpYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9rYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6a2IucHJlZmlsdGVycy5wdXNoKGEpfX0pLHIuc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJlwib2JqZWN0XCI9PXR5cGVvZiBhP3IuZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8ci5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFyLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiByLmZ4Lm9mZj9kLmR1cmF0aW9uPTA6XCJudW1iZXJcIiE9dHlwZW9mIGQuZHVyYXRpb24mJihkLmR1cmF0aW9uIGluIHIuZnguc3BlZWRzP2QuZHVyYXRpb249ci5meC5zcGVlZHNbZC5kdXJhdGlvbl06ZC5kdXJhdGlvbj1yLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT1cImZ4XCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe3IuaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmci5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LHIuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKGRhKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXIuaXNFbXB0eU9iamVjdChhKSxmPXIuc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1rYih0aGlzLHIuZXh0ZW5kKHt9LGEpLGYpOyhlfHxXLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9ci50aW1lcnMsZz1XLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZkYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxyLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPVcuZ2V0KHRoaXMpLGQ9Y1thK1wicXVldWVcIl0sZT1jW2ErXCJxdWV1ZUhvb2tzXCJdLGY9ci50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLHIucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2I8ZztiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksci5lYWNoKFtcInRvZ2dsZVwiLFwic2hvd1wiLFwiaGlkZVwiXSxmdW5jdGlvbihhLGIpe3ZhciBjPXIuZm5bYl07ci5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fFwiYm9vbGVhblwiPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoZ2IoYiwhMCksYSxkLGUpfX0pLHIuZWFjaCh7c2xpZGVEb3duOmdiKFwic2hvd1wiKSxzbGlkZVVwOmdiKFwiaGlkZVwiKSxzbGlkZVRvZ2dsZTpnYihcInRvZ2dsZVwiKSxmYWRlSW46e29wYWNpdHk6XCJzaG93XCJ9LGZhZGVPdXQ6e29wYWNpdHk6XCJoaWRlXCJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6XCJ0b2dnbGVcIn19LGZ1bmN0aW9uKGEsYil7ci5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxyLnRpbWVycz1bXSxyLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1yLnRpbWVycztmb3IoYWI9ci5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxyLmZ4LnN0b3AoKSxhYj12b2lkIDB9LHIuZngudGltZXI9ZnVuY3Rpb24oYSl7ci50aW1lcnMucHVzaChhKSxyLmZ4LnN0YXJ0KCl9LHIuZnguaW50ZXJ2YWw9MTMsci5meC5zdGFydD1mdW5jdGlvbigpe2JifHwoYmI9ITAsZWIoKSl9LHIuZnguc3RvcD1mdW5jdGlvbigpe2JiPW51bGx9LHIuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHIuZm4uZGVsYXk9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYj1yLmZ4P3IuZnguc3BlZWRzW2JdfHxiOmIsYz1jfHxcImZ4XCIsdGhpcy5xdWV1ZShjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9YS5zZXRUaW1lb3V0KGMsYik7ZC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhclRpbWVvdXQoZSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1kLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixvLmNoZWNrT249XCJcIiE9PWEudmFsdWUsby5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS52YWx1ZT1cInRcIixhLnR5cGU9XCJyYWRpb1wiLG8ucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIGxiLG1iPXIuZXhwci5hdHRySGFuZGxlO3IuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFQodGhpcyxyLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3IucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksci5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9sYjp2b2lkIDApKSx2b2lkIDAhPT1jP251bGw9PT1jP3ZvaWQgci5yZW1vdmVBdHRyKGEsYik6ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjK1wiXCIpLGMpOmUmJlwiZ2V0XCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDooZD1yLmZpbmQuYXR0cihhLGIpLFxubnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFvLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJkIoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9YiYmYi5tYXRjaChMKTtpZihlJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWVbZCsrXSlhLnJlbW92ZUF0dHJpYnV0ZShjKX19KSxsYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP3IucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LHIuZWFjaChyLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz1tYltiXXx8ci5maW5kLmF0dHI7bWJbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsZz1iLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGR8fChmPW1iW2ddLG1iW2ddPWUsZT1udWxsIT1jKGEsYixkKT9nOm51bGwsbWJbZ109ZiksZX19KTt2YXIgbmI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxvYj0vXig/OmF8YXJlYSkkL2k7ci5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLHIucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbci5wcm9wRml4W2FdfHxhXX0pfX0pLHIuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiAxPT09ZiYmci5pc1hNTERvYyhhKXx8KGI9ci5wcm9wRml4W2JdfHxiLGU9ci5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLFwidGFiaW5kZXhcIik7cmV0dXJuIGI/cGFyc2VJbnQoYiwxMCk6bmIudGVzdChhLm5vZGVOYW1lKXx8b2IudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn19KSxvLm9wdFNlbGVjdGVkfHwoci5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLHIuZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXtyLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gcGIoYSl7dmFyIGI9YS5tYXRjaChMKXx8W107cmV0dXJuIGIuam9pbihcIiBcIil9ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwifXIuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHFiKHRoaXMpKSl9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEwpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPXFiKGMpLGQ9MT09PWMubm9kZVR5cGUmJlwiIFwiK3BiKGUpK1wiIFwiKXtnPTA7d2hpbGUoZj1iW2crK10pZC5pbmRleE9mKFwiIFwiK2YrXCIgXCIpPDAmJihkKz1mK1wiIFwiKTtoPXBiKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLHFiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKFwiY2xhc3NcIixcIlwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEwpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPXFiKGMpLGQ9MT09PWMubm9kZVR5cGUmJlwiIFwiK3BiKGUpK1wiIFwiKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2YrXCIgXCIpPi0xKWQ9ZC5yZXBsYWNlKFwiIFwiK2YrXCIgXCIsXCIgXCIpO2g9cGIoZCksZSE9PWgmJmMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiZcInN0cmluZ1wiPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTpyLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3IodGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyxxYih0aGlzKSxiKSxiKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGQsZSxmO2lmKFwic3RyaW5nXCI9PT1jKXtkPTAsZT1yKHRoaXMpLGY9YS5tYXRjaChMKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiZcImJvb2xlYW5cIiE9PWN8fChiPXFiKHRoaXMpLGImJlcuc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsYiksdGhpcy5zZXRBdHRyaWJ1dGUmJnRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixifHxhPT09ITE/XCJcIjpXLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9XCIgXCIrYStcIiBcIjt3aGlsZShjPXRoaXNbZCsrXSlpZigxPT09Yy5ub2RlVHlwZSYmKFwiIFwiK3BiKHFiKGMpKStcIiBcIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgcmI9L1xcci9nO3IuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1yLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMscih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOkFycmF5LmlzQXJyYXkoZSkmJihlPXIubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1yLnZhbEhvb2tzW3RoaXMudHlwZV18fHIudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9ci52YWxIb29rc1tlLnR5cGVdfHxyLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShyYixcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLHIuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ci5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6cGIoci50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPWEub3B0aW9ucyxmPWEuc2VsZWN0ZWRJbmRleCxnPVwic2VsZWN0LW9uZVwiPT09YS50eXBlLGg9Zz9udWxsOltdLGk9Zz9mKzE6ZS5sZW5ndGg7Zm9yKGQ9ZjwwP2k6Zz9mOjA7ZDxpO2QrKylpZihjPWVbZF0sKGMuc2VsZWN0ZWR8fGQ9PT1mKSYmIWMuZGlzYWJsZWQmJighYy5wYXJlbnROb2RlLmRpc2FibGVkfHwhQihjLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKGI9cihjKS52YWwoKSxnKXJldHVybiBiO2gucHVzaChiKX1yZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPXIubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1yLmluQXJyYXkoci52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPi0xKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksci5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe3IudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe2lmKEFycmF5LmlzQXJyYXkoYikpcmV0dXJuIGEuY2hlY2tlZD1yLmluQXJyYXkocihhKS52YWwoKSxiKT4tMX19LG8uY2hlY2tPbnx8KHIudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6YS52YWx1ZX0pfSk7dmFyIHNiPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLztyLmV4dGVuZChyLmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKGIsYyxlLGYpe3ZhciBnLGgsaSxqLGssbSxuLG89W2V8fGRdLHA9bC5jYWxsKGIsXCJ0eXBlXCIpP2IudHlwZTpiLHE9bC5jYWxsKGIsXCJuYW1lc3BhY2VcIik/Yi5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKGg9aT1lPWV8fGQsMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiYhc2IudGVzdChwK3IuZXZlbnQudHJpZ2dlcmVkKSYmKHAuaW5kZXhPZihcIi5cIik+LTEmJihxPXAuc3BsaXQoXCIuXCIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxrPXAuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3AsYj1iW3IuZXhwYW5kb10/YjpuZXcgci5FdmVudChwLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1mPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oXCIuXCIpLGIucm5hbWVzcGFjZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcS5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOnIubWFrZUFycmF5KGMsW2JdKSxuPXIuZXZlbnQuc3BlY2lhbFtwXXx8e30sZnx8IW4udHJpZ2dlcnx8bi50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbi5ub0J1YmJsZSYmIXIuaXNXaW5kb3coZSkpe2ZvcihqPW4uZGVsZWdhdGVUeXBlfHxwLHNiLnRlc3QoaitwKXx8KGg9aC5wYXJlbnROb2RlKTtoO2g9aC5wYXJlbnROb2RlKW8ucHVzaChoKSxpPWg7aT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZvLnB1c2goaS5kZWZhdWx0Vmlld3x8aS5wYXJlbnRXaW5kb3d8fGEpfWc9MDt3aGlsZSgoaD1vW2crK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1nPjE/ajpuLmJpbmRUeXBlfHxwLG09KFcuZ2V0KGgsXCJldmVudHNcIil8fHt9KVtiLnR5cGVdJiZXLmdldChoLFwiaGFuZGxlXCIpLG0mJm0uYXBwbHkoaCxjKSxtPWsmJmhba10sbSYmbS5hcHBseSYmVShoKSYmKGIucmVzdWx0PW0uYXBwbHkoaCxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cCxmfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxuLl9kZWZhdWx0JiZuLl9kZWZhdWx0LmFwcGx5KG8ucG9wKCksYykhPT0hMXx8IVUoZSl8fGsmJnIuaXNGdW5jdGlvbihlW3BdKSYmIXIuaXNXaW5kb3coZSkmJihpPWVba10saSYmKGVba109bnVsbCksci5ldmVudC50cmlnZ2VyZWQ9cCxlW3BdKCksci5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGkmJihlW2tdPWkpKSxiLnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1yLmV4dGVuZChuZXcgci5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITB9KTtyLmV2ZW50LnRyaWdnZXIoZCxudWxsLGIpfX0pLHIuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO2lmKGMpcmV0dXJuIHIuZXZlbnQudHJpZ2dlcihhLGIsYywhMCl9fSksci5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe3IuZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLHIuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxvLmZvY3VzaW49XCJvbmZvY3VzaW5cImluIGEsby5mb2N1c2lufHxyLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3IuZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxyLmV2ZW50LmZpeChhKSl9O3IuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1XLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLFcuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vy5hY2Nlc3MoZCxiKS0xO2U/Vy5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxXLnJlbW92ZShkLGIpKX19fSk7dmFyIHRiPWEubG9jYXRpb24sdWI9ci5ub3coKSx2Yj0vXFw/LztyLnBhcnNlWE1MPWZ1bmN0aW9uKGIpe3ZhciBjO2lmKCFifHxcInN0cmluZ1wiIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYixcInRleHQveG1sXCIpfWNhdGNoKGQpe2M9dm9pZCAwfXJldHVybiBjJiYhYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aHx8ci5lcnJvcihcIkludmFsaWQgWE1MOiBcIitiKSxjfTt2YXIgd2I9L1xcW1xcXSQvLHhiPS9cXHI/XFxuL2cseWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHpiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBBYihhLGIsYyxkKXt2YXIgZTtpZihBcnJheS5pc0FycmF5KGIpKXIuZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8d2IudGVzdChhKT9kKGEsZSk6QWIoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPWU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1yLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilBYihhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfXIucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmlzRnVuY3Rpb24oYik/YigpOmI7ZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChudWxsPT1jP1wiXCI6Yyl9O2lmKEFycmF5LmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhci5pc1BsYWluT2JqZWN0KGEpKXIuZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQWIoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbihcIiZcIil9LHIuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gci5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXIucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGE/ci5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhcih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmemIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXliLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFqYS50ZXN0KGEpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBjPXIodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PWM/bnVsbDpBcnJheS5pc0FycmF5KGMpP3IubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh4YixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHhiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pO3ZhciBCYj0vJTIwL2csQ2I9LyMuKiQvLERiPS8oWz8mXSlfPVteJl0qLyxFYj0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLEZiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEdiPS9eKD86R0VUfEhFQUQpJC8sSGI9L15cXC9cXC8vLEliPXt9LEpiPXt9LEtiPVwiKi9cIi5jb25jYXQoXCIqXCIpLExiPWQuY3JlYXRlRWxlbWVudChcImFcIik7TGIuaHJlZj10Yi5ocmVmO2Z1bmN0aW9uIE1iKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8W107aWYoci5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIE5iKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PUpiO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsci5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gT2IoYSxiKXt2YXIgYyxkLGU9ci5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmci5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIFBiKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9aWYoZilyZXR1cm4gZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdfWZ1bmN0aW9uIFFiKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19ci5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnRiLmhyZWYsdHlwZTpcIkdFVFwiLGlzTG9jYWw6RmIudGVzdCh0Yi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6S2IsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDovXFxieG1sXFxiLyxodG1sOi9cXGJodG1sLyxqc29uOi9cXGJqc29uXFxiL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOkpTT04ucGFyc2UsXCJ0ZXh0IHhtbFwiOnIucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP09iKE9iKGEsci5hamF4U2V0dGluZ3MpLGIpOk9iKHIuYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOk1iKEliKSxhamF4VHJhbnNwb3J0Ok1iKEpiKSxhamF4OmZ1bmN0aW9uKGIsYyl7XCJvYmplY3RcIj09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1yLmFqYXhTZXR1cCh7fSxjKSxwPW8uY29udGV4dHx8byxxPW8uY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9yKHApOnIuZXZlbnQscz1yLkRlZmVycmVkKCksdD1yLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHU9by5zdGF0dXNDb2RlfHx7fSx2PXt9LHc9e30seD1cImNhbmNlbGVkXCIseT17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGspe2lmKCFoKXtoPXt9O3doaWxlKGI9RWIuZXhlYyhnKSloW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWhbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBrP2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1rJiYoYT13W2EudG9Mb3dlckNhc2UoKV09d1thLnRvTG93ZXJDYXNlKCldfHxhLHZbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09ayYmKG8ubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKGspeS5hbHdheXMoYVt5LnN0YXR1c10pO2Vsc2UgZm9yKGIgaW4gYSl1W2JdPVt1W2JdLGFbYl1dO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx4O3JldHVybiBlJiZlLmFib3J0KGIpLEEoMCxiKSx0aGlzfX07aWYocy5wcm9taXNlKHkpLG8udXJsPSgoYnx8by51cmx8fHRiLmhyZWYpK1wiXCIpLnJlcGxhY2UoSGIsdGIucHJvdG9jb2wrXCIvL1wiKSxvLnR5cGU9Yy5tZXRob2R8fGMudHlwZXx8by5tZXRob2R8fG8udHlwZSxvLmRhdGFUeXBlcz0oby5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goTCl8fFtcIlwiXSxudWxsPT1vLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudChcImFcIik7dHJ5e2ouaHJlZj1vLnVybCxqLmhyZWY9ai5ocmVmLG8uY3Jvc3NEb21haW49TGIucHJvdG9jb2wrXCIvL1wiK0xiLmhvc3QhPWoucHJvdG9jb2wrXCIvL1wiK2ouaG9zdH1jYXRjaCh6KXtvLmNyb3NzRG9tYWluPSEwfX1pZihvLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBvLmRhdGEmJihvLmRhdGE9ci5wYXJhbShvLmRhdGEsby50cmFkaXRpb25hbCkpLE5iKEliLG8sYyx5KSxrKXJldHVybiB5O2w9ci5ldmVudCYmby5nbG9iYWwsbCYmMD09PXIuYWN0aXZlKysmJnIuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxvLnR5cGU9by50eXBlLnRvVXBwZXJDYXNlKCksby5oYXNDb250ZW50PSFHYi50ZXN0KG8udHlwZSksZj1vLnVybC5yZXBsYWNlKENiLFwiXCIpLG8uaGFzQ29udGVudD9vLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJjA9PT0oby5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmKG8uZGF0YT1vLmRhdGEucmVwbGFjZShCYixcIitcIikpOihuPW8udXJsLnNsaWNlKGYubGVuZ3RoKSxvLmRhdGEmJihmKz0odmIudGVzdChmKT9cIiZcIjpcIj9cIikrby5kYXRhLGRlbGV0ZSBvLmRhdGEpLG8uY2FjaGU9PT0hMSYmKGY9Zi5yZXBsYWNlKERiLFwiJDFcIiksbj0odmIudGVzdChmKT9cIiZcIjpcIj9cIikrXCJfPVwiK3ViKysgK24pLG8udXJsPWYrbiksby5pZk1vZGlmaWVkJiYoci5sYXN0TW9kaWZpZWRbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsci5sYXN0TW9kaWZpZWRbZl0pLHIuZXRhZ1tmXSYmeS5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLHIuZXRhZ1tmXSkpLChvLmRhdGEmJm8uaGFzQ29udGVudCYmby5jb250ZW50VHlwZSE9PSExfHxjLmNvbnRlbnRUeXBlKSYmeS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsby5jb250ZW50VHlwZSkseS5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsby5kYXRhVHlwZXNbMF0mJm8uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0/by5hY2NlcHRzW28uZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1vLmRhdGFUeXBlc1swXT9cIiwgXCIrS2IrXCI7IHE9MC4wMVwiOlwiXCIpOm8uYWNjZXB0c1tcIipcIl0pO2ZvcihtIGluIG8uaGVhZGVycyl5LnNldFJlcXVlc3RIZWFkZXIobSxvLmhlYWRlcnNbbV0pO2lmKG8uYmVmb3JlU2VuZCYmKG8uYmVmb3JlU2VuZC5jYWxsKHAseSxvKT09PSExfHxrKSlyZXR1cm4geS5hYm9ydCgpO2lmKHg9XCJhYm9ydFwiLHQuYWRkKG8uY29tcGxldGUpLHkuZG9uZShvLnN1Y2Nlc3MpLHkuZmFpbChvLmVycm9yKSxlPU5iKEpiLG8sYyx5KSl7aWYoeS5yZWFkeVN0YXRlPTEsbCYmcS50cmlnZ2VyKFwiYWpheFNlbmRcIixbeSxvXSksaylyZXR1cm4geTtvLmFzeW5jJiZvLnRpbWVvdXQ+MCYmKGk9YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eS5hYm9ydChcInRpbWVvdXRcIil9LG8udGltZW91dCkpO3RyeXtrPSExLGUuc2VuZCh2LEEpfWNhdGNoKHope2lmKGspdGhyb3cgejtBKC0xLHopfX1lbHNlIEEoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24gQShiLGMsZCxoKXt2YXIgaixtLG4sdix3LHg9YztrfHwoaz0hMCxpJiZhLmNsZWFyVGltZW91dChpKSxlPXZvaWQgMCxnPWh8fFwiXCIseS5yZWFkeVN0YXRlPWI+MD80OjAsaj1iPj0yMDAmJmI8MzAwfHwzMDQ9PT1iLGQmJih2PVBiKG8seSxkKSksdj1RYihvLHYseSxqKSxqPyhvLmlmTW9kaWZpZWQmJih3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLHcmJihyLmxhc3RNb2RpZmllZFtmXT13KSx3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLHcmJihyLmV0YWdbZl09dykpLDIwND09PWJ8fFwiSEVBRFwiPT09by50eXBlP3g9XCJub2NvbnRlbnRcIjozMDQ9PT1iP3g9XCJub3Rtb2RpZmllZFwiOih4PXYuc3RhdGUsbT12LmRhdGEsbj12LmVycm9yLGo9IW4pKToobj14LCFiJiZ4fHwoeD1cImVycm9yXCIsYjwwJiYoYj0wKSkpLHkuc3RhdHVzPWIseS5zdGF0dXNUZXh0PShjfHx4KStcIlwiLGo/cy5yZXNvbHZlV2l0aChwLFttLHgseV0pOnMucmVqZWN0V2l0aChwLFt5LHgsbl0pLHkuc3RhdHVzQ29kZSh1KSx1PXZvaWQgMCxsJiZxLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbeSxvLGo/bTpuXSksdC5maXJlV2l0aChwLFt5LHhdKSxsJiYocS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3ksb10pLC0tci5hY3RpdmV8fHIuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHl9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiByLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiByLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLHIuZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtyW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiByLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxyLmFqYXgoci5leHRlbmQoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9LHIuaXNQbGFpbk9iamVjdChhKSYmYSkpfX0pLHIuX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuYWpheCh7dXJsOmEsdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwic2NyaXB0XCIsY2FjaGU6ITAsYXN5bmM6ITEsZ2xvYmFsOiExLFwidGhyb3dzXCI6ITB9KX0sci5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIHRoaXNbMF0mJihyLmlzRnVuY3Rpb24oYSkmJihhPWEuY2FsbCh0aGlzWzBdKSksYj1yKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZiLmluc2VydEJlZm9yZSh0aGlzWzBdKSxiLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXM7d2hpbGUoYS5maXJzdEVsZW1lbnRDaGlsZClhPWEuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcykpLHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gci5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtyKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1yKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPXIuaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3IodGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wYXJlbnQoYSkubm90KFwiYm9keVwiKS5lYWNoKGZ1bmN0aW9uKCl7cih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxyLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIXIuZXhwci5wc2V1ZG9zLnZpc2libGUoYSl9LHIuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxyLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBSYj17MDoyMDAsMTIyMzoyMDR9LFNiPXIuYWpheFNldHRpbmdzLnhocigpO28uY29ycz0hIVNiJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gU2Isby5hamF4PVNiPSEhU2Isci5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe3ZhciBjLGQ7aWYoby5jb3JzfHxTYiYmIWIuY3Jvc3NEb21haW4pcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPWIueGhyKCk7aWYoaC5vcGVuKGIudHlwZSxiLnVybCxiLmFzeW5jLGIudXNlcm5hbWUsYi5wYXNzd29yZCksYi54aHJGaWVsZHMpZm9yKGcgaW4gYi54aHJGaWVsZHMpaFtnXT1iLnhockZpZWxkc1tnXTtiLm1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZShiLm1pbWVUeXBlKSxiLmNyb3NzRG9tYWlufHxlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGVbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGcgaW4gZSloLnNldFJlcXVlc3RIZWFkZXIoZyxlW2ddKTtjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2MmJihjPWQ9aC5vbmxvYWQ9aC5vbmVycm9yPWgub25hYm9ydD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLFwiYWJvcnRcIj09PWE/aC5hYm9ydCgpOlwiZXJyb3JcIj09PWE/XCJudW1iZXJcIiE9dHlwZW9mIGguc3RhdHVzP2YoMCxcImVycm9yXCIpOmYoaC5zdGF0dXMsaC5zdGF0dXNUZXh0KTpmKFJiW2guc3RhdHVzXXx8aC5zdGF0dXMsaC5zdGF0dXNUZXh0LFwidGV4dFwiIT09KGgucmVzcG9uc2VUeXBlfHxcInRleHRcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBoLnJlc3BvbnNlVGV4dD97YmluYXJ5OmgucmVzcG9uc2V9Ont0ZXh0OmgucmVzcG9uc2VUZXh0fSxoLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxoLm9ubG9hZD1jKCksZD1oLm9uZXJyb3I9YyhcImVycm9yXCIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoXCJhYm9ydFwiKTt0cnl7aC5zZW5kKGIuaGFzQ29udGVudCYmYi5kYXRhfHxudWxsKX1jYXRjaChpKXtpZihjKXRocm93IGl9fSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fSksci5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKGEpe2EuY3Jvc3NEb21haW4mJihhLmNvbnRlbnRzLnNjcmlwdD0hMSl9KSxyLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihhKXtyZXR1cm4gci5nbG9iYWxFdmFsKGEpLGF9fX0pLHIuYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPVwiR0VUXCIpfSksci5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7aWYoYS5jcm9zc0RvbWFpbil7dmFyIGIsYztyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9cihcIjxzY3JpcHQ+XCIpLnByb3Aoe2NoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKFwibG9hZCBlcnJvclwiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZihcImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCxhLnR5cGUpfSksZC5oZWFkLmFwcGVuZENoaWxkKGJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fX0pO3ZhciBUYj1bXSxVYj0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO3IuYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPVRiLnBvcCgpfHxyLmV4cGFuZG8rXCJfXCIrdWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLHIuYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoVWIudGVzdChiLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJlViLnRlc3QoYi5kYXRhKSYmXCJkYXRhXCIpO2lmKGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdKXJldHVybiBlPWIuanNvbnBDYWxsYmFjaz1yLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShVYixcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPSh2Yi50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxyLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP3IoYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssVGIucHVzaChlKSksZyYmci5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwifSksby5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKS5ib2R5O3JldHVybiBhLmlubmVySFRNTD1cIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCIsMj09PWEuY2hpbGROb2Rlcy5sZW5ndGh9KCksci5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybltdO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKTt2YXIgZSxmLGc7cmV0dXJuIGJ8fChvLmNyZWF0ZUhUTUxEb2N1bWVudD8oYj1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSxlPWIuY3JlYXRlRWxlbWVudChcImJhc2VcIiksZS5ocmVmPWQubG9jYXRpb24uaHJlZixiLmhlYWQuYXBwZW5kQ2hpbGQoZSkpOmI9ZCksZj1DLmV4ZWMoYSksZz0hYyYmW10sZj9bYi5jcmVhdGVFbGVtZW50KGZbMV0pXTooZj1xYShbYV0sYixnKSxnJiZnLmxlbmd0aCYmcihnKS5yZW1vdmUoKSxyLm1lcmdlKFtdLGYuY2hpbGROb2RlcykpfSxyLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoXCIgXCIpO3JldHVybiBoPi0xJiYoZD1wYihhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksci5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmci5hamF4KHt1cmw6YSx0eXBlOmV8fFwiR0VUXCIsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9yKFwiPGRpdj5cIikuYXBwZW5kKHIucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sci5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksci5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ3JlcChyLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH0sci5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1yLmNzcyhhLFwicG9zaXRpb25cIiksbD1yKGEpLG09e307XCJzdGF0aWNcIj09PWsmJihhLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksaD1sLm9mZnNldCgpLGY9ci5jc3MoYSxcInRvcFwiKSxpPXIuY3NzKGEsXCJsZWZ0XCIpLGo9KFwiYWJzb2x1dGVcIj09PWt8fFwiZml4ZWRcIj09PWspJiYoZitpKS5pbmRleE9mKFwiYXV0b1wiKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksci5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLHIuZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSxcInVzaW5nXCJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sci5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQsZSxmPXRoaXNbMF07aWYoZilyZXR1cm4gZi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZD1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Zi5vd25lckRvY3VtZW50LGM9Yi5kb2N1bWVudEVsZW1lbnQsZT1iLmRlZmF1bHRWaWV3LHt0b3A6ZC50b3ArZS5wYWdlWU9mZnNldC1jLmNsaWVudFRvcCxsZWZ0OmQubGVmdCtlLnBhZ2VYT2Zmc2V0LWMuY2xpZW50TGVmdH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuXCJmaXhlZFwiPT09ci5jc3MoYyxcInBvc2l0aW9uXCIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxCKGFbMF0sXCJodG1sXCIpfHwoZD1hLm9mZnNldCgpKSxkPXt0b3A6ZC50b3Arci5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGxlZnQ6ZC5sZWZ0K3IuY3NzKGFbMF0sXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCl9KSx7dG9wOmIudG9wLWQudG9wLXIuY3NzKGMsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LXIuY3NzKGMsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGEmJlwic3RhdGljXCI9PT1yLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8cmF9KX19KSxyLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9XCJwYWdlWU9mZnNldFwiPT09YjtyLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGEpP2Y9YTo5PT09YS5ub2RlVHlwZSYmKGY9YS5kZWZhdWx0Vmlldyksdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLHIuZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2JdPVBhKG8ucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe2lmKGMpcmV0dXJuIGM9T2EoYSxiKSxNYS50ZXN0KGMpP3IoYSkucG9zaXRpb24oKVtiXStcInB4XCI6Y30pfSksci5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7ci5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe3IuZm5bZF09ZnVuY3Rpb24oZSxmKXt2YXIgZz1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBlKSxoPWN8fChlPT09ITB8fGY9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYixjLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGIpPzA9PT1kLmluZGV4T2YoXCJvdXRlclwiKT9iW1wiaW5uZXJcIithXTpiLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhmPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGZbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxmW1wib2Zmc2V0XCIrYV0sZltcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZT9yLmNzcyhiLGMsaCk6ci5zdHlsZShiLGMsZSxoKX0sYixnP2U6dm9pZCAwLGcpfX0pfSksci5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX19KSxyLmhvbGRSZWFkeT1mdW5jdGlvbihhKXthP3IucmVhZHlXYWl0Kys6ci5yZWFkeSghMCl9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5LHIucGFyc2VKU09OPUpTT04ucGFyc2Usci5ub2RlTmFtZT1CLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwianF1ZXJ5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gcn0pO3ZhciBWYj1hLmpRdWVyeSxXYj1hLiQ7cmV0dXJuIHIubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09ciYmKGEuJD1XYiksYiYmYS5qUXVlcnk9PT1yJiYoYS5qUXVlcnk9VmIpLHJ9LGJ8fChhLmpRdWVyeT1hLiQ9cikscn0pO1xuIiwidmFyICQgPSByZXF1aXJlKCcuL2pxdWVyeS0zLjIuMS5taW4uanMnKTtcbi8qIWpRdWVyeSBLbm9iKi9cbi8qKlxuICogRG93bndhcmQgY29tcGF0aWJsZSwgdG91Y2hhYmxlIGRpYWxcbiAqXG4gKiBWZXJzaW9uOiAxLjIuMTJcbiAqIFJlcXVpcmVzOiBqUXVlcnkgdjEuNytcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgQW50aG9ueSBUZXJyaWVuXG4gKiBVbmRlciBNSVQgTGljZW5zZSAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKlxuICogVGhhbmtzIHRvIHZvciwgZXNraW1vYmxvb2QsIHNwaWZmaXN0YW4sIEZhYnJpemlvQ1xuICovXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIENvbW1vbkpTXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL2pxdWVyeS0zLjIuMS5taW4uanMnKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG5cbiAgICAvKipcbiAgICAgKiBLb250cm9sIGxpYnJhcnlcbiAgICAgKi9cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIERlZmluaXRpb24gb2YgZ2xvYmFscyBhbmQgY29yZVxuICAgICAqL1xuICAgIHZhciBrID0ge30sIC8vIGtvbnRyb2xcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgsXG4gICAgICAgIG1pbiA9IE1hdGgubWluO1xuXG4gICAgay5jID0ge307XG4gICAgay5jLmQgPSAkKGRvY3VtZW50KTtcbiAgICBrLmMudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggLSAxO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBLb250cm9sIE9iamVjdFxuICAgICAqXG4gICAgICogRGVmaW5pdGlvbiBvZiBhbiBhYnN0cmFjdCBVSSBjb250cm9sXG4gICAgICpcbiAgICAgKiBFYWNoIGNvbmNyZXRlIGNvbXBvbmVudCBtdXN0IGNhbGwgdGhpcyBvbmUuXG4gICAgICogPGNvZGU+XG4gICAgICogay5vLmNhbGwodGhpcyk7XG4gICAgICogPC9jb2RlPlxuICAgICAqL1xuICAgIGsubyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHMgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMubyA9IG51bGw7IC8vIGFycmF5IG9mIG9wdGlvbnNcbiAgICAgICAgdGhpcy4kID0gbnVsbDsgLy8galF1ZXJ5IHdyYXBwZWQgZWxlbWVudFxuICAgICAgICB0aGlzLmkgPSBudWxsOyAvLyBtaXhlZCBIVE1MSW5wdXRFbGVtZW50IG9yIGFycmF5IG9mIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgdGhpcy5nID0gbnVsbDsgLy8gZGVwcmVjYXRlZCAyRCBncmFwaGljcyBjb250ZXh0IGZvciAncHJlLXJlbmRlcmluZydcbiAgICAgICAgdGhpcy52ID0gbnVsbDsgLy8gdmFsdWUgOyBtaXhlZCBhcnJheSBvciBpbnRlZ2VyXG4gICAgICAgIHRoaXMuY3YgPSBudWxsOyAvLyBjaGFuZ2UgdmFsdWUgOyBub3QgY29tbWl0ZWQgdmFsdWVcbiAgICAgICAgdGhpcy54ID0gMDsgLy8gY2FudmFzIHggcG9zaXRpb25cbiAgICAgICAgdGhpcy55ID0gMDsgLy8gY2FudmFzIHkgcG9zaXRpb25cbiAgICAgICAgdGhpcy53ID0gMDsgLy8gY2FudmFzIHdpZHRoXG4gICAgICAgIHRoaXMuaCA9IDA7IC8vIGNhbnZhcyBoZWlnaHRcbiAgICAgICAgdGhpcy4kYyA9IG51bGw7IC8vIGpRdWVyeSBjYW52YXMgZWxlbWVudFxuICAgICAgICB0aGlzLmMgPSBudWxsOyAvLyByZW5kZXJlZCBjYW52YXMgY29udGV4dFxuICAgICAgICB0aGlzLnQgPSAwOyAvLyB0b3VjaGVzIGluZGV4XG4gICAgICAgIHRoaXMuaXNJbml0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZmdDb2xvciA9IG51bGw7IC8vIG1haW4gY29sb3JcbiAgICAgICAgdGhpcy5wQ29sb3IgPSBudWxsOyAvLyBwcmV2aW91cyBjb2xvclxuICAgICAgICB0aGlzLmRIID0gbnVsbDsgLy8gZHJhdyBob29rXG4gICAgICAgIHRoaXMuY0ggPSBudWxsOyAvLyBjaGFuZ2UgaG9va1xuICAgICAgICB0aGlzLmVIID0gbnVsbDsgLy8gY2FuY2VsIGhvb2tcbiAgICAgICAgdGhpcy5ySCA9IG51bGw7IC8vIHJlbGVhc2UgaG9va1xuICAgICAgICB0aGlzLnNjYWxlID0gMTsgLy8gc2NhbGUgZmFjdG9yXG4gICAgICAgIHRoaXMucmVsYXRpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWxhdGl2ZVdpZHRoID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVsYXRpdmVIZWlnaHQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kZGl2ID0gbnVsbDsgLy8gY29tcG9uZW50IGRpdlxuXG4gICAgICAgIHRoaXMucnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNmID0gZnVuY3Rpb24gKGUsIGNvbmYpIHtcbiAgICAgICAgICAgICAgICB2YXIgaztcbiAgICAgICAgICAgICAgICBmb3IgKGsgaW4gY29uZikge1xuICAgICAgICAgICAgICAgICAgICBzLm9ba10gPSBjb25mW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzLl9jYXJ2ZSgpLmluaXQoKTtcbiAgICAgICAgICAgICAgICBzLl9jb25maWd1cmUoKVxuICAgICAgICAgICAgICAgICAuX2RyYXcoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiQuZGF0YSgna29udHJvbGVkJykpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuJC5kYXRhKCdrb250cm9sZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5leHRlbmQoKTtcbiAgICAgICAgICAgIHRoaXMubyA9ICQuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uZmlnXG4gICAgICAgICAgICAgICAgICAgIG1pbjogdGhpcy4kLmRhdGEoJ21pbicpICE9PSB1bmRlZmluZWQgPyB0aGlzLiQuZGF0YSgnbWluJykgOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IHRoaXMuJC5kYXRhKCdtYXgnKSAhPT0gdW5kZWZpbmVkID8gdGhpcy4kLmRhdGEoJ21heCcpIDogMTAwLFxuICAgICAgICAgICAgICAgICAgICBzdG9wcGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdGhpcy4kLmRhdGEoJ3JlYWRvbmx5JykgfHwgKHRoaXMuJC5hdHRyKCdyZWFkb25seScpID09PSAncmVhZG9ubHknKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBVSVxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHRoaXMuJC5kYXRhKCdjdXJzb3InKSA9PT0gdHJ1ZSAmJiAzMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IHRoaXMuJC5kYXRhKCdjdXJzb3InKSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICB0aGlja25lc3M6IHRoaXMuJC5kYXRhKCd0aGlja25lc3MnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIE1hdGgubWF4KE1hdGgubWluKHRoaXMuJC5kYXRhKCd0aGlja25lc3MnKSwgMSksIDAuMDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgMC4zNSxcbiAgICAgICAgICAgICAgICAgICAgbGluZUNhcDogdGhpcy4kLmRhdGEoJ2xpbmVjYXAnKSB8fCAnYnV0dCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLiQuZGF0YSgnd2lkdGgnKSB8fCAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy4kLmRhdGEoJ2hlaWdodCcpIHx8IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUlucHV0OiB0aGlzLiQuZGF0YSgnZGlzcGxheWlucHV0JykgPT0gbnVsbCB8fCB0aGlzLiQuZGF0YSgnZGlzcGxheWlucHV0JyksXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlQcmV2aW91czogdGhpcy4kLmRhdGEoJ2Rpc3BsYXlwcmV2aW91cycpLFxuICAgICAgICAgICAgICAgICAgICBmZ0NvbG9yOiB0aGlzLiQuZGF0YSgnZmdjb2xvcicpIHx8ICcjODdDRUVCJyxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRDb2xvcjogdGhpcy4kLmRhdGEoJ2lucHV0Y29sb3InKSxcbiAgICAgICAgICAgICAgICAgICAgZm9udDogdGhpcy4kLmRhdGEoJ2ZvbnQnKSB8fCAnQXJpYWwnLFxuICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiB0aGlzLiQuZGF0YSgnZm9udC13ZWlnaHQnKSB8fCAnYm9sZCcsXG4gICAgICAgICAgICAgICAgICAgIGlubGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHN0ZXA6IHRoaXMuJC5kYXRhKCdzdGVwJykgfHwgMSxcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IHRoaXMuJC5kYXRhKCdyb3RhdGlvbicpLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEhvb2tzXG4gICAgICAgICAgICAgICAgICAgIGRyYXc6IG51bGwsIC8vIGZ1bmN0aW9uICgpIHt9XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogbnVsbCwgLy8gZnVuY3Rpb24gKHZhbHVlKSB7fVxuICAgICAgICAgICAgICAgICAgICBjYW5jZWw6IG51bGwsIC8vIGZ1bmN0aW9uICgpIHt9XG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2U6IG51bGwsIC8vIGZ1bmN0aW9uICh2YWx1ZSkge31cblxuICAgICAgICAgICAgICAgICAgICAvLyBPdXRwdXQgZm9ybWF0dGluZywgYWxsb3dzIHRvIGFkZCB1bml0OiAlLCBtcyAuLi5cbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHRoaXMub1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gZmluYWxpemUgb3B0aW9uc1xuICAgICAgICAgICAgdGhpcy5vLmZsaXAgPSB0aGlzLm8ucm90YXRpb24gPT09ICdhbnRpY2xvY2t3aXNlJyB8fCB0aGlzLm8ucm90YXRpb24gPT09ICdhY3cnO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm8uaW5wdXRDb2xvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuby5pbnB1dENvbG9yID0gdGhpcy5vLmZnQ29sb3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJvdXRpbmcgdmFsdWVcbiAgICAgICAgICAgIGlmICh0aGlzLiQuaXMoJ2ZpZWxkc2V0JykpIHtcblxuICAgICAgICAgICAgICAgIC8vIGZpZWxkc2V0ID0gYXJyYXkgb2YgaW50ZWdlclxuICAgICAgICAgICAgICAgIHRoaXMudiA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuaSA9IHRoaXMuJC5maW5kKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuaS5lYWNoKGZ1bmN0aW9uKGspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgcy5pW2tdID0gJHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIHMudltrXSA9IHMuby5wYXJzZSgkdGhpcy52YWwoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgICdjaGFuZ2UgYmx1cicsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbFtrXSA9ICR0aGlzLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsKHMuX3ZhbGlkYXRlKHZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuJC5maW5kKCdsZWdlbmQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAvLyBpbnB1dCA9IGludGVnZXJcbiAgICAgICAgICAgICAgICB0aGlzLmkgPSB0aGlzLiQ7XG4gICAgICAgICAgICAgICAgdGhpcy52ID0gdGhpcy5vLnBhcnNlKHRoaXMuJC52YWwoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy52ID09PSAnJyAmJiAodGhpcy52ID0gdGhpcy5vLm1pbik7XG4gICAgICAgICAgICAgICAgdGhpcy4kLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICdjaGFuZ2UgYmx1cicsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsKHMuX3ZhbGlkYXRlKHMuby5wYXJzZShzLiQudmFsKCkpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICF0aGlzLm8uZGlzcGxheUlucHV0ICYmIHRoaXMuJC5oaWRlKCk7XG5cbiAgICAgICAgICAgIC8vIGFkZHMgbmVlZGVkIERPTSBlbGVtZW50cyAoY2FudmFzLCBkaXYpXG4gICAgICAgICAgICB0aGlzLiRjID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSkuYXR0cih7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuby53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuby5oZWlnaHRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyB3cmFwcyBhbGwgZWxlbWVudHMgaW4gYSBkaXZcbiAgICAgICAgICAgIC8vIGFkZCB0byBET00gYmVmb3JlIENhbnZhcyBpbml0IGlzIHRyaWdnZXJlZFxuICAgICAgICAgICAgdGhpcy4kZGl2ID0gJCgnPGRpdiBzdHlsZT1cIidcbiAgICAgICAgICAgICAgICArICh0aGlzLm8uaW5saW5lID8gJ2Rpc3BsYXk6aW5saW5lOycgOiAnJylcbiAgICAgICAgICAgICAgICArICd3aWR0aDonICsgdGhpcy5vLndpZHRoICsgJ3B4O2hlaWdodDonICsgdGhpcy5vLmhlaWdodCArICdweDsnXG4gICAgICAgICAgICAgICAgKyAnXCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgICAgIHRoaXMuJC53cmFwKHRoaXMuJGRpdikuYmVmb3JlKHRoaXMuJGMpO1xuICAgICAgICAgICAgdGhpcy4kZGl2ID0gdGhpcy4kLnBhcmVudCgpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIEdfdm1sQ2FudmFzTWFuYWdlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBHX3ZtbENhbnZhc01hbmFnZXIuaW5pdEVsZW1lbnQodGhpcy4kY1swXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYyA9IHRoaXMuJGNbMF0uZ2V0Q29udGV4dCA/IHRoaXMuJGNbMF0uZ2V0Q29udGV4dCgnMmQnKSA6IG51bGw7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAgICAgICAgXCJDYW52YXNOb3RTdXBwb3J0ZWRFeGNlcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogICAgIFwiQ2FudmFzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgZXhjYW52YXMgb24gSUU4LjAuXCIsXG4gICAgICAgICAgICAgICAgICAgIHRvU3RyaW5nOiAgICBmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUgKyBcIjogXCIgKyB0aGlzLm1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBoZHBpIHN1cHBvcnRcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSAod2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSkgLyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jLndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYy5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMuYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gZGV0ZWN0cyByZWxhdGl2ZSB3aWR0aCAvIGhlaWdodFxuICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZVdpZHRoID0gIHRoaXMuby53aWR0aCAlIDEgIT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLm8ud2lkdGguaW5kZXhPZignJScpO1xuICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZUhlaWdodCA9IHRoaXMuby5oZWlnaHQgJSAxICE9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5vLmhlaWdodC5pbmRleE9mKCclJyk7XG4gICAgICAgICAgICB0aGlzLnJlbGF0aXZlID0gdGhpcy5yZWxhdGl2ZVdpZHRoIHx8IHRoaXMucmVsYXRpdmVIZWlnaHQ7XG5cbiAgICAgICAgICAgIC8vIGNvbXB1dGVzIHNpemUgYW5kIGNhcnZlcyB0aGUgY29tcG9uZW50XG4gICAgICAgICAgICB0aGlzLl9jYXJ2ZSgpO1xuXG4gICAgICAgICAgICAvLyBwcmVwYXJlcyBwcm9wcyBmb3IgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIGlmICh0aGlzLnYgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN2ID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5KHRoaXMudiwgdGhpcy5jdik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3YgPSB0aGlzLnY7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJpbmRzIGNvbmZpZ3VyZSBldmVudFxuICAgICAgICAgICAgdGhpcy4kXG4gICAgICAgICAgICAgICAgLmJpbmQoXCJjb25maWd1cmVcIiwgY2YpXG4gICAgICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAgICAgLmJpbmQoXCJjb25maWd1cmVcIiwgY2YpO1xuXG4gICAgICAgICAgICAvLyBmaW5hbGl6ZSBpbml0XG4gICAgICAgICAgICB0aGlzLl9saXN0ZW4oKVxuICAgICAgICAgICAgICAgIC5fY29uZmlndXJlKClcbiAgICAgICAgICAgICAgICAuX3h5KClcbiAgICAgICAgICAgICAgICAuaW5pdCgpO1xuXG4gICAgICAgICAgICB0aGlzLmlzSW5pdCA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuJC52YWwodGhpcy5vLmZvcm1hdCh0aGlzLnYpKTtcbiAgICAgICAgICAgIHRoaXMuX2RyYXcoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fY2FydmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbGF0aXZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHcgPSB0aGlzLnJlbGF0aXZlV2lkdGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGl2LnBhcmVudCgpLndpZHRoKCkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5vLndpZHRoKSAvIDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLiRkaXYucGFyZW50KCkud2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMucmVsYXRpdmVIZWlnaHQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGl2LnBhcmVudCgpLmhlaWdodCgpICpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuby5oZWlnaHQpIC8gMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuJGRpdi5wYXJlbnQoKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIC8vIGFwcGx5IHJlbGF0aXZlXG4gICAgICAgICAgICAgICAgdGhpcy53ID0gdGhpcy5oID0gTWF0aC5taW4odywgaCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudyA9IHRoaXMuby53aWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmggPSB0aGlzLm8uaGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBmaW5hbGl6ZSBkaXZcbiAgICAgICAgICAgIHRoaXMuJGRpdi5jc3Moe1xuICAgICAgICAgICAgICAgICd3aWR0aCc6IHRoaXMudyArICdweCcsXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IHRoaXMuaCArICdweCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBmaW5hbGl6ZSBjYW52YXMgd2l0aCBjb21wdXRlZCB3aWR0aFxuICAgICAgICAgICAgdGhpcy4kYy5hdHRyKHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy53LFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5oXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gc2NhbGluZ1xuICAgICAgICAgICAgaWYgKHRoaXMuc2NhbGUgIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjWzBdLndpZHRoID0gdGhpcy4kY1swXS53aWR0aCAqIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICAgICAgdGhpcy4kY1swXS5oZWlnaHQgPSB0aGlzLiRjWzBdLmhlaWdodCAqIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICAgICAgdGhpcy4kYy53aWR0aCh0aGlzLncpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGMuaGVpZ2h0KHRoaXMuaCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2RyYXcgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIGNhbnZhcyBwcmUtcmVuZGVyaW5nXG4gICAgICAgICAgICB2YXIgZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHMuZyA9IHMuYztcblxuICAgICAgICAgICAgcy5jbGVhcigpO1xuXG4gICAgICAgICAgICBzLmRIICYmIChkID0gcy5kSCgpKTtcblxuICAgICAgICAgICAgZCAhPT0gZmFsc2UgJiYgcy5kcmF3KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fdG91Y2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRvdWNoTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBzLnh5MnZhbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1tzLnRdLnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUub3JpZ2luYWxFdmVudC50b3VjaGVzW3MudF0ucGFnZVlcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAodiA9PSBzLmN2KSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBpZiAocy5jSCAmJiBzLmNIKHYpID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgcy5jaGFuZ2Uocy5fdmFsaWRhdGUodikpO1xuICAgICAgICAgICAgICAgIHMuX2RyYXcoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGdldCB0b3VjaGVzIGluZGV4XG4gICAgICAgICAgICB0aGlzLnQgPSBrLmMudChlKTtcblxuICAgICAgICAgICAgLy8gRmlyc3QgdG91Y2hcbiAgICAgICAgICAgIHRvdWNoTW92ZShlKTtcblxuICAgICAgICAgICAgLy8gVG91Y2ggZXZlbnRzIGxpc3RlbmVyc1xuICAgICAgICAgICAgay5jLmRcbiAgICAgICAgICAgICAgICAuYmluZChcInRvdWNobW92ZS5rXCIsIHRvdWNoTW92ZSlcbiAgICAgICAgICAgICAgICAuYmluZChcbiAgICAgICAgICAgICAgICAgICAgXCJ0b3VjaGVuZC5rXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGsuYy5kLnVuYmluZCgndG91Y2htb3ZlLmsgdG91Y2hlbmQuaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcy52YWwocy5jdik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9tb3VzZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IHMueHkydmFsKGUucGFnZVgsIGUucGFnZVkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHYgPT0gcy5jdikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHMuY0ggJiYgKHMuY0godikgPT09IGZhbHNlKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgcy5jaGFuZ2Uocy5fdmFsaWRhdGUodikpO1xuICAgICAgICAgICAgICAgIHMuX2RyYXcoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEZpcnN0IGNsaWNrXG4gICAgICAgICAgICBtb3VzZU1vdmUoZSk7XG5cbiAgICAgICAgICAgIC8vIE1vdXNlIGV2ZW50cyBsaXN0ZW5lcnNcbiAgICAgICAgICAgIGsuYy5kXG4gICAgICAgICAgICAgICAgLmJpbmQoXCJtb3VzZW1vdmUua1wiLCBtb3VzZU1vdmUpXG4gICAgICAgICAgICAgICAgLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgIC8vIEVzY2FwZSBrZXkgY2FuY2VsIGN1cnJlbnQgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIFwia2V5dXAua1wiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLmMuZC51bmJpbmQoXCJtb3VzZXVwLmsgbW91c2Vtb3ZlLmsga2V5dXAua1wiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmVIICYmIHMuZUgoKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgIFwibW91c2V1cC5rXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrLmMuZC51bmJpbmQoJ21vdXNlbW92ZS5rIG1vdXNldXAuayBrZXl1cC5rJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzLnZhbChzLmN2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX3h5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLiRjLm9mZnNldCgpO1xuICAgICAgICAgICAgdGhpcy54ID0gby5sZWZ0O1xuICAgICAgICAgICAgdGhpcy55ID0gby50b3A7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2xpc3RlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY1xuICAgICAgICAgICAgICAgICAgICAuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibW91c2Vkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLl94eSgpLl9tb3VzZShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuYmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG91Y2hzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5feHkoKS5fdG91Y2goZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiQuYXR0cigncmVhZG9ubHknLCAncmVhZG9ubHknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucmVsYXRpdmUpIHtcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzLl9jYXJ2ZSgpLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgcy5fZHJhdygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9jb25maWd1cmUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIEhvb2tzXG4gICAgICAgICAgICBpZiAodGhpcy5vLmRyYXcpIHRoaXMuZEggPSB0aGlzLm8uZHJhdztcbiAgICAgICAgICAgIGlmICh0aGlzLm8uY2hhbmdlKSB0aGlzLmNIID0gdGhpcy5vLmNoYW5nZTtcbiAgICAgICAgICAgIGlmICh0aGlzLm8uY2FuY2VsKSB0aGlzLmVIID0gdGhpcy5vLmNhbmNlbDtcbiAgICAgICAgICAgIGlmICh0aGlzLm8ucmVsZWFzZSkgdGhpcy5ySCA9IHRoaXMuby5yZWxlYXNlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vLmRpc3BsYXlQcmV2aW91cykge1xuICAgICAgICAgICAgICAgIHRoaXMucENvbG9yID0gdGhpcy5oMnJnYmEodGhpcy5vLmZnQ29sb3IsIFwiMC40XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmdDb2xvciA9IHRoaXMuaDJyZ2JhKHRoaXMuby5mZ0NvbG9yLCBcIjAuNlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZ0NvbG9yID0gdGhpcy5vLmZnQ29sb3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2NsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kY1swXS53aWR0aCA9IHRoaXMuJGNbMF0ud2lkdGg7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fdmFsaWRhdGUgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgdmFyIHZhbCA9ICh+fiAoKCh2IDwgMCkgPyAtMC41IDogMC41KSArICh2L3RoaXMuby5zdGVwKSkpICogdGhpcy5vLnN0ZXA7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWwgKiAxMDApIC8gMTAwO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFic3RyYWN0IG1ldGhvZHNcbiAgICAgICAgdGhpcy5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7fTsgLy8gb24gc3RhcnQsIG9uZSB0aW1lXG4gICAgICAgIHRoaXMuZXh0ZW5kID0gZnVuY3Rpb24gKCkge307IC8vIGVhY2ggdGltZSBjb25maWd1cmUgdHJpZ2dlcmVkXG4gICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHt9OyAvLyBlYWNoIHRpbWUgY29uZmlndXJlIHRyaWdnZXJlZFxuICAgICAgICB0aGlzLmNoYW5nZSA9IGZ1bmN0aW9uICh2KSB7fTsgLy8gb24gY2hhbmdlXG4gICAgICAgIHRoaXMudmFsID0gZnVuY3Rpb24gKHYpIHt9OyAvLyBvbiByZWxlYXNlXG4gICAgICAgIHRoaXMueHkydmFsID0gZnVuY3Rpb24gKHgsIHkpIHt9OyAvL1xuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoKSB7fTsgLy8gb24gY2hhbmdlIC8gb24gcmVsZWFzZVxuICAgICAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9jbGVhcigpOyB9O1xuXG4gICAgICAgIC8vIFV0aWxzXG4gICAgICAgIHRoaXMuaDJyZ2JhID0gZnVuY3Rpb24gKGgsIGEpIHtcbiAgICAgICAgICAgIHZhciByZ2I7XG4gICAgICAgICAgICBoID0gaC5zdWJzdHJpbmcoMSw3KTtcbiAgICAgICAgICAgIHJnYiA9IFtcbiAgICAgICAgICAgICAgICBwYXJzZUludChoLnN1YnN0cmluZygwLDIpLCAxNiksXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQoaC5zdWJzdHJpbmcoMiw0KSwgMTYpLFxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGguc3Vic3RyaW5nKDQsNiksIDE2KVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgcmV0dXJuIFwicmdiYShcIiArIHJnYlswXSArIFwiLFwiICsgcmdiWzFdICsgXCIsXCIgKyByZ2JbMl0gKyBcIixcIiArIGEgKyBcIilcIjtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAoZiwgdCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBmKSB7XG4gICAgICAgICAgICAgICAgdFtpXSA9IGZbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogay5EaWFsXG4gICAgICovXG4gICAgay5EaWFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBrLm8uY2FsbCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgPSBudWxsO1xuICAgICAgICB0aGlzLnh5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSBudWxsO1xuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3Vyc29yRXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy53MiA9IG51bGw7XG4gICAgICAgIHRoaXMuUEkyID0gMipNYXRoLlBJO1xuXG4gICAgICAgIHRoaXMuZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5vID0gJC5leHRlbmQoe1xuICAgICAgICAgICAgICAgIGJnQ29sb3I6IHRoaXMuJC5kYXRhKCdiZ2NvbG9yJykgfHwgJyNFRUVFRUUnLFxuICAgICAgICAgICAgICAgIGFuZ2xlT2Zmc2V0OiB0aGlzLiQuZGF0YSgnYW5nbGVvZmZzZXQnKSB8fCAwLFxuICAgICAgICAgICAgICAgIGFuZ2xlQXJjOiB0aGlzLiQuZGF0YSgnYW5nbGVhcmMnKSB8fCAzNjAsXG4gICAgICAgICAgICAgICAgaW5saW5lOiB0cnVlXG4gICAgICAgICAgICB9LCB0aGlzLm8pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudmFsID0gZnVuY3Rpb24gKHYsIHRyaWdnZXJSZWxlYXNlKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPSB2KSB7XG5cbiAgICAgICAgICAgICAgICAvLyByZXZlcnNlIGZvcm1hdFxuICAgICAgICAgICAgICAgIHYgPSB0aGlzLm8ucGFyc2Uodik7XG5cbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlclJlbGVhc2UgIT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICYmIHYgIT0gdGhpcy52XG4gICAgICAgICAgICAgICAgICAgICYmIHRoaXMuckhcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5ySCh2KSA9PT0gZmFsc2UpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmN2ID0gdGhpcy5vLnN0b3BwZXIgPyBtYXgobWluKHYsIHRoaXMuby5tYXgpLCB0aGlzLm8ubWluKSA6IHY7XG4gICAgICAgICAgICAgICAgdGhpcy52ID0gdGhpcy5jdjtcbiAgICAgICAgICAgICAgICB0aGlzLiQudmFsKHRoaXMuby5mb3JtYXQodGhpcy52KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZHJhdygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMueHkydmFsID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgIHZhciBhLCByZXQ7XG5cbiAgICAgICAgICAgIGEgPSBNYXRoLmF0YW4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgeCAtICh0aGlzLnggKyB0aGlzLncyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gKHkgLSB0aGlzLnkgLSB0aGlzLncyKVxuICAgICAgICAgICAgICAgICAgICApIC0gdGhpcy5hbmdsZU9mZnNldDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuby5mbGlwKSB7XG4gICAgICAgICAgICAgICAgYSA9IHRoaXMuYW5nbGVBcmMgLSBhIC0gdGhpcy5QSTI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlQXJjICE9IHRoaXMuUEkyICYmIChhIDwgMCkgJiYgKGEgPiAtMC41KSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgaXNzZXQgYW5nbGVBcmMgb3B0aW9uLCBzZXQgdG8gbWluIGlmIC41IHVuZGVyIG1pblxuICAgICAgICAgICAgICAgIGEgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhIDwgMCkge1xuICAgICAgICAgICAgICAgIGEgKz0gdGhpcy5QSTI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldCA9IChhICogKHRoaXMuby5tYXggLSB0aGlzLm8ubWluKSAvIHRoaXMuYW5nbGVBcmMpICsgdGhpcy5vLm1pbjtcblxuICAgICAgICAgICAgdGhpcy5vLnN0b3BwZXIgJiYgKHJldCA9IG1heChtaW4ocmV0LCB0aGlzLm8ubWF4KSwgdGhpcy5vLm1pbikpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGlzdGVuID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvLyBiaW5kIE1vdXNlV2hlZWxcbiAgICAgICAgICAgIHZhciBzID0gdGhpcywgbXdUaW1lclN0b3AsXG4gICAgICAgICAgICAgICAgbXdUaW1lclJlbGVhc2UsXG4gICAgICAgICAgICAgICAgbXcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaSA9IGUub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhWCA9IG9yaS5kZXRhaWwgfHwgb3JpLndoZWVsRGVsdGFYLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFZID0gb3JpLmRldGFpbCB8fCBvcmkud2hlZWxEZWx0YVksXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gcy5fdmFsaWRhdGUocy5vLnBhcnNlKHMuJC52YWwoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhWCA+IDAgfHwgZGVsdGFZID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHMuby5zdGVwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGVsdGFYIDwgMCB8fCBkZWx0YVkgPCAwID8gLXMuby5zdGVwIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICB2ID0gbWF4KG1pbih2LCBzLm8ubWF4KSwgcy5vLm1pbik7XG5cbiAgICAgICAgICAgICAgICAgICAgcy52YWwodiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzLnJIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbW91c2V3aGVlbCBzdG9wXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobXdUaW1lclN0b3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXdUaW1lclN0b3AgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnJIKHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG13VGltZXJTdG9wID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBtb3VzZXdoZWVsIHJlbGVhc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW13VGltZXJSZWxlYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXdUaW1lclJlbGVhc2UgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG13VGltZXJTdG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5ySCh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXdUaW1lclJlbGVhc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGt2YWwsXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgbSA9IDEsXG4gICAgICAgICAgICAgICAga3YgPSB7XG4gICAgICAgICAgICAgICAgICAgIDM3OiAtcy5vLnN0ZXAsXG4gICAgICAgICAgICAgICAgICAgIDM4OiBzLm8uc3RlcCxcbiAgICAgICAgICAgICAgICAgICAgMzk6IHMuby5zdGVwLFxuICAgICAgICAgICAgICAgICAgICA0MDogLXMuby5zdGVwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy4kXG4gICAgICAgICAgICAgICAgLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgIFwia2V5ZG93blwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtjID0gZS5rZXlDb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBudW1wYWQgc3VwcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtjID49IDk2ICYmIGtjIDw9IDEwNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtjID0gZS5rZXlDb2RlID0ga2MgLSA0ODtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAga3ZhbCA9IHBhcnNlSW50KFN0cmluZy5mcm9tQ2hhckNvZGUoa2MpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGt2YWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGtjICE9PSAxMykgICAgICAgICAgICAgICAgICAgICAvLyBlbnRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGtjICE9PSA4ICAgICAgICAgICAgICAgICAgICAgLy8gYnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBrYyAhPT0gOSAgICAgICAgICAgICAgICAgICAgIC8vIHRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGtjICE9PSAxODkgICAgICAgICAgICAgICAgICAgLy8gLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIChrYyAhPT0gMTkwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IHMuJC52YWwoKS5tYXRjaCgvXFwuLykpICAgLy8gLiBhbGxvd2VkIG9uY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcnJvd3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGtjLFszNywzOCwzOSw0MF0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gcy5vLnBhcnNlKHMuJC52YWwoKSkgKyBrdltrY10gKiBtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm8uc3RvcHBlciAmJiAodiA9IG1heChtaW4odiwgcy5vLm1heCksIHMuby5taW4pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNoYW5nZShzLl92YWxpZGF0ZSh2KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX2RyYXcoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb25nIHRpbWUga2V5ZG93biBzcGVlZC11cFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKj0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuYmluZChcbiAgICAgICAgICAgICAgICAgICAgXCJrZXl1cFwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGt2YWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnZhbChzLiQudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ga3ZhbCBwb3N0Y29uZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLiQudmFsKCkgPiBzLm8ubWF4ICYmIHMuJC52YWwocy5vLm1heCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHMuJC52YWwoKSA8IHMuby5taW4gJiYgcy4kLnZhbChzLm8ubWluKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLiRjLmJpbmQoXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCIsIG13KTtcbiAgICAgICAgICAgIHRoaXMuJC5iaW5kKFwibW91c2V3aGVlbCBET01Nb3VzZVNjcm9sbFwiLCBtdyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudiA8IHRoaXMuby5taW5cbiAgICAgICAgICAgICAgICB8fCB0aGlzLnYgPiB0aGlzLm8ubWF4KSB7IHRoaXMudiA9IHRoaXMuby5taW47IH1cblxuICAgICAgICAgICAgdGhpcy4kLnZhbCh0aGlzLnYpO1xuICAgICAgICAgICAgdGhpcy53MiA9IHRoaXMudyAvIDI7XG4gICAgICAgICAgICB0aGlzLmN1cnNvckV4dCA9IHRoaXMuby5jdXJzb3IgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLnh5ID0gdGhpcy53MiAqIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IHRoaXMueHkgKiB0aGlzLm8udGhpY2tuZXNzO1xuICAgICAgICAgICAgdGhpcy5saW5lQ2FwID0gdGhpcy5vLmxpbmVDYXA7XG4gICAgICAgICAgICB0aGlzLnJhZGl1cyA9IHRoaXMueHkgLSB0aGlzLmxpbmVXaWR0aCAvIDI7XG5cbiAgICAgICAgICAgIHRoaXMuby5hbmdsZU9mZnNldFxuICAgICAgICAgICAgJiYgKHRoaXMuby5hbmdsZU9mZnNldCA9IGlzTmFOKHRoaXMuby5hbmdsZU9mZnNldCkgPyAwIDogdGhpcy5vLmFuZ2xlT2Zmc2V0KTtcblxuICAgICAgICAgICAgdGhpcy5vLmFuZ2xlQXJjXG4gICAgICAgICAgICAmJiAodGhpcy5vLmFuZ2xlQXJjID0gaXNOYU4odGhpcy5vLmFuZ2xlQXJjKSA/IHRoaXMuUEkyIDogdGhpcy5vLmFuZ2xlQXJjKTtcblxuICAgICAgICAgICAgLy8gZGVnIHRvIHJhZFxuICAgICAgICAgICAgdGhpcy5hbmdsZU9mZnNldCA9IHRoaXMuby5hbmdsZU9mZnNldCAqIE1hdGguUEkgLyAxODA7XG4gICAgICAgICAgICB0aGlzLmFuZ2xlQXJjID0gdGhpcy5vLmFuZ2xlQXJjICogTWF0aC5QSSAvIDE4MDtcblxuICAgICAgICAgICAgLy8gY29tcHV0ZSBzdGFydCBhbmQgZW5kIGFuZ2xlc1xuICAgICAgICAgICAgdGhpcy5zdGFydEFuZ2xlID0gMS41ICogTWF0aC5QSSArIHRoaXMuYW5nbGVPZmZzZXQ7XG4gICAgICAgICAgICB0aGlzLmVuZEFuZ2xlID0gMS41ICogTWF0aC5QSSArIHRoaXMuYW5nbGVPZmZzZXQgKyB0aGlzLmFuZ2xlQXJjO1xuXG4gICAgICAgICAgICB2YXIgcyA9IG1heChcbiAgICAgICAgICAgICAgICBTdHJpbmcoTWF0aC5hYnModGhpcy5vLm1heCkpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBTdHJpbmcoTWF0aC5hYnModGhpcy5vLm1pbikpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICApICsgMjtcblxuICAgICAgICAgICAgdGhpcy5vLmRpc3BsYXlJbnB1dFxuICAgICAgICAgICAgICAgICYmIHRoaXMuaS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICgodGhpcy53IC8gMiArIDQpID4+IDApICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogKCh0aGlzLncgLyAzKSA+PiAwKSArICdweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nIDogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd2ZXJ0aWNhbC1hbGlnbicgOiAnbWlkZGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJyA6ICgodGhpcy53IC8gMykgPj4gMCkgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi1sZWZ0JyA6ICctJyArICgodGhpcy53ICogMyAvIDQgKyAyKSA+PiAwKSArICdweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYm9yZGVyJyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCcgOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZm9udCcgOiB0aGlzLm8uZm9udFdlaWdodCArICcgJyArICgodGhpcy53IC8gcykgPj4gMCkgKyAncHggJyArIHRoaXMuby5mb250LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQtYWxpZ24nIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sb3InIDogdGhpcy5vLmlucHV0Q29sb3IgfHwgdGhpcy5vLmZnQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAncGFkZGluZycgOiAnMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LWFwcGVhcmFuY2UnOiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIHx8IHRoaXMuaS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2hhbmdlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHRoaXMuY3YgPSB2O1xuICAgICAgICAgICAgdGhpcy4kLnZhbCh0aGlzLm8uZm9ybWF0KHYpKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFuZ2xlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiAodiAtIHRoaXMuby5taW4pICogdGhpcy5hbmdsZUFyYyAvICh0aGlzLm8ubWF4IC0gdGhpcy5vLm1pbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hcmMgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgIHZhciBzYSwgZWE7XG4gICAgICAgICAgdiA9IHRoaXMuYW5nbGUodik7XG4gICAgICAgICAgaWYgKHRoaXMuby5mbGlwKSB7XG4gICAgICAgICAgICAgIHNhID0gdGhpcy5lbmRBbmdsZSArIDAuMDAwMDE7XG4gICAgICAgICAgICAgIGVhID0gc2EgLSB2IC0gMC4wMDAwMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzYSA9IHRoaXMuc3RhcnRBbmdsZSAtIDAuMDAwMDE7XG4gICAgICAgICAgICAgIGVhID0gc2EgKyB2ICsgMC4wMDAwMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5vLmN1cnNvclxuICAgICAgICAgICAgICAmJiAoc2EgPSBlYSAtIHRoaXMuY3Vyc29yRXh0KVxuICAgICAgICAgICAgICAmJiAoZWEgPSBlYSArIHRoaXMuY3Vyc29yRXh0KTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHM6IHNhLFxuICAgICAgICAgICAgICBlOiBlYSxcbiAgICAgICAgICAgICAgZDogdGhpcy5vLmZsaXAgJiYgIXRoaXMuby5jdXJzb3JcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5nLCAgICAgICAgICAgICAgICAgLy8gY29udGV4dFxuICAgICAgICAgICAgICAgIGEgPSB0aGlzLmFyYyh0aGlzLmN2KSwgICAgICAvLyBBcmNcbiAgICAgICAgICAgICAgICBwYSwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmlvdXMgYXJjXG4gICAgICAgICAgICAgICAgciA9IDE7XG5cbiAgICAgICAgICAgIGMubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XG4gICAgICAgICAgICBjLmxpbmVDYXAgPSB0aGlzLmxpbmVDYXA7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm8uYmdDb2xvciAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICBjLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICBjLnN0cm9rZVN0eWxlID0gdGhpcy5vLmJnQ29sb3I7XG4gICAgICAgICAgICAgICAgICAgIGMuYXJjKHRoaXMueHksIHRoaXMueHksIHRoaXMucmFkaXVzLCB0aGlzLmVuZEFuZ2xlIC0gMC4wMDAwMSwgdGhpcy5zdGFydEFuZ2xlICsgMC4wMDAwMSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYy5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuby5kaXNwbGF5UHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICBwYSA9IHRoaXMuYXJjKHRoaXMudik7XG4gICAgICAgICAgICAgICAgYy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBjLnN0cm9rZVN0eWxlID0gdGhpcy5wQ29sb3I7XG4gICAgICAgICAgICAgICAgYy5hcmModGhpcy54eSwgdGhpcy54eSwgdGhpcy5yYWRpdXMsIHBhLnMsIHBhLmUsIHBhLmQpO1xuICAgICAgICAgICAgICAgIGMuc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgciA9IHRoaXMuY3YgPT0gdGhpcy52O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgYy5zdHJva2VTdHlsZSA9IHIgPyB0aGlzLm8uZmdDb2xvciA6IHRoaXMuZmdDb2xvciA7XG4gICAgICAgICAgICBjLmFyYyh0aGlzLnh5LCB0aGlzLnh5LCB0aGlzLnJhZGl1cywgYS5zLCBhLmUsIGEuZCk7XG4gICAgICAgICAgICBjLnN0cm9rZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy52YWwodGhpcy52KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgJC5mbi5kaWFsID0gJC5mbi5rbm9iID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZCA9IG5ldyBrLkRpYWwoKTtcbiAgICAgICAgICAgICAgICBkLm8gPSBvO1xuICAgICAgICAgICAgICAgIGQuJCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgZC5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKS5wYXJlbnQoKTtcbiAgICB9O1xuXG59KSk7XG4iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIm1pbmltYXBcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibWluaW1hcFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJXYXZlU3VyZmVyXCJdID0gcm9vdFtcIldhdmVTdXJmZXJcIl0gfHwge30sIHJvb3RbXCJXYXZlU3VyZmVyXCJdW1wibWluaW1hcFwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwibG9jYWxob3N0OjgwODAvZGlzdC9wbHVnaW4vXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWluaW1hcFBsdWdpblBhcmFtc1xuICogQGRlc2MgRXh0ZW5kcyB0aGUgYFdhdmVzdXJmZXJQYXJhbXNgIHdhdmVzdXJmZXIgd2FzIGluaXRpYWxpc2VkIHdpdGhcbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ3xIVE1MRWxlbWVudH0gY29udGFpbmVyIENTUyBzZWxlY3RvciBvciBIVE1MIGVsZW1lbnQgd2hlcmVcbiAqIHRoZSBFTEFOIGluZm9ybWF0aW9uIHNob3VsZCBiZSByZW5kZXJlci4gQnkgZGVmYXVsdCBpdCBpcyBzaW1wbHkgYXBwZW5kZWRcbiAqIGFmdGVyIHRoZSB3YXZlZm9ybS5cbiAqIEBwcm9wZXJ0eSB7P2Jvb2xlYW59IGRlZmVySW5pdCBTZXQgdG8gdHJ1ZSB0byBtYW51YWxseSBjYWxsXG4gKiBgaW5pdFBsdWdpbignbWluaW1hcCcpYFxuICovXG5cbi8qKlxuICogUmVuZGVycyBhIHNtYWxsZXIgdmVyc2lvbiB3YXZlZm9ybSBhcyBhIG1pbmltYXAgb2YgdGhlIG1haW4gd2F2ZWZvcm0uXG4gKlxuICogQGltcGxlbWVudHMge1BsdWdpbkNsYXNzfVxuICogQGV4dGVuZHMge09ic2VydmVyfVxuICogQGV4YW1wbGVcbiAqIC8vIGVzNlxuICogaW1wb3J0IE1pbmltYXBQbHVnaW4gZnJvbSAnd2F2ZXN1cmZlci5taW5pbWFwLmpzJztcbiAqXG4gKiAvLyBjb21tb25qc1xuICogdmFyIE1pbmltYXBQbHVnaW4gPSByZXF1aXJlKCd3YXZlc3VyZmVyLm1pbmltYXAuanMnKTtcbiAqXG4gKiAvLyBpZiB5b3UgYXJlIHVzaW5nIDxzY3JpcHQ+IHRhZ3NcbiAqIHZhciBNaW5pbWFwUGx1Z2luID0gd2luZG93LldhdmVTdXJmZXIubWluaW1hcDtcbiAqXG4gKiAvLyAuLi4gaW5pdGlhbGlzaW5nIHdhdmVzdXJmZXIgd2l0aCB0aGUgcGx1Z2luXG4gKiB2YXIgd2F2ZXN1cmZlciA9IFdhdmVTdXJmZXIuY3JlYXRlKHtcbiAqICAgLy8gd2F2ZXN1cmZlciBvcHRpb25zIC4uLlxuICogICBwbHVnaW5zOiBbXG4gKiAgICAgTWluaW1hcFBsdWdpbi5jcmVhdGUoe1xuICogICAgICAgLy8gcGx1Z2luIG9wdGlvbnMgLi4uXG4gKiAgICAgfSlcbiAqICAgXVxuICogfSk7XG4gKi9cbnZhciBNaW5pbWFwUGx1Z2luID0gZnVuY3Rpb24gKCkge1xuICAgIF9jcmVhdGVDbGFzcyhNaW5pbWFwUGx1Z2luLCBudWxsLCBbe1xuICAgICAgICBrZXk6ICdjcmVhdGUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaW5pbWFwIHBsdWdpbiBkZWZpbml0aW9uIGZhY3RvcnlcbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBtdXN0IGJlIHVzZWQgdG8gY3JlYXRlIGEgcGx1Z2luIGRlZmluaXRpb24gd2hpY2ggY2FuIGJlXG4gICAgICAgICAqIHVzZWQgYnkgd2F2ZXN1cmZlciB0byBjb3JyZWN0bHkgaW5zdGFudGlhdGUgdGhlIHBsdWdpbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtICB7TWluaW1hcFBsdWdpblBhcmFtc30gcGFyYW1zIHBhcmFtZXRlcnMgdXNlIHRvIGluaXRpYWxpc2UgdGhlIHBsdWdpblxuICAgICAgICAgKiBAcmV0dXJuIHtQbHVnaW5EZWZpbml0aW9ufSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBwbHVnaW5cbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdtaW5pbWFwJyxcbiAgICAgICAgICAgICAgICBkZWZlckluaXQ6IHBhcmFtcyAmJiBwYXJhbXMuZGVmZXJJbml0ID8gcGFyYW1zLmRlZmVySW5pdCA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgICAgICAgIHN0YXRpY1Byb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRNaW5pbWFwOiBmdW5jdGlvbiBpbml0TWluaW1hcChjdXN0b21Db25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRlZCBpbml0TWluaW1hcCEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGN1c3RvbUNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdFBsdWdpbnMoJ21pbmltYXAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5zdGFuY2U6IE1pbmltYXBQbHVnaW5cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICBmdW5jdGlvbiBNaW5pbWFwUGx1Z2luKHBhcmFtcywgd3MpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWluaW1hcFBsdWdpbik7XG5cbiAgICAgICAgdGhpcy5wYXJhbXMgPSB3cy51dGlsLmV4dGVuZCh7fSwgd3MucGFyYW1zLCB7XG4gICAgICAgICAgICBzaG93UmVnaW9uczogZmFsc2UsXG4gICAgICAgICAgICBzaG93T3ZlcnZpZXc6IGZhbHNlLFxuICAgICAgICAgICAgb3ZlcnZpZXdCb3JkZXJDb2xvcjogJ2dyZWVuJyxcbiAgICAgICAgICAgIG92ZXJ2aWV3Qm9yZGVyU2l6ZTogMixcbiAgICAgICAgICAgIC8vIHRoZSBjb250YWluZXIgc2hvdWxkIGJlIGRpZmZlcmVudFxuICAgICAgICAgICAgY29udGFpbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5tYXgoTWF0aC5yb3VuZCh3cy5wYXJhbXMuaGVpZ2h0IC8gNCksIDIwKVxuICAgICAgICB9LCBwYXJhbXMsIHtcbiAgICAgICAgICAgIHNjcm9sbFBhcmVudDogZmFsc2UsXG4gICAgICAgICAgICBmaWxsUGFyZW50OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBpZiBjb250YWluZXIgaXMgYSBzZWxlY3RvciwgZ2V0IHRoZSBlbGVtZW50XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmNvbnRhaW5lciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyYW1zLmNvbnRhaW5lcik7XG4gICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdXYXZlc3VyZmVyIG1pbmltYXAgY29udGFpbmVyICcgKyBwYXJhbXMuY29udGFpbmVyICsgJyB3YXMgbm90IGZvdW5kISBUaGUgbWluaW1hcCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgYXBwZW5kZWQgYmVsb3cgdGhlIHdhdmVmb3JtLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuY29udGFpbmVyID0gZWw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgbm8gY29udGFpbmVyIGlzIHNwZWNpZmllZCBhZGQgYSBuZXcgZWxlbWVudCBhbmQgaW5zZXJ0IGl0XG4gICAgICAgIGlmICghcGFyYW1zLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMuY29udGFpbmVyID0gd3MudXRpbC5zdHlsZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtaW5pbWFwJyksIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRyYXdlciA9IG5ldyB3cy5EcmF3ZXIodGhpcy5wYXJhbXMuY29udGFpbmVyLCB0aGlzLnBhcmFtcyk7XG4gICAgICAgIHRoaXMud2F2ZXN1cmZlciA9IHdzO1xuICAgICAgICB0aGlzLnV0aWwgPSB3cy51dGlsO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWluaW1hcCBuZWVkcyB0byByZWdpc3RlciB0byByZWFkeSBhbmQgd2F2ZWZvcm0tcmVhZHkgZXZlbnRzIHRvXG4gICAgICAgICAqIHdvcmsgd2l0aCBNZWRpYUVsZW1lbnQsIHRoZSB0aW1lIHdoZW4gcmVhZHkgaXMgY2FsbGVkIGlzIGRpZmZlcmVudFxuICAgICAgICAgKiAocGVha3MgY2FuIG5vdCBiZSBnb3QpXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2thdHNwYXVnaC93YXZlc3VyZmVyLmpzL2lzc3Vlcy83MzZcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVuZGVyRXZlbnQgPSB3cy5wYXJhbXMuYmFja2VuZCA9PT0gJ01lZGlhRWxlbWVudCcgPyAnd2F2ZWZvcm0tcmVhZHknIDogJ3JlYWR5JztcbiAgICAgICAgdGhpcy5vdmVydmlld1JlZ2lvbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5kcmF3ZXIuY3JlYXRlV3JhcHBlcigpO1xuICAgICAgICB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7XG4gICAgICAgIHZhciBpc0luaXRpYWxpc2VkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gd3MgcmVhZHkgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgdGhpcy5fb25TaG91bGRSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBvbmx5IGJpbmQgdGhlIGV2ZW50cyBpbiB0aGUgZmlyc3QgcnVuXG4gICAgICAgICAgICBpZiAoIWlzSW5pdGlhbGlzZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5iaW5kV2F2ZXN1cmZlckV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF90aGlzLmJpbmRNaW5pbWFwRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgaXNJbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBzdWNoIGVsZW1lbnQsIGFwcGVuZCBpdCB0byB0aGUgY29udGFpbmVyIChiZWxvd1xuICAgICAgICAgICAgLy8gdGhlIHdhdmVmb3JtKVxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKF90aGlzLnBhcmFtcy5jb250YWluZXIpKSB7XG4gICAgICAgICAgICAgICAgd3MuY29udGFpbmVyLmluc2VydEJlZm9yZShfdGhpcy5wYXJhbXMuY29udGFpbmVyLCBudWxsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF90aGlzLndhdmVzdXJmZXIucmVnaW9ucyAmJiBfdGhpcy5wYXJhbXMuc2hvd1JlZ2lvbnMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWdpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9vbkF1ZGlvcHJvY2VzcyA9IGZ1bmN0aW9uIChjdXJyZW50VGltZSkge1xuICAgICAgICAgICAgX3RoaXMuZHJhd2VyLnByb2dyZXNzKF90aGlzLndhdmVzdXJmZXIuYmFja2VuZC5nZXRQbGF5ZWRQZXJjZW50cygpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB3cyBzZWVrIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgIHRoaXMuX29uU2VlayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kcmF3ZXIucHJvZ3Jlc3Mod3MuYmFja2VuZC5nZXRQbGF5ZWRQZXJjZW50cygpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBvdmVydmlldyByZWdpb25cbiAgICAgICAgdGhpcy5fb25TY3JvbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5kcmFnZ2luZ092ZXJ2aWV3KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubW92ZU92ZXJ2aWV3UmVnaW9uKGUudGFyZ2V0LnNjcm9sbExlZnQgLyBfdGhpcy5yYXRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29uTW91c2VvdmVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5kcmFnZ2luZ092ZXJ2aWV3KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZHJhZ2dpbmdPdmVydmlldyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgcHJldldpZHRoID0gMDtcbiAgICAgICAgdGhpcy5fb25SZXNpemUgPSB3cy51dGlsLmRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChwcmV2V2lkdGggIT0gX3RoaXMuZHJhd2VyLndyYXBwZXIuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBwcmV2V2lkdGggPSBfdGhpcy5kcmF3ZXIud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kcmF3ZXIucHJvZ3Jlc3MoX3RoaXMud2F2ZXN1cmZlci5iYWNrZW5kLmdldFBsYXllZFBlcmNlbnRzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTWluaW1hcFBsdWdpbiwgW3tcbiAgICAgICAga2V5OiAnaW5pdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMud2F2ZXN1cmZlci5pc1JlYWR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25TaG91bGRSZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5vbih0aGlzLnJlbmRlckV2ZW50LCB0aGlzLl9vblNob3VsZFJlbmRlcik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLl9vblJlc2l6ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIuZHJhd2VyLndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5fb25Nb3VzZW92ZXIpO1xuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLnVuKHRoaXMucmVuZGVyRXZlbnQsIHRoaXMuX29uU2hvdWxkUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci51bignc2VlaycsIHRoaXMuX29uU2Vlayk7XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIudW4oJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsKTtcbiAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci51bignYXVkaW9wcm9jZXNzJywgdGhpcy5fb25BdWRpb3Byb2Nlc3MpO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5vdmVydmlld1JlZ2lvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVuQWxsKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlZ2lvbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaW9ucygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnJlZ2lvbnMgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLm9uKCdyZWdpb24tY3JlYXRlZCcsIGZ1bmN0aW9uIChyZWdpb24pIHtcbiAgICAgICAgICAgICAgICBfdGhpczIucmVnaW9uc1tyZWdpb24uaWRdID0gcmVnaW9uO1xuICAgICAgICAgICAgICAgIF90aGlzMi5yZW5kZXJSZWdpb25zKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLm9uKCdyZWdpb24tdXBkYXRlZCcsIGZ1bmN0aW9uIChyZWdpb24pIHtcbiAgICAgICAgICAgICAgICBfdGhpczIucmVnaW9uc1tyZWdpb24uaWRdID0gcmVnaW9uO1xuICAgICAgICAgICAgICAgIF90aGlzMi5yZW5kZXJSZWdpb25zKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLm9uKCdyZWdpb24tcmVtb3ZlZCcsIGZ1bmN0aW9uIChyZWdpb24pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMyLnJlZ2lvbnNbcmVnaW9uLmlkXTtcbiAgICAgICAgICAgICAgICBfdGhpczIucmVuZGVyUmVnaW9ucygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlclJlZ2lvbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUmVnaW9ucygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgcmVnaW9uRWxlbWVudHMgPSB0aGlzLmRyYXdlci53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3JlZ2lvbicpO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmVnaW9uRWxlbWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdlci53cmFwcGVyLnJlbW92ZUNoaWxkKHJlZ2lvbkVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5yZWdpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgIHZhciByZWdpb24gPSBfdGhpczMucmVnaW9uc1tpZF07XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gX3RoaXMzLmRyYXdlci53aWR0aCAqICgocmVnaW9uLmVuZCAtIHJlZ2lvbi5zdGFydCkgLyBfdGhpczMud2F2ZXN1cmZlci5nZXREdXJhdGlvbigpKTtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IF90aGlzMy5kcmF3ZXIud2lkdGggKiAocmVnaW9uLnN0YXJ0IC8gX3RoaXMzLndhdmVzdXJmZXIuZ2V0RHVyYXRpb24oKSk7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2lvbkVsZW1lbnQgPSBfdGhpczMudXRpbC5zdHlsZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdyZWdpb24nKSwge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdpbmhlcml0JyxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiByZWdpb24uY29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnQgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlZ2lvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChpZCk7XG4gICAgICAgICAgICAgICAgX3RoaXMzLmRyYXdlci53cmFwcGVyLmFwcGVuZENoaWxkKHJlZ2lvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZUVsZW1lbnRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRzKCkge1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuY3JlYXRlRWxlbWVudHMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5zaG93T3ZlcnZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJ2aWV3UmVnaW9uID0gdGhpcy51dGlsLnN0eWxlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ292ZXJ2aWV3JyksIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmRyYXdlci53cmFwcGVyLm9mZnNldEhlaWdodCAtIHRoaXMucGFyYW1zLm92ZXJ2aWV3Qm9yZGVyU2l6ZSAqIDIgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiB0aGlzLnBhcmFtcy5vdmVydmlld0JvcmRlclNpemUgKyAncHggc29saWQgJyArIHRoaXMucGFyYW1zLm92ZXJ2aWV3Qm9yZGVyQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMixcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogdGhpcy5wYXJhbXMub3ZlcnZpZXdPcGFjaXR5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3ZXIud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLm92ZXJ2aWV3UmVnaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYmluZFdhdmVzdXJmZXJFdmVudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZFdhdmVzdXJmZXJFdmVudHMoKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fb25SZXNpemUsIHRydWUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5fb25SZXNpemUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLm9uKCdhdWRpb3Byb2Nlc3MnLCB0aGlzLl9vbkF1ZGlvcHJvY2Vzcyk7XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIub24oJ3NlZWsnLCB0aGlzLl9vblNlZWspO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1zLnNob3dPdmVydmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5vbignc2Nyb2xsJywgdGhpcy5fb25TY3JvbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5kcmF3ZXIud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLl9vbk1vdXNlb3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2JpbmRNaW5pbWFwRXZlbnRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRNaW5pbWFwRXZlbnRzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBwb3NpdGlvbk1vdXNlRG93biA9IHtcbiAgICAgICAgICAgICAgICBjbGllbnRYOiAwLFxuICAgICAgICAgICAgICAgIGNsaWVudFk6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVQb3NpdGlvblggPSAwO1xuICAgICAgICAgICAgdmFyIHNlZWsgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyB0aGUgZm9sbG93aW5nIGV2ZW50IGxpc3RlbmVycyB3aWxsIGJlIGRlc3Ryb3llZCBieSB1c2luZ1xuICAgICAgICAgICAgLy8gdGhpcy51bkFsbCgpIGFuZCBudWxsaWZ5aW5nIHRoZSBET00gbm9kZSByZWZlcmVuY2VzIGFmdGVyXG4gICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuaW50ZXJhY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdlci53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5maXJlRXZlbnQoJ2NsaWNrJywgZXZlbnQsIF90aGlzNC5kcmF3ZXIuaGFuZGxlRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50LCBwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vlaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmRyYXdlci5wcm9ncmVzcyhwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQud2F2ZXN1cmZlci5zZWVrQW5kQ2VudGVyKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5zaG93T3ZlcnZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJ2aWV3UmVnaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuZHJhZ2dpbmdPdmVydmlldyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUG9zaXRpb25YID0gZXZlbnQubGF5ZXJYO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbk1vdXNlRG93bi5jbGllbnRYID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25Nb3VzZURvd24uY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdlci53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LmRyYWdnaW5nT3ZlcnZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5tb3ZlT3ZlcnZpZXdSZWdpb24oZXZlbnQuY2xpZW50WCAtIF90aGlzNC5kcmF3ZXIuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSByZWxhdGl2ZVBvc2l0aW9uWCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd2VyLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25Nb3VzZURvd24uY2xpZW50WCAtIGV2ZW50LmNsaWVudFggPT09IDAgJiYgcG9zaXRpb25Nb3VzZURvd24uY2xpZW50WCAtIGV2ZW50LmNsaWVudFggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmRyYWdnaW5nT3ZlcnZpZXcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczQuZHJhZ2dpbmdPdmVydmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VlayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmRyYWdnaW5nT3ZlcnZpZXcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMuZHJhd2VyLmdldFdpZHRoKCk7XG4gICAgICAgICAgICB2YXIgcGVha3MgPSB0aGlzLndhdmVzdXJmZXIuYmFja2VuZC5nZXRQZWFrcyhsZW4sIDAsIGxlbik7XG4gICAgICAgICAgICB0aGlzLmRyYXdlci5kcmF3UGVha3MocGVha3MsIGxlbiwgMCwgbGVuKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2VyLnByb2dyZXNzKHRoaXMud2F2ZXN1cmZlci5iYWNrZW5kLmdldFBsYXllZFBlcmNlbnRzKCkpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuc2hvd092ZXJ2aWV3KSB7XG4gICAgICAgICAgICAgICAgLy9nZXQgcHJvcG9ydGlvbmFsIHdpZHRoIG9mIG92ZXJ2aWV3IHJlZ2lvbiBjb25zaWRlcmluZyB0aGUgcmVzcGVjdGl2ZVxuICAgICAgICAgICAgICAgIC8vd2lkdGggb2YgdGhlIGRyYXdlcnNcbiAgICAgICAgICAgICAgICB0aGlzLnJhdGlvID0gdGhpcy53YXZlc3VyZmVyLmRyYXdlci53aWR0aCAvIHRoaXMuZHJhd2VyLndpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMud2F2ZVNob3dlZFdpZHRoID0gdGhpcy53YXZlc3VyZmVyLmRyYXdlci53aWR0aCAvIHRoaXMucmF0aW87XG4gICAgICAgICAgICAgICAgdGhpcy53YXZlV2lkdGggPSB0aGlzLndhdmVzdXJmZXIuZHJhd2VyLndpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMub3ZlcnZpZXdXaWR0aCA9IHRoaXMuZHJhd2VyLndpZHRoIC8gdGhpcy5yYXRpbztcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJ2aWV3UG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZU92ZXJ2aWV3UmVnaW9uKHRoaXMud2F2ZXN1cmZlci5kcmF3ZXIud3JhcHBlci5zY3JvbGxMZWZ0IC8gdGhpcy5yYXRpbyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vdmVydmlld1JlZ2lvbi5zdHlsZS53aWR0aCA9IHRoaXMub3ZlcnZpZXdXaWR0aCAtIHRoaXMucGFyYW1zLm92ZXJ2aWV3Qm9yZGVyU2l6ZSAqIDIgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdtb3ZlT3ZlcnZpZXdSZWdpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZU92ZXJ2aWV3UmVnaW9uKHBpeGVscykge1xuICAgICAgICAgICAgaWYgKHBpeGVscyA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJ2aWV3UG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwaXhlbHMgKyB0aGlzLm92ZXJ2aWV3V2lkdGggPCB0aGlzLmRyYXdlci53aWR0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3ZlcnZpZXdQb3NpdGlvbiA9IHBpeGVscztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdmVydmlld1Bvc2l0aW9uID0gdGhpcy5kcmF3ZXIud2lkdGggLSB0aGlzLm92ZXJ2aWV3V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm92ZXJ2aWV3UmVnaW9uLnN0eWxlLmxlZnQgPSB0aGlzLm92ZXJ2aWV3UG9zaXRpb24gKyAncHgnO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmdPdmVydmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5kcmF3ZXIud3JhcHBlci5zY3JvbGxMZWZ0ID0gdGhpcy5vdmVydmlld1Bvc2l0aW9uICogdGhpcy5yYXRpbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNaW5pbWFwUGx1Z2luO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNaW5pbWFwUGx1Z2luO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2F2ZXN1cmZlci5taW5pbWFwLmpzLm1hcCIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwicmVnaW9uc1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJyZWdpb25zXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIldhdmVTdXJmZXJcIl0gPSByb290W1wiV2F2ZVN1cmZlclwiXSB8fCB7fSwgcm9vdFtcIldhdmVTdXJmZXJcIl1bXCJyZWdpb25zXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJsb2NhbGhvc3Q6ODA4MC9kaXN0L3BsdWdpbi9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKHtcblxuLyoqKi8gMjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcbiAqIChTaW5nbGUpIFJlZ2lvbiBwbHVnaW4gY2xhc3NcbiAqXG4gKiBNdXN0IGJlIHR1cm5lZCBpbnRvIGFuIG9ic2VydmVyIGJlZm9yZSBpbnN0YW50aWF0aW5nLiBUaGlzIGlzIGRvbmUgaW5cbiAqIFJlZ2lvbnNQbHVnaW4gKG1haW4gcGx1Z2luIGNsYXNzKVxuICpcbiAqIEBleHRlbmRzIHtPYnNlcnZlcn1cbiAqL1xudmFyIFJlZ2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWdpb24ocGFyYW1zLCB3cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpb24pO1xuXG4gICAgICAgIHRoaXMud2F2ZXN1cmZlciA9IHdzO1xuICAgICAgICB0aGlzLndyYXBwZXIgPSB3cy5kcmF3ZXIud3JhcHBlcjtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHdzLnV0aWwuc3R5bGU7XG5cbiAgICAgICAgdGhpcy5pZCA9IHBhcmFtcy5pZCA9PSBudWxsID8gd3MudXRpbC5nZXRJZCgpIDogcGFyYW1zLmlkO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gTnVtYmVyKHBhcmFtcy5zdGFydCkgfHwgMDtcbiAgICAgICAgdGhpcy5lbmQgPSBwYXJhbXMuZW5kID09IG51bGwgPyAvLyBzbWFsbCBtYXJrZXItbGlrZSByZWdpb25cbiAgICAgICAgdGhpcy5zdGFydCArIDQgLyB0aGlzLndyYXBwZXIuc2Nyb2xsV2lkdGggKiB0aGlzLndhdmVzdXJmZXIuZ2V0RHVyYXRpb24oKSA6IE51bWJlcihwYXJhbXMuZW5kKTtcbiAgICAgICAgdGhpcy5yZXNpemUgPSBwYXJhbXMucmVzaXplID09PSB1bmRlZmluZWQgPyB0cnVlIDogQm9vbGVhbihwYXJhbXMucmVzaXplKTtcbiAgICAgICAgdGhpcy5kcmFnID0gcGFyYW1zLmRyYWcgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBCb29sZWFuKHBhcmFtcy5kcmFnKTtcbiAgICAgICAgdGhpcy5sb29wID0gQm9vbGVhbihwYXJhbXMubG9vcCk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBwYXJhbXMuY29sb3IgfHwgJ3JnYmEoMCwgMCwgMCwgMC4xKSc7XG4gICAgICAgIHRoaXMuZGF0YSA9IHBhcmFtcy5kYXRhIHx8IHt9O1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBwYXJhbXMuYXR0cmlidXRlcyB8fCB7fTtcblxuICAgICAgICB0aGlzLm1heExlbmd0aCA9IHBhcmFtcy5tYXhMZW5ndGg7XG4gICAgICAgIHRoaXMubWluTGVuZ3RoID0gcGFyYW1zLm1pbkxlbmd0aDtcbiAgICAgICAgdGhpcy5fb25SZWRyYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlUmVuZGVyKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zY3JvbGwgPSBwYXJhbXMuc2Nyb2xsICE9PSBmYWxzZSAmJiB3cy5wYXJhbXMuc2Nyb2xsUGFyZW50O1xuICAgICAgICB0aGlzLnNjcm9sbFNwZWVkID0gcGFyYW1zLnNjcm9sbFNwZWVkIHx8IDE7XG4gICAgICAgIHRoaXMuc2Nyb2xsVGhyZXNob2xkID0gcGFyYW1zLnNjcm9sbFRocmVzaG9sZCB8fCAxMDtcblxuICAgICAgICB0aGlzLmJpbmRJbk91dCgpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB0aGlzLndhdmVzdXJmZXIub24oJ3pvb20nLCB0aGlzLl9vblJlZHJhdyk7XG4gICAgICAgIHRoaXMud2F2ZXN1cmZlci5vbigncmVkcmF3JywgdGhpcy5fb25SZWRyYXcpO1xuICAgICAgICB0aGlzLndhdmVzdXJmZXIuZmlyZUV2ZW50KCdyZWdpb24tY3JlYXRlZCcsIHRoaXMpO1xuICAgIH1cblxuICAgIC8qIFVwZGF0ZSByZWdpb24gcGFyYW1zLiAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoUmVnaW9uLCBbe1xuICAgICAgICBrZXk6ICd1cGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gcGFyYW1zLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IE51bWJlcihwYXJhbXMuc3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT0gcGFyYW1zLmVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gTnVtYmVyKHBhcmFtcy5lbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT0gcGFyYW1zLmxvb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvb3AgPSBCb29sZWFuKHBhcmFtcy5sb29wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9IHBhcmFtcy5jb2xvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPSBwYXJhbXMuY29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBwYXJhbXMuZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHBhcmFtcy5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT0gcGFyYW1zLnJlc2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplID0gQm9vbGVhbihwYXJhbXMucmVzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9IHBhcmFtcy5kcmFnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnID0gQm9vbGVhbihwYXJhbXMuZHJhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBwYXJhbXMubWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhMZW5ndGggPSBOdW1iZXIocGFyYW1zLm1heExlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBwYXJhbXMubWluTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW5MZW5ndGggPSBOdW1iZXIocGFyYW1zLm1pbkxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBwYXJhbXMuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHBhcmFtcy5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ3VwZGF0ZScpO1xuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLmZpcmVFdmVudCgncmVnaW9uLXVwZGF0ZWQnLCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJlbW92ZSBhIHNpbmdsZSByZWdpb24uICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbW92ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwcGVyLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgncmVtb3ZlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLnVuKCd6b29tJywgdGhpcy5fb25SZWRyYXcpO1xuICAgICAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci51bigncmVkcmF3JywgdGhpcy5fb25SZWRyYXcpO1xuICAgICAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5maXJlRXZlbnQoJ3JlZ2lvbi1yZW1vdmVkJywgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBQbGF5IHRoZSBhdWRpbyByZWdpb24uICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3BsYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxheSgpIHtcbiAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5wbGF5KHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdwbGF5Jyk7XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIuZmlyZUV2ZW50KCdyZWdpb24tcGxheScsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogUGxheSB0aGUgcmVnaW9uIGluIGxvb3AuICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3BsYXlMb29wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYXlMb29wKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgdGhpcy5vbmNlKCdvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5wbGF5TG9vcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBSZW5kZXIgYSByZWdpb24gYXMgYSBET00gZWxlbWVudC4gKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciByZWdpb25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3JlZ2lvbicpO1xuICAgICAgICAgICAgcmVnaW9uRWwuY2xhc3NOYW1lID0gJ3dhdmVzdXJmZXItcmVnaW9uJztcbiAgICAgICAgICAgIHJlZ2lvbkVsLnRpdGxlID0gdGhpcy5mb3JtYXRUaW1lKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcbiAgICAgICAgICAgIHJlZ2lvbkVsLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIHRoaXMuaWQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBhdHRybmFtZSBpbiB0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICByZWdpb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVnaW9uLScgKyBhdHRybmFtZSwgdGhpcy5hdHRyaWJ1dGVzW2F0dHJuYW1lXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMud3JhcHBlci5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUocmVnaW9uRWwsIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICB6SW5kZXg6IDIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgdG9wOiAnMHB4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIFJlc2l6ZSBoYW5kbGVzICovXG4gICAgICAgICAgICBpZiAodGhpcy5yZXNpemUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlTGVmdCA9IHJlZ2lvbkVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hhbmRsZScpKTtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlUmlnaHQgPSByZWdpb25FbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoYW5kbGUnKSk7XG4gICAgICAgICAgICAgICAgaGFuZGxlTGVmdC5jbGFzc05hbWUgPSAnd2F2ZXN1cmZlci1oYW5kbGUgd2F2ZXN1cmZlci1oYW5kbGUtc3RhcnQnO1xuICAgICAgICAgICAgICAgIGhhbmRsZVJpZ2h0LmNsYXNzTmFtZSA9ICd3YXZlc3VyZmVyLWhhbmRsZSB3YXZlc3VyZmVyLWhhbmRsZS1lbmQnO1xuICAgICAgICAgICAgICAgIHZhciBjc3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ2NvbC1yZXNpemUnLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMSUnLFxuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzRweCcsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlKGhhbmRsZUxlZnQsIGNzcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZShoYW5kbGVSaWdodCwgY3NzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlKGhhbmRsZVJpZ2h0LCB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcxMDAlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQocmVnaW9uRWwpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYmluZEV2ZW50cyhyZWdpb25FbCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Zvcm1hdFRpbWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybWF0VGltZShzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gKHN0YXJ0ID09IGVuZCA/IFtzdGFydF0gOiBbc3RhcnQsIGVuZF0pLm1hcChmdW5jdGlvbiAodGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbTWF0aC5mbG9vcih0aW1lICUgMzYwMCAvIDYwKSwgLy8gbWludXRlc1xuICAgICAgICAgICAgICAgICgnMDAnICsgTWF0aC5mbG9vcih0aW1lICUgNjApKS5zbGljZSgtMikgLy8gc2Vjb25kc1xuICAgICAgICAgICAgICAgIF0uam9pbignOicpO1xuICAgICAgICAgICAgfSkuam9pbignLScpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndhdmVzdXJmZXIuZHJhd2VyLndpZHRoIC8gdGhpcy53YXZlc3VyZmVyLnBhcmFtcy5waXhlbFJhdGlvO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogVXBkYXRlIGVsZW1lbnQncyBwb3NpdGlvbiwgd2lkdGgsIGNvbG9yLiAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVSZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGR1ciA9IHRoaXMud2F2ZXN1cmZlci5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5nZXRXaWR0aCgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IHRoaXMuZW5kIC0gdGhpcy5zdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuZCA+IGR1cikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gZHVyO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBkdXIgLSAodGhpcy5lbmQgLSB0aGlzLnN0YXJ0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMubWluTGVuZ3RoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IE1hdGgubWF4KHRoaXMuc3RhcnQgKyB0aGlzLm1pbkxlbmd0aCwgdGhpcy5lbmQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhMZW5ndGggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gTWF0aC5taW4odGhpcy5zdGFydCArIHRoaXMubWF4TGVuZ3RoLCB0aGlzLmVuZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbGVmdCBhbmQgd2lkdGggdmFsdWVzIG9mIHRoZSByZWdpb24gc3VjaCB0aGF0XG4gICAgICAgICAgICAgICAgLy8gbm8gZ2FwcyBhcHBlYXIgYmV0d2VlbiByZWdpb25zLlxuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gTWF0aC5yb3VuZCh0aGlzLnN0YXJ0IC8gZHVyICogd2lkdGgpO1xuICAgICAgICAgICAgICAgIHZhciByZWdpb25XaWR0aCA9IE1hdGgucm91bmQodGhpcy5lbmQgLyBkdXIgKiB3aWR0aCkgLSBsZWZ0O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZSh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbGVmdCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZWdpb25XaWR0aCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiB0aGlzLmRyYWcgPyAnbW92ZScgOiAnZGVmYXVsdCdcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGF0dHJuYW1lIGluIHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXJlZ2lvbi0nICsgYXR0cm5hbWUsIHRoaXMuYXR0cmlidXRlc1thdHRybmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50aXRsZSA9IHRoaXMuZm9ybWF0VGltZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBCaW5kIGF1ZGlvIGV2ZW50cy4gKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYmluZEluT3V0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRJbk91dCgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmZpcmVkSW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmlyZWRPdXQgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIG9uUHJvY2VzcyA9IGZ1bmN0aW9uIG9uUHJvY2Vzcyh0aW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpczMuZmlyZWRPdXQgJiYgX3RoaXMzLmZpcmVkSW4gJiYgKF90aGlzMy5zdGFydCA+PSBNYXRoLnJvdW5kKHRpbWUgKiAxMDApIC8gMTAwIHx8IF90aGlzMy5lbmQgPD0gTWF0aC5yb3VuZCh0aW1lICogMTAwKSAvIDEwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmZpcmVkT3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmZpcmVkSW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmZpcmVFdmVudCgnb3V0Jyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMy53YXZlc3VyZmVyLmZpcmVFdmVudCgncmVnaW9uLW91dCcsIF90aGlzMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMzLmZpcmVkSW4gJiYgX3RoaXMzLnN0YXJ0IDw9IHRpbWUgJiYgX3RoaXMzLmVuZCA+IHRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmZpcmVkSW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMuZmlyZWRPdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmZpcmVFdmVudCgnaW4nKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLndhdmVzdXJmZXIuZmlyZUV2ZW50KCdyZWdpb24taW4nLCBfdGhpczMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci5iYWNrZW5kLm9uKCdhdWRpb3Byb2Nlc3MnLCBvblByb2Nlc3MpO1xuXG4gICAgICAgICAgICB0aGlzLm9uKCdyZW1vdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMzLndhdmVzdXJmZXIuYmFja2VuZC51bignYXVkaW9wcm9jZXNzJywgb25Qcm9jZXNzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBMb29wIHBsYXliYWNrLiAqL1xuICAgICAgICAgICAgdGhpcy5vbignb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczMubG9vcCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMud2F2ZXN1cmZlci5wbGF5KF90aGlzMy5zdGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBCaW5kIERPTSBldmVudHMuICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2JpbmRFdmVudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM0LmZpcmVFdmVudCgnbW91c2VlbnRlcicsIGUpO1xuICAgICAgICAgICAgICAgIF90aGlzNC53YXZlc3VyZmVyLmZpcmVFdmVudCgncmVnaW9uLW1vdXNlZW50ZXInLCBfdGhpczQsIGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpczQuZmlyZUV2ZW50KCdtb3VzZWxlYXZlJywgZSk7XG4gICAgICAgICAgICAgICAgX3RoaXM0LndhdmVzdXJmZXIuZmlyZUV2ZW50KCdyZWdpb24tbW91c2VsZWF2ZScsIF90aGlzNCwgZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgX3RoaXM0LmZpcmVFdmVudCgnY2xpY2snLCBlKTtcbiAgICAgICAgICAgICAgICBfdGhpczQud2F2ZXN1cmZlci5maXJlRXZlbnQoJ3JlZ2lvbi1jbGljaycsIF90aGlzNCwgZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpczQuZmlyZUV2ZW50KCdkYmxjbGljaycsIGUpO1xuICAgICAgICAgICAgICAgIF90aGlzNC53YXZlc3VyZmVyLmZpcmVFdmVudCgncmVnaW9uLWRibGNsaWNrJywgX3RoaXM0LCBlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBEcmFnIG9yIHJlc2l6ZSBvbiBtb3VzZW1vdmUuICovXG4gICAgICAgICAgICAodGhpcy5kcmFnIHx8IHRoaXMucmVzaXplKSAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IF90aGlzNC53YXZlc3VyZmVyLmRyYXdlci5jb250YWluZXI7XG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gX3RoaXM0LndhdmVzdXJmZXIuZ2V0RHVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsU3BlZWQgPSBfdGhpczQuc2Nyb2xsU3BlZWQ7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRocmVzaG9sZCA9IF90aGlzNC5zY3JvbGxUaHJlc2hvbGQ7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0VGltZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgdG91Y2hJZCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgbWF4U2Nyb2xsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciByZXNpemUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpcmVjdGlvbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlclJlY3QgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgd2hlbiB0aGUgdXNlciBpcyBkcmFnZ2luZyB3aXRoaW4gdGhlIHRocmVzaG9sZFxuICAgICAgICAgICAgICAgIHZhciBlZGdlU2Nyb2xsID0gZnVuY3Rpb24gZWRnZVNjcm9sbChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2Nyb2xsRGlyZWN0aW9uIHx8ICFkcmFnICYmICFyZXNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzY3JvbGwgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBfdGhpczQud3JhcHBlci5zY3JvbGxMZWZ0ICsgc2Nyb2xsU3BlZWQgKiBzY3JvbGxEaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC53cmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0ID0gTWF0aC5taW4obWF4U2Nyb2xsLCBNYXRoLm1heCgwLCBzY3JvbGxMZWZ0KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRpbWVcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBfdGhpczQud2F2ZXN1cmZlci5kcmF3ZXIuaGFuZGxlRXZlbnQoZSkgKiBkdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gdGltZSAtIHN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gdGltZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBkcmFnZ2luZyBvciByZXNpemluZ1xuICAgICAgICAgICAgICAgICAgICBkcmFnID8gX3RoaXM0Lm9uRHJhZyhkZWx0YSkgOiBfdGhpczQub25SZXNpemUoZGVsdGEsIHJlc2l6ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwZWF0XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVNjcm9sbChlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBvbkRvd24gPSBmdW5jdGlvbiBvbkRvd24oZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdG91Y2hJZCA9IGUudGFyZ2V0VG91Y2hlcyA/IGUudGFyZ2V0VG91Y2hlc1swXS5pZGVudGlmaWVyIDogbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBfdGhpczQud2F2ZXN1cmZlci5kcmF3ZXIuaGFuZGxlRXZlbnQoZSwgdHJ1ZSkgKiBkdXJhdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSBmb3Igc2Nyb2xsIGNhbGN1bGF0aW9uc1xuICAgICAgICAgICAgICAgICAgICBtYXhTY3JvbGwgPSBfdGhpczQud3JhcHBlci5zY3JvbGxXaWR0aCAtIF90aGlzNC53cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyUmVjdCA9IF90aGlzNC53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ2hhbmRsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dhdmVzdXJmZXItaGFuZGxlLXN0YXJ0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemUgPSAnc3RhcnQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemUgPSAnZW5kJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBvblVwID0gZnVuY3Rpb24gb25VcChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFnIHx8IHJlc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlyZUV2ZW50KCd1cGRhdGUtZW5kJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQud2F2ZXN1cmZlci5maXJlRXZlbnQoJ3JlZ2lvbi11cGRhdGUtZW5kJywgX3RoaXM0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIG9uTW92ZSA9IGZ1bmN0aW9uIG9uTW92ZShlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlc1swXS5pZGVudGlmaWVyICE9IHRvdWNoSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFnIHx8IHJlc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFRpbWUgPSBzdGFydFRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZSA9IF90aGlzNC53YXZlc3VyZmVyLmRyYXdlci5oYW5kbGVFdmVudChlKSAqIGR1cmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gdGltZSAtIHN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRpbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYWdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczQuZHJhZyAmJiBkcmFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0Lm9uRHJhZyhkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC5yZXNpemUgJiYgcmVzaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0Lm9uUmVzaXplKGRlbHRhLCByZXNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LnNjcm9sbCAmJiBjb250YWluZXIuY2xpZW50V2lkdGggPCBfdGhpczQud3JhcHBlci5zY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcmFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0aHJlc2hvbGQgaXMgbm90IGJldHdlZW4gdGhlIG1vdXNlIGFuZCB0aGUgY29udGFpbmVyIGVkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGlzIGJldHdlZW4gdGhlIHJlZ2lvbiBhbmQgdGhlIGNvbnRhaW5lciBlZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWdpb25SZWN0ID0gX3RoaXM0LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcmVnaW9uUmVjdC5sZWZ0IC0gd3JhcHBlclJlY3QubGVmdDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPCBvbGRUaW1lICYmIHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZSA+IG9sZFRpbWUgJiYgeCArIHJlZ2lvblJlY3Qud2lkdGggPD0gd3JhcHBlclJlY3QucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHdlIGFyZSBzdGlsbCBiZXlvbmQgdGhlIHRocmVzaG9sZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsRGlyZWN0aW9uID09PSAtMSAmJiB4ID4gc2Nyb2xsVGhyZXNob2xkIHx8IHNjcm9sbERpcmVjdGlvbiA9PT0gMSAmJiB4ICsgcmVnaW9uUmVjdC53aWR0aCA8IHdyYXBwZXJSZWN0LnJpZ2h0IC0gc2Nyb2xsVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW91c2UgYmFzZWQgdGhyZXNob2xkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfeCA9IGUuY2xpZW50WCAtIHdyYXBwZXJSZWN0LmxlZnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfeCA8PSBzY3JvbGxUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF94ID49IHdyYXBwZXJSZWN0LnJpZ2h0IC0gc2Nyb2xsVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiAmJiBlZGdlU2Nyb2xsKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIF90aGlzNC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG93bik7XG4gICAgICAgICAgICAgICAgX3RoaXM0LmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uRG93bik7XG5cbiAgICAgICAgICAgICAgICBfdGhpczQud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdmUpO1xuICAgICAgICAgICAgICAgIF90aGlzNC53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uTW92ZSk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblVwKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25VcCk7XG5cbiAgICAgICAgICAgICAgICBfdGhpczQub24oJ3JlbW92ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25VcCk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblVwKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Nb3ZlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF90aGlzNC53YXZlc3VyZmVyLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblVwKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVXApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkRyYWcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnKGRlbHRhKSB7XG4gICAgICAgICAgICB2YXIgbWF4RW5kID0gdGhpcy53YXZlc3VyZmVyLmdldER1cmF0aW9uKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmQgKyBkZWx0YSA+IG1heEVuZCB8fCB0aGlzLnN0YXJ0ICsgZGVsdGEgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQgKyBkZWx0YSxcbiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuZW5kICsgZGVsdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvblJlc2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZShkZWx0YSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09ICdzdGFydCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBNYXRoLm1pbih0aGlzLnN0YXJ0ICsgZGVsdGEsIHRoaXMuZW5kKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBNYXRoLm1heCh0aGlzLnN0YXJ0ICsgZGVsdGEsIHRoaXMuZW5kKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBNYXRoLm1pbih0aGlzLmVuZCArIGRlbHRhLCB0aGlzLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBNYXRoLm1heCh0aGlzLmVuZCArIGRlbHRhLCB0aGlzLnN0YXJ0KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFJlZ2lvbjtcbn0oKTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSZWdpb25zUGx1Z2luUGFyYW1zXG4gKiBAcHJvcGVydHkgez9ib29sZWFufSBkcmFnU2VsZWN0aW9uIEVuYWJsZSBjcmVhdGluZyByZWdpb25zIGJ5IGRyYWdnaW5nIHdpaFxuICogdGhlIG1vdXNlXG4gKiBAcHJvcGVydHkgez9SZWdpb25QYXJhbXNbXX0gcmVnaW9ucyBSZWdpb25zIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHVwb25cbiAqIGluaXRpYWxpc2F0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gc2xvcD0yIFRoZSBzZW5zaXRpdml0eSBvZiB0aGUgbW91c2UgZHJhZ2dpbmdcbiAqIEBwcm9wZXJ0eSB7P2Jvb2xlYW59IGRlZmVySW5pdCBTZXQgdG8gdHJ1ZSB0byBtYW51YWxseSBjYWxsXG4gKiBgaW5pdFBsdWdpbigncmVnaW9ucycpYFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVnaW9uUGFyYW1zXG4gKiBAZGVzYyBUaGUgcGFyYW1ldGVycyB1c2VkIHRvIGRlc2NyaWJlIGEgcmVnaW9uLlxuICogQGV4YW1wbGUgd2F2ZXN1cmZlci5hZGRSZWdpb24ocmVnaW9uUGFyYW1zKTtcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZD3ihpJyYW5kb20gVGhlIGlkIG9mIHRoZSByZWdpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzdGFydD0wIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVnaW9uIChpbiBzZWNvbmRzKS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBlbmQ9MCBUaGUgZW5kIHBvc2l0aW9uIG9mIHRoZSByZWdpb24gKGluIHNlY29uZHMpLlxuICogQHByb3BlcnR5IHs/Ym9vbGVhbn0gbG9vcCBXaGV0aGVyIHRvIGxvb3AgdGhlIHJlZ2lvbiB3aGVuIHBsYXllZCBiYWNrLlxuICogQHByb3BlcnR5IHtib29sZWFufSBkcmFnPXRydWUgQWxsb3cvZGlzc2FsbG93IGRyYWdnaW5nIHRoZSByZWdpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHJlc2l6ZT10cnVlIEFsbG93L2Rpc3NhbGxvdyByZXNpemluZyB0aGUgcmVnaW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb2xvcj0ncmdiYSgwLCAwLCAwLCAwLjEpJ10gSFRNTCBjb2xvciBjb2RlLlxuICovXG5cbi8qKlxuICogUmVnaW9ucyBhcmUgdmlzdWFsIG92ZXJsYXlzIG9uIHdhdmVmb3JtIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGxheSBhbmQgbG9vcFxuICogcG9ydGlvbnMgb2YgYXVkaW8uIFJlZ2lvbnMgY2FuIGJlIGRyYWdnZWQgYW5kIHJlc2l6ZWQuXG4gKlxuICogVmlzdWFsIGN1c3RvbWl6YXRpb24gaXMgcG9zc2libGUgdmlhIENTUyAodXNpbmcgdGhlIHNlbGVjdG9yc1xuICogYC53YXZlc3VyZmVyLXJlZ2lvbmAgYW5kIGAud2F2ZXN1cmZlci1oYW5kbGVgKS5cbiAqXG4gKiBAaW1wbGVtZW50cyB7UGx1Z2luQ2xhc3N9XG4gKiBAZXh0ZW5kcyB7T2JzZXJ2ZXJ9XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIGVzNlxuICogaW1wb3J0IFJlZ2lvbnNQbHVnaW4gZnJvbSAnd2F2ZXN1cmZlci5yZWdpb25zLmpzJztcbiAqXG4gKiAvLyBjb21tb25qc1xuICogdmFyIFJlZ2lvbnNQbHVnaW4gPSByZXF1aXJlKCd3YXZlc3VyZmVyLnJlZ2lvbnMuanMnKTtcbiAqXG4gKiAvLyBpZiB5b3UgYXJlIHVzaW5nIDxzY3JpcHQ+IHRhZ3NcbiAqIHZhciBSZWdpb25zUGx1Z2luID0gd2luZG93LldhdmVTdXJmZXIucmVnaW9ucztcbiAqXG4gKiAvLyAuLi4gaW5pdGlhbGlzaW5nIHdhdmVzdXJmZXIgd2l0aCB0aGUgcGx1Z2luXG4gKiB2YXIgd2F2ZXN1cmZlciA9IFdhdmVTdXJmZXIuY3JlYXRlKHtcbiAqICAgLy8gd2F2ZXN1cmZlciBvcHRpb25zIC4uLlxuICogICBwbHVnaW5zOiBbXG4gKiAgICAgUmVnaW9uc1BsdWdpbi5jcmVhdGUoe1xuICogICAgICAgLy8gcGx1Z2luIG9wdGlvbnMgLi4uXG4gKiAgICAgfSlcbiAqICAgXVxuICogfSk7XG4gKi9cblxuXG52YXIgUmVnaW9uc1BsdWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBfY3JlYXRlQ2xhc3MoUmVnaW9uc1BsdWdpbiwgbnVsbCwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaW9ucyBwbHVnaW4gZGVmaW5pdGlvbiBmYWN0b3J5XG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSB1c2VkIHRvIGNyZWF0ZSBhIHBsdWdpbiBkZWZpbml0aW9uIHdoaWNoIGNhbiBiZVxuICAgICAgICAgKiB1c2VkIGJ5IHdhdmVzdXJmZXIgdG8gY29ycmVjdGx5IGluc3RhbnRpYXRlIHRoZSBwbHVnaW4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7UmVnaW9uc1BsdWdpblBhcmFtc30gcGFyYW1zIHBhcmFtZXRlcnMgdXNlIHRvIGluaXRpYWxpc2UgdGhlIHBsdWdpblxuICAgICAgICAgKiBAcmV0dXJuIHtQbHVnaW5EZWZpbml0aW9ufSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBwbHVnaW5cbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdyZWdpb25zJyxcbiAgICAgICAgICAgICAgICBkZWZlckluaXQ6IHBhcmFtcyAmJiBwYXJhbXMuZGVmZXJJbml0ID8gcGFyYW1zLmRlZmVySW5pdCA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgICAgICAgIHN0YXRpY1Byb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRSZWdpb25zOiBmdW5jdGlvbiBpbml0UmVnaW9ucygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRlZCBpbml0UmVnaW9ucyEgVXNlIHdhdmVzdXJmZXIuaW5pdFBsdWdpbnMoXCJyZWdpb25zXCIpIGluc3RlYWQhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRQbHVnaW4oJ3JlZ2lvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWRkUmVnaW9uOiBmdW5jdGlvbiBhZGRSZWdpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpc2VkUGx1Z2luTGlzdC5yZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UGx1Z2luKCdyZWdpb25zJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWdpb25zLmFkZChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJSZWdpb25zOiBmdW5jdGlvbiBjbGVhclJlZ2lvbnMoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvbnMgJiYgdGhpcy5yZWdpb25zLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZURyYWdTZWxlY3Rpb246IGZ1bmN0aW9uIGVuYWJsZURyYWdTZWxlY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpc2VkUGx1Z2luTGlzdC5yZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UGx1Z2luKCdyZWdpb25zJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvbnMuZW5hYmxlRHJhZ1NlbGVjdGlvbihvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZURyYWdTZWxlY3Rpb246IGZ1bmN0aW9uIGRpc2FibGVEcmFnU2VsZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25zLmRpc2FibGVEcmFnU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluc3RhbmNlOiBSZWdpb25zUGx1Z2luXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgZnVuY3Rpb24gUmVnaW9uc1BsdWdpbihwYXJhbXMsIHdzKSB7XG4gICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpb25zUGx1Z2luKTtcblxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy53YXZlc3VyZmVyID0gd3M7XG4gICAgICAgIHRoaXMudXRpbCA9IHdzLnV0aWw7XG5cbiAgICAgICAgLy8gdHVybiB0aGUgcGx1Z2luIGluc3RhbmNlIGludG8gYW4gb2JzZXJ2ZXJcbiAgICAgICAgdmFyIG9ic2VydmVyUHJvdG90eXBlS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMudXRpbC5PYnNlcnZlci5wcm90b3R5cGUpO1xuICAgICAgICBvYnNlcnZlclByb3RvdHlwZUtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBSZWdpb24ucHJvdG90eXBlW2tleV0gPSBfdGhpczUudXRpbC5PYnNlcnZlci5wcm90b3R5cGVba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMud2F2ZXN1cmZlci5SZWdpb24gPSBSZWdpb247XG5cbiAgICAgICAgLy8gSWQtYmFzZWQgaGFzaCBvZiByZWdpb25zLlxuICAgICAgICB0aGlzLmxpc3QgPSB7fTtcbiAgICAgICAgdGhpcy5fb25SZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzNS53cmFwcGVyID0gX3RoaXM1LndhdmVzdXJmZXIuZHJhd2VyLndyYXBwZXI7XG4gICAgICAgICAgICBpZiAoX3RoaXM1LnBhcmFtcy5yZWdpb25zKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM1LnBhcmFtcy5yZWdpb25zLmZvckVhY2goZnVuY3Rpb24gKHJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUuYWRkKHJlZ2lvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXM1LnBhcmFtcy5kcmFnU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM1LmVuYWJsZURyYWdTZWxlY3Rpb24oX3RoaXM1LnBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFJlZ2lvbnNQbHVnaW4sIFt7XG4gICAgICAgIGtleTogJ2luaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdzIGlzIHJlYWR5XG4gICAgICAgICAgICBpZiAodGhpcy53YXZlc3VyZmVyLmlzUmVhZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vblJlYWR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIub24oJ3JlYWR5JywgdGhpcy5fb25SZWFkeSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIHRoaXMud2F2ZXN1cmZlci51bigncmVhZHknLCB0aGlzLl9vblJlYWR5KTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZURyYWdTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBBZGQgYSByZWdpb24uICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FkZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQocGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHJlZ2lvbiA9IG5ldyB0aGlzLndhdmVzdXJmZXIuUmVnaW9uKHBhcmFtcywgdGhpcy53YXZlc3VyZmVyKTtcblxuICAgICAgICAgICAgdGhpcy5saXN0W3JlZ2lvbi5pZF0gPSByZWdpb247XG5cbiAgICAgICAgICAgIHJlZ2lvbi5vbigncmVtb3ZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpczYubGlzdFtyZWdpb24uaWRdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZWdpb247XG4gICAgICAgIH1cblxuICAgICAgICAvKiBSZW1vdmUgYWxsIHJlZ2lvbnMuICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NsZWFyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMubGlzdCkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpczcubGlzdFtpZF0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZW5hYmxlRHJhZ1NlbGVjdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGVEcmFnU2VsZWN0aW9uKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBzbG9wID0gcGFyYW1zLnNsb3AgfHwgMjtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLndhdmVzdXJmZXIuZHJhd2VyLmNvbnRhaW5lcjtcbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSBwYXJhbXMuc2Nyb2xsICE9PSBmYWxzZSAmJiB0aGlzLndhdmVzdXJmZXIucGFyYW1zLnNjcm9sbFBhcmVudDtcbiAgICAgICAgICAgIHZhciBzY3JvbGxTcGVlZCA9IHBhcmFtcy5zY3JvbGxTcGVlZCB8fCAxO1xuICAgICAgICAgICAgdmFyIHNjcm9sbFRocmVzaG9sZCA9IHBhcmFtcy5zY3JvbGxUaHJlc2hvbGQgfHwgMTA7XG4gICAgICAgICAgICB2YXIgZHJhZyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMud2F2ZXN1cmZlci5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgdmFyIG1heFNjcm9sbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciByZWdpb24gPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgdG91Y2hJZCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBweE1vdmUgPSAwO1xuICAgICAgICAgICAgdmFyIHNjcm9sbERpcmVjdGlvbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyUmVjdCA9IHZvaWQgMDtcblxuICAgICAgICAgICAgLy8gU2Nyb2xsIHdoZW4gdGhlIHVzZXIgaXMgZHJhZ2dpbmcgd2l0aGluIHRoZSB0aHJlc2hvbGRcbiAgICAgICAgICAgIHZhciBlZGdlU2Nyb2xsID0gZnVuY3Rpb24gZWRnZVNjcm9sbChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdpb24gfHwgIXNjcm9sbERpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHNjcm9sbCBwb3NpdGlvblxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gX3RoaXM4LndyYXBwZXIuc2Nyb2xsTGVmdCArIHNjcm9sbFNwZWVkICogc2Nyb2xsRGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIF90aGlzOC53cmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0ID0gTWF0aC5taW4obWF4U2Nyb2xsLCBNYXRoLm1heCgwLCBzY3JvbGxMZWZ0KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmFuZ2VcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gX3RoaXM4LndhdmVzdXJmZXIuZHJhd2VyLmhhbmRsZUV2ZW50KGUpO1xuICAgICAgICAgICAgICAgIHJlZ2lvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBzdGFydDogTWF0aC5taW4oZW5kICogZHVyYXRpb24sIHN0YXJ0ICogZHVyYXRpb24pLFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IE1hdGgubWF4KGVuZCAqIGR1cmF0aW9uLCBzdGFydCAqIGR1cmF0aW9uKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBtb3JlIHRvIHNjcm9sbCBhbmQgcmVwZWF0XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbExlZnQgPCBtYXhTY3JvbGwgJiYgc2Nyb2xsTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlU2Nyb2xsKGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZXZlbnREb3duID0gZnVuY3Rpb24gZXZlbnREb3duKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZHVyYXRpb24gPSBfdGhpczgud2F2ZXN1cmZlci5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRvdWNoSWQgPSBlLnRhcmdldFRvdWNoZXMgPyBlLnRhcmdldFRvdWNoZXNbMF0uaWRlbnRpZmllciA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBmb3Igc2Nyb2xsIGNhbGN1bGF0aW9uc1xuICAgICAgICAgICAgICAgIG1heFNjcm9sbCA9IF90aGlzOC53cmFwcGVyLnNjcm9sbFdpZHRoIC0gX3RoaXM4LndyYXBwZXIuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgd3JhcHBlclJlY3QgPSBfdGhpczgud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIGRyYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gX3RoaXM4LndhdmVzdXJmZXIuZHJhd2VyLmhhbmRsZUV2ZW50KGUsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJlZ2lvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZXZlbnREb3duKTtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZlbnREb3duKTtcbiAgICAgICAgICAgIHRoaXMub24oJ2Rpc2FibGUtZHJhZy1zZWxlY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM4LndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGV2ZW50RG93bik7XG4gICAgICAgICAgICAgICAgX3RoaXM4LndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZXZlbnREb3duKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgZXZlbnRVcCA9IGZ1bmN0aW9uIGV2ZW50VXAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRyYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBweE1vdmUgPSAwO1xuICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbi5maXJlRXZlbnQoJ3VwZGF0ZS1lbmQnLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LndhdmVzdXJmZXIuZmlyZUV2ZW50KCdyZWdpb24tdXBkYXRlLWVuZCcsIHJlZ2lvbiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVnaW9uID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGV2ZW50VXApO1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZXZlbnRVcCk7XG4gICAgICAgICAgICB0aGlzLm9uKCdkaXNhYmxlLWRyYWctc2VsZWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzOC53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZXZlbnRVcCk7XG4gICAgICAgICAgICAgICAgX3RoaXM4LndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGV2ZW50VXApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBldmVudE1vdmUgPSBmdW5jdGlvbiBldmVudE1vdmUoZSkge1xuICAgICAgICAgICAgICAgIGlmICghZHJhZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgrK3B4TW92ZSA8PSBzbG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXNbMF0uaWRlbnRpZmllciAhPSB0b3VjaElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICByZWdpb24gPSBfdGhpczguYWRkKHBhcmFtcyB8fCB7fSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IF90aGlzOC53YXZlc3VyZmVyLmRyYXdlci5oYW5kbGVFdmVudChlKTtcbiAgICAgICAgICAgICAgICByZWdpb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IE1hdGgubWluKGVuZCAqIGR1cmF0aW9uLCBzdGFydCAqIGR1cmF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBNYXRoLm1heChlbmQgKiBkdXJhdGlvbiwgc3RhcnQgKiBkdXJhdGlvbilcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIElmIHNjcm9sbGluZyBpcyBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbCAmJiBjb250YWluZXIuY2xpZW50V2lkdGggPCBfdGhpczgud3JhcHBlci5zY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aHJlc2hvbGQgYmFzZWQgb24gbW91c2VcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggLSB3cmFwcGVyUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoeCA8PSBzY3JvbGxUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHggPj0gd3JhcHBlclJlY3QucmlnaHQgLSBzY3JvbGxUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiAmJiBlZGdlU2Nyb2xsKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZlbnRNb3ZlKTtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBldmVudE1vdmUpO1xuICAgICAgICAgICAgdGhpcy5vbignZGlzYWJsZS1kcmFnLXNlbGVjdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczgud3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBldmVudE1vdmUpO1xuICAgICAgICAgICAgICAgIF90aGlzOC53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGV2ZW50TW92ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGlzYWJsZURyYWdTZWxlY3Rpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZURyYWdTZWxlY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgnZGlzYWJsZS1kcmFnLXNlbGVjdGlvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogR2V0IGN1cnJlbnQgcmVnaW9uXG4gICAgICAgICAqICBUaGUgc21hbGxlc3QgcmVnaW9uIHRoYXQgY29udGFpbnMgdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgICAgICogIElmIHNldmVyYWwgc3VjaCByZWdpb25zIGV4aXN0LCB3ZSB0YWtlIHRoZSBmaXJzdC5cbiAgICAgICAgICogIFJldHVybiBudWxsIGlmIG5vbmUgZXhpc3QuICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEN1cnJlbnRSZWdpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudFJlZ2lvbigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgdGltZSA9IHRoaXMud2F2ZXN1cmZlci5nZXRDdXJyZW50VGltZSgpO1xuICAgICAgICAgICAgdmFyIG1pbiA9IG51bGw7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmxpc3QpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1ciA9IF90aGlzOS5saXN0W2lkXTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyLnN0YXJ0IDw9IHRpbWUgJiYgY3VyLmVuZCA+PSB0aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWluIHx8IGN1ci5lbmQgLSBjdXIuc3RhcnQgPCBtaW4uZW5kIC0gbWluLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBjdXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG1pbjtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBSZWdpb25zUGx1Z2luO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZWdpb25zUGx1Z2luO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pXG5cbi8qKioqKiovIH0pO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXZlc3VyZmVyLnJlZ2lvbnMuanMubWFwIiwiLyohXG4gKiB3YXZlc3VyZmVyLmpzIDIuMC40IChGcmkgTWFyIDAyIDIwMTggMTg6Mjk6MjYgR01ULTA4MDAgKFBTVCkpXG4gKiBodHRwczovL2dpdGh1Yi5jb20va2F0c3BhdWdoL3dhdmVzdXJmZXIuanNcbiAqIEBsaWNlbnNlIEJTRC0zLUNsYXVzZVxuICovXG4oZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcInRpbGVkcmVuZGVyZXJcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1widGlsZWRyZW5kZXJlclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJXYXZlU3VyZmVyXCJdID0gcm9vdFtcIldhdmVTdXJmZXJcIl0gfHwge30sIHJvb3RbXCJXYXZlU3VyZmVyXCJdW1widGlsZWRyZW5kZXJlclwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwibG9jYWxob3N0OjgwODAvZGlzdC9wbHVnaW4vXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2FqYXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdhamF4Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWpheCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZ2V0SWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdnZXRJZCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldElkKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9tYXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdtYXgnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXgpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX21pbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ21pbicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21pbikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfb2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09ic2VydmVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JzZXJ2ZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2V4dGVuZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2V4dGVuZCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc3R5bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdzdHlsZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0eWxlKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlcXVlc3RBbmltYXRpb25GcmFtZSkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdmcmFtZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZyYW1lKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9kZWJvdW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2RlYm91bmNlJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVib3VuY2UpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3ByZXZlbnRDbGljayA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3ByZXZlbnRDbGljaycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByZXZlbnRDbGljaykuZGVmYXVsdDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGlzdGVuZXJEZXNjcmlwdG9yXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnRcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFja1xuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gdW4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lclxuICovXG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3NcbiAqL1xudmFyIE9ic2VydmVyID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIE9ic2VydmVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gT2JzZXJ2ZXIoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnNlcnZlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0b2RvIEluaXRpYWxpc2UgdGhlIGhhbmRsZXJzIGhlcmUgYWxyZWFkeSBhbmQgcmVtb3ZlIHRoZSBjb25kaXRpb25hbFxuICAgICAgICAgKiBhc3NpZ25tZW50IGluIGBvbigpYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhIGhhbmRsZXIgZnVuY3Rpb24gZm9yIGFuIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGV2ZW50IGlzIGZpcmVkXG4gICAgICogQHJldHVybiB7TGlzdGVuZXJEZXNjcmlwdG9yfVxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoT2JzZXJ2ZXIsIFt7XG4gICAgICAgIGtleTogXCJvblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGZuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhbmRsZXJzLnB1c2goZm4pO1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gYW4gZXZlbnQgZGVzY3JpcHRvclxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZm4sXG4gICAgICAgICAgICAgICAgdW46IGZ1bmN0aW9uIHVuKGUsIGZuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51bihlLCBmbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgYW4gZXZlbnQgaGFuZGxlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50IHRoZSBsaXN0ZW5lciB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiByZW1vdmVkIGxpc3RlbnMgdG9cbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ1blwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdW4oZXZlbnQsIGZuKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gaGFuZGxlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyc1tpXSA9PSBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSBhbGwgZXZlbnQgaGFuZGxlcnMuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwidW5BbGxcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuQWxsKCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoIGEgaGFuZGxlciB0byBhbiBldmVudC4gVGhlIGhhbmRsZXIgaXMgZXhlY3V0ZWQgYXQgbW9zdCBvbmNlIHBlclxuICAgICAgICAgKiBldmVudCB0eXBlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBjYWxsYmFjayB0aGF0IGlzIG9ubHkgdG8gYmUgY2FsbGVkIG9uY2VcbiAgICAgICAgICogQHJldHVybiB7TGlzdGVuZXJEZXNjcmlwdG9yfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm9uY2VcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBmbigpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qICBlc2xpbnQtZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMgKi9cbiAgICAgICAgICAgICAgICBoYW5kbGVyLmFwcGx5KF90aGlzMiwgYXJncyk7XG4gICAgICAgICAgICAgICAgLyogIGVzbGludC1lbmFibGUgbm8taW52YWxpZC10aGlzICovXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi51bihldmVudCwgZm4pO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50LCBmbik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFudWFsbHkgZmlyZSBhbiBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHRvIGZpcmUgbWFudWFsbHlcbiAgICAgICAgICogQHBhcmFtIHsuLi5hbnl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB3aXRoIHdoaWNoIHRvIGNhbGwgdGhlIGxpc3RlbmVyc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImZpcmVFdmVudFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmlyZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF07XG4gICAgICAgICAgICBoYW5kbGVycyAmJiBoYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgIGZuLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBPYnNlcnZlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gT2JzZXJ2ZXI7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmdW5jdGlvbiBmb3IgdGhlIGJyb3dzZXIsIG9yIGEgc2hpbSB3aXRoXG4gKiBzZXRUaW1lb3V0IGlmIG5vbmUgaXMgZm91bmRcbiAqXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZXhwb3J0cy5kZWZhdWx0ID0gKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbiAoY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTtcbn0pLmJpbmQod2luZG93KTtcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSksXG4vKiAzICovLFxuLyogNCAqLyxcbi8qIDUgKi8sXG4vKiA2ICovLFxuLyogNyAqLyxcbi8qIDggKi8sXG4vKiA5ICovLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy50aWxlZERyYXdCdWZmZXIgPSBleHBvcnRzLlRpbGVkUmVuZGVyZXIgPSB1bmRlZmluZWQ7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZHJhd2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbnZhciBfZHJhd2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RyYXdlcik7XG5cbnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciB1dGlsID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ2FudmFzRW50cnlcbiAqIEBwcml2YXRlXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSB3YXZlIFRoZSB3YXZlIG5vZGVcbiAqIEBwcm9wZXJ0eSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSB3YXZlQ3R4IFRoZSBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHRcbiAqIEBwcm9wZXJ0eSB7P0hUTUxFbGVtZW50fSBwcm9ncmVzcyBUaGUgcHJvZ3Jlc3Mgd2F2ZSBub2RlXG4gKiBAcHJvcGVydHkgez9DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IHByb2dyZXNzQ3R4IFRoZSBwcm9ncmVzcyB3YXZlIGNhbnZhc1xuICogcmVuZGVyaW5nIGNvbnRleHRcbiAqIEBwcm9wZXJ0eSB7P251bWJlcn0gc3RhcnQgU3RhcnQgb2YgdGhlIGFyZWEgdGhlIGNhbnZhcyBzaG91bGQgcmVuZGVyLCBiZXR3ZWVuIDAgYW5kIDFcbiAqIEBwcm9wZXJ0eSB7P251bWJlcn0gZW5kIEVuZCBvZiB0aGUgYXJlYSB0aGUgY2FudmFzIHNob3VsZCByZW5kZXIsIGJldHdlZW4gMCBhbmQgMVxuICovXG5cbi8qKlxuICogVGlsZWRSZW5kZXJlciBmb3Igd2F2ZXN1cmZlci4gQmFzZWQgb24gdGhlIE11bHRpQ2FudmFzIHJlbmRlcmVyIGJ1bmRsZWQgd2l0aCBXYXZlU3VyZmVyLlxuICogVGlsZWRSZW5kZXJlciB3b3JrcyB3aXRoIGEgcG9vbCBvZiBDYW52YXMgb2JqZWN0cywgYXV0b21hdGljYWxseSBkcmF3aW5nIGFuZCBwb3NpdGlvbmluZyB0aGVtXG4gKiBhcyBuZWVkZWQuXG4gKi9cblxudmFyIFRpbGVkUmVuZGVyZXIgPSBmdW5jdGlvbiAoX0RyYXdlcikge1xuICAgIF9pbmhlcml0cyhUaWxlZFJlbmRlcmVyLCBfRHJhd2VyKTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgY29udGFpbmVyIG5vZGUgb2YgdGhlIHdhdmVzdXJmZXIgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1dhdmVzdXJmZXJQYXJhbXN9IHBhcmFtcyBUaGUgd2F2ZXN1cmZlciBpbml0aWFsaXNhdGlvbiBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZWRSZW5kZXJlcihjb250YWluZXIsIHBhcmFtcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGlsZWRSZW5kZXJlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGlsZWRSZW5kZXJlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRpbGVkUmVuZGVyZXIpKS5jYWxsKHRoaXMsIGNvbnRhaW5lciwgcGFyYW1zKSk7XG5cbiAgICAgICAgX3RoaXMubWF4Q2FudmFzV2lkdGggPSBwYXJhbXMubWF4Q2FudmFzV2lkdGg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4Q2FudmFzRWxlbWVudFdpZHRoID0gTWF0aC5yb3VuZChwYXJhbXMubWF4Q2FudmFzV2lkdGggLyBwYXJhbXMucGl4ZWxSYXRpbyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgb3Igbm90IHRoZSBwcm9ncmVzcyB3YXZlIGlzIHJlbmRlcmVyZWQuIElmIHRoZSBgd2F2ZUNvbG9yYFxuICAgICAgICAgKiBhbmQgYHByb2dyZXNzQ29sb3JgIGFyZSB0aGUgc2FtZSBjb2xvdXIgaXQgaXMgbm90LlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhhc1Byb2dyZXNzQ2FudmFzID0gcGFyYW1zLndhdmVDb2xvciAhPSBwYXJhbXMucHJvZ3Jlc3NDb2xvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oYWxmUGl4ZWwgPSAwLjUgLyBwYXJhbXMucGl4ZWxSYXRpbztcbiAgICAgICAgLy8gVXNlIHRpbGVkIHJlbmRlcmluZyBpZiB5b3UgbmVlZCBtb3JlIHRoYW4gY2FudmFzTGltaXQgY2FudmFzZXNcbiAgICAgICAgX3RoaXMuY2FudmFzTGltaXQgPSBwYXJhbXMuY2FudmFzTGltaXQgfHwgNjtcbiAgICAgICAgLy8gVXNlIHRoZSBzYW1wbGUtZHJhd2VyIGlmIHRoZSBtaW5QeFBlclNlYyBpcyA+PSBzYW1wbGVTcGVlZCwgb3RoZXJ3aXNlIHVzZSBwZWFrcy9iYXJzLlxuICAgICAgICBfdGhpcy5zYW1wbGVTcGVlZCA9IHBhcmFtcy5zYW1wbGVTcGVlZCB8fCAyNTYwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FudmFzZXMgPSBbXTtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLnByb2dyZXNzV2F2ZSA9IG51bGw7XG4gICAgICAgIF90aGlzLnRpbGVkUmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXNlIHRoZSBkcmF3ZXJcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKFRpbGVkUmVuZGVyZXIsIFt7XG4gICAgICAgIGtleTogJ2luaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlV3JhcHBlcigpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVFbGVtZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgY2FudmFzIGVsZW1lbnRzIGFuZCBzdHlsZSB0aGVtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVFbGVtZW50cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFbGVtZW50cygpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NXYXZlID0gdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuc3R5bGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnd2F2ZScpLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgekluZGV4OiAzLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcwJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICAgICAgICAgICAgYm9yZGVyUmlnaHRTdHlsZTogJ3NvbGlkJyxcbiAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgdGhpcy5hZGRDYW52YXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGN1cnNvciBzdHlsZSBmcm9tIHBhcmFtcy5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZUN1cnNvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVDdXJzb3IoKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMucHJvZ3Jlc3NXYXZlLCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyUmlnaHRXaWR0aDogdGhpcy5wYXJhbXMuY3Vyc29yV2lkdGggKyAncHgnLFxuICAgICAgICAgICAgICAgIGJvcmRlclJpZ2h0Q29sb3I6IHRoaXMucGFyYW1zLmN1cnNvckNvbG9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWNlbnRlciB0aGUgdmlld3BvcnQgb24gYSBwb3NpdGlvbiwgZWl0aGVyIHNjcm9sbCB0aGVyZSBpbW1lZGlhdGVseSBvclxuICAgICAgICAgKiBpbiBzdGVwcyBvZiA1IHBpeGVsc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gWC1vZmZzZXQgaW4gcGl4ZWxzXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW1tZWRpYXRlIFNldCB0byB0cnVlIHRvIGltbWVkaWF0ZWx5IHNjcm9sbCBzb21ld2hlcmVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2VudGVyT25Qb3NpdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNlbnRlck9uUG9zaXRpb24ocG9zaXRpb24sIGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSB0aGlzLndyYXBwZXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIHZhciBoYWxmID0gfn4odGhpcy53cmFwcGVyLmNsaWVudFdpZHRoIC8gMik7XG4gICAgICAgICAgICB2YXIgbWF4U2Nyb2xsID0gdGhpcy53cmFwcGVyLnNjcm9sbFdpZHRoIC0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHBvc2l0aW9uIC0gaGFsZjtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSB0YXJnZXQgLSBzY3JvbGxMZWZ0O1xuXG4gICAgICAgICAgICBpZiAobWF4U2Nyb2xsID09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIGNvbnRpbnVlIGlmIHNjcm9sbGJhciBpcyBub3QgdGhlcmVcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZSBjdXJzb3IgaXMgY3VycmVudGx5IHZpc2libGVcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgc2Nyb2xsIHZlbG9jaXR5IGlzIG5vdCB0b28gaGlnaC5cbiAgICAgICAgICAgIGlmICghaW1tZWRpYXRlICYmIC1oYWxmIDw9IG9mZnNldCAmJiBvZmZzZXQgPCBoYWxmICYmIHRoaXMucGFyYW1zLm1pblB4UGVyU2VjIDwgNDAwKSB7XG4gICAgICAgICAgICAgICAgLy8gd2UnbGwgbGltaXQgdGhlIFwicmUtY2VudGVyXCIgcmF0ZS5cbiAgICAgICAgICAgICAgICB2YXIgcmF0ZSA9IDU7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gTWF0aC5tYXgoLXJhdGUsIE1hdGgubWluKHJhdGUsIG9mZnNldCkpO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHNjcm9sbExlZnQgKyBvZmZzZXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGxpbWl0IHRhcmdldCB0byB2YWxpZCByYW5nZSAoMCB0byBtYXhTY3JvbGwpXG4gICAgICAgICAgICB0YXJnZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXhTY3JvbGwsIHRhcmdldCkpO1xuICAgICAgICAgICAgLy8gbm8gdXNlIGF0dGVtcHRpbmcgdG8gc2Nyb2xsIGlmIHdlJ3JlIG5vdCBtb3ZpbmdcbiAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gc2Nyb2xsTGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5zY3JvbGxMZWZ0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkanVzdCB0byB0aGUgdXBkYXRlZCBzaXplIGJ5IGFkZGluZyBvciByZW1vdmluZyBjYW52YXNlc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlU2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTaXplKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciB0b3RhbFdpZHRoID0gTWF0aC5yb3VuZCh0aGlzLndpZHRoIC8gdGhpcy5wYXJhbXMucGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICB2YXIgcmVxdWlyZWRDYW52YXNlcyA9IE1hdGguY2VpbCh0b3RhbFdpZHRoIC8gdGhpcy5tYXhDYW52YXNFbGVtZW50V2lkdGgpO1xuICAgICAgICAgICAgdmFyIGNhbnZhc0NvdW50ID0gdGhpcy50aWxlZFJlbmRlcmluZyAmJiB0aGlzLmNhbnZhc0xpbWl0IDwgcmVxdWlyZWRDYW52YXNlcyA/IHRoaXMuY2FudmFzTGltaXQgOiByZXF1aXJlZENhbnZhc2VzO1xuXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5jYW52YXNlcy5sZW5ndGggPCBjYW52YXNDb3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2FudmFzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmNhbnZhc2VzLmxlbmd0aCA+IGNhbnZhc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW52YXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jYW52YXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICAgICAgICAgICAgICAgIC8vICByZWZsb3cgY2FudmFzZXMgaW4gb3JkZXJcbiAgICAgICAgICAgICAgICB2YXIgbGVmdE9mZnNldCA9IF90aGlzMi5tYXhDYW52YXNFbGVtZW50V2lkdGggKiBpO1xuICAgICAgICAgICAgICAgIC8vIEFkZCBzb21lIG92ZXJsYXAgdG8gcHJldmVudCB2ZXJ0aWNhbCB3aGl0ZSBzdHJpcGVzLCBrZWVwIHRoZSB3aWR0aCBldmVuIGZvciBzaW1wbGljaXR5LlxuICAgICAgICAgICAgICAgIHZhciBjYW52YXNXaWR0aCA9IF90aGlzMi5tYXhDYW52YXNXaWR0aCArIDIgKiBNYXRoLmNlaWwoX3RoaXMyLnBhcmFtcy5waXhlbFJhdGlvIC8gMik7XG5cbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi50aWxlZFJlbmRlcmluZyAmJiBpID09PSBfdGhpczIuY2FudmFzZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gX3RoaXMyLmNhbnZhc2VzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc1dpZHRoID0gX3RoaXMyLndpZHRoIC0gX3RoaXMyLm1heENhbnZhc1dpZHRoICogKF90aGlzMi5jYW52YXNlcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90aGlzMi51cGRhdGVEaW1lbnNpb25zKGVudHJ5LCBjYW52YXNXaWR0aCwgX3RoaXMyLmhlaWdodCwgbGVmdE9mZnNldCwgX3RoaXMyLm1heENhbnZhc1dpZHRoICogaSk7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmNsZWFyV2F2ZUZvckVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBhIGNhbnZhcyB0byB0aGUgY2FudmFzIGxpc3RcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FkZENhbnZhcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDYW52YXMoKSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7fTtcbiAgICAgICAgICAgIHZhciBsZWZ0T2Zmc2V0ID0gdGhpcy5tYXhDYW52YXNFbGVtZW50V2lkdGggKiB0aGlzLmNhbnZhc2VzLmxlbmd0aDtcblxuICAgICAgICAgICAgZW50cnkud2F2ZSA9IHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgekluZGV4OiAyLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRPZmZzZXQgKyAncHgnLFxuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBlbnRyeS53YXZlQ3R4ID0gZW50cnkud2F2ZS5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNQcm9ncmVzc0NhbnZhcykge1xuICAgICAgICAgICAgICAgIGVudHJ5LnByb2dyZXNzID0gdGhpcy5wcm9ncmVzc1dhdmUuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSwge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbGVmdE9mZnNldCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJ1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzc0N0eCA9IGVudHJ5LnByb2dyZXNzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY2FudmFzZXMucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUG9wIG9uZSBjYW52YXMgZnJvbSB0aGUgbGlzdFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVtb3ZlQ2FudmFzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNhbnZhcygpIHtcbiAgICAgICAgICAgIHZhciBsYXN0RW50cnkgPSB0aGlzLmNhbnZhc2VzLnBvcCgpO1xuICAgICAgICAgICAgbGFzdEVudHJ5LndhdmUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsYXN0RW50cnkud2F2ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNQcm9ncmVzc0NhbnZhcykge1xuICAgICAgICAgICAgICAgIGxhc3RFbnRyeS5wcm9ncmVzcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGxhc3RFbnRyeS5wcm9ncmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIHRoZSBkaW1lbnNpb25zIG9mIGEgY2FudmFzIGVsZW1lbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtDYW52YXNFbnRyeX0gZW50cnlcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFRoZSBuZXcgd2lkdGggb2YgdGhlIGVsZW1lbnQgaW4gY2FudmFzIGNvb3JkaW5hdGVzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgVGhlIG5ldyBoZWlnaHQgb2YgdGhlIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQgb2YgdGhlIGVsZW1lbnQgaW4gY3NzIGNvb3JkaW5hdGVzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0Q2FuWCBPZmZzZXQgb2YgdGhlIGVsZW1lbnQgaW4gY2FudmFzIGNvb3JkaW5hdGVzLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlRGltZW5zaW9ucycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaW1lbnNpb25zKGVudHJ5LCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXQsIGxlZnRDYW5YKSB7XG4gICAgICAgICAgICB2YXIgdG90YWxXaWR0aCA9IE1hdGgucm91bmQodGhpcy53aWR0aCAvIHRoaXMucGFyYW1zLnBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRXaWR0aCA9IE1hdGgucm91bmQod2lkdGggLyB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKTtcbiAgICAgICAgICAgIC8vIFdoZXJlIHRoZSBjYW52YXMgc3RhcnRzIGFuZCBlbmRzIGluIHRoZSB3YXZlZm9ybSwgcmVwcmVzZW50ZWQgYXMgYSBkZWNpbWFsIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgICAgICAgIGVudHJ5LnN0YXJ0ID0gb2Zmc2V0IC8gdG90YWxXaWR0aCB8fCAwO1xuICAgICAgICAgICAgLy8gZW50cnkuc3RhcnQgPSBlbnRyeS53YXZlQ3R4LmNhbnZhcy5vZmZzZXRMZWZ0IC8gdG90YWxXaWR0aCB8fCAwO1xuICAgICAgICAgICAgZW50cnkuZW5kID0gZW50cnkuc3RhcnQgKyBlbGVtZW50V2lkdGggLyB0b3RhbFdpZHRoO1xuICAgICAgICAgICAgZW50cnkubGVmdFggPSBsZWZ0Q2FuWDtcbiAgICAgICAgICAgIGVudHJ5LndhdmVDdHguY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBlbnRyeS53YXZlQ3R4LmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnN0eWxlKGVudHJ5LndhdmVDdHguY2FudmFzLCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnRXaWR0aCArICdweCcsXG4gICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0ICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy5wcm9ncmVzc1dhdmUsIHsgZGlzcGxheTogJ2Jsb2NrJyB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzc0N0eC5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzc0N0eC5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUoZW50cnkucHJvZ3Jlc3NDdHguY2FudmFzLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50V2lkdGggKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQgKyAncHgnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSA8ZGl2PiB0byBob2xkIG9wZW5cbiAgICAgICAgICAgIGlmICh0aGlzLnRpbGVkUmVuZGVyaW5nICYmICF0aGlzLnNwYWNlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3BhY2VyID0gdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuc3R5bGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdzcGFjZXJkaXYnLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiAyLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogJzFweCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMXB4JyxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdG90YWxXaWR0aCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zcGFjZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMuc3BhY2VyLCB7IGxlZnQ6IHRvdGFsV2lkdGggKyAncHgnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGVhciB0aGUgd2hvbGUgd2F2ZWZvcm1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NsZWFyV2F2ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcldhdmUoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5jYW52YXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuY2xlYXJXYXZlRm9yRW50cnkoZW50cnkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYXIgb25lIGNhbnZhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge0NhbnZhc0VudHJ5fSBlbnRyeVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2xlYXJXYXZlRm9yRW50cnknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJXYXZlRm9yRW50cnkoZW50cnkpIHtcbiAgICAgICAgICAgIGVudHJ5LndhdmVDdHguY2xlYXJSZWN0KDAsIDAsIGVudHJ5LndhdmVDdHguY2FudmFzLndpZHRoLCBlbnRyeS53YXZlQ3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzc0N0eC5jbGVhclJlY3QoMCwgMCwgZW50cnkucHJvZ3Jlc3NDdHguY2FudmFzLndpZHRoLCBlbnRyeS5wcm9ncmVzc0N0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEcmF3IHBlYWtzIG9uIHRoZSAoZmlyc3QpIGNhbnZhc1xuICAgICAgICAgKiAoY29udHJvbCBjb21lcyB0aHJ1IGhlcmUgdmlhIHRoZSBtaW5pbWFwIHBsdWdpbiBvciB3aGVuIGNsZWFyaW5nIHRoZSB3YXZlZm9ybSkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW118bnVtYmVyW11bXX0gcGVha3MgQ2FuIGFsc28gYmUgYW4gYXJyYXkgb2YgYXJyYXlzIGZvciBzcGxpdCBjaGFubmVsXG4gICAgICAgICAqIHJlbmRlcmluZ1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIFRoZSB3aWR0aCBvZiB0aGUgYXJlYSB0aGF0IHNob3VsZCBiZSBkcmF3blxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyZWEgdGhhdFxuICAgICAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgeC1vZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgYXJlYSB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiByZW5kZXJlZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd1BlYWtzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdQZWFrcyhwZWFrcywgbGVuZ3RoLCBzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2V0V2lkdGgobGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJXYXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5iYXJXaWR0aCA/IHRoaXMuZHJhd0JhcnMocGVha3MsIDAsIHN0YXJ0LCBlbmQsIHRoaXMuY2FudmFzZXNbMF0pIDogdGhpcy5kcmF3V2F2ZShwZWFrcywgMCwgc3RhcnQsIGVuZCwgdGhpcy5jYW52YXNlc1swXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBhIHdhdmVmb3JtIHdpdGggYmFyc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIENhbiBhbHNvIGJlIGFuIGFycmF5IG9mIGFycmF5cyBmb3Igc3BsaXQgY2hhbm5lbFxuICAgICAgICAgKiByZW5kZXJpbmdcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxJbmRleCBUaGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgY2hhbm5lbC4gTm9ybWFsbHlcbiAgICAgICAgICogc2hvdWxkIGJlIDAuIE11c3QgYmUgYW4gaW50ZWdlci5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSB4LW9mZnNldCBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBlbmQgb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmVcbiAgICAgICAgICogcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIChjYW52YXMpIHRoZSBjYW52YXMgdG8gZHJhdyB0aGUgd2F2ZSBvbixcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RyYXdCYXJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdCYXJzKHBlYWtzLCBjaGFubmVsSW5kZXgsIHN0YXJ0LCBlbmQsIGNhbnZhcykge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMucHJlcGFyZURyYXcocGVha3MsIGNoYW5uZWxJbmRleCwgc3RhcnQsIGVuZCwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWJzbWF4ID0gX3JlZi5hYnNtYXgsXG4gICAgICAgICAgICAgICAgICAgIGhhc01pblZhbHMgPSBfcmVmLmhhc01pblZhbHMsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IF9yZWYuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRZID0gX3JlZi5vZmZzZXRZLFxuICAgICAgICAgICAgICAgICAgICBoYWxmSCA9IF9yZWYuaGFsZkgsXG4gICAgICAgICAgICAgICAgICAgIHBlYWtzID0gX3JlZi5wZWFrcztcblxuICAgICAgICAgICAgICAgIC8vIGlmIGRyYXdCYXJzIHdhcyBjYWxsZWQgd2l0aGluIHdzLmVtcHR5IHdlIGRvbid0IHBhc3MgYSBzdGFydCBhbmRcbiAgICAgICAgICAgICAgICAvLyBkb24ndCB3YW50IGFueXRoaW5nIHRvIGhhcHBlblxuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU2tpcCBldmVyeSBvdGhlciB2YWx1ZSBpZiB0aGVyZSBhcmUgbmVnYXRpdmVzLlxuICAgICAgICAgICAgICAgIHZhciBwZWFrSW5kZXhTY2FsZSA9IGhhc01pblZhbHMgPyAyIDogMTtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gcGVha3MubGVuZ3RoIC8gcGVha0luZGV4U2NhbGU7XG4gICAgICAgICAgICAgICAgdmFyIGJhciA9IF90aGlzNC5wYXJhbXMuYmFyV2lkdGggKiBfdGhpczQucGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgdmFyIGdhcCA9IF90aGlzNC5wYXJhbXMuYmFyR2FwID09PSBudWxsID8gTWF0aC5tYXgoX3RoaXM0LnBhcmFtcy5waXhlbFJhdGlvLCB+fihiYXIgLyAyKSkgOiBNYXRoLm1heChfdGhpczQucGFyYW1zLnBpeGVsUmF0aW8sIF90aGlzNC5wYXJhbXMuYmFyR2FwICogX3RoaXM0LnBhcmFtcy5waXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RlcCA9IGJhciArIGdhcDtcblxuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IGxlbmd0aCAvIF90aGlzNC53aWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSBzdGFydDtcbiAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IGVuZDtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHZvaWQgMDtcblxuICAgICAgICAgICAgICAgIGZvciAoaSA9IGZpcnN0OyBpIDwgbGFzdDsgaSArPSBzdGVwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZWFrID0gcGVha3NbTWF0aC5mbG9vcihpICogc2NhbGUgKiBwZWFrSW5kZXhTY2FsZSldIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoID0gTWF0aC5yb3VuZChwZWFrIC8gYWJzbWF4ICogaGFsZkgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsbFJlY3QoaSAtIGZpcnN0ICsgX3RoaXM0LmhhbGZQaXhlbCwgaGFsZkggLSBoICsgb2Zmc2V0WSwgYmFyICsgX3RoaXM0LmhhbGZQaXhlbCwgaCAqIDIsIGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgY2FudmFzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEcmF3IGEgd2F2ZWZvcm1cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBwZWFrcyBDYW4gYWxzbyBiZSBhbiBhcnJheSBvZiBhcnJheXMgZm9yIHNwbGl0IGNoYW5uZWxcbiAgICAgICAgICogcmVuZGVyaW5nXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVsSW5kZXggVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IGNoYW5uZWwuIE5vcm1hbGx5XG4gICAgICAgICAqIHNob3VsZCBiZSAwXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyP30gc3RhcnQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyZWEgdGhhdFxuICAgICAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWQgKElmIHRoaXMgaXNuJ3Qgc2V0IG9ubHkgYSBmbGF0IGxpbmUgaXMgcmVuZGVyZWQpXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyP30gZW5kIFRoZSB4LW9mZnNldCBvZiB0aGUgZW5kIG9mIHRoZSBhcmVhIHRoYXQgc2hvdWxkIGJlXG4gICAgICAgICAqIHJlbmRlcmVkXG4gICAgICAgICAqIEBwYXJhbSAoY2FudmFzKSB0aGUgY2FudmFzIHRvIGRyYXcgdGhlIHdhdmUgb24sXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkcmF3V2F2ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3V2F2ZShwZWFrcywgY2hhbm5lbEluZGV4LCBzdGFydCwgZW5kLCBjYW52YXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnByZXBhcmVEcmF3KHBlYWtzLCBjaGFubmVsSW5kZXgsIHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgICAgICAgICAgIHZhciBhYnNtYXggPSBfcmVmMi5hYnNtYXgsXG4gICAgICAgICAgICAgICAgICAgIGhhc01pblZhbHMgPSBfcmVmMi5oYXNNaW5WYWxzLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBfcmVmMi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFkgPSBfcmVmMi5vZmZzZXRZLFxuICAgICAgICAgICAgICAgICAgICBoYWxmSCA9IF9yZWYyLmhhbGZILFxuICAgICAgICAgICAgICAgICAgICBwZWFrcyA9IF9yZWYyLnBlYWtzO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNNaW5WYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWZsZWN0ZWRQZWFrcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gcGVha3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZsZWN0ZWRQZWFrc1syICogaV0gPSBwZWFrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmxlY3RlZFBlYWtzWzIgKiBpICsgMV0gPSAtcGVha3NbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGVha3MgPSByZWZsZWN0ZWRQZWFrcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBkcmF3V2F2ZSB3YXMgY2FsbGVkIHdpdGhpbiB3cy5lbXB0eSB3ZSBkb24ndCBwYXNzIGEgc3RhcnQgYW5kXG4gICAgICAgICAgICAgICAgLy8gZW5kIGFuZCBzaW1wbHkgd2FudCBhIGZsYXQgbGluZVxuICAgICAgICAgICAgICAgIGlmIChzdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNS5kcmF3TGluZShwZWFrcywgYWJzbWF4LCBoYWxmSCwgb2Zmc2V0WSwgc3RhcnQsIGVuZCwgY2FudmFzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgZHJhdyBhIG1lZGlhbiBsaW5lXG4gICAgICAgICAgICAgICAgX3RoaXM1LmZpbGxSZWN0KDAsIGhhbGZIICsgb2Zmc2V0WSAtIF90aGlzNS5oYWxmUGl4ZWwsIF90aGlzNS53aWR0aCwgX3RoaXM1LmhhbGZQaXhlbCwgY2FudmFzKTtcbiAgICAgICAgICAgIH0sIGNhbnZhcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBwYXJ0IG9mIHRoZSB3YXZlZm9ybSBvbiBhIHBhcnRpY3VsYXIgY2FudmFzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW119IHBlYWtzIFBlYWsgZGF0YVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYWJzbWF4IE1heGltdW0gcGVhayB2YWx1ZSAoYWJzb2x1dGUpXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYWxmSCBIYWxmIHRoZSBoZWlnaHQgb2YgdGhlIHdhdmVmb3JtXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRZIE9mZnNldCB0byB0aGUgdG9wXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgeC1vZmZzZXQgb2YgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSB4LW9mZnNldCBvZiB0aGUgZW5kIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkcmF3TGluZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3TGluZShwZWFrcywgYWJzbWF4LCBoYWxmSCwgb2Zmc2V0WSwgc3RhcnQsIGVuZCwgZW50cnkpIHtcbiAgICAgICAgICAgIC8vIGxldCB0MCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5zZXRGaWxsU3R5bGVzKGVudHJ5KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0xpbmVUb0NvbnRleHQoZW50cnksIGVudHJ5LndhdmVDdHgsIHBlYWtzLCBhYnNtYXgsIGhhbGZILCBvZmZzZXRZLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0xpbmVUb0NvbnRleHQoZW50cnksIGVudHJ5LnByb2dyZXNzQ3R4LCBwZWFrcywgYWJzbWF4LCBoYWxmSCwgb2Zmc2V0WSwgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyIHRoZSBhY3R1YWwgd2F2ZWZvcm0gbGluZSBvbiBhIGNhbnZhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge0NhbnZhc0VudHJ5fSBlbnRyeVxuICAgICAgICAgKiBAcGFyYW0ge0NhbnZhczJEQ29udGV4dEF0dHJpYnV0ZXN9IGN0eCBFc3NlbnRpYWxseSBgZW50cnkuW3dhdmV8cHJvZ3Jlc3NdQ3R4YFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfSBwZWFrc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYWJzbWF4IE1heGltdW0gcGVhayB2YWx1ZSAoYWJzb2x1dGUpXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYWxmSCBIYWxmIHRoZSBoZWlnaHQgb2YgdGhlIHdhdmVmb3JtXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRZIE9mZnNldCB0byB0aGUgdG9wXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgeC1vZmZzZXQgb2YgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSB4LW9mZnNldCBvZiB0aGUgZW5kIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkcmF3TGluZVRvQ29udGV4dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3TGluZVRvQ29udGV4dChlbnRyeSwgY3R4LCBwZWFrcywgYWJzbWF4LCBoYWxmSCwgb2Zmc2V0WSwgc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBwZWFrcy5sZW5ndGggLyAyO1xuICAgICAgICAgICAgLy8gIGNvbnN0IHNjYWxlID0gdGhpcy53aWR0aCAhPSBsZW5ndGggPyB0aGlzLndpZHRoIC8gbGVuZ3RoIDogMTtcblxuICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5wYXJhbXMuZmlsbFBhcmVudCAmJiB0aGlzLndpZHRoICE9IGxlbmd0aCA/IHRoaXMud2lkdGggLyBsZW5ndGggOiAxO1xuXG4gICAgICAgICAgICB2YXIgZmlyc3QgPSBNYXRoLnJvdW5kKGxlbmd0aCAqIGVudHJ5LnN0YXJ0KTtcbiAgICAgICAgICAgIC8vIFVzZSBvbmUgbW9yZSBwZWFrIHZhbHVlIHRvIG1ha2Ugc3VyZSB3ZSBqb2luIHBlYWtzIGF0IGVuZHMgLS0gdW5sZXNzLFxuICAgICAgICAgICAgLy8gb2YgY291cnNlLCB0aGlzIGlzIHRoZSBsYXN0IGNhbnZhcy5cbiAgICAgICAgICAgIHZhciBsYXN0ID0gTWF0aC5yb3VuZChsZW5ndGggKiBlbnRyeS5lbmQpICsgMTtcbiAgICAgICAgICAgIGlmIChmaXJzdCA+IGVuZCB8fCBsYXN0IDwgc3RhcnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2FudmFzU3RhcnQgPSBNYXRoLm1pbihmaXJzdCwgc3RhcnQpO1xuICAgICAgICAgICAgdmFyIGNhbnZhc0VuZCA9IE1hdGgubWF4KGxhc3QsIGVuZCk7XG4gICAgICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBqID0gdm9pZCAwO1xuXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKChjYW52YXNTdGFydCAtIGZpcnN0KSAqIHNjYWxlICsgdGhpcy5oYWxmUGl4ZWwsIGhhbGZIICsgb2Zmc2V0WSk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IGNhbnZhc1N0YXJ0OyBpIDwgY2FudmFzRW5kOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVhayA9IHBlYWtzWzIgKiBpXSB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciBoID0gTWF0aC5yb3VuZChwZWFrIC8gYWJzbWF4ICogaGFsZkgpO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oKGkgLSBmaXJzdCkgKiBzY2FsZSArIHRoaXMuaGFsZlBpeGVsLCBoYWxmSCAtIGggKyBvZmZzZXRZKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgYm90dG9tIGVkZ2UgZ29pbmcgYmFja3dhcmRzLCB0byBtYWtlIGEgc2luZ2xlXG4gICAgICAgICAgICAvLyBjbG9zZWQgaHVsbCB0byBmaWxsLlxuICAgICAgICAgICAgZm9yIChqID0gY2FudmFzRW5kIC0gMTsgaiA+PSBjYW52YXNTdGFydDsgai0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9wZWFrID0gcGVha3NbMiAqIGogKyAxXSB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciBfaCA9IE1hdGgucm91bmQoX3BlYWsgLyBhYnNtYXggKiBoYWxmSCk7XG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbygoaiAtIGZpcnN0KSAqIHNjYWxlICsgdGhpcy5oYWxmUGl4ZWwsIGhhbGZIIC0gX2ggKyBvZmZzZXRZKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEcmF3IGEgcmVjdGFuZ2xlIG9uIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAgICAgICBAcGFyYW0ge2NhbnZhc30gZW50cnlcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZpbGxSZWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQsIGVudHJ5KSB7XG4gICAgICAgICAgICB0aGlzLnNldEZpbGxTdHlsZXMoZW50cnkpO1xuXG4gICAgICAgICAgICB0aGlzLmZpbGxSZWN0VG9Db250ZXh0KGVudHJ5LndhdmVDdHgsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgICAgICB0aGlzLmZpbGxSZWN0VG9Db250ZXh0KGVudHJ5LnByb2dyZXNzQ3R4LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyBwcmVwYXJhdGlvbiB0YXNrcyBhbmQgY2FsY3VsYXRpb25zIHdoaWNoIGFyZSBzaGFyZWQgYnkgZHJhd0JhcnMgYW5kIGRyYXdXYXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW118bnVtYmVyW11bXX0gcGVha3MgQ2FuIGFsc28gYmUgYW4gYXJyYXkgb2YgYXJyYXlzIGZvciBzcGxpdCBjaGFubmVsXG4gICAgICAgICAqIHJlbmRlcmluZ1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbEluZGV4IFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaGFubmVsLiBOb3JtYWxseVxuICAgICAgICAgKiBzaG91bGQgYmUgMFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcj99IHN0YXJ0IFRoZSB4LW9mZnNldCBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkIChJZiB0aGlzIGlzbid0IHNldCBvbmx5IGEgZmxhdCBsaW5lIGlzIHJlbmRlcmVkKVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcj99IGVuZCBUaGUgeC1vZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgYXJlYSB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiByZW5kZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiBUaGUgcmVuZGVyIGZ1bmN0aW9uIHRvIGNhbGxcbiAgICAgICAgICogQHBhcmFtIHtjYW52YXN9IFRoZSBjYW52YXMgdG8gZHJhdyB1cG9uLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHJlcGFyZURyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcGFyZURyYXcocGVha3MsIGNoYW5uZWxJbmRleCwgc3RhcnQsIGVuZCwgZm4sIGNhbnZhcykge1xuICAgICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vICAgICAgaWYgKCFwZWFrcykge1xuICAgICAgICAgICAgLy8gICAgICAgICAgbGV0IGNhdCA9IDI7XG4gICAgICAgICAgICAvLyAgICAgIH1cbiAgICAgICAgICAgIC8vIFNwbGl0IGNoYW5uZWxzIGFuZCBjYWxsIHRoaXMgZnVuY3Rpb24gd2l0aCB0aGUgY2hhbm5lbEluZGV4IHNldFxuICAgICAgICAgICAgaWYgKCFwZWFrcykge1xuICAgICAgICAgICAgICAgIHZhciBjYXQgPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBlYWtzWzBdIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbHMgPSBwZWFrcztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuc3BsaXRDaGFubmVscykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEhlaWdodChjaGFubmVscy5sZW5ndGggKiB0aGlzLnBhcmFtcy5oZWlnaHQgKiB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5uZWxzLmZvckVhY2goZnVuY3Rpb24gKGNoYW5uZWxQZWFrcywgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5wcmVwYXJlRHJhdyhjaGFubmVsUGVha3MsIGksIHN0YXJ0LCBlbmQsIGZuLCBjYW52YXMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVha3MgPSBjaGFubmVsc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBtYXhpbXVtIG1vZHVsYXRpb24gdmFsdWUsIGVpdGhlciBmcm9tIHRoZSBiYXJIZWlnaHRcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlciBvciBpZiBub3JtYWxpemU9dHJ1ZSBmcm9tIHRoZSBsYXJnZXN0IHZhbHVlIGluIHRoZSBwZWFrXG4gICAgICAgICAgICAvLyBzZXRcbiAgICAgICAgICAgIHZhciBhYnNtYXggPSAxIC8gdGhpcy5wYXJhbXMuYmFySGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1zLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXggPSB1dGlsLm1heChwZWFrcyk7XG4gICAgICAgICAgICAgICAgdmFyIG1pbiA9IHV0aWwubWluKHBlYWtzKTtcbiAgICAgICAgICAgICAgICBhYnNtYXggPSAtbWluID4gbWF4ID8gLW1pbiA6IG1heDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQmFyIHdhdmUgZHJhd3MgdGhlIGJvdHRvbSBvbmx5IGFzIGEgcmVmbGVjdGlvbiBvZiB0aGUgdG9wLFxuICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCBuZWdhdGl2ZSB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBoYXNNaW5WYWxzID0gW10uc29tZS5jYWxsKHBlYWtzLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbCA8IDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnBhcmFtcy5oZWlnaHQgKiB0aGlzLnBhcmFtcy5waXhlbFJhdGlvO1xuICAgICAgICAgICAgdmFyIG9mZnNldFkgPSBoZWlnaHQgKiBjaGFubmVsSW5kZXggfHwgMDtcbiAgICAgICAgICAgIHZhciBoYWxmSCA9IGhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgIHJldHVybiBmbih7XG4gICAgICAgICAgICAgICAgYWJzbWF4OiBhYnNtYXgsXG4gICAgICAgICAgICAgICAgaGFzTWluVmFsczogaGFzTWluVmFscyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgICAgICBvZmZzZXRZOiBvZmZzZXRZLFxuICAgICAgICAgICAgICAgIGhhbGZIOiBoYWxmSCxcbiAgICAgICAgICAgICAgICBwZWFrczogcGVha3MsXG4gICAgICAgICAgICAgICAgZW50cnk6IGNhbnZhc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyB0aGUgYWN0dWFsIHJlY3RhbmdsZSBvbiBhIGNhbnZhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge0NhbnZhczJEQ29udGV4dEF0dHJpYnV0ZXN9IGN0eFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmlsbFJlY3RUb0NvbnRleHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbFJlY3RUb0NvbnRleHQoY3R4LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGZpbGwgc3R5bGVzIGZvciBhIGNlcnRhaW4gZW50cnkgKHdhdmUgYW5kIHByb2dyZXNzKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge0NhbnZhc0VudHJ5fSBlbnRyeVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RmlsbFN0eWxlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRGaWxsU3R5bGVzKGVudHJ5KSB7XG4gICAgICAgICAgICBlbnRyeS53YXZlQ3R4LmZpbGxTdHlsZSA9IHRoaXMucGFyYW1zLndhdmVDb2xvcjtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc1Byb2dyZXNzQ2FudmFzKSB7XG4gICAgICAgICAgICAgICAgZW50cnkucHJvZ3Jlc3NDdHguZmlsbFN0eWxlID0gdGhpcy5wYXJhbXMucHJvZ3Jlc3NDb2xvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm4gaW1hZ2UgZGF0YSBvZiB0aGUgd2F2ZWZvcm1cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGU9J2ltYWdlL3BuZycgQW4gb3B0aW9uYWwgdmFsdWUgb2YgYSBmb3JtYXQgdHlwZS5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHF1YWxpdHk9MC45MiBBbiBvcHRpb25hbCB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xzdHJpbmdbXX0gaW1hZ2VzIEEgZGF0YSBVUkwgb3IgYW4gYXJyYXkgb2YgZGF0YSBVUkxzXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRJbWFnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbWFnZSh0eXBlLCBxdWFsaXR5KSB7XG4gICAgICAgICAgICB2YXIgaW1hZ2VzID0gdGhpcy5jYW52YXNlcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LndhdmUudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2VzLmxlbmd0aCA+IDEgPyBpbWFnZXMgOiBpbWFnZXNbMF07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyIHRoZSBuZXcgcHJvZ3Jlc3NcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uIFgtT2Zmc2V0IG9mIHByb2dyZXNzIHBvc2l0aW9uIGluIHBpeGVsc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlUHJvZ3Jlc3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy5wcm9ncmVzc1dhdmUsIHsgd2lkdGg6IHBvc2l0aW9uICsgJ3B4JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgcG9zaXRpb24gYW5kIHdpZHRoIG9mIHRoZSBjYW52YXMgY29ycmVzcG9uZGluZyB0byB0aGUgbm9ybWFsaXplZFxuICAgICAgICAgKiBYIHBvc2l0aW9uIHN1cHBsaWVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3VyZmVyIHtXYXZlc3VyZmVyfSB3YXZlc3VyZmVyIGluc3RhbmNlIHRoYXQgaGFzIGNoYW5uZWwgZGF0YVxuICAgICAgICAgKiBAcGFyYW0geE5vcm0ge251bWJlcn0gTm9ybWFsaXplZCBYIHBvc2l0aW9uIHRvIHVzZSB0byBkZXRlcm1pbmUgY2FudmFzIGluZm8uXG4gICAgICAgICAqIEByZXR1cm5zOiBsaHMgKG51bWJlcikgbGVmdCBoYW5kIHNpZGUgY29vcmRpYW5hdGUgb2YgY2FudmFzIGluIGNzcyBjb29yZGluYXRlcy5cbiAgICAgICAgICogY2FudmFXaWR0aCAobnVtYmVyKSB3aWR0aCBvZiBjYW52YXMgKGluIGNhbnZhcyBjb29yZGluYXRlcyksIGFkanVzdGVkIGlmIG5lZWQgYmUgZm9yIGxhc3QuXG4gICAgICAgICAqIGxlZnRPZmYgKG51bWJlcikgbGVmdCBjb29yZGluYXRlIG9mIGNhbnZhcyAoaW4gY2FudmFzIGNvb3JkaW5hdGVzKS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NhbGNDYW52YXNJbmZvJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNDYW52YXNJbmZvKHN1cmZlciwgeE5vcm0pIHtcbiAgICAgICAgICAgIHZhciBkdXJTY2FsZSA9IHN1cmZlci5nZXREdXJhdGlvbigpICogdGhpcy5wYXJhbXMubWluUHhQZXJTZWM7XG4gICAgICAgICAgICB2YXIgeGMgPSB4Tm9ybSAqIGR1clNjYWxlIC8gdGhpcy5wYXJhbXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHZhciBjYW5OdW0gPSBNYXRoLmZsb29yKHhjIC8gdGhpcy5tYXhDYW52YXNFbGVtZW50V2lkdGgpO1xuXG4gICAgICAgICAgICB2YXIgbGhzID0gY2FuTnVtICogdGhpcy5tYXhDYW52YXNFbGVtZW50V2lkdGg7IC8vIGxocyBpbiBjc3MgY29vcmRpbmF0ZXNcbiAgICAgICAgICAgIHZhciBsZWZ0T2ZmID0gY2FuTnVtICogdGhpcy5tYXhDYW52YXNXaWR0aDtcbiAgICAgICAgICAgIHZhciBjYW52YXNXaWR0aCA9IHRoaXMubWF4Q2FudmFzV2lkdGggKyAyICogTWF0aC5jZWlsKHRoaXMucGFyYW1zLnBpeGVsUmF0aW8gLyAyKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgbGFzdCBjYW52YXMgcG9zaXRpb24sIHRyaW0gaXRzIHNpemUgYmFjayBzbyBhcyB0byBub3Qgb3ZlcmhhbmdcbiAgICAgICAgICAgIGlmICgoY2FuTnVtICsgMSkgKiB0aGlzLm1heENhbnZhc1dpZHRoID4gdGhpcy53aWR0aCkge1xuICAgICAgICAgICAgICAgIGNhbnZhc1dpZHRoID0gdGhpcy53aWR0aCAtIHRoaXMubWF4Q2FudmFzV2lkdGggKiBjYW5OdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IGxocyxcbiAgICAgICAgICAgICAgICBjYW52YXNXaWR0aDogY2FudmFzV2lkdGgsXG4gICAgICAgICAgICAgICAgbGVmdE9mZjogbGVmdE9mZlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmaWxsIHRoZSBnaXZlbiBjYW52YXMgZW50cnkgd2l0aCBkYXRhIGZyb20gdGhlIHBlYWtzIGFycmF5IG9yIHRoZSBjaGFubmVsIGJ1ZmZlcnNcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHN1cmZlciB7V2F2ZXN1cmZlcn0gd2F2ZXN1cmZlciBpbnN0YW5jZSB0aGF0IGhhcyBjaGFubmVsIGRhdGFcbiAgICAgICAgICogQHBhcmFtIGVudHJ5IHtDYW52YXN9IGNhbnZhcyB0byBkcmF3IG9udG8uXG4gICAgICAgICAqIEBwYXJhbSBwZWFrcyAoUGVha3MgYXJyYXkpIHBlYWsgZGF0YSB0byBkcmF3IHdpdGggaWYgbm90IHVzaW5nIGNoYW5uZWwgZGF0YS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ltYWdlU2luZ2xlQ2FudmFzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGltYWdlU2luZ2xlQ2FudmFzKHN1cmZlciwgZW50cnksIHBlYWtzKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gc3VyZmVyLmJhY2tlbmQuYnVmZmVyO1xuICAgICAgICAgICAgdmFyIG51bWJlck9mQ2hhbm5lbHMgPSBidWZmZXIubnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgICAgICBzYW1wbGVSYXRlID0gYnVmZmVyLnNhbXBsZVJhdGU7XG5cbiAgICAgICAgICAgIHZhciBzcER4ID0gc2FtcGxlUmF0ZSAvIHRoaXMucGFyYW1zLm1pblB4UGVyU2VjO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQodGhpcy5wYXJhbXMuaGVpZ2h0ICogdGhpcy5wYXJhbXMucGl4ZWxSYXRpbyk7IC8vID9cbiAgICAgICAgICAgIHZhciBoYWxmSCA9IE1hdGgucm91bmQoaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICB2YXIgcGl4SCA9IDI7XG4gICAgICAgICAgICB2YXIgcGl4VyA9IE1hdGguY2VpbCgxIC8gc3BEeCkgKyAxO1xuICAgICAgICAgICAgdmFyIHlTYyA9IC1oYWxmSDtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHN1cmZlci5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgdmFyIGR1clNjYWxlID0gZHVyYXRpb24gKiB0aGlzLnBhcmFtcy5taW5QeFBlclNlYztcblxuICAgICAgICAgICAgdmFyIGxocyA9IE1hdGgucm91bmQoZW50cnkuc3RhcnQgKiBkdXJTY2FsZSk7XG4gICAgICAgICAgICB2YXIgcmhzID0gTWF0aC5yb3VuZChlbnRyeS5lbmQgKiBkdXJTY2FsZSk7XG4gICAgICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhdCA9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMubWluUHhQZXJTZWMgPCB0aGlzLnNhbXBsZVNwZWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMuYmFyV2lkdGggPyB0aGlzLmRyYXdCYXJzKHBlYWtzLCAwLCBsaHMsIHJocywgZW50cnkpIDogdGhpcy5kcmF3V2F2ZShwZWFrcywgMCwgbGhzLCByaHMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbnVtYmVyT2ZDaGFubmVsczsgKytjKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW4gPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoYyk7XG4gICAgICAgICAgICAgICAgdmFyIHlvZmYgPSBoYWxmSCArIGMgKiBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzQ3R4ID0gZW50cnkucHJvZ3Jlc3NDdHgsXG4gICAgICAgICAgICAgICAgICAgIHdhdmVDdHggPSBlbnRyeS53YXZlQ3R4O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWxsU3R5bGVzKGVudHJ5KTtcbiAgICAgICAgICAgICAgICB2YXIgc3ggPSBlbnRyeS5zdGFydCAqIGR1cmF0aW9uICogc2FtcGxlUmF0ZTtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IHJocyAtIGxocztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7ICsreCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHlvZmYgKyBNYXRoLnJvdW5kKGNoYW5bTWF0aC5yb3VuZChzeCldICogeVNjKTtcbiAgICAgICAgICAgICAgICAgICAgc3ggKz0gc3BEeDtcbiAgICAgICAgICAgICAgICAgICAgd2F2ZUN0eC5maWxsUmVjdCh4LCB5LCBwaXhXLCBwaXhIKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ3R4KSBwcm9ncmVzc0N0eC5maWxsUmVjdCh4LCB5LCBwaXhXLCBwaXhIKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogcGVyaW9kaWMgZnVuY3Rpb24gY2FsbGVkIGluIG9yZGVyIHRvIG1haW50YWluIHRoZSB0aWxlIHN0cmlwLlxuICAgICAgICAgKiByZXR1cm5zIHRydWUgaWYgYSBjYW52YXMgdG8gcmVpbWFnZSB3YXMgZm91bmQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSBzdXJmZXIge1dhdmVzdXJmZXJ9IHdhdmVzdXJmZXIgaW5zdGFuY2UgdGhhdCBoYXMgY2hhbm5lbCBkYXRhXG4gICAgICAgICAqIEBwYXJhbSBwZWFrcyAoUGVha3MgYXJyYXkpIHBlYWsgZGF0YSB0byBkcmF3IHdpdGggaWYgbm90IHVzaW5nIGNoYW5uZWwgZGF0YS5cbiAgICAgICAgICogQHJldHVybnM6IChib29sZWFuKSB0cnVlIGlmIGEgcmVpbWFnZSB3YXMgYWNjb21wbGlzaGVkLCBmYWxzZSBpZiBub3QuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxDaGVjaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxDaGVjayhzdXJmZXIsIHBlYWtzKSB7XG4gICAgICAgICAgICB2YXIgc2NyWCA9IHN1cmZlci5kcmF3ZXIuZ2V0U2Nyb2xsWCgpOyAvLyBzY3JYIHNob3VsZCBiZSBpbiBjYW52YXMgY29vcmRpbmF0ZXMuXG5cbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHN1cmZlci5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgdmFyIGR1clNjYWxlID0gZHVyYXRpb24gKiB0aGlzLnBhcmFtcy5taW5QeFBlclNlYztcbiAgICAgICAgICAgIHZhciBub3JtWCA9IHNjclggLyBkdXJTY2FsZTtcblxuICAgICAgICAgICAgdmFyIHBsYXlTdGF0ZSA9IHN1cmZlci5pc1BsYXlpbmcoKTtcblxuICAgICAgICAgICAgaWYgKG5vcm1YID4gMS4wKSB7XG4gICAgICAgICAgICAgICAgbm9ybVggPSAxLjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBmb3VuZENhbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBjYW52VG9GaWxsID0gdm9pZCAwO1xuXG4gICAgICAgICAgICB2YXIgbWF4RGlzdCA9IDA7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBjYW52YXMgd2hpY2ggaXMgdmlzYWJsZS4gQWxzbyBkZXRlcm1pbmUgdGhlIGNhbnZhcyB0aGF0IGlzIGZhcnRoZXN0IGF3YXkgb3IgaGlkZGVuXG4gICAgICAgICAgICAvLyB0aGF0IHdlIGNhbiByZWN5Y2xlIGlmIG5lZWQgYmUuXG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vcm1YID49IGVudHJ5LnN0YXJ0ICYmIG5vcm1YIDwgZW50cnkuZW5kICYmICFlbnRyeS5oaWRkZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRDYW4gPSBlbnRyeTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoaWRkZW4gZW50cmllcyBhbHdheXMgd2luLlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudlRvRmlsbCA9IGVudHJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4RGlzdCA9IC0xOyAvLyB1c2UgLTEgYXMgYSBmbGFnIHRvIHN0b3AgY29tcGFyZXMuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF4RGlzdCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWlkUHQgPSAoZW50cnkuc3RhcnQgKyBlbnRyeS5lbmQpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0gTWF0aC5hYnMobm9ybVggLSBtaWRQdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA+PSBtYXhEaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4RGlzdCA9IGRpc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudlRvRmlsbCA9IGVudHJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciB3aGVyZVggPSAtMTtcbiAgICAgICAgICAgIC8vIElmIGl0IGlzbid0IHRoZXJlLCBtYWtlIHRoYXQgb25lLlxuICAgICAgICAgICAgLy8gSWYgaXQgaXMgYWxyZWFkeSB0aGVyZSwgZmluZCB0aGUgbmV4dCBvbmVcblxuICAgICAgICAgICAgaWYgKCFmb3VuZENhbikge1xuICAgICAgICAgICAgICAgIHdoZXJlWCA9IG5vcm1YO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgb3VyV2lkID0gZm91bmRDYW4uZW5kIC0gZm91bmRDYW4uc3RhcnQ7XG4gICAgICAgICAgICAgICAgdmFyIG91ck1pZCA9IGZvdW5kQ2FuLnN0YXJ0ICsgb3VyV2lkIC8gMjtcbiAgICAgICAgICAgICAgICB2YXIgc2Vla1ggPSBvdXJNaWQgKyBvdXJXaWQ7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kVXAgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHNlZWtYIDwgMS4wKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVXAgPSB0aGF0LmNhbnZhc2VzLmZpbmQoZnVuY3Rpb24gKGNhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlZWtYID49IGNhbi5zdGFydCAmJiBzZWVrWCA8IGNhbi5lbmQgJiYgIWNhbi5oaWRkZW47XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kVXAgJiYgc2Vla1ggPCAxLjApIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmVYID0gc2Vla1g7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vla1ggPSBvdXJNaWQgLSBvdXJXaWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWVrWCA8IDApIHNlZWtYID09IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZERuID0gdGhhdC5jYW52YXNlcy5maW5kKGZ1bmN0aW9uIChjYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWVrWCA+PSBjYW4uc3RhcnQgJiYgc2Vla1ggPCBjYW4uZW5kICYmICFjYW4uaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZERuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZVggPSBzZWVrWDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdoZXJlWCA+PSAwICYmIGNhbnZUb0ZpbGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FuID0gdGhpcy5jYWxjQ2FudmFzSW5mbyhzdXJmZXIsIHdoZXJlWCk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhc1dpZHRoID0gY2FuLmNhbnZhc1dpZHRoLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gY2FuLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIGxlZnRPZmYgPSBjYW4ubGVmdE9mZjtcblxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGltZW5zaW9ucyhjYW52VG9GaWxsLCBjYW52YXNXaWR0aCwgdGhpcy5oZWlnaHQsIGxlZnQsIGxlZnRPZmYpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJXYXZlRm9yRW50cnkoY2FudlRvRmlsbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNpbmdsZUNhbnZhcyhzdXJmZXIsIGNhbnZUb0ZpbGwsIHBlYWtzKTtcbiAgICAgICAgICAgICAgICBjYW52VG9GaWxsLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIGZyb20gdGlsZWREcmF3QnVmZmVyIHRvIHJlaW1hZ2UgdGhlIHRpbGVzLiBJZiB3ZSBhcmUgdXNpbmcgdGlsZWQgcmVuZGVyaW5nLFxuICAgICAgICAgKiBhcnJhbmdlIHRvIHJlcGFpbnQgdGhlIHZpc2libGUgYXJlYSBhbmQgc2V0IHVwIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBzY3JvbGxpbmcuXG4gICAgICAgICAqIElmIHdlIGFyZW4ndCB1c2luZyB0aWxlZCByZW5kZXJpbmcsIHRoZW4gZmlsbCB1cCBhbGwgdGhlIGNhbnZhc2VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0gc3VyZmVyIHtXYXZlc3VyZmVyfSB3YXZlc3VyZmVyIGluc3RhbmNlIHRoYXQgaGFzIGNoYW5uZWwgZGF0YVxuICAgICAgICAgKiBAcGFyYW0gZW50cnkge0NhbnZhc30gY2FudmFzIHRvIGRyYXcgb250by5cbiAgICAgICAgICogQHBhcmFtIHBlYWtzIChQZWFrcyBhcnJheSkgcGVhayBkYXRhIHRvIGRyYXcgd2l0aCBpZiBub3QgdXNpbmcgY2hhbm5lbCBkYXRhLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd1RpbGVzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdUaWxlcyhzdXJmZXIsIHdpZHRoLCBwZWFrcykge1xuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCh3aWR0aCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyV2F2ZSgpO1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBDc25jZWwgYW55IGV4aXN0aW5nIHNjcm9sbCB3YXRjaGVyLlxuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsV2F0Y2hlcikge1xuICAgICAgICAgICAgICAgIHN1cmZlci51bignc2Nyb2xsJywgdGhpcy5zY3JvbGxXYXRjaGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFdhdGNoZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50aWxlZFJlbmRlcmluZykge1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgYWxsIGNhbnZhc2VzIGFzIGhpZGRlbi5cbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHJlcGFpbnQgPSBmdW5jdGlvbiByZXBhaW50KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3RyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoYXQuc2Nyb2xsQ2hlY2soc3VyZmVyLCBwZWFrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHIrKyA+IHRoYXQuY2FudmFzTGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmVwYWludCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzZXMuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbWFnZVNpbmdsZUNhbnZhcyhzdXJmZXIsIGVudHJ5LCBwZWFrcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1ha2UgYSBuZXcgc2Nyb2xsIHdhdGNoZXIgaWYgd2UgbmVlZCBpdC5cbiAgICAgICAgICAgIGlmICh0aGlzLnRpbGVkUmVuZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhdGNoRnVuID0gZnVuY3Rpb24gd2F0Y2hGdW4oc2NyZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnRpbGVkUmVuZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5wYXJhbXMubWluUHhQZXJTZWMgPCB0aGF0LnNhbXBsZVNwZWVkICYmICFwZWFrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnNjcm9sbENoZWNrKHN1cmZlciwgcGVha3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zY3JvbGxDaGVjayhzdXJmZXIsIHBlYWtzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc3VyZmVyLm9uKCdzY3JvbGwnLCB3YXRjaEZ1bik7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxXYXRjaGVyID0gd2F0Y2hGdW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVGlsZWRSZW5kZXJlcjtcbn0oX2RyYXdlcjIuZGVmYXVsdCk7IC8vIEVuZCBvZiBjbGFzcy5cblxuLyoqXG4gKiBBIGhhY2tlZC11cCB2ZXJzaW9uIG9mIHRoZSBkcmF3QnVmZmVyIHJvdXRpbmUgZGVmaW5lZCBpbiB3YXZlc3VyZmVyLmpzLFxuICogU2luY2Ugd2UgZG9uJ3Qgd2FudCB0byB1c2UgcGVhayBkYXRhIGF0IGhpZ2ggbWFnbmlmaWNhdGlvbiBsZXZlbHMsIHdlXG4gKiBhdm9pZCBnZW5lcmF0aW5nIGFuZCB1c2luZyBwZWFrIGRhdGEgaW4gdGhlIHNpdHVhdGlvbi4gV2UgYWxzb1xuICogdHVybiBvbiB0aGUgdGlsZWQgcmVuZGVyaW5nIGZlYXR1cmUgaWYgaXQgaXMgbmVlZGVkLlxuICovXG5cblxuZXhwb3J0cy5kZWZhdWx0ID0gVGlsZWRSZW5kZXJlcjtcbnZhciB0aWxlZERyYXdCdWZmZXIgPSBmdW5jdGlvbiB0aWxlZERyYXdCdWZmZXIoKSB7XG4gICAgdmFyIG5vbWluYWxXaWR0aCA9IE1hdGgucm91bmQodGhpcy5nZXREdXJhdGlvbigpICogdGhpcy5wYXJhbXMubWluUHhQZXJTZWMpO1xuICAgIHZhciBwYXJlbnRXaWR0aCA9IHRoaXMuZHJhd2VyLmdldFdpZHRoKCk7XG4gICAgdmFyIHdpZHRoID0gbm9taW5hbFdpZHRoO1xuXG4gICAgLy8gSWYgd2UgbmVlZCBtb3JlIHRoYW4gYSBjZXJ0YWluIG51bWJlciBvZiBjYW52YXNlcywgdGhlbiB3ZSB3aWxsIHJlbmRlciB0aGVtIGR5bmFtaWNhbGx5XG4gICAgdmFyIHJlcXVpcmVkQ2FudmFzZXMgPSBNYXRoLmNlaWwod2lkdGggLyB0aGlzLnBhcmFtcy5tYXhDYW52YXNXaWR0aCk7XG4gICAgdGhpcy5kcmF3ZXIudGlsZWRSZW5kZXJpbmcgPSByZXF1aXJlZENhbnZhc2VzID4gdGhpcy5kcmF3ZXIuY2FudmFzTGltaXQ7XG4gICAgdmFyIG5lZWRQZWFrcyA9IHRoaXMucGFyYW1zLm1pblB4UGVyU2VjIDwgdGhpcy5kcmF3ZXIuc2FtcGxlU3BlZWQ7XG4gICAgdmFyIGVuZCA9IE1hdGgubWF4KHBhcmVudFdpZHRoLCB3aWR0aCk7XG5cbiAgICB0aGlzLnBlYWtzID0gdW5kZWZpbmVkO1xuICAgIHZhciBwZWFrcyA9IHZvaWQgMDtcbiAgICBpZiAobmVlZFBlYWtzKSB7XG4gICAgICAgIHRoaXMuYmFja2VuZC5wZWFrcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5iYWNrZW5kLm1lcmdlZFBlYWtzID0gdW5kZWZpbmVkO1xuICAgICAgICBwZWFrcyA9IHRoaXMuYmFja2VuZC5nZXRQZWFrcyh3aWR0aCwgMCwgZW5kKTtcbiAgICB9XG4gICAgdGhpcy5kcmF3ZXIuZHJhd1RpbGVzKHRoaXMsIHdpZHRoLCBwZWFrcyk7XG4gICAgdGhpcy5maXJlRXZlbnQoJ3JlZHJhdycsIHBlYWtzLCB3aWR0aCk7XG59O1xuXG5leHBvcnRzLlRpbGVkUmVuZGVyZXIgPSBUaWxlZFJlbmRlcmVyO1xuZXhwb3J0cy50aWxlZERyYXdCdWZmZXIgPSB0aWxlZERyYXdCdWZmZXI7XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgdXRpbCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF91dGlsKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG4vKipcbiAqIFBhcmVudCBjbGFzcyBmb3IgcmVuZGVyZXJzXG4gKlxuICogQGV4dGVuZHMge09ic2VydmVyfVxuICovXG52YXIgRHJhd2VyID0gZnVuY3Rpb24gKF91dGlsJE9ic2VydmVyKSB7XG4gICAgX2luaGVyaXRzKERyYXdlciwgX3V0aWwkT2JzZXJ2ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBjb250YWluZXIgbm9kZSBvZiB0aGUgd2F2ZXN1cmZlciBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7V2F2ZXN1cmZlclBhcmFtc30gcGFyYW1zIFRoZSB3YXZlc3VyZmVyIGluaXRpYWxpc2F0aW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmF3ZXIoY29udGFpbmVyLCBwYXJhbXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXdlcik7XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEcmF3ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEcmF3ZXIpKS5jYWxsKHRoaXMpKTtcblxuICAgICAgICBfdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7V2F2ZXN1cmZlclBhcmFtc31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgcmVuZGVyZXJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndpZHRoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIHJlbmRlcmVyXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oZWlnaHQgPSBwYXJhbXMuaGVpZ2h0ICogX3RoaXMucGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5sYXN0UG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBgPHdhdmU+YCBlbGVtZW50IHdoaWNoIGlzIGFkZGVkIHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcHBlciA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBgdXRpbC5zdHlsZWBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIFRoZSBlbGVtZW50IHRoYXQgdGhlIHN0eWxlcyB3aWxsIGJlIGFwcGxpZWQgdG9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3R5bGVzIFRoZSBtYXAgb2YgcHJvcE5hbWU6IGF0dHJpYnV0ZSwgYm90aCBhcmUgdXNlZCBhcy1pc1xuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBlbFxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJhd2VyLCBbe1xuICAgICAgICBrZXk6ICdzdHlsZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdHlsZShlbCwgc3R5bGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbC5zdHlsZShlbCwgc3R5bGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgdGhlIHdyYXBwZXIgYDx3YXZlPmAgZWxlbWVudCwgc3R5bGUgaXQgYW5kIHNldCB1cCB0aGUgZXZlbnRzIGZvclxuICAgICAgICAgKiBpbnRlcmFjdGlvblxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlV3JhcHBlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVXcmFwcGVyKCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnd2F2ZScpKTtcblxuICAgICAgICAgICAgdGhpcy5zdHlsZSh0aGlzLndyYXBwZXIsIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgICAgICAgICAgICB3ZWJraXRVc2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnBhcmFtcy5oZWlnaHQgKyAncHgnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1zLmZpbGxQYXJlbnQgfHwgdGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZSh0aGlzLndyYXBwZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dYOiB0aGlzLnBhcmFtcy5oaWRlU2Nyb2xsYmFyID8gJ2hpZGRlbicgOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXR1cFdyYXBwZXJFdmVudHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGUgY2xpY2sgZXZlbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZSBDbGljayBldmVudFxuICAgICAgICAgKiBAcGFyYW0gez9ib29sZWFufSBub1ByZXZlbnQgU2V0IHRvIHRydWUgdG8gbm90IGNhbGwgYGUucHJldmVudERlZmF1bHQoKWBcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBQbGF5YmFjayBwb3NpdGlvbiBmcm9tIDAgdG8gMVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlRXZlbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRXZlbnQoZSwgbm9QcmV2ZW50KSB7XG4gICAgICAgICAgICAhbm9QcmV2ZW50ICYmIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGNsaWVudFggPSBlLnRhcmdldFRvdWNoZXMgPyBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCA6IGUuY2xpZW50WDtcbiAgICAgICAgICAgIHZhciBiYm94ID0gdGhpcy53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICB2YXIgbm9taW5hbFdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBwYXJlbnRXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTtcblxuICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gdm9pZCAwO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyYW1zLmZpbGxQYXJlbnQgJiYgbm9taW5hbFdpZHRoIDwgcGFyZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IChjbGllbnRYIC0gYmJveC5sZWZ0KSAqIHRoaXMucGFyYW1zLnBpeGVsUmF0aW8gLyBub21pbmFsV2lkdGggfHwgMDtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSAoY2xpZW50WCAtIGJib3gubGVmdCArIHRoaXMud3JhcHBlci5zY3JvbGxMZWZ0KSAvIHRoaXMud3JhcHBlci5zY3JvbGxXaWR0aCB8fCAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcHJvZ3Jlc3M7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldHVwV3JhcHBlckV2ZW50cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cFdyYXBwZXJFdmVudHMoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsYmFySGVpZ2h0ID0gX3RoaXMyLndyYXBwZXIub2Zmc2V0SGVpZ2h0IC0gX3RoaXMyLndyYXBwZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxiYXJIZWlnaHQgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGxiYXIgaXMgdmlzaWJsZS4gIENoZWNrIGlmIGNsaWNrIHdhcyBvbiBpdFxuICAgICAgICAgICAgICAgICAgICB2YXIgYmJveCA9IF90aGlzMi53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jbGllbnRZID49IGJib3guYm90dG9tIC0gc2Nyb2xsYmFySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgbW91c2Vkb3duIGFzIGl0IHdhcyBvbiB0aGUgc2Nyb2xsYmFyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLnBhcmFtcy5pbnRlcmFjdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuZmlyZUV2ZW50KCdjbGljaycsIGUsIF90aGlzMi5oYW5kbGVFdmVudChlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZmlyZUV2ZW50KCdzY3JvbGwnLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERyYXcgcGVha3Mgb24gdGhlIGNhbnZhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIENhbiBhbHNvIGJlIGFuIGFycmF5IG9mIGFycmF5cyBmb3Igc3BsaXQgY2hhbm5lbFxuICAgICAgICAgKiByZW5kZXJpbmdcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCBUaGUgd2lkdGggb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmUgZHJhd25cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSB4LW9mZnNldCBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBlbmQgb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmVcbiAgICAgICAgICogcmVuZGVyZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RyYXdQZWFrcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3UGVha3MocGVha3MsIGxlbmd0aCwgc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNldFdpZHRoKGxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyV2F2ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5iYXJXaWR0aCA/IHRoaXMuZHJhd0JhcnMocGVha3MsIDAsIHN0YXJ0LCBlbmQpIDogdGhpcy5kcmF3V2F2ZShwZWFrcywgMCwgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2Nyb2xsIHRvIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Jlc2V0U2Nyb2xsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0U2Nyb2xsKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMud3JhcHBlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWNlbnRlciB0aGUgdmlld3BvcnQgYXQgYSBjZXJ0YWluIHBlcmNlbnQgb2YgdGhlIHdhdmVmb3JtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwZXJjZW50IFZhbHVlIGZyb20gMCB0byAxIG9uIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVjZW50ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjZW50ZXIocGVyY2VudCkge1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy53cmFwcGVyLnNjcm9sbFdpZHRoICogcGVyY2VudDtcbiAgICAgICAgICAgIHRoaXMucmVjZW50ZXJPblBvc2l0aW9uKHBvc2l0aW9uLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWNlbnRlciB0aGUgdmlld3BvcnQgb24gYSBwb3NpdGlvbiwgZWl0aGVyIHNjcm9sbCB0aGVyZSBpbW1lZGlhdGVseSBvclxuICAgICAgICAgKiBpbiBzdGVwcyBvZiA1IHBpeGVsc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gWC1vZmZzZXQgaW4gcGl4ZWxzXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW1tZWRpYXRlIFNldCB0byB0cnVlIHRvIGltbWVkaWF0ZWx5IHNjcm9sbCBzb21ld2hlcmVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2VudGVyT25Qb3NpdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNlbnRlck9uUG9zaXRpb24ocG9zaXRpb24sIGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSB0aGlzLndyYXBwZXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIHZhciBoYWxmID0gfn4odGhpcy53cmFwcGVyLmNsaWVudFdpZHRoIC8gMik7XG4gICAgICAgICAgICB2YXIgbWF4U2Nyb2xsID0gdGhpcy53cmFwcGVyLnNjcm9sbFdpZHRoIC0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHBvc2l0aW9uIC0gaGFsZjtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSB0YXJnZXQgLSBzY3JvbGxMZWZ0O1xuXG4gICAgICAgICAgICBpZiAobWF4U2Nyb2xsID09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIGNvbnRpbnVlIGlmIHNjcm9sbGJhciBpcyBub3QgdGhlcmVcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZSBjdXJzb3IgaXMgY3VycmVudGx5IHZpc2libGUuLi5cbiAgICAgICAgICAgIGlmICghaW1tZWRpYXRlICYmIC1oYWxmIDw9IG9mZnNldCAmJiBvZmZzZXQgPCBoYWxmKSB7XG4gICAgICAgICAgICAgICAgLy8gd2UnbGwgbGltaXQgdGhlIFwicmUtY2VudGVyXCIgcmF0ZS5cbiAgICAgICAgICAgICAgICB2YXIgcmF0ZSA9IDU7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gTWF0aC5tYXgoLXJhdGUsIE1hdGgubWluKHJhdGUsIG9mZnNldCkpO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHNjcm9sbExlZnQgKyBvZmZzZXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGxpbWl0IHRhcmdldCB0byB2YWxpZCByYW5nZSAoMCB0byBtYXhTY3JvbGwpXG4gICAgICAgICAgICB0YXJnZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXhTY3JvbGwsIHRhcmdldCkpO1xuICAgICAgICAgICAgLy8gbm8gdXNlIGF0dGVtcHRpbmcgdG8gc2Nyb2xsIGlmIHdlJ3JlIG5vdCBtb3ZpbmdcbiAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gc2Nyb2xsTGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5zY3JvbGxMZWZ0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gaW4gcGl4ZWxzXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbFgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2Nyb2xsWCgpIHtcbiAgICAgICAgICAgIHZhciBwaXhlbFJhdGlvID0gdGhpcy5wYXJhbXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZCh0aGlzLndyYXBwZXIuc2Nyb2xsTGVmdCAqIHBpeGVsUmF0aW8pO1xuXG4gICAgICAgICAgICAvLyBJbiBjYXNlcyBvZiBlbGFzdGljIHNjcm9sbCAoc2FmYXJpIHdpdGggbW91c2Ugd2hlZWwpIHlvdSBjYW5cbiAgICAgICAgICAgIC8vIHNjcm9sbCBiZXlvbmQgdGhlIGxpbWl0cyBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgYW5kIGZsb29yIHRoZSBzY3JvbGxhYmxlIGV4dGVudCB0byBtYWtlIHN1cmUgYW4gb3V0XG4gICAgICAgICAgICAvLyBvZiBib3VuZHMgdmFsdWUgaXMgbm90IHJldHVybmVkXG4gICAgICAgICAgICAvLyBUaWNrZXQgIzEzMTJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF4U2Nyb2xsID0gfn4odGhpcy53cmFwcGVyLnNjcm9sbFdpZHRoICogcGl4ZWxSYXRpbyAtIHRoaXMuZ2V0V2lkdGgoKSk7XG4gICAgICAgICAgICAgICAgeCA9IE1hdGgubWluKG1heFNjcm9sbCwgTWF0aC5tYXgoMCwgeCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIHdpZHRoIG9mIHRoZSBjb250YWluZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0V2lkdGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2lkdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aCAqIHRoaXMucGFyYW1zLnBpeGVsUmF0aW8pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgd2lkdGggb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFdpZHRoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFdpZHRoKHdpZHRoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy53aWR0aCA9PSB3aWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuZmlsbFBhcmVudCB8fCB0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMud3JhcHBlciwge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZSh0aGlzLndyYXBwZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IH5+KHRoaXMud2lkdGggLyB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKSArICdweCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGhlaWdodCBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldEhlaWdodCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0ID09IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB+fih0aGlzLmhlaWdodCAvIHRoaXMucGFyYW1zLnBpeGVsUmF0aW8pICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIGJ5IHdhdmVzdXJmZXIgd2hlbiBwcm9ncmVzcyBzaG91bGQgYmUgcmVuZGVyZXJlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgRnJvbSAwIHRvIDFcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Byb2dyZXNzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByb2dyZXNzKF9wcm9ncmVzcykge1xuICAgICAgICAgICAgdmFyIG1pblB4RGVsdGEgPSAxIC8gdGhpcy5wYXJhbXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHZhciBwb3MgPSBNYXRoLnJvdW5kKF9wcm9ncmVzcyAqIHRoaXMud2lkdGgpICogbWluUHhEZWx0YTtcblxuICAgICAgICAgICAgaWYgKHBvcyA8IHRoaXMubGFzdFBvcyB8fCBwb3MgLSB0aGlzLmxhc3RQb3MgPj0gbWluUHhEZWx0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFBvcyA9IHBvcztcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQgJiYgdGhpcy5wYXJhbXMuYXV0b0NlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UG9zID0gfn4odGhpcy53cmFwcGVyLnNjcm9sbFdpZHRoICogX3Byb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNlbnRlck9uUG9zaXRpb24obmV3UG9zKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyBjYWxsZWQgd2hlbiB3YXZlc3VyZmVyIGlzIGRlc3Ryb3llZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgdGhpcy51bkFsbCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMud3JhcHBlcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLndyYXBwZXIucGFyZW50Tm9kZSA9PSB0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogUmVuZGVyZXItc3BlY2lmaWMgbWV0aG9kcyAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgYWZ0ZXIgY3Vyc29yIHJlbGF0ZWQgcGFyYW1zIGhhdmUgY2hhbmdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGFic3RyYWN0XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVDdXJzb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ3Vyc29yKCkge31cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhlIHNpemUgb2YgdGhlIGNvbnRhaW5lciBjaGFuZ2VzIHNvIHRoZSByZW5kZXJlciBjYW4gYWRqdXN0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlU2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTaXplKCkge31cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBhIHdhdmVmb3JtIHdpdGggYmFyc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAYWJzdHJhY3RcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBwZWFrcyBDYW4gYWxzbyBiZSBhbiBhcnJheSBvZiBhcnJheXMgZm9yIHNwbGl0IGNoYW5uZWxcbiAgICAgICAgICogcmVuZGVyaW5nXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVsSW5kZXggVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IGNoYW5uZWwuIE5vcm1hbGx5XG4gICAgICAgICAqIHNob3VsZCBiZSAwXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgeC1vZmZzZXQgb2YgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSB4LW9mZnNldCBvZiB0aGUgZW5kIG9mIHRoZSBhcmVhIHRoYXQgc2hvdWxkIGJlXG4gICAgICAgICAqIHJlbmRlcmVkXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkcmF3QmFycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3QmFycyhwZWFrcywgY2hhbm5lbEluZGV4LCBzdGFydCwgZW5kKSB7fVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEcmF3IGEgd2F2ZWZvcm1cbiAgICAgICAgICpcbiAgICAgICAgICogQGFic3RyYWN0XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW118bnVtYmVyW11bXX0gcGVha3MgQ2FuIGFsc28gYmUgYW4gYXJyYXkgb2YgYXJyYXlzIGZvciBzcGxpdCBjaGFubmVsXG4gICAgICAgICAqIHJlbmRlcmluZ1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbEluZGV4IFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaGFubmVsLiBOb3JtYWxseVxuICAgICAgICAgKiBzaG91bGQgYmUgMFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyZWEgdGhhdFxuICAgICAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgeC1vZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgYXJlYSB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiByZW5kZXJlZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd1dhdmUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd1dhdmUocGVha3MsIGNoYW5uZWxJbmRleCwgc3RhcnQsIGVuZCkge31cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYXIgdGhlIHdhdmVmb3JtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2xlYXJXYXZlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyV2F2ZSgpIHt9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0aGUgbmV3IHByb2dyZXNzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gWC1PZmZzZXQgb2YgcHJvZ3Jlc3MgcG9zaXRpb24gaW4gcGl4ZWxzXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVQcm9ncmVzcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhwb3NpdGlvbikge31cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJhd2VyO1xufSh1dGlsLk9ic2VydmVyKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRHJhd2VyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gYWpheDtcblxudmFyIF9vYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfb2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JzZXJ2ZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIFBlcmZvcm0gYW4gYWpheCByZXF1ZXN0XG4gKlxuICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIERlc2NyaXB0aW9uXG4gKlxuICogQHJldHVybnMge09iamVjdH0gT2JzZXJ2ZXIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheChvcHRpb25zKSB7XG4gICAgdmFyIGluc3RhbmNlID0gbmV3IF9vYnNlcnZlcjIuZGVmYXVsdCgpO1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgZmlyZWQxMDAgPSBmYWxzZTtcbiAgICB4aHIub3BlbihvcHRpb25zLm1ldGhvZCB8fCAnR0VUJywgb3B0aW9ucy51cmwsIHRydWUpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSBvcHRpb25zLnJlc3BvbnNlVHlwZSB8fCAnanNvbic7XG5cbiAgICBpZiAob3B0aW9ucy54aHIpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMueGhyLnJlcXVlc3RIZWFkZXJzKSB7XG4gICAgICAgICAgICAvLyBhZGQgY3VzdG9tIHJlcXVlc3QgaGVhZGVyc1xuICAgICAgICAgICAgb3B0aW9ucy54aHIucmVxdWVzdEhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLmtleSwgaGVhZGVyLnZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnhoci53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIC8vIHVzZSBjcmVkZW50aWFsc1xuICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpbnN0YW5jZS5maXJlRXZlbnQoJ3Byb2dyZXNzJywgZSk7XG4gICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUgJiYgZS5sb2FkZWQgPT0gZS50b3RhbCkge1xuICAgICAgICAgICAgZmlyZWQxMDAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoIWZpcmVkMTAwKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5maXJlRXZlbnQoJ3Byb2dyZXNzJywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuZmlyZUV2ZW50KCdsb2FkJywgZSk7XG4gICAgICAgIGlmICgyMDAgPT0geGhyLnN0YXR1cyB8fCAyMDYgPT0geGhyLnN0YXR1cykge1xuICAgICAgICAgICAgaW5zdGFuY2UuZmlyZUV2ZW50KCdzdWNjZXNzJywgeGhyLnJlc3BvbnNlLCBlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmZpcmVFdmVudCgnZXJyb3InLCBlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZS5maXJlRXZlbnQoJ2Vycm9yJywgZSk7XG4gICAgfSk7XG4gICAgeGhyLnNlbmQoKTtcbiAgICBpbnN0YW5jZS54aHIgPSB4aHI7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0SWQ7XG4vKipcbiAqIEdldCBhIHJhbmRvbSBwcmVmaXhlZCBJRFxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFJhbmRvbSBJRFxuICovXG5mdW5jdGlvbiBnZXRJZCgpIHtcbiAgICByZXR1cm4gJ3dhdmVzdXJmZXJfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzIpLnN1YnN0cmluZygyKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG1heDtcbi8qKlxuICogR2V0IHRoZSBsYXJnZXN0IHZhbHVlXG4gKlxuICogQHBhcmFtICAge0FycmF5fSB2YWx1ZXMgQXJyYXkgb2YgbnVtYmVyc1xuICogQHJldHVybnMge051bWJlcn0gTGFyZ2VzdCBudW1iZXIgZm91bmRcbiAqL1xuZnVuY3Rpb24gbWF4KHZhbHVlcykge1xuICAgIHZhciBsYXJnZXN0ID0gLUluZmluaXR5O1xuICAgIE9iamVjdC5rZXlzKHZhbHVlcykuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICBpZiAodmFsdWVzW2ldID4gbGFyZ2VzdCkge1xuICAgICAgICAgICAgbGFyZ2VzdCA9IHZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBsYXJnZXN0O1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBtaW47XG4vKipcbiAqIEdldCB0aGUgc21hbGxlc3QgdmFsdWVcbiAqXG4gKiBAcGFyYW0gICB7QXJyYXl9IHZhbHVlcyBBcnJheSBvZiBudW1iZXJzXG4gKiBAcmV0dXJucyB7TnVtYmVyfSAgICAgICBTbWFsbGVzdCBudW1iZXIgZm91bmRcbiAqL1xuZnVuY3Rpb24gbWluKHZhbHVlcykge1xuICAgIHZhciBzbWFsbGVzdCA9IE51bWJlcihJbmZpbml0eSk7XG4gICAgT2JqZWN0LmtleXModmFsdWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIGlmICh2YWx1ZXNbaV0gPCBzbWFsbGVzdCkge1xuICAgICAgICAgICAgc21hbGxlc3QgPSB2YWx1ZXNbaV07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc21hbGxlc3Q7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGV4dGVuZDtcbi8qKlxuICogRXh0ZW5kIGFuIG9iamVjdCBzaGFsbG93bHkgd2l0aCBvdGhlcnNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdCBUaGUgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIHtPYmplY3RbXX0gc291cmNlcyBUaGUgb2JqZWN0cyB0byB1c2UgZm9yIGV4dGVuZGluZ1xuICpcbiAqIEByZXR1cm4ge09iamVjdH0gTWVyZ2VkIG9iamVjdFxuICovXG5mdW5jdGlvbiBleHRlbmQoZGVzdCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzb3VyY2VzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBzb3VyY2VzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgZGVzdFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkZXN0O1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBzdHlsZTtcbi8qKlxuICogQXBwbHkgYSBtYXAgb2Ygc3R5bGVzIHRvIGFuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB0aGF0IHRoZSBzdHlsZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gKiBAcGFyYW0ge09iamVjdH0gc3R5bGVzIFRoZSBtYXAgb2YgcHJvcE5hbWU6IGF0dHJpYnV0ZSwgYm90aCBhcmUgdXNlZCBhcy1pc1xuICpcbiAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBlbFxuICovXG5mdW5jdGlvbiBzdHlsZShlbCwgc3R5bGVzKSB7XG4gICAgT2JqZWN0LmtleXMoc3R5bGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIGlmIChlbC5zdHlsZVtwcm9wXSAhPT0gc3R5bGVzW3Byb3BdKSB7XG4gICAgICAgICAgICBlbC5zdHlsZVtwcm9wXSA9IHN0eWxlc1twcm9wXTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBlbDtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGZyYW1lO1xuXG52YXIgX3JlcXVlc3RBbmltYXRpb25GcmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfcmVxdWVzdEFuaW1hdGlvbkZyYW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlcXVlc3RBbmltYXRpb25GcmFtZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogQ3JlYXRlIGEgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgYXQgdGhlIG5leHQgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKiBjeWNsZVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAqXG4gKiBAcmV0dXJuIHtmdW5jfSBUaGUgZnVuY3Rpb24gd3JhcHBlZCB3aXRoaW4gYSByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAqL1xuZnVuY3Rpb24gZnJhbWUoZnVuYykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiAoMCwgX3JlcXVlc3RBbmltYXRpb25GcmFtZTIuZGVmYXVsdCkoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICogYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICogTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gKiBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLiBUaGUgZnVuY3Rpb24gYWxzbyBoYXMgYSBwcm9wZXJ0eSAnY2xlYXInIFxuICogdGhhdCBpcyBhIGZ1bmN0aW9uIHdoaWNoIHdpbGwgY2xlYXIgdGhlIHRpbWVyIHRvIHByZXZlbnQgcHJldmlvdXNseSBzY2hlZHVsZWQgZXhlY3V0aW9ucy4gXG4gKlxuICogQHNvdXJjZSB1bmRlcnNjb3JlLmpzXG4gKiBAc2VlIGh0dHA6Ly91bnNjcmlwdGFibGUuY29tLzIwMDkvMDMvMjAvZGVib3VuY2luZy1qYXZhc2NyaXB0LW1ldGhvZHMvXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbiB0byB3cmFwXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dCBpbiBtcyAoYDEwMGApXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdoZXRoZXIgdG8gZXhlY3V0ZSBhdCB0aGUgYmVnaW5uaW5nIChgZmFsc2VgKVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSl7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgaWYgKG51bGwgPT0gd2FpdCkgd2FpdCA9IDEwMDtcblxuICBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGRlYm91bmNlZCA9IGZ1bmN0aW9uKCl7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZGVib3VuY2VkLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgXG4gIGRlYm91bmNlZC5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRlYm91bmNlZDtcbn07XG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBwcmV2ZW50Q2xpY2s7XG5mdW5jdGlvbiBwcmV2ZW50Q2xpY2tIYW5kbGVyKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmV2ZW50Q2xpY2tIYW5kbGVyLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcHJldmVudENsaWNrKHZhbHVlcykge1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmV2ZW50Q2xpY2tIYW5kbGVyLCB0cnVlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhdmVzdXJmZXIudGlsZWRyZW5kZXJlci5qcy5tYXAiLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcInRpbWVsaW5lXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInRpbWVsaW5lXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIldhdmVTdXJmZXJcIl0gPSByb290W1wiV2F2ZVN1cmZlclwiXSB8fCB7fSwgcm9vdFtcIldhdmVTdXJmZXJcIl1bXCJ0aW1lbGluZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwibG9jYWxob3N0OjgwODAvZGlzdC9wbHVnaW4vXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUaW1lbGluZVBsdWdpblBhcmFtc1xuICogQGRlc2MgRXh0ZW5kcyB0aGUgYFdhdmVzdXJmZXJQYXJhbXNgIHdhdmVzdXJmZXIgd2FzIGluaXRpYWxpc2VkIHdpdGhcbiAqIEBwcm9wZXJ0eSB7IXN0cmluZ3xIVE1MRWxlbWVudH0gY29udGFpbmVyIENTUyBzZWxlY3RvciBvciBIVE1MIGVsZW1lbnQgd2hlcmVcbiAqIHRoZSB0aW1lbGluZSBzaG91bGQgYmUgZHJhd24uIFRoaXMgaXMgdGhlIG9ubHkgcmVxdWlyZWQgcGFyYW1ldGVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG5vdGNoUGVyY2VudEhlaWdodD05MCBIZWlnaHQgb2Ygbm90Y2hlcyBpbiBwZXJjZW50XG4gKiBAcHJvcGVydHkge3N0cmluZ30gcHJpbWFyeUNvbG9yPScjMDAwJyBUaGUgY29sb3VyIG9mIHRoZSBtYWluIG5vdGNoZXNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzZWNvbmRhcnlDb2xvcj0nI2MwYzBjMCcgVGhlIGNvbG91ciBvZiB0aGUgc2Vjb25kYXJ5XG4gKiBub3RjaGVzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcHJpbWFyeUZvbnRDb2xvcj0nIzAwMCcgVGhlIGNvbG91ciBvZiB0aGUgbGFiZWxzIG5leHQgdG9cbiAqIHRoZSBtYWluIG5vdGNoZXNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzZWNvbmRhcnlGb250Q29sb3I9JyMwMDAnIFRoZSBjb2xvdXIgb2YgdGhlIGxhYmVscyBuZXh0IHRvXG4gKiB0aGUgc2Vjb25kYXJ5IG5vdGNoZXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsYWJlbFBhZGRpbmc9NSBUaGUgcGFkZGluZyBiZXR3ZWVuIHRoZSBsYWJlbCBhbmQgdGhlIG5vdGNoXG4gKiBAcHJvcGVydHkgez9udW1iZXJ9IHpvb21EZWJvdW5jZSBBIGRlYm91bmNlIHRpbWVvdXQgdG8gaW5jcmVhc2UgcmVuZGVyaW5nXG4gKiBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgZmlsZXNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmb250RmFtaWx5PSdBcmlhbCdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmb250U2l6ZT0xMCBGb250IHNpemUgb2YgbGFiZWxzIGluIHBpeGVsc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gZm9ybWF0VGltZUNhbGxiYWNrPeKGkjAwOjAwXG4gKiBAcHJvcGVydHkgez9ib29sZWFufSBkZWZlckluaXQgU2V0IHRvIHRydWUgdG8gbWFudWFsbHkgY2FsbFxuICogYGluaXRQbHVnaW4oJ3RpbWVsaW5lJylgXG4gKi9cblxuLyoqXG4gKiBBZGRzIGEgdGltZWxpbmUgdG8gdGhlIHdhdmVmb3JtLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtQbHVnaW5DbGFzc31cbiAqIEBleHRlbmRzIHtPYnNlcnZlcn1cbiAqIEBleGFtcGxlXG4gKiAvLyBlczZcbiAqIGltcG9ydCBUaW1lbGluZVBsdWdpbiBmcm9tICd3YXZlc3VyZmVyLnRpbWVsaW5lLmpzJztcbiAqXG4gKiAvLyBjb21tb25qc1xuICogdmFyIFRpbWVsaW5lUGx1Z2luID0gcmVxdWlyZSgnd2F2ZXN1cmZlci50aW1lbGluZS5qcycpO1xuICpcbiAqIC8vIGlmIHlvdSBhcmUgdXNpbmcgPHNjcmlwdD4gdGFnc1xuICogdmFyIFRpbWVsaW5lUGx1Z2luID0gd2luZG93LldhdmVTdXJmZXIudGltZWxpbmU7XG4gKlxuICogLy8gLi4uIGluaXRpYWxpc2luZyB3YXZlc3VyZmVyIHdpdGggdGhlIHBsdWdpblxuICogdmFyIHdhdmVzdXJmZXIgPSBXYXZlU3VyZmVyLmNyZWF0ZSh7XG4gKiAgIC8vIHdhdmVzdXJmZXIgb3B0aW9ucyAuLi5cbiAqICAgcGx1Z2luczogW1xuICogICAgIFRpbWVsaW5lUGx1Z2luLmNyZWF0ZSh7XG4gKiAgICAgICAvLyBwbHVnaW4gb3B0aW9ucyAuLi5cbiAqICAgICB9KVxuICogICBdXG4gKiB9KTtcbiAqL1xudmFyIFRpbWVsaW5lUGx1Z2luID0gZnVuY3Rpb24gKCkge1xuICAgIF9jcmVhdGVDbGFzcyhUaW1lbGluZVBsdWdpbiwgbnVsbCwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGltZWxpbmUgcGx1Z2luIGRlZmluaXRpb24gZmFjdG9yeVxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgdXNlZCB0byBjcmVhdGUgYSBwbHVnaW4gZGVmaW5pdGlvbiB3aGljaCBjYW4gYmVcbiAgICAgICAgICogdXNlZCBieSB3YXZlc3VyZmVyIHRvIGNvcnJlY3RseSBpbnN0YW50aWF0ZSB0aGUgcGx1Z2luLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gIHtUaW1lbGluZVBsdWdpblBhcmFtc30gcGFyYW1zIHBhcmFtZXRlcnMgdXNlIHRvIGluaXRpYWxpc2UgdGhlIHBsdWdpblxuICAgICAgICAgKiBAcmV0dXJuIHtQbHVnaW5EZWZpbml0aW9ufSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBwbHVnaW5cbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0aW1lbGluZScsXG4gICAgICAgICAgICAgICAgZGVmZXJJbml0OiBwYXJhbXMgJiYgcGFyYW1zLmRlZmVySW5pdCA/IHBhcmFtcy5kZWZlckluaXQgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICAgICAgICBpbnN0YW5jZTogVGltZWxpbmVQbHVnaW5cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIH1dKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVGltZWxpbmVQbHVnaW4uXG4gICAgICpcbiAgICAgKiBZb3UgcHJvYmFibHkgd2FudCB0byB1c2UgVGltZWxpbmVQbHVnaW4uY3JlYXRlKClcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGltZWxpbmVQbHVnaW5QYXJhbXN9IHBhcmFtcyBQbHVnaW4gcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB3cyBXYXZlc3VyZmVyIGluc3RhbmNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGltZWxpbmVQbHVnaW4ocGFyYW1zLCB3cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUaW1lbGluZVBsdWdpbik7XG5cbiAgICAgICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9ICdzdHJpbmcnID09IHR5cGVvZiBwYXJhbXMuY29udGFpbmVyID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJhbXMuY29udGFpbmVyKSA6IHBhcmFtcy5jb250YWluZXI7XG5cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250YWluZXIgZm9yIHdhdmVzdXJmZXIgdGltZWxpbmUnKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgdGhpcy53YXZlc3VyZmVyID0gd3M7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICB0aGlzLnV0aWwgPSB3cy51dGlsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgdGhpcy5wYXJhbXMgPSB0aGlzLnV0aWwuZXh0ZW5kKHt9LCB7XG4gICAgICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICAgICAgbm90Y2hQZXJjZW50SGVpZ2h0OiA5MCxcbiAgICAgICAgICAgIGxhYmVsUGFkZGluZzogNSxcbiAgICAgICAgICAgIHByaW1hcnlDb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgc2Vjb25kYXJ5Q29sb3I6ICcjYzBjMGMwJyxcbiAgICAgICAgICAgIHByaW1hcnlGb250Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgICAgIHNlY29uZGFyeUZvbnRDb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAxMCxcbiAgICAgICAgICAgIHpvb21EZWJvdW5jZTogZmFsc2UsXG4gICAgICAgICAgICBmb3JtYXRUaW1lQ2FsbGJhY2s6IGZ1bmN0aW9uIGZvcm1hdFRpbWVDYWxsYmFjayhzZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlY29uZHMgLyA2MCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIG1pbnV0ZXMgYW5kIHNlY29uZHMgZnJvbSBzZWNvbmRzIGNvdW50XG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW51dGVzID0gcGFyc2VJbnQoc2Vjb25kcyAvIDYwLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBwYXJzZUludChzZWNvbmRzICUgNjAsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmlsbCB1cCBzZWNvbmRzIHdpdGggemVyb2VzXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBzZWNvbmRzIDwgMTAgPyAnMCcgKyBzZWNvbmRzIDogc2Vjb25kcztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAnOicgKyBzZWNvbmRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChzZWNvbmRzICogMTAwMCkgLyAxMDAwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVJbnRlcnZhbDogZnVuY3Rpb24gdGltZUludGVydmFsKHB4UGVyU2VjKSB7XG4gICAgICAgICAgICAgICAgaWYgKHB4UGVyU2VjID49IDI1KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHhQZXJTZWMgKiA1ID49IDI1KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHhQZXJTZWMgKiAxNSA+PSAyNSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoMC41IC8gcHhQZXJTZWMpICogNjA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJpbWFyeUxhYmVsSW50ZXJ2YWw6IGZ1bmN0aW9uIHByaW1hcnlMYWJlbEludGVydmFsKHB4UGVyU2VjKSB7XG4gICAgICAgICAgICAgICAgaWYgKHB4UGVyU2VjID49IDI1KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHB4UGVyU2VjICogNSA+PSAyNSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHB4UGVyU2VjICogMTUgPj0gMjUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlY29uZGFyeUxhYmVsSW50ZXJ2YWw6IGZ1bmN0aW9uIHNlY29uZGFyeUxhYmVsSW50ZXJ2YWwocHhQZXJTZWMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHhQZXJTZWMgPj0gMjUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChweFBlclNlYyAqIDUgPj0gMjUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChweFBlclNlYyAqIDE1ID49IDI1KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgcGFyYW1zKTtcblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgdGhpcy5jYW52YXNlcyA9IFtdO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgdGhpcy53cmFwcGVyID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHRoaXMuZHJhd2VyID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHRoaXMucGl4ZWxSYXRpbyA9IG51bGw7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICB0aGlzLm1heENhbnZhc1dpZHRoID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHRoaXMubWF4Q2FudmFzRWxlbWVudFdpZHRoID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaGFuZGxlciBoYXMgdG8gYmUgaW4gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGJlY2F1c2UgaXRcbiAgICAgICAgICogcmVsaWVzIG9uIHRoZSBkZWJvdW5jZSBmdW5jdGlvbiB3aGljaCBpcyBvbmx5IGF2YWlsYWJsZSBhZnRlclxuICAgICAgICAgKiBpbnN0YW50aWF0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIFVzZSBhIGRlYm91bmNlZCBmdW5jdGlvbiBpZiB6b29tRGVib3VuY2UgaXMgZGVmaW5lZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb25ab29tID0gdGhpcy5wYXJhbXMuem9vbURlYm91bmNlID8gdGhpcy53YXZlc3VyZmVyLnV0aWwuZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlcigpO1xuICAgICAgICB9LCB0aGlzLnBhcmFtcy56b29tRGVib3VuY2UpIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2F0aW9uIGZ1bmN0aW9uIHVzZWQgYnkgdGhlIHBsdWdpbiBBUElcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKFRpbWVsaW5lUGx1Z2luLCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIub24oJ3JlYWR5JywgdGhpcy5fb25SZWFkeSk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3cyBpcyByZWFkeVxuICAgICAgICAgICAgaWYgKHRoaXMud2F2ZXN1cmZlci5pc1JlYWR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25SZWFkeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc3Ryb3kgZnVuY3Rpb24gdXNlZCBieSB0aGUgcGx1Z2luIEFQSVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgdGhpcy51bkFsbCgpO1xuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLnVuKCdyZWRyYXcnLCB0aGlzLl9vblJlZHJhdyk7XG4gICAgICAgICAgICB0aGlzLndhdmVzdXJmZXIudW4oJ3pvb20nLCB0aGlzLl9vblpvb20pO1xuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLnVuKCdyZWFkeScsIHRoaXMuX29uUmVhZHkpO1xuICAgICAgICAgICAgdGhpcy53YXZlc3VyZmVyLmRyYXdlci53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLndyYXBwZXIgJiYgdGhpcy53cmFwcGVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbldyYXBwZXJDbGljayk7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIHRpbWVsaW5lIGVsZW1lbnQgdG8gd3JhcCB0aGUgY2FudmFzZXMgZHJhd24gYnkgdGhpcyBwbHVnaW5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZVdyYXBwZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlV3JhcHBlcigpIHtcbiAgICAgICAgICAgIHZhciB3c1BhcmFtcyA9IHRoaXMud2F2ZXN1cmZlci5wYXJhbXM7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9IHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RpbWVsaW5lJykpO1xuICAgICAgICAgICAgdGhpcy51dGlsLnN0eWxlKHRoaXMud3JhcHBlciwge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIHdlYmtpdFVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMucGFyYW1zLmhlaWdodCArICdweCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAod3NQYXJhbXMuZmlsbFBhcmVudCB8fCB3c1BhcmFtcy5zY3JvbGxQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWwuc3R5bGUodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WDogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25XcmFwcGVyQ2xpY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0aGUgdGltZWxpbmUgKGFsc28gdXBkYXRlcyB0aGUgYWxyZWFkeSByZW5kZXJlZCB0aW1lbGluZSlcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMud3JhcHBlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlV3JhcHBlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDYW52YXNlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYW52YXNlc1Bvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNhbnZhc2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFrZSBzdXJlIHRoZSBjb3JyZWN0IG9mIHRpbWVsaW5lIGNhbnZhcyBlbGVtZW50cyBleGlzdCBhbmQgYXJlIGNhY2hlZCBpblxuICAgICAgICAgKiB0aGlzLmNhbnZhc2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVDYW52YXNlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVDYW52YXNlcygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgYWRkQ2FudmFzID0gZnVuY3Rpb24gYWRkQ2FudmFzKCkge1xuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBfdGhpczIud3JhcHBlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmNhbnZhc2VzLnB1c2goY2FudmFzKTtcbiAgICAgICAgICAgICAgICBfdGhpczIudXRpbC5zdHlsZShjYW52YXMsIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogNFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciByZW1vdmVDYW52YXMgPSBmdW5jdGlvbiByZW1vdmVDYW52YXMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IF90aGlzMi5jYW52YXNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHRvdGFsV2lkdGggPSBNYXRoLnJvdW5kKHRoaXMuZHJhd2VyLndyYXBwZXIuc2Nyb2xsV2lkdGgpO1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVkQ2FudmFzZXMgPSBNYXRoLmNlaWwodG90YWxXaWR0aCAvIHRoaXMubWF4Q2FudmFzRWxlbWVudFdpZHRoKTtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmNhbnZhc2VzLmxlbmd0aCA8IHJlcXVpcmVkQ2FudmFzZXMpIHtcbiAgICAgICAgICAgICAgICBhZGRDYW52YXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2hpbGUgKHRoaXMuY2FudmFzZXMubGVuZ3RoID4gcmVxdWlyZWRDYW52YXNlcykge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNhbnZhcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgZGltZW5zaW9ucyBhbmQgcG9zaXRpb25pbmcgc3R5bGUgZm9yIGFsbCB0aGUgdGltZWxpbmUgY2FudmFzZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZUNhbnZhc2VzUG9zaXRpb25pbmcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ2FudmFzZXNQb3NpdGlvbmluZygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBjYWNoZSBsZW5ndGggZm9yIHBlcmZcbiAgICAgICAgICAgIHZhciBjYW52YXNlc0xlbmd0aCA9IHRoaXMuY2FudmFzZXMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5jYW52YXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChjYW52YXMsIGkpIHtcbiAgICAgICAgICAgICAgICAvLyBjYW52YXMgd2lkdGggaXMgdGhlIG1heCBlbGVtZW50IHdpZHRoLCBvciBpZiBpdCBpcyB0aGUgbGFzdCB0aGVcbiAgICAgICAgICAgICAgICAvLyByZXF1aXJlZCB3aWR0aFxuICAgICAgICAgICAgICAgIHZhciBjYW52YXNXaWR0aCA9IGkgPT09IGNhbnZhc2VzTGVuZ3RoIC0gMSA/IF90aGlzMy5kcmF3ZXIud3JhcHBlci5zY3JvbGxXaWR0aCAtIF90aGlzMy5tYXhDYW52YXNFbGVtZW50V2lkdGggKiAoY2FudmFzZXNMZW5ndGggLSAxKSA6IF90aGlzMy5tYXhDYW52YXNFbGVtZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgLy8gc2V0IGRpbWVuc2lvbnMgYW5kIHN0eWxlXG4gICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzV2lkdGggKiBfdGhpczMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgICAgICAvLyBvbiBjZXJ0YWluIHBpeGVsIHJhdGlvcyB0aGUgY2FudmFzIGFwcGVhcnMgY3V0IG9mZiBhdCB0aGUgYm90dG9tLFxuICAgICAgICAgICAgICAgIC8vIHRoZXJlZm9yZSBsZWF2ZSAxcHggZXh0cmFcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gKF90aGlzMy5wYXJhbXMuaGVpZ2h0ICsgMSkgKiBfdGhpczMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgICAgICBfdGhpczMudXRpbC5zdHlsZShjYW52YXMsIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNhbnZhc1dpZHRoICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBfdGhpczMucGFyYW1zLmhlaWdodCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGkgKiBfdGhpczMubWF4Q2FudmFzRWxlbWVudFdpZHRoICsgJ3B4J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyIHRoZSB0aW1lbGluZSBsYWJlbHMgYW5kIG5vdGNoZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlckNhbnZhc2VzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNhbnZhc2VzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMud2F2ZXN1cmZlci5iYWNrZW5kLmdldER1cmF0aW9uKCk7XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3c1BhcmFtcyA9IHRoaXMud2F2ZXN1cmZlci5wYXJhbXM7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSB0aGlzLnBhcmFtcy5mb250U2l6ZSAqIHdzUGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgICAgICB2YXIgdG90YWxTZWNvbmRzID0gcGFyc2VJbnQoZHVyYXRpb24sIDEwKSArIDE7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB3c1BhcmFtcy5maWxsUGFyZW50ICYmICF3c1BhcmFtcy5zY3JvbGxQYXJlbnQgPyB0aGlzLmRyYXdlci5nZXRXaWR0aCgpIDogdGhpcy5kcmF3ZXIud3JhcHBlci5zY3JvbGxXaWR0aCAqIHdzUGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgICAgICB2YXIgaGVpZ2h0MSA9IHRoaXMucGFyYW1zLmhlaWdodCAqIHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHZhciBoZWlnaHQyID0gdGhpcy5wYXJhbXMuaGVpZ2h0ICogKHRoaXMucGFyYW1zLm5vdGNoUGVyY2VudEhlaWdodCAvIDEwMCkgKiB0aGlzLnBpeGVsUmF0aW87XG4gICAgICAgICAgICB2YXIgcGl4ZWxzUGVyU2Vjb25kID0gd2lkdGggLyBkdXJhdGlvbjtcblxuICAgICAgICAgICAgdmFyIGZvcm1hdFRpbWUgPSB0aGlzLnBhcmFtcy5mb3JtYXRUaW1lQ2FsbGJhY2s7XG4gICAgICAgICAgICAvLyBpZiBwYXJhbWV0ZXIgaXMgZnVuY3Rpb24sIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGhcbiAgICAgICAgICAgIC8vIHBpeGVsc1BlclNlY29uZCwgb3RoZXJ3aXNlIHNpbXBseSB0YWtlIHRoZSB2YWx1ZSBhcy1pc1xuICAgICAgICAgICAgdmFyIGludGVydmFsRm5PclZhbCA9IGZ1bmN0aW9uIGludGVydmFsRm5PclZhbChvcHRpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9wdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbihwaXhlbHNQZXJTZWNvbmQpIDogb3B0aW9uO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0aW1lSW50ZXJ2YWwgPSBpbnRlcnZhbEZuT3JWYWwodGhpcy5wYXJhbXMudGltZUludGVydmFsKTtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5TGFiZWxJbnRlcnZhbCA9IGludGVydmFsRm5PclZhbCh0aGlzLnBhcmFtcy5wcmltYXJ5TGFiZWxJbnRlcnZhbCk7XG4gICAgICAgICAgICB2YXIgc2Vjb25kYXJ5TGFiZWxJbnRlcnZhbCA9IGludGVydmFsRm5PclZhbCh0aGlzLnBhcmFtcy5zZWNvbmRhcnlMYWJlbEludGVydmFsKTtcblxuICAgICAgICAgICAgdmFyIGN1clBpeGVsID0gMDtcbiAgICAgICAgICAgIHZhciBjdXJTZWNvbmRzID0gMDtcbiAgICAgICAgICAgIHZhciBpID0gdm9pZCAwO1xuICAgICAgICAgICAgLy8gYnVpbGQgYW4gYXJyYXkgb2YgcG9zaXRpb24gZGF0YSB3aXRoIGluZGV4LCBzZWNvbmQgYW5kIHBpeGVsIGRhdGEsXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRoZW4gdXNlZCBtdWx0aXBsZSB0aW1lcyBiZWxvd1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uaW5nID0gW107XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG90YWxTZWNvbmRzIC8gdGltZUludGVydmFsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbmluZy5wdXNoKFtpLCBjdXJTZWNvbmRzLCBjdXJQaXhlbF0pO1xuICAgICAgICAgICAgICAgIGN1clNlY29uZHMgKz0gdGltZUludGVydmFsO1xuICAgICAgICAgICAgICAgIGN1clBpeGVsICs9IHBpeGVsc1BlclNlY29uZCAqIHRpbWVJbnRlcnZhbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGVhY2ggcG9zaXRpb25cbiAgICAgICAgICAgIHZhciByZW5kZXJQb3NpdGlvbnMgPSBmdW5jdGlvbiByZW5kZXJQb3NpdGlvbnMoY2IpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbmluZy5mb3JFYWNoKGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IocG9zWzBdLCBwb3NbMV0sIHBvc1syXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyByZW5kZXIgcHJpbWFyeSBsYWJlbHNcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlcyh0aGlzLnBhcmFtcy5wcmltYXJ5Q29sb3IpO1xuICAgICAgICAgICAgdGhpcy5zZXRGb250cyhmb250U2l6ZSArICdweCAnICsgdGhpcy5wYXJhbXMuZm9udEZhbWlseSk7XG4gICAgICAgICAgICB0aGlzLnNldEZpbGxTdHlsZXModGhpcy5wYXJhbXMucHJpbWFyeUZvbnRDb2xvcik7XG4gICAgICAgICAgICByZW5kZXJQb3NpdGlvbnMoZnVuY3Rpb24gKGksIGN1clNlY29uZHMsIGN1clBpeGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgJSBwcmltYXJ5TGFiZWxJbnRlcnZhbCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsbFJlY3QoY3VyUGl4ZWwsIDAsIDEsIGhlaWdodDEpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsbFRleHQoZm9ybWF0VGltZShjdXJTZWNvbmRzKSwgY3VyUGl4ZWwgKyBfdGhpczQucGFyYW1zLmxhYmVsUGFkZGluZyAqIF90aGlzNC5waXhlbFJhdGlvLCBoZWlnaHQxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcmVuZGVyIHNlY29uZGFyeSBsYWJlbHNcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlcyh0aGlzLnBhcmFtcy5zZWNvbmRhcnlDb2xvcik7XG4gICAgICAgICAgICB0aGlzLnNldEZvbnRzKGZvbnRTaXplICsgJ3B4ICcgKyB0aGlzLnBhcmFtcy5mb250RmFtaWx5KTtcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlcyh0aGlzLnBhcmFtcy5zZWNvbmRhcnlGb250Q29sb3IpO1xuICAgICAgICAgICAgcmVuZGVyUG9zaXRpb25zKGZ1bmN0aW9uIChpLCBjdXJTZWNvbmRzLCBjdXJQaXhlbCkge1xuICAgICAgICAgICAgICAgIGlmIChpICUgc2Vjb25kYXJ5TGFiZWxJbnRlcnZhbCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsbFJlY3QoY3VyUGl4ZWwsIDAsIDEsIGhlaWdodDEpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsbFRleHQoZm9ybWF0VGltZShjdXJTZWNvbmRzKSwgY3VyUGl4ZWwgKyBfdGhpczQucGFyYW1zLmxhYmVsUGFkZGluZyAqIF90aGlzNC5waXhlbFJhdGlvLCBoZWlnaHQxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcmVuZGVyIHRoZSBhY3R1YWwgbm90Y2hlcyAod2hlbiBubyBsYWJlbHMgYXJlIHVzZWQpXG4gICAgICAgICAgICB0aGlzLnNldEZpbGxTdHlsZXModGhpcy5wYXJhbXMuc2Vjb25kYXJ5Q29sb3IpO1xuICAgICAgICAgICAgcmVuZGVyUG9zaXRpb25zKGZ1bmN0aW9uIChpLCBjdXJTZWNvbmRzLCBjdXJQaXhlbCkge1xuICAgICAgICAgICAgICAgIGlmIChpICUgc2Vjb25kYXJ5TGFiZWxJbnRlcnZhbCAhPT0gMCAmJiBpICUgcHJpbWFyeUxhYmVsSW50ZXJ2YWwgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmZpbGxSZWN0KGN1clBpeGVsLCAwLCAxLCBoZWlnaHQyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGNhbnZhcyBmaWxsIHN0eWxlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RE9NU3RyaW5nfENhbnZhc0dyYWRpZW50fENhbnZhc1BhdHRlcm59IGZpbGxTdHlsZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RmlsbFN0eWxlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRGaWxsU3R5bGVzKGZpbGxTdHlsZSkge1xuICAgICAgICAgICAgdGhpcy5jYW52YXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGNhbnZhcyBmb250XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RE9NU3RyaW5nfSBmb250XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRGb250cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRGb250cyhmb250KSB7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmZvbnQgPSBmb250O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgY2FudmFzZXNcbiAgICAgICAgICpcbiAgICAgICAgICogKGl0IGZpZ3VyZXMgb3V0IHRoZSBvZmZzZXQgZm9yIGVhY2ggY2FudmFzKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmlsbFJlY3QnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuY2FudmFzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2FudmFzLCBpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBpICogX3RoaXM1Lm1heENhbnZhc1dpZHRoO1xuXG4gICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDE6IE1hdGgubWF4KHgsIGkgKiBfdGhpczUubWF4Q2FudmFzV2lkdGgpLFxuICAgICAgICAgICAgICAgICAgICB5MTogeSxcbiAgICAgICAgICAgICAgICAgICAgeDI6IE1hdGgubWluKHggKyB3aWR0aCwgaSAqIF90aGlzNS5tYXhDYW52YXNXaWR0aCArIGNhbnZhcy53aWR0aCksXG4gICAgICAgICAgICAgICAgICAgIHkyOiB5ICsgaGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb24ueDEgPCBpbnRlcnNlY3Rpb24ueDIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZmlsbFJlY3QoaW50ZXJzZWN0aW9uLngxIC0gbGVmdE9mZnNldCwgaW50ZXJzZWN0aW9uLnkxLCBpbnRlcnNlY3Rpb24ueDIgLSBpbnRlcnNlY3Rpb24ueDEsIGludGVyc2VjdGlvbi55MiAtIGludGVyc2VjdGlvbi55MSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmlsbCBhIGdpdmVuIHRleHQgb24gdGhlIGNhbnZhc2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaWxsVGV4dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxsVGV4dCh0ZXh0LCB4LCB5KSB7XG4gICAgICAgICAgICB2YXIgdGV4dFdpZHRoID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHhPZmZzZXQgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhc1dpZHRoID0gY29udGV4dC5jYW52YXMud2lkdGg7XG5cbiAgICAgICAgICAgICAgICBpZiAoeE9mZnNldCA+IHggKyB0ZXh0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh4T2Zmc2V0ICsgY2FudmFzV2lkdGggPiB4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRXaWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgeCAtIHhPZmZzZXQsIHkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHhPZmZzZXQgKz0gY2FudmFzV2lkdGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUaW1lbGluZVBsdWdpbjtcbn0oKTtcblxudmFyIF9pbml0aWFsaXNlUHJvcHMgPSBmdW5jdGlvbiBfaW5pdGlhbGlzZVByb3BzKCkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgdGhpcy5fb25TY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpczYud3JhcHBlciAmJiBfdGhpczYuZHJhd2VyLndyYXBwZXIpIHtcbiAgICAgICAgICAgIF90aGlzNi53cmFwcGVyLnNjcm9sbExlZnQgPSBfdGhpczYuZHJhd2VyLndyYXBwZXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLl9vblJlZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNi5yZW5kZXIoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5fb25SZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdzID0gX3RoaXM2LndhdmVzdXJmZXI7XG4gICAgICAgIF90aGlzNi5kcmF3ZXIgPSB3cy5kcmF3ZXI7XG4gICAgICAgIF90aGlzNi5waXhlbFJhdGlvID0gd3MuZHJhd2VyLnBhcmFtcy5waXhlbFJhdGlvO1xuICAgICAgICBfdGhpczYubWF4Q2FudmFzV2lkdGggPSB3cy5kcmF3ZXIubWF4Q2FudmFzV2lkdGggfHwgd3MuZHJhd2VyLndpZHRoO1xuICAgICAgICBfdGhpczYubWF4Q2FudmFzRWxlbWVudFdpZHRoID0gd3MuZHJhd2VyLm1heENhbnZhc0VsZW1lbnRXaWR0aCB8fCBNYXRoLnJvdW5kKF90aGlzNi5tYXhDYW52YXNXaWR0aCAvIF90aGlzNi5waXhlbFJhdGlvKTtcblxuICAgICAgICB3cy5kcmF3ZXIud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczYuX29uU2Nyb2xsKTtcbiAgICAgICAgd3Mub24oJ3JlZHJhdycsIF90aGlzNi5fb25SZWRyYXcpO1xuICAgICAgICB3cy5vbignem9vbScsIF90aGlzNi5fb25ab29tKTtcbiAgICAgICAgX3RoaXM2LnJlbmRlcigpO1xuICAgIH07XG5cbiAgICB0aGlzLl9vbldyYXBwZXJDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHJlbFggPSAnb2Zmc2V0WCcgaW4gZSA/IGUub2Zmc2V0WCA6IGUubGF5ZXJYO1xuICAgICAgICBfdGhpczYuZmlyZUV2ZW50KCdjbGljaycsIHJlbFggLyBfdGhpczYud3JhcHBlci5zY3JvbGxXaWR0aCB8fCAwKTtcbiAgICB9O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gVGltZWxpbmVQbHVnaW47XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXZlc3VyZmVyLnRpbWVsaW5lLmpzLm1hcCIsIi8qIVxuICogd2F2ZXN1cmZlci5qcyAyLjAuNCAoVGh1IE1hciAwMSAyMDE4IDExOjUyOjQyIEdNVC0wODAwIChQU1QpKVxuICogaHR0cHM6Ly9naXRodWIuY29tL2thdHNwYXVnaC93YXZlc3VyZmVyLmpzXG4gKiBAbGljZW5zZSBCU0QtMy1DbGF1c2VcbiAqL1xuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJXYXZlU3VyZmVyXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIldhdmVTdXJmZXJcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiV2F2ZVN1cmZlclwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfYWpheCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnYWpheCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FqYXgpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2dldElkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdnZXRJZCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldElkKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9tYXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ21heCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21heCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfbWluID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdtaW4nLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9taW4pLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX29ic2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdPYnNlcnZlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29ic2VydmVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9leHRlbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2V4dGVuZCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc3R5bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdzdHlsZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0eWxlKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlcXVlc3RBbmltYXRpb25GcmFtZSkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdmcmFtZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZyYW1lKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9kZWJvdW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2RlYm91bmNlJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVib3VuY2UpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3ByZXZlbnRDbGljayA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3ByZXZlbnRDbGljaycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByZXZlbnRDbGljaykuZGVmYXVsdDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGlzdGVuZXJEZXNjcmlwdG9yXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnRcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFja1xuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gdW4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lclxuICovXG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3NcbiAqL1xudmFyIE9ic2VydmVyID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIE9ic2VydmVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gT2JzZXJ2ZXIoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnNlcnZlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0b2RvIEluaXRpYWxpc2UgdGhlIGhhbmRsZXJzIGhlcmUgYWxyZWFkeSBhbmQgcmVtb3ZlIHRoZSBjb25kaXRpb25hbFxuICAgICAgICAgKiBhc3NpZ25tZW50IGluIGBvbigpYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhIGhhbmRsZXIgZnVuY3Rpb24gZm9yIGFuIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGV2ZW50IGlzIGZpcmVkXG4gICAgICogQHJldHVybiB7TGlzdGVuZXJEZXNjcmlwdG9yfVxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoT2JzZXJ2ZXIsIFt7XG4gICAgICAgIGtleTogXCJvblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGZuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhbmRsZXJzLnB1c2goZm4pO1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gYW4gZXZlbnQgZGVzY3JpcHRvclxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBldmVudCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZm4sXG4gICAgICAgICAgICAgICAgdW46IGZ1bmN0aW9uIHVuKGUsIGZuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51bihlLCBmbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgYW4gZXZlbnQgaGFuZGxlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50IHRoZSBsaXN0ZW5lciB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiByZW1vdmVkIGxpc3RlbnMgdG9cbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ1blwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdW4oZXZlbnQsIGZuKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gaGFuZGxlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyc1tpXSA9PSBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSBhbGwgZXZlbnQgaGFuZGxlcnMuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwidW5BbGxcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuQWxsKCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoIGEgaGFuZGxlciB0byBhbiBldmVudC4gVGhlIGhhbmRsZXIgaXMgZXhlY3V0ZWQgYXQgbW9zdCBvbmNlIHBlclxuICAgICAgICAgKiBldmVudCB0eXBlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBjYWxsYmFjayB0aGF0IGlzIG9ubHkgdG8gYmUgY2FsbGVkIG9uY2VcbiAgICAgICAgICogQHJldHVybiB7TGlzdGVuZXJEZXNjcmlwdG9yfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm9uY2VcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBmbigpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qICBlc2xpbnQtZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMgKi9cbiAgICAgICAgICAgICAgICBoYW5kbGVyLmFwcGx5KF90aGlzMiwgYXJncyk7XG4gICAgICAgICAgICAgICAgLyogIGVzbGludC1lbmFibGUgbm8taW52YWxpZC10aGlzICovXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi51bihldmVudCwgZm4pO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50LCBmbik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFudWFsbHkgZmlyZSBhbiBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHRvIGZpcmUgbWFudWFsbHlcbiAgICAgICAgICogQHBhcmFtIHsuLi5hbnl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB3aXRoIHdoaWNoIHRvIGNhbGwgdGhlIGxpc3RlbmVyc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImZpcmVFdmVudFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmlyZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF07XG4gICAgICAgICAgICBoYW5kbGVycyAmJiBoYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgIGZuLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBPYnNlcnZlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gT2JzZXJ2ZXI7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmdW5jdGlvbiBmb3IgdGhlIGJyb3dzZXIsIG9yIGEgc2hpbSB3aXRoXG4gKiBzZXRUaW1lb3V0IGlmIG5vbmUgaXMgZm91bmRcbiAqXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZXhwb3J0cy5kZWZhdWx0ID0gKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbiAoY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTtcbn0pLmJpbmQod2luZG93KTtcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIHV0aWwgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfdXRpbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuLy8gdXNpbmcgY29uc3RzIHRvIHByZXZlbnQgc29tZW9uZSB3cml0aW5nIHRoZSBzdHJpbmcgd3JvbmdcbnZhciBQTEFZSU5HID0gJ3BsYXlpbmcnO1xudmFyIFBBVVNFRCA9ICdwYXVzZWQnO1xudmFyIEZJTklTSEVEID0gJ2ZpbmlzaGVkJztcblxuLyoqXG4gKiBXZWJBdWRpbyBiYWNrZW5kXG4gKlxuICogQGV4dGVuZHMge09ic2VydmVyfVxuICovXG5cbnZhciBXZWJBdWRpbyA9IGZ1bmN0aW9uIChfdXRpbCRPYnNlcnZlcikge1xuICAgIF9pbmhlcml0cyhXZWJBdWRpbywgX3V0aWwkT2JzZXJ2ZXIpO1xuXG4gICAgX2NyZWF0ZUNsYXNzKFdlYkF1ZGlvLCBbe1xuICAgICAgICBrZXk6ICdzdXBwb3J0c1dlYkF1ZGlvJyxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgdGhpcyBiYWNrZW5kXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3VwcG9ydHNXZWJBdWRpbygpIHtcbiAgICAgICAgICAgIHJldHVybiAhISh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgYXVkaW8gY29udGV4dCB1c2VkIGJ5IHRoaXMgYmFja2VuZCBvciBjcmVhdGUgb25lXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge0F1ZGlvQ29udGV4dH1cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEF1ZGlvQ29udGV4dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBdWRpb0NvbnRleHQoKSB7XG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5XYXZlU3VyZmVyQXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LldhdmVTdXJmZXJBdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuV2F2ZVN1cmZlckF1ZGlvQ29udGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIG9mZmxpbmUgYXVkaW8gY29udGV4dCB1c2VkIGJ5IHRoaXMgYmFja2VuZCBvciBjcmVhdGUgb25lXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzYW1wbGVSYXRlXG4gICAgICAgICAqIEByZXR1cm4ge09mZmxpbmVBdWRpb0NvbnRleHR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRPZmZsaW5lQXVkaW9Db250ZXh0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9mZmxpbmVBdWRpb0NvbnRleHQoc2FtcGxlUmF0ZSkge1xuICAgICAgICAgICAgaWYgKCF3aW5kb3cuV2F2ZVN1cmZlck9mZmxpbmVBdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuV2F2ZVN1cmZlck9mZmxpbmVBdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5PZmZsaW5lQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRPZmZsaW5lQXVkaW9Db250ZXh0KSgxLCAyLCBzYW1wbGVSYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuV2F2ZVN1cmZlck9mZmxpbmVBdWRpb0NvbnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0IHRoZSBiYWNrZW5kXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7V2F2ZXN1cmZlclBhcmFtc30gcGFyYW1zXG4gICAgICAgICAqL1xuXG4gICAgfV0pO1xuXG4gICAgZnVuY3Rpb24gV2ViQXVkaW8ocGFyYW1zKSB7XG4gICAgICAgIHZhciBfdGhpcyRzdGF0ZUJlaGF2aW9ycywgX3RoaXMkc3RhdGVzO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWJBdWRpbyk7XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChXZWJBdWRpby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdlYkF1ZGlvKSkuY2FsbCh0aGlzKSk7XG5cbiAgICAgICAgX3RoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICAgICAgX3RoaXMub2ZmbGluZUF1ZGlvQ29udGV4dCA9IG51bGw7XG4gICAgICAgIF90aGlzLnN0YXRlQmVoYXZpb3JzID0gKF90aGlzJHN0YXRlQmVoYXZpb3JzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfdGhpcyRzdGF0ZUJlaGF2aW9ycywgUExBWUlORywge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9uQXVkaW9Qcm9jZXNzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UGxheWVkUGVyY2VudHM6IGZ1bmN0aW9uIGdldFBsYXllZFBlcmNlbnRzKCkge1xuICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMuZ2V0RHVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VGltZSgpIC8gZHVyYXRpb24gfHwgMDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRDdXJyZW50VGltZTogZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRQb3NpdGlvbiArIHRoaXMuZ2V0UGxheWVkVGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgX2RlZmluZVByb3BlcnR5KF90aGlzJHN0YXRlQmVoYXZpb3JzLCBQQVVTRUQsIHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVPbkF1ZGlvUHJvY2VzcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFBsYXllZFBlcmNlbnRzOiBmdW5jdGlvbiBnZXRQbGF5ZWRQZXJjZW50cygpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLmdldER1cmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFRpbWUoKSAvIGR1cmF0aW9uIHx8IDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Q3VycmVudFRpbWU6IGZ1bmN0aW9uIGdldEN1cnJlbnRUaW1lKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0UG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX3RoaXMkc3RhdGVCZWhhdmlvcnMsIEZJTklTSEVELCB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlT25BdWRpb1Byb2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgnZmluaXNoJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UGxheWVkUGVyY2VudHM6IGZ1bmN0aW9uIGdldFBsYXllZFBlcmNlbnRzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEN1cnJlbnRUaW1lOiBmdW5jdGlvbiBnZXRDdXJyZW50VGltZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREdXJhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgX3RoaXMkc3RhdGVCZWhhdmlvcnMpO1xuICAgICAgICBfdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5hYyA9IHBhcmFtcy5hdWRpb0NvbnRleHQgfHwgX3RoaXMuZ2V0QXVkaW9Db250ZXh0KCk7XG4gICAgICAgIC8qKkBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmxhc3RQbGF5ID0gX3RoaXMuYWMuY3VycmVudFRpbWU7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5zdGFydFBvc2l0aW9uID0gMDtcbiAgICAgICAgLyoqIEBwcml2YXRlICAqL1xuICAgICAgICBfdGhpcy5zY2hlZHVsZWRQYXVzZSA9IG51bGw7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5zdGF0ZXMgPSAoX3RoaXMkc3RhdGVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfdGhpcyRzdGF0ZXMsIFBMQVlJTkcsIE9iamVjdC5jcmVhdGUoX3RoaXMuc3RhdGVCZWhhdmlvcnNbUExBWUlOR10pKSwgX2RlZmluZVByb3BlcnR5KF90aGlzJHN0YXRlcywgUEFVU0VELCBPYmplY3QuY3JlYXRlKF90aGlzLnN0YXRlQmVoYXZpb3JzW1BBVVNFRF0pKSwgX2RlZmluZVByb3BlcnR5KF90aGlzJHN0YXRlcywgRklOSVNIRUQsIE9iamVjdC5jcmVhdGUoX3RoaXMuc3RhdGVCZWhhdmlvcnNbRklOSVNIRURdKSksIF90aGlzJHN0YXRlcyk7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5hbmFseXNlciA9IG51bGw7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuZmlsdGVycyA9IFtdO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuZ2Fpbk5vZGUgPSBudWxsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMubWVyZ2VkUGVha3MgPSBudWxsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMub2ZmbGluZUFjID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLnBlYWtzID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLnBsYXliYWNrUmF0ZSA9IDE7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5hbmFseXNlciA9IG51bGw7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5zY3JpcHROb2RlID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5zcGxpdFBlYWtzID0gW107XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IG51bGw7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5leHBsaWNpdER1cmF0aW9uID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2UgdGhlIGJhY2tlbmQsIGNhbGxlZCBpbiBgd2F2ZXN1cmZlci5jcmVhdGVCYWNrZW5kKClgXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhXZWJBdWRpbywgW3tcbiAgICAgICAga2V5OiAnaW5pdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVWb2x1bWVOb2RlKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNjcmlwdE5vZGUoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQW5hbHlzZXJOb2RlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoUEFVU0VEKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGxheWJhY2tSYXRlKHRoaXMucGFyYW1zLmF1ZGlvUmF0ZSk7XG4gICAgICAgICAgICB0aGlzLnNldExlbmd0aCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkaXNjb25uZWN0RmlsdGVycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0RmlsdGVycygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcnMuZm9yRWFjaChmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlciAmJiBmaWx0ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy8gUmVjb25uZWN0IGRpcmVjdCBwYXRoXG4gICAgICAgICAgICAgICAgdGhpcy5hbmFseXNlci5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFN0YXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdGhpcy5zdGF0ZXNbc3RhdGVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGVzW3N0YXRlXTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmluaXQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVbnBhY2tlZCBgc2V0RmlsdGVycygpYFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gey4uLkF1ZGlvTm9kZX0gZmlsdGVyc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RmlsdGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZpbHRlcigpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmaWx0ZXJzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluc2VydCBjdXN0b20gV2ViIEF1ZGlvIG5vZGVzIGludG8gdGhlIGdyYXBoXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7QXVkaW9Ob2RlW119IGZpbHRlcnMgUGFja2VkIGZpbHRlcnMgYXJyYXlcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogY29uc3QgbG93cGFzcyA9IHdhdmVzdXJmZXIuYmFja2VuZC5hYy5jcmVhdGVCaXF1YWRGaWx0ZXIoKTtcbiAgICAgICAgICogd2F2ZXN1cmZlci5iYWNrZW5kLnNldEZpbHRlcihsb3dwYXNzKTtcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldEZpbHRlcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RmlsdGVycyhmaWx0ZXJzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZXhpc3RpbmcgZmlsdGVyc1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0RmlsdGVycygpO1xuXG4gICAgICAgICAgICAvLyBJbnNlcnQgZmlsdGVycyBpZiBmaWx0ZXIgYXJyYXkgbm90IGVtcHR5XG4gICAgICAgICAgICBpZiAoZmlsdGVycyAmJiBmaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XG5cbiAgICAgICAgICAgICAgICAvLyBEaXNjb25uZWN0IGRpcmVjdCBwYXRoIGJlZm9yZSBpbnNlcnRpbmcgZmlsdGVyc1xuICAgICAgICAgICAgICAgIHRoaXMuYW5hbHlzZXIuZGlzY29ubmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29ubmVjdCBlYWNoIGZpbHRlciBpbiB0dXJuXG4gICAgICAgICAgICAgICAgZmlsdGVycy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGN1cnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldi5jb25uZWN0KGN1cnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycjtcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmFuYWx5c2VyKS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZVNjcmlwdE5vZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2NyaXB0Tm9kZSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjLmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyaXB0Tm9kZSA9IHRoaXMuYWMuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKFdlYkF1ZGlvLnNjcmlwdEJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcmlwdE5vZGUgPSB0aGlzLmFjLmNyZWF0ZUphdmFTY3JpcHROb2RlKFdlYkF1ZGlvLnNjcmlwdEJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNjcmlwdE5vZGUuY29ubmVjdCh0aGlzLmFjLmRlc3RpbmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRPbkF1ZGlvUHJvY2VzcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRPbkF1ZGlvUHJvY2VzcygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnNjcmlwdE5vZGUub25hdWRpb3Byb2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBfdGhpczIuZ2V0Q3VycmVudFRpbWUoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lID49IF90aGlzMi5nZXREdXJhdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZShGSU5JU0hFRCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5maXJlRXZlbnQoJ3BhdXNlJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lID49IF90aGlzMi5zY2hlZHVsZWRQYXVzZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi5zdGF0ZSA9PT0gX3RoaXMyLnN0YXRlc1tQTEFZSU5HXSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuZmlyZUV2ZW50KCdhdWRpb3Byb2Nlc3MnLCB0aW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbW92ZU9uQXVkaW9Qcm9jZXNzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZU9uQXVkaW9Qcm9jZXNzKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JpcHROb2RlLm9uYXVkaW9wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVBbmFseXNlck5vZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQW5hbHlzZXJOb2RlKCkge1xuICAgICAgICAgICAgdGhpcy5hbmFseXNlciA9IHRoaXMuYWMuY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYW5hbHlzZXIuY29ubmVjdCh0aGlzLmdhaW5Ob2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgdGhlIGdhaW4gbm9kZSBuZWVkZWQgdG8gY29udHJvbCB0aGUgcGxheWJhY2sgdm9sdW1lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlVm9sdW1lTm9kZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVWb2x1bWVOb2RlKCkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGdhaW4gbm9kZSB1c2luZyB0aGUgQXVkaW9Db250ZXh0XG4gICAgICAgICAgICBpZiAodGhpcy5hYy5jcmVhdGVHYWluKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nYWluTm9kZSA9IHRoaXMuYWMuY3JlYXRlR2FpbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhaW5Ob2RlID0gdGhpcy5hYy5jcmVhdGVHYWluTm9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIHRoZSBnYWluIG5vZGUgdG8gdGhlIGdyYXBoXG4gICAgICAgICAgICB0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5hYy5kZXN0aW5hdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBzaW5rIGlkIGZvciB0aGUgbWVkaWEgcGxheWVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCBTdHJpbmcgdmFsdWUgcmVwcmVzZW50aW5nIGF1ZGlvIGRldmljZSBpZC5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFNpbmtJZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTaW5rSWQoZGV2aWNlSWQpIHtcbiAgICAgICAgICAgIGlmIChkZXZpY2VJZCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoZSB3ZWJhdWRpbyBhcGkgZG9lc24ndCBjdXJyZW50bHkgc3VwcG9ydCBzZXR0aW5nIHRoZSBkZXZpY2VcbiAgICAgICAgICAgICAgICAgKiBvdXRwdXQuIEhlcmUgd2UgY3JlYXRlIGFuIEhUTUxBdWRpb0VsZW1lbnQsIGNvbm5lY3QgdGhlXG4gICAgICAgICAgICAgICAgICogd2ViYXVkaW8gc3RyZWFtIHRvIHRoYXQgZWxlbWVudCBhbmQgc2V0U2lua0lkIHRoZXJlLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHZhciBhdWRpbyA9IG5ldyB3aW5kb3cuQXVkaW8oKTtcbiAgICAgICAgICAgICAgICBpZiAoIWF1ZGlvLnNldFNpbmtJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdzZXRTaW5rSWQgaXMgbm90IHN1cHBvcnRlZCBpbiB5b3VyIGJyb3dzZXInKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF1ZGlvLmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgZGVzdCA9IHRoaXMuYWMuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2Fpbk5vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2Fpbk5vZGUuY29ubmVjdChkZXN0KTtcbiAgICAgICAgICAgICAgICBhdWRpby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRlc3Quc3RyZWFtKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBhdWRpby5zZXRTaW5rSWQoZGV2aWNlSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIGRldmljZUlkOiAnICsgZGV2aWNlSWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGF1ZGlvIHZvbHVtZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgQSBmbG9hdGluZyBwb2ludCB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRWb2x1bWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Vm9sdW1lKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmdhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodmFsdWUsIHRoaXMuYWMuY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgY3VycmVudCB2b2x1bWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSB2YWx1ZSBBIGZsb2F0aW5nIHBvaW50IHZhbHVlIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFZvbHVtZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWb2x1bWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nYWluTm9kZS5nYWluLnZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RlY29kZUFycmF5QnVmZmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlY29kZUFycmF5QnVmZmVyKGFycmF5YnVmZmVyLCBjYWxsYmFjaywgZXJyYmFjaykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9mZmxpbmVBYykge1xuICAgICAgICAgICAgICAgIHRoaXMub2ZmbGluZUFjID0gdGhpcy5nZXRPZmZsaW5lQXVkaW9Db250ZXh0KHRoaXMuYWMgPyB0aGlzLmFjLnNhbXBsZVJhdGUgOiA0NDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZmxpbmVBYy5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSwgZXJyYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHByZS1kZWNvZGVkIHBlYWtzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW118bnVtYmVyW11bXX0gcGVha3NcbiAgICAgICAgICogQHBhcmFtIHs/bnVtYmVyfSBkdXJhdGlvblxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0UGVha3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGVha3MocGVha3MsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGxpY2l0RHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgICAgIHRoaXMucGVha3MgPSBwZWFrcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHJlbmRlcmVkIGxlbmd0aCAoZGlmZmVyZW50IGZyb20gdGhlIGxlbmd0aCBvZiB0aGUgYXVkaW8pLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRMZW5ndGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGVuZ3RoKGxlbmd0aCkge1xuICAgICAgICAgICAgLy8gTm8gcmVzaXplLCB3ZSBjYW4gcHJlc2VydmUgdGhlIGNhY2hlZCBwZWFrcy5cbiAgICAgICAgICAgIGlmICh0aGlzLm1lcmdlZFBlYWtzICYmIGxlbmd0aCA9PSAyICogdGhpcy5tZXJnZWRQZWFrcy5sZW5ndGggLSAxICsgMikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zcGxpdFBlYWtzID0gW107XG4gICAgICAgICAgICB0aGlzLm1lcmdlZFBlYWtzID0gW107XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgc3BhcnNlIGFycmF5IHNvIHRoZSBwZWFrIGFycmF5cyBhcmVcbiAgICAgICAgICAgIC8vIGFwcHJvcHJpYXRlbHkgc2l6ZWQgZm9yIG90aGVyIGNhbGN1bGF0aW9ucy5cbiAgICAgICAgICAgIHZhciBjaGFubmVscyA9IHRoaXMuYnVmZmVyID8gdGhpcy5idWZmZXIubnVtYmVyT2ZDaGFubmVscyA6IDE7XG4gICAgICAgICAgICB2YXIgYyA9IHZvaWQgMDtcbiAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBjaGFubmVsczsgYysrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdFBlYWtzW2NdID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdFBlYWtzW2NdWzIgKiAobGVuZ3RoIC0gMSldID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0UGVha3NbY11bMiAqIChsZW5ndGggLSAxKSArIDFdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVyZ2VkUGVha3NbMiAqIChsZW5ndGggLSAxKV0gPSAwO1xuICAgICAgICAgICAgdGhpcy5tZXJnZWRQZWFrc1syICogKGxlbmd0aCAtIDEpICsgMV0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXB1dGUgdGhlIG1heCBhbmQgbWluIHZhbHVlIG9mIHRoZSB3YXZlZm9ybSB3aGVuIGJyb2tlbiBpbnRvIDxsZW5ndGg+IHN1YnJhbmdlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCBIb3cgbWFueSBzdWJyYW5nZXMgdG8gYnJlYWsgdGhlIHdhdmVmb3JtIGludG8uXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmaXJzdCBGaXJzdCBzYW1wbGUgaW4gdGhlIHJlcXVpcmVkIHJhbmdlLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdCBMYXN0IHNhbXBsZSBpbiB0aGUgcmVxdWlyZWQgcmFuZ2UuXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcltdfG51bWJlcltdW119IEFycmF5IG9mIDIqPGxlbmd0aD4gcGVha3Mgb3IgYXJyYXkgb2YgYXJyYXlzIG9mXG4gICAgICAgICAqIHBlYWtzIGNvbnNpc3Rpbmcgb2YgKG1heCwgbWluKSB2YWx1ZXMgZm9yIGVhY2ggc3VicmFuZ2UuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRQZWFrcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQZWFrcyhsZW5ndGgsIGZpcnN0LCBsYXN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZWFrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBlYWtzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaXJzdCA9IGZpcnN0IHx8IDA7XG4gICAgICAgICAgICBsYXN0ID0gbGFzdCB8fCBsZW5ndGggLSAxO1xuXG4gICAgICAgICAgICB0aGlzLnNldExlbmd0aChsZW5ndGgpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBmb2xsb3dpbmcgc25pcHBldCBmaXhlcyBhIGJ1ZmZlcmluZyBkYXRhIGlzc3VlIG9uIHRoZSBTYWZhcmlcbiAgICAgICAgICAgICAqIGJyb3dzZXIgd2hpY2ggcmV0dXJuZWQgdW5kZWZpbmVkIEl0IGNyZWF0ZXMgdGhlIG1pc3NpbmcgYnVmZmVyIGJhc2VkXG4gICAgICAgICAgICAgKiBvbiAxIGNoYW5uZWwsIDQwOTYgc2FtcGxlcyBhbmQgdGhlIHNhbXBsZVJhdGUgZnJvbSB0aGUgY3VycmVudFxuICAgICAgICAgICAgICogd2ViYXVkaW8gY29udGV4dCA0MDk2IHNhbXBsZXMgc2VlbWVkIHRvIGJlIHRoZSBiZXN0IGZpdCBmb3IgcmVuZGVyaW5nXG4gICAgICAgICAgICAgKiB3aWxsIHJldmlldyB0aGlzIGNvZGUgb25jZSBhIHN0YWJsZSB2ZXJzaW9uIG9mIFNhZmFyaSBUUCBpcyBvdXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QnVmZmVyID0gdGhpcy5jcmVhdGVCdWZmZXIoMSwgNDA5NiwgdGhpcy5zYW1wbGVSYXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ld0J1ZmZlci5idWZmZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzYW1wbGVTaXplID0gdGhpcy5idWZmZXIubGVuZ3RoIC8gbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHNhbXBsZVN0ZXAgPSB+fihzYW1wbGVTaXplIC8gMTApIHx8IDE7XG4gICAgICAgICAgICB2YXIgY2hhbm5lbHMgPSB0aGlzLmJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzO1xuICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBjaGFubmVsczsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlYWtzID0gdGhpcy5zcGxpdFBlYWtzW2NdO1xuICAgICAgICAgICAgICAgIHZhciBjaGFuID0gdGhpcy5idWZmZXIuZ2V0Q2hhbm5lbERhdGEoYyk7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBmaXJzdDsgaSA8PSBsYXN0OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gfn4oaSAqIHNhbXBsZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gfn4oc3RhcnQgKyBzYW1wbGVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IHZvaWQgMDtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBzdGFydDsgaiA8IGVuZDsgaiArPSBzYW1wbGVTdGVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjaGFuW2pdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwZWFrc1syICogaV0gPSBtYXg7XG4gICAgICAgICAgICAgICAgICAgIHBlYWtzWzIgKiBpICsgMV0gPSBtaW47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT0gMCB8fCBtYXggPiB0aGlzLm1lcmdlZFBlYWtzWzIgKiBpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZWRQZWFrc1syICogaV0gPSBtYXg7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PSAwIHx8IG1pbiA8IHRoaXMubWVyZ2VkUGVha3NbMiAqIGkgKyAxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZWRQZWFrc1syICogaSArIDFdID0gbWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXMuc3BsaXRDaGFubmVscyA/IHRoaXMuc3BsaXRQZWFrcyA6IHRoaXMubWVyZ2VkUGVha3M7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBwb3NpdGlvbiBmcm9tIDAgdG8gMVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRQbGF5ZWRQZXJjZW50cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQbGF5ZWRQZXJjZW50cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmdldFBsYXllZFBlcmNlbnRzLmNhbGwodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGlzY29ubmVjdFNvdXJjZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0U291cmNlKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2F2ZXN1cmZlciBpcyBkZXN0cm95ZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1BhdXNlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51bkFsbCgpO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0RmlsdGVycygpO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0U291cmNlKCk7XG4gICAgICAgICAgICB0aGlzLmdhaW5Ob2RlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0Tm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmFuYWx5c2VyLmRpc2Nvbm5lY3QoKTtcblxuICAgICAgICAgICAgLy8gY2xvc2UgdGhlIGF1ZGlvQ29udGV4dCBpZiBjbG9zZUF1ZGlvQ29udGV4dCBvcHRpb24gaXMgc2V0IHRvIHRydWVcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5jbG9zZUF1ZGlvQ29udGV4dCkge1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGJyb3dzZXIgc3VwcG9ydHMgQXVkaW9Db250ZXh0LmNsb3NlKClcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuYWMuY2xvc2UgPT09ICdmdW5jdGlvbicgJiYgdGhpcy5hYy5zdGF0ZSAhPSAnY2xvc2VkJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNsZWFyIHRoZSByZWZlcmVuY2UgdG8gdGhlIGF1ZGlvY29udGV4dFxuICAgICAgICAgICAgICAgIHRoaXMuYWMgPSBudWxsO1xuICAgICAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBhY3R1YWwgYXVkaW9jb250ZXh0LCBlaXRoZXIgcGFzc2VkIGFzIHBhcmFtIG9yIHRoZVxuICAgICAgICAgICAgICAgIC8vIGdsb2JhbCBzaW5nbGV0b25cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyYW1zLmF1ZGlvQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuV2F2ZVN1cmZlckF1ZGlvQ29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIG9mZmxpbmVBdWRpb0NvbnRleHRcbiAgICAgICAgICAgICAgICB3aW5kb3cuV2F2ZVN1cmZlck9mZmxpbmVBdWRpb0NvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRlZCBhIGRlY29kZWQgYXVkaW8gYnVmZmVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBidWZmZXJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2xvYWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZChidWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICB0aGlzLmxhc3RQbGF5ID0gdGhpcy5hYy5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTb3VyY2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVTb3VyY2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU291cmNlKCkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0U291cmNlKCk7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHRoaXMuYWMuY3JlYXRlQnVmZmVyU291cmNlKCk7XG5cbiAgICAgICAgICAgIC8vIGFkanVzdCBmb3Igb2xkIGJyb3dzZXJzXG4gICAgICAgICAgICB0aGlzLnNvdXJjZS5zdGFydCA9IHRoaXMuc291cmNlLnN0YXJ0IHx8IHRoaXMuc291cmNlLm5vdGVHcmFpbk9uO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2Uuc3RvcCA9IHRoaXMuc291cmNlLnN0b3AgfHwgdGhpcy5zb3VyY2Uubm90ZU9mZjtcblxuICAgICAgICAgICAgdGhpcy5zb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHRoaXMucGxheWJhY2tSYXRlLCB0aGlzLmFjLmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLmJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmFuYWx5c2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGJ5IGB3YXZlc3VyZmVyLmlzUGxheWluZygpYCBhbmQgYHdhdmVzdXJmZXIucGxheVBhdXNlKClgXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdpc1BhdXNlZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1BhdXNlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlICE9PSB0aGlzLnN0YXRlc1tQTEFZSU5HXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGJ5IGB3YXZlc3VyZmVyLmdldER1cmF0aW9uKClgXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldER1cmF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldER1cmF0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cGxpY2l0RHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwbGljaXREdXJhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZHVyYXRpb247XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCBieSBgd2F2ZXN1cmZlci5zZWVrVG8oKWBcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFBvc2l0aW9uIHRvIHN0YXJ0IGF0IGluIHNlY29uZHNcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBQb3NpdGlvbiB0byBlbmQgYXQgaW4gc2Vjb25kc1xuICAgICAgICAgKiBAcmV0dXJuIHt7c3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXJ9fVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Vla1RvJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlZWtUbyhzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlZFBhdXNlID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHN0YXJ0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IHRoaXMuZ2V0Q3VycmVudFRpbWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPj0gdGhpcy5nZXREdXJhdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbmQgPSB0aGlzLmdldER1cmF0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiA9IHN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5sYXN0UGxheSA9IHRoaXMuYWMuY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB0aGlzLnN0YXRlc1tGSU5JU0hFRF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKFBBVVNFRCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGVuZDogZW5kXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgcGxheWJhY2sgcG9zaXRpb24gaW4gc2Vjb25kc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRQbGF5ZWRUaW1lJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBsYXllZFRpbWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuYWMuY3VycmVudFRpbWUgLSB0aGlzLmxhc3RQbGF5KSAqIHRoaXMucGxheWJhY2tSYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBsYXlzIHRoZSBsb2FkZWQgYXVkaW8gcmVnaW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgU3RhcnQgb2Zmc2V0IGluIHNlY29uZHMsIHJlbGF0aXZlIHRvIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICogb2YgYSBjbGlwLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFdoZW4gdG8gc3RvcCByZWxhdGl2ZSB0byB0aGUgYmVnaW5uaW5nIG9mIGEgY2xpcC5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3BsYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxheShzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBuZWVkIHRvIHJlLWNyZWF0ZSBzb3VyY2Ugb24gZWFjaCBwbGF5YmFja1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTb3VyY2UoKTtcblxuICAgICAgICAgICAgdmFyIGFkanVzdGVkVGltZSA9IHRoaXMuc2Vla1RvKHN0YXJ0LCBlbmQpO1xuXG4gICAgICAgICAgICBzdGFydCA9IGFkanVzdGVkVGltZS5zdGFydDtcbiAgICAgICAgICAgIGVuZCA9IGFkanVzdGVkVGltZS5lbmQ7XG5cbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVkUGF1c2UgPSBlbmQ7XG5cbiAgICAgICAgICAgIHRoaXMuc291cmNlLnN0YXJ0KDAsIHN0YXJ0LCBlbmQgLSBzdGFydCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFjLnN0YXRlID09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hYy5yZXN1bWUgJiYgdGhpcy5hYy5yZXN1bWUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShQTEFZSU5HKTtcblxuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ3BsYXknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXVzZXMgdGhlIGxvYWRlZCBhdWRpby5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3BhdXNlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZWRQYXVzZSA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiArPSB0aGlzLmdldFBsYXllZFRpbWUoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlICYmIHRoaXMuc291cmNlLnN0b3AoMCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoUEFVU0VEKTtcblxuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ3BhdXNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudCB0aW1lIGluIHNlY29uZHMgcmVsYXRpdmUgdG8gdGhlIGF1ZGlvY2xpcCdzXG4gICAgICAgICAqIGR1cmF0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDdXJyZW50VGltZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50VGltZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmdldEN1cnJlbnRUaW1lLmNhbGwodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLiAoMD1ubyBwbGF5YmFjaywgMT1ub3JtYWwgcGxheWJhY2spXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFBsYXliYWNrUmF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQbGF5YmFja1JhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5YmFja1JhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBhdWRpbyBzb3VyY2UgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRQbGF5YmFja1JhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGxheWJhY2tSYXRlKHZhbHVlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIHx8IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhdXNlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5YmFja1JhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheWJhY2tSYXRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gV2ViQXVkaW87XG59KHV0aWwuT2JzZXJ2ZXIpO1xuXG5XZWJBdWRpby5zY3JpcHRCdWZmZXJTaXplID0gMjU2O1xuZXhwb3J0cy5kZWZhdWx0ID0gV2ViQXVkaW87XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIHV0aWwgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfdXRpbCk7XG5cbnZhciBfZHJhd2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cbnZhciBfZHJhd2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RyYXdlcik7XG5cbnZhciBfd2ViYXVkaW8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX3dlYmF1ZGlvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dlYmF1ZGlvKTtcblxudmFyIF9tZWRpYWVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9tZWRpYWVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVkaWFlbGVtZW50KTtcblxudmFyIF9wZWFrY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIF9wZWFrY2FjaGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGVha2NhY2hlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKlxuICogVGhpcyB3b3JrIGlzIGxpY2Vuc2VkIHVuZGVyIGEgQlNELTMtQ2xhdXNlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEBleHRlcm5hbCB7SFRNTEVsZW1lbnR9IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS9IVE1MRWxlbWVudCAqL1xuLyoqIEBleHRlcm5hbCB7T2ZmbGluZUF1ZGlvQ29udGV4dH0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL09mZmxpbmVBdWRpb0NvbnRleHQgKi9cbi8qKiBAZXh0ZXJuYWwge0ZpbGV9IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9GaWxlICovXG4vKiogQGV4dGVybmFsIHtCbG9ifSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQmxvYiAqL1xuLyoqIEBleHRlcm5hbCB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICovXG4vKiogQGV4dGVybmFsIHtNZWRpYVN0cmVhbUNvbnN0cmFpbnRzfSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTWVkaWFTdHJlYW1Db25zdHJhaW50cyAqL1xuLyoqIEBleHRlcm5hbCB7QXVkaW9Ob2RlfSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kZS9kb2NzL1dlYi9BUEkvQXVkaW9Ob2RlICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gV2F2ZXN1cmZlclBhcmFtc1xuICogQHByb3BlcnR5IHtBdWRpb0NvbnRleHR9IGF1ZGlvQ29udGV4dD1udWxsIFVzZSB5b3VyIG93biBwcmV2aW91c2x5XG4gKiBpbml0aWFsaXplZCBBdWRpb0NvbnRleHQgb3IgbGVhdmUgYmxhbmsuXG4gKiBAcHJvcGVydHkge251bWJlcn0gYXVkaW9SYXRlPTEgU3BlZWQgYXQgd2hpY2ggdG8gcGxheSBhdWRpby4gTG93ZXIgbnVtYmVyIGlzXG4gKiBzbG93ZXIuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGF1dG9DZW50ZXI9dHJ1ZSBJZiBhIHNjcm9sbGJhciBpcyBwcmVzZW50LCBjZW50ZXIgdGhlXG4gKiB3YXZlZm9ybSBhcm91bmQgdGhlIHByb2dyZXNzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gYmFja2VuZD0nV2ViQXVkaW8nIGAnV2ViQXVkaW8nfCdNZWRpYUVsZW1lbnQnYCBJbiBtb3N0IGNhc2VzXG4gKiB5b3UgZG9uJ3QgaGF2ZSB0byBzZXQgdGhpcyBtYW51YWxseS4gTWVkaWFFbGVtZW50IGlzIGEgZmFsbGJhY2sgZm9yXG4gKiB1bnN1cHBvcnRlZCBicm93c2Vycy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBiYXJIZWlnaHQ9MSBUaGUgaGVpZ2h0IG9mIHRoZSB3YXZlXG4gKiBAcHJvcGVydHkge251bWJlcn0gYmFyR2FwPW51bGwgVGhlIG9wdGlvbmFsIHNwYWNpbmcgYmV0d2VlbiBiYXJzIG9mIHRoZSB3YXZlLFxuICogaWYgbm90IHByb3ZpZGVkIHdpbGwgYmUgY2FsY3VsYXRlZCBpbiBsZWdhY3kgZm9ybWF0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBjbG9zZUF1ZGlvQ29udGV4dD1mYWxzZSBDbG9zZSBhbmQgbnVsbGlmeSBhbGwgYXVkaW9cbiAqIGNvbnRleHRzIHdoZW4gdGhlIGRlc3Ryb3kgbWV0aG9kIGlzIGNhbGxlZC5cbiAqIEBwcm9wZXJ0eSB7IXN0cmluZ3xIVE1MRWxlbWVudH0gY29udGFpbmVyIENTUyBzZWxlY3RvciBvciBIVE1MIGVsZW1lbnQgd2hlcmVcbiAqIHRoZSB3YXZlZm9ybSBzaG91bGQgYmUgZHJhd24uIFRoaXMgaXMgdGhlIG9ubHkgcmVxdWlyZWQgcGFyYW1ldGVyLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnNvckNvbG9yPScjMzMzJyBUaGUgZmlsbCBjb2xvciBvZiB0aGUgY3Vyc29yIGluZGljYXRpbmdcbiAqIHRoZSBwbGF5aGVhZCBwb3NpdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBjdXJzb3JXaWR0aD0xIE1lYXN1cmVkIGluIHBpeGVscy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZmlsbFBhcmVudD10cnVlIFdoZXRoZXIgdG8gZmlsbCB0aGUgZW50aXJlIGNvbnRhaW5lciBvclxuICogZHJhdyBvbmx5IGFjY29yZGluZyB0byBgbWluUHhQZXJTZWNgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBmb3JjZURlY29kZT1mYWxzZSBGb3JjZSBkZWNvZGluZyBvZiBhdWRpbyB1c2luZyB3ZWIgYXVkaW9cbiAqIHdoZW4gem9vbWluZyB0byBnZXQgYSBtb3JlIGRldGFpbGVkIHdhdmVmb3JtLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodD0xMjggVGhlIGhlaWdodCBvZiB0aGUgd2F2ZWZvcm0uIE1lYXN1cmVkIGluXG4gKiBwaXhlbHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhpZGVTY3JvbGxiYXI9ZmFsc2UgV2hldGhlciB0byBoaWRlIHRoZSBob3Jpem9udGFsXG4gKiBzY3JvbGxiYXIgd2hlbiBvbmUgd291bGQgbm9ybWFsbHkgYmUgc2hvd24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGludGVyYWN0PXRydWUgV2hldGhlciB0aGUgbW91c2UgaW50ZXJhY3Rpb24gd2lsbCBiZVxuICogZW5hYmxlZCBhdCBpbml0aWFsaXphdGlvbi4gWW91IGNhbiBzd2l0Y2ggdGhpcyBwYXJhbWV0ZXIgYXQgYW55IHRpbWUgbGF0ZXJcbiAqIG9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBsb29wU2VsZWN0aW9uPXRydWUgKFVzZSB3aXRoIHJlZ2lvbnMgcGx1Z2luKSBFbmFibGVcbiAqIGxvb3Bpbmcgb2Ygc2VsZWN0ZWQgcmVnaW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heENhbnZhc1dpZHRoPTQwMDAgTWF4aW11bSB3aWR0aCBvZiBhIHNpbmdsZSBjYW52YXMgaW5cbiAqIHBpeGVscywgZXhjbHVkaW5nIGEgc21hbGwgb3ZlcmxhcCAoMiAqIGBwaXhlbFJhdGlvYCwgcm91bmRlZCB1cCB0byB0aGUgbmV4dFxuICogZXZlbiBpbnRlZ2VyKS4gSWYgdGhlIHdhdmVmb3JtIGlzIGxvbmdlciB0aGFuIHRoaXMgdmFsdWUsIGFkZGl0aW9uYWwgY2FudmFzZXNcbiAqIHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHdhdmVmb3JtLCB3aGljaCBpcyB1c2VmdWwgZm9yIHZlcnkgbGFyZ2Ugd2F2ZWZvcm1zXG4gKiB0aGF0IG1heSBiZSB0b28gd2lkZSBmb3IgYnJvd3NlcnMgdG8gZHJhdyBvbiBhIHNpbmdsZSBjYW52YXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IG1lZGlhQ29udHJvbHM9ZmFsc2UgKFVzZSB3aXRoIGJhY2tlbmQgYE1lZGlhRWxlbWVudGApXG4gKiB0aGlzIGVuYWJsZXMgdGhlIG5hdGl2ZSBjb250cm9scyBmb3IgdGhlIG1lZGlhIGVsZW1lbnRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtZWRpYVR5cGU9J2F1ZGlvJyAoVXNlIHdpdGggYmFja2VuZCBgTWVkaWFFbGVtZW50YClcbiAqIGAnYXVkaW8nfCd2aWRlbydgXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluUHhQZXJTZWM9MjAgTWluaW11bSBudW1iZXIgb2YgcGl4ZWxzIHBlciBzZWNvbmQgb2ZcbiAqIGF1ZGlvLlxuICogQHByb3BlcnR5IHtib29sZWFufSBub3JtYWxpemU9ZmFsc2UgSWYgdHJ1ZSwgbm9ybWFsaXplIGJ5IHRoZSBtYXhpbXVtIHBlYWtcbiAqIGluc3RlYWQgb2YgMS4wLlxuICogQHByb3BlcnR5IHtib29sZWFufSBwYXJ0aWFsUmVuZGVyPWZhbHNlIFVzZSB0aGUgUGVha0NhY2hlIHRvIGltcHJvdmVcbiAqIHJlbmRlcmluZyBzcGVlZCBvZiBsYXJnZSB3YXZlZm9ybXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIFRoZSBwaXhlbCByYXRpbyB1c2VkIHRvXG4gKiBjYWxjdWxhdGUgZGlzcGxheVxuICogQHByb3BlcnR5IHtQbHVnaW5EZWZpbml0aW9uW119IHBsdWdpbnM9W10gQW4gYXJyYXkgb2YgcGx1Z2luIGRlZmluaXRpb25zIHRvXG4gKiByZWdpc3RlciBkdXJpbmcgaW5zdGFudGlhdGlvbiwgdGhleSB3aWxsIGJlIGRpcmVjdGx5IGluaXRpYWxpc2VkIHVubGVzcyB0aGV5XG4gKiBhcmUgYWRkZWQgd2l0aCB0aGUgYGRlZmVySW5pdGAgcHJvcGVydHkgc2V0IHRvIHRydWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcHJvZ3Jlc3NDb2xvcj0nIzU1NScgVGhlIGZpbGwgY29sb3Igb2YgdGhlIHBhcnQgb2YgdGhlXG4gKiB3YXZlZm9ybSBiZWhpbmQgdGhlIGN1cnNvci5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcmVtb3ZlTWVkaWFFbGVtZW50T25EZXN0cm95PXRydWUgU2V0IHRvIGZhbHNlIHRvIGtlZXAgdGhlXG4gKiBtZWRpYSBlbGVtZW50IGluIHRoZSBET00gd2hlbiB0aGUgcGxheWVyIGlzIGRlc3Ryb3llZC4gVGhpcyBpcyB1c2VmdWwgd2hlblxuICogcmV1c2luZyBhbiBleGlzdGluZyBtZWRpYSBlbGVtZW50IHZpYSB0aGUgYGxvYWRNZWRpYUVsZW1lbnRgIG1ldGhvZC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSByZW5kZXJlcj1NdWx0aUNhbnZhcyBDYW4gYmUgdXNlZCB0byBpbmplY3QgYSBjdXN0b21cbiAqIHJlbmRlcmVyLlxuICogQHByb3BlcnR5IHtib29sZWFufG51bWJlcn0gcmVzcG9uc2l2ZT1mYWxzZSBJZiBzZXQgdG8gYHRydWVgIHJlc2l6ZSB0aGVcbiAqIHdhdmVmb3JtLCB3aGVuIHRoZSB3aW5kb3cgaXMgcmVzaXplZC4gVGhpcyBpcyBkZWJvdW5jZWQgd2l0aCBhIGAxMDBtc2BcbiAqIHRpbWVvdXQgYnkgZGVmYXVsdC4gSWYgdGhpcyBwYXJhbWV0ZXIgaXMgYSBudW1iZXIgaXQgcmVwcmVzZW50cyB0aGF0IHRpbWVvdXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNjcm9sbFBhcmVudD1mYWxzZSBXaGV0aGVyIHRvIHNjcm9sbCB0aGUgY29udGFpbmVyIHdpdGggYVxuICogbGVuZ3RoeSB3YXZlZm9ybS4gT3RoZXJ3aXNlIHRoZSB3YXZlZm9ybSBpcyBzaHJ1bmsgdG8gdGhlIGNvbnRhaW5lciB3aWR0aFxuICogKHNlZSBmaWxsUGFyZW50KS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBza2lwTGVuZ3RoPTIgTnVtYmVyIG9mIHNlY29uZHMgdG8gc2tpcCB3aXRoIHRoZVxuICogc2tpcEZvcndhcmQoKSBhbmQgc2tpcEJhY2t3YXJkKCkgbWV0aG9kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc3BsaXRDaGFubmVscz1mYWxzZSBSZW5kZXIgd2l0aCBzZXBlcmF0ZSB3YXZlZm9ybXMgZm9yXG4gKiB0aGUgY2hhbm5lbHMgb2YgdGhlIGF1ZGlvXG4gKiBAcHJvcGVydHkge3N0cmluZ30gd2F2ZUNvbG9yPScjOTk5JyBUaGUgZmlsbCBjb2xvciBvZiB0aGUgd2F2ZWZvcm0gYWZ0ZXIgdGhlXG4gKiBjdXJzb3IuXG4gKiBAcHJvcGVydHkge29iamVjdH0geGhyPXt9IFhIUiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUGx1Z2luRGVmaW5pdGlvblxuICogQGRlc2MgVGhlIE9iamVjdCB1c2VkIHRvIGRlc2NyaWJlIGEgcGx1Z2luXG4gKiBAZXhhbXBsZSB3YXZlc3VyZmVyLmFkZFBsdWdpbihwbHVnaW5EZWZpbml0aW9uKTtcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBwbHVnaW4sIHRoZSBwbHVnaW4gaW5zdGFuY2Ugd2lsbCBiZVxuICogYWRkZWQgYXMgYSBwcm9wZXJ0eSB0byB0aGUgd2F2ZXN1cmZlciBpbnN0YW5jZSB1bmRlciB0aGlzIG5hbWVcbiAqIEBwcm9wZXJ0eSB7P09iamVjdH0gc3RhdGljUHJvcHMgVGhlIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgYWRkZWQgdG8gdGhlXG4gKiB3YXZlc3VyZmVyIGluc3RhbmNlIGFzIHN0YXRpYyBwcm9wZXJ0aWVzXG4gKiBAcHJvcGVydHkgez9ib29sZWFufSBkZWZlckluaXQgRG9uJ3QgaW5pdGlhbGlzZSBwbHVnaW5cbiAqIGF1dG9tYXRpY2FsbHlcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwYXJhbXM9e30gVGhlIHBsdWdpbiBwYXJhbWV0ZXJzLCB0aGV5IGFyZSB0aGUgZmlyc3QgcGFyYW1ldGVyXG4gKiBwYXNzZWQgdG8gdGhlIHBsdWdpbiBjbGFzcyBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICogQHByb3BlcnR5IHtQbHVnaW5DbGFzc30gaW5zdGFuY2UgVGhlIHBsdWdpbiBpbnN0YW5jZSBmYWN0b3J5LCBpcyBjYWxsZWQgd2l0aFxuICogdGhlIGRlcGVuZGVuY3kgc3BlY2lmaWVkIGluIGV4dGVuZHMuIFJldHVybnMgdGhlIHBsdWdpbiBjbGFzcy5cbiAqL1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgUGx1Z2luQ2xhc3NcbiAqXG4gKiBAZGVzYyBUaGlzIGlzIHRoZSBpbnRlcmZhY2Ugd2hpY2ggaXMgaW1wbGVtZW50ZWQgYnkgYWxsIHBsdWdpbiBjbGFzc2VzLiBOb3RlXG4gKiB0aGF0IHRoaXMgb25seSB0dXJucyBpbnRvIGFuIG9ic2VydmVyIGFmdGVyIGJlaW5nIHBhc3NlZCB0aHJvdWdoXG4gKiBgd2F2ZXN1cmZlci5hZGRQbHVnaW5gLlxuICpcbiAqIEBleHRlbmRzIHtPYnNlcnZlcn1cbiAqL1xudmFyIFBsdWdpbkNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgIF9jcmVhdGVDbGFzcyhQbHVnaW5DbGFzcywgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUGx1Z2luIGRlZmluaXRpb24gZmFjdG9yeVxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgdXNlZCB0byBjcmVhdGUgYSBwbHVnaW4gZGVmaW5pdGlvbiB3aGljaCBjYW4gYmVcbiAgICAgICAgICogdXNlZCBieSB3YXZlc3VyZmVyIHRvIGNvcnJlY3RseSBpbnN0YW50aWF0ZSB0aGUgcGx1Z2luLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHBhcmFtcz17fSBUaGUgcGx1Z2luIHBhcmFtcyAoc3BlY2lmaWMgdG8gdGhlIHBsdWdpbilcbiAgICAgICAgICogQHJldHVybiB7UGx1Z2luRGVmaW5pdGlvbn0gYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcGx1Z2luXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKHBhcmFtcykge31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdCB0aGUgcGx1Z2luXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB3cyBUaGUgd2F2ZXN1cmZlciBpbnN0YW5jZVxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zPXt9IFRoZSBwbHVnaW4gcGFyYW1zIChzcGVjaWZpYyB0byB0aGUgcGx1Z2luKVxuICAgICAgICAgKi9cblxuICAgIH1dKTtcblxuICAgIGZ1bmN0aW9uIFBsdWdpbkNsYXNzKHdzLCBwYXJhbXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsdWdpbkNsYXNzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGlzZSB0aGUgcGx1Z2luXG4gICAgICpcbiAgICAgKiBTdGFydCBkb2luZyBzb21ldGhpbmcuIFRoaXMgaXMgY2FsbGVkIGJ5XG4gICAgICogYHdhdmVzdXJmZXIuaW5pdFBsdWdpbihwbHVnaW5OYW1lKWBcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKFBsdWdpbkNsYXNzLCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7fVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVzdHJveSB0aGUgcGx1Z2luIGluc3RhbmNlXG4gICAgICAgICAqXG4gICAgICAgICAqIFN0b3AgZG9pbmcgc29tZXRoaW5nLiBUaGlzIGlzIGNhbGxlZCBieVxuICAgICAgICAgKiBgd2F2ZXN1cmZlci5kZXN0cm95UGx1Z2luKHBsdWdpbk5hbWUpYFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge31cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUGx1Z2luQ2xhc3M7XG59KCk7XG5cbi8qKlxuICogV2F2ZVN1cmZlciBjb3JlIGxpYnJhcnkgY2xhc3NcbiAqXG4gKiBAZXh0ZW5kcyB7T2JzZXJ2ZXJ9XG4gKiBAZXhhbXBsZVxuICogY29uc3QgcGFyYW1zID0ge1xuICogICBjb250YWluZXI6ICcjd2F2ZWZvcm0nLFxuICogICB3YXZlQ29sb3I6ICd2aW9sZXQnLFxuICogICBwcm9ncmVzc0NvbG9yOiAncHVycGxlJ1xuICogfTtcbiAqXG4gKiAvLyBpbml0aWFsaXNlIGxpa2UgdGhpc1xuICogY29uc3Qgd2F2ZXN1cmZlciA9IFdhdmVTdXJmZXIuY3JlYXRlKHBhcmFtcyk7XG4gKlxuICogLy8gb3IgbGlrZSB0aGlzIC4uLlxuICogY29uc3Qgd2F2ZXN1cmZlciA9IG5ldyBXYXZlU3VyZmVyKHBhcmFtcyk7XG4gKiB3YXZlc3VyZmVyLmluaXQoKTtcbiAqXG4gKiAvLyBsb2FkIGF1ZGlvIGZpbGVcbiAqIHdhdmVzdXJmZXIubG9hZCgnZXhhbXBsZS9tZWRpYS9kZW1vLndhdicpO1xuICovXG5cblxudmFyIFdhdmVTdXJmZXIgPSBmdW5jdGlvbiAoX3V0aWwkT2JzZXJ2ZXIpIHtcbiAgICBfaW5oZXJpdHMoV2F2ZVN1cmZlciwgX3V0aWwkT2JzZXJ2ZXIpO1xuXG4gICAgX2NyZWF0ZUNsYXNzKFdhdmVTdXJmZXIsIG51bGwsIFt7XG4gICAgICAgIGtleTogJ2NyZWF0ZScsXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5zdGFudGlhdGUgdGhpcyBjbGFzcywgY2FsbCBpdHMgYGluaXRgIGZ1bmN0aW9uIGFuZCByZXR1cm5zIGl0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7V2F2ZXN1cmZlclBhcmFtc30gcGFyYW1zXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gV2F2ZVN1cmZlciBpbnN0YW5jZVxuICAgICAgICAgKiBAZXhhbXBsZSBjb25zdCB3YXZlc3VyZmVyID0gV2F2ZVN1cmZlci5jcmVhdGUocGFyYW1zKTtcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUocGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgd2F2ZXN1cmZlciA9IG5ldyBXYXZlU3VyZmVyKHBhcmFtcyk7XG4gICAgICAgICAgICByZXR1cm4gd2F2ZXN1cmZlci5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuY3Rpb25zIGluIHRoZSBgdXRpbGAgcHJvcGVydHkgYXJlIGF2YWlsYWJsZSBhcyBhIHByb3RvdHlwZSBwcm9wZXJ0eSB0b1xuICAgICAgICAgKiBhbGwgaW5zdGFuY2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGNvbnN0IHdhdmVzdXJmZXIgPSBXYXZlU3VyZmVyLmNyZWF0ZShwYXJhbXMpO1xuICAgICAgICAgKiB3YXZlc3VyZmVyLnV0aWwuc3R5bGUobXlFbGVtZW50LCB7IGJhY2tncm91bmQ6ICdibHVlJyB9KTtcbiAgICAgICAgICovXG5cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW5jdGlvbnMgaW4gdGhlIGB1dGlsYCBwcm9wZXJ0eSBhcmUgYXZhaWxhYmxlIGFzIGEgc3RhdGljIHByb3BlcnR5IG9mIHRoZVxuICAgICAgICAgKiBXYXZlU3VyZmVyIGNsYXNzXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIFdhdmVTdXJmZXIudXRpbC5zdHlsZShteUVsZW1lbnQsIHsgYmFja2dyb3VuZDogJ2JsdWUnIH0pO1xuICAgICAgICAgKi9cblxuICAgIH1dKTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2Ugd2F2ZXN1cmZlciBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtXYXZlc3VyZmVyUGFyYW1zfSBwYXJhbXMgSW5zdGFudGlhdGlvbiBvcHRpb25zIGZvciB3YXZlc3VyZmVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCB3YXZlc3VyZmVyID0gbmV3IFdhdmVTdXJmZXIocGFyYW1zKTtcbiAgICAgKiBAcmV0dXJucyB7dGhpc31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBXYXZlU3VyZmVyKHBhcmFtcykge1xuICAgICAgICB2YXIgX3JldDtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2F2ZVN1cmZlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dHJhY3QgcmVsZXZhbnQgcGFyYW1ldGVycyAob3IgZGVmYXVsdHMpXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoV2F2ZVN1cmZlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdhdmVTdXJmZXIpKS5jYWxsKHRoaXMpKTtcblxuICAgICAgICBfdGhpcy5kZWZhdWx0UGFyYW1zID0ge1xuICAgICAgICAgICAgYXVkaW9Db250ZXh0OiBudWxsLFxuICAgICAgICAgICAgYXVkaW9SYXRlOiAxLFxuICAgICAgICAgICAgYXV0b0NlbnRlcjogdHJ1ZSxcbiAgICAgICAgICAgIGJhY2tlbmQ6ICdXZWJBdWRpbycsXG4gICAgICAgICAgICBiYXJIZWlnaHQ6IDEsXG4gICAgICAgICAgICBiYXJHYXA6IG51bGwsXG4gICAgICAgICAgICBjb250YWluZXI6IG51bGwsXG4gICAgICAgICAgICBjdXJzb3JDb2xvcjogJyMzMzMnLFxuICAgICAgICAgICAgY3Vyc29yV2lkdGg6IDEsXG4gICAgICAgICAgICBkcmFnU2VsZWN0aW9uOiB0cnVlLFxuICAgICAgICAgICAgZmlsbFBhcmVudDogdHJ1ZSxcbiAgICAgICAgICAgIGZvcmNlRGVjb2RlOiBmYWxzZSxcbiAgICAgICAgICAgIGhlaWdodDogMTI4LFxuICAgICAgICAgICAgaGlkZVNjcm9sbGJhcjogZmFsc2UsXG4gICAgICAgICAgICBpbnRlcmFjdDogdHJ1ZSxcbiAgICAgICAgICAgIGxvb3BTZWxlY3Rpb246IHRydWUsXG4gICAgICAgICAgICBtYXhDYW52YXNXaWR0aDogNDAwMCxcbiAgICAgICAgICAgIG1lZGlhQ29udGFpbmVyOiBudWxsLFxuICAgICAgICAgICAgbWVkaWFDb250cm9sczogZmFsc2UsXG4gICAgICAgICAgICBtZWRpYVR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICBtaW5QeFBlclNlYzogMjAsXG4gICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxuICAgICAgICAgICAgcGFydGlhbFJlbmRlcjogZmFsc2UsXG4gICAgICAgICAgICBwaXhlbFJhdGlvOiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCBzY3JlZW4uZGV2aWNlWERQSSAvIHNjcmVlbi5sb2dpY2FsWERQSSxcbiAgICAgICAgICAgIHBsdWdpbnM6IFtdLFxuICAgICAgICAgICAgcHJvZ3Jlc3NDb2xvcjogJyM1NTUnLFxuICAgICAgICAgICAgcmVtb3ZlTWVkaWFFbGVtZW50T25EZXN0cm95OiB0cnVlLFxuICAgICAgICAgICAgcmVuZGVyZXI6IF9kcmF3ZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICByZXNwb25zaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHNjcm9sbFBhcmVudDogZmFsc2UsXG4gICAgICAgICAgICBza2lwTGVuZ3RoOiAyLFxuICAgICAgICAgICAgc3BsaXRDaGFubmVsczogZmFsc2UsXG4gICAgICAgICAgICB3YXZlQ29sb3I6ICcjOTk5JyxcbiAgICAgICAgICAgIHhocjoge31cbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuYmFja2VuZHMgPSB7XG4gICAgICAgICAgICBNZWRpYUVsZW1lbnQ6IF9tZWRpYWVsZW1lbnQyLmRlZmF1bHQsXG4gICAgICAgICAgICBXZWJBdWRpbzogX3dlYmF1ZGlvMi5kZWZhdWx0XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnV0aWwgPSB1dGlsO1xuICAgICAgICBfdGhpcy5wYXJhbXMgPSB1dGlsLmV4dGVuZCh7fSwgX3RoaXMuZGVmYXVsdFBhcmFtcywgcGFyYW1zKTtcblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyID0gJ3N0cmluZycgPT0gdHlwZW9mIHBhcmFtcy5jb250YWluZXIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF90aGlzLnBhcmFtcy5jb250YWluZXIpIDogX3RoaXMucGFyYW1zLmNvbnRhaW5lcjtcblxuICAgICAgICBpZiAoIV90aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb250YWluZXIgZWxlbWVudCBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfdGhpcy5wYXJhbXMubWVkaWFDb250YWluZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgICAgICBfdGhpcy5tZWRpYUNvbnRhaW5lciA9IF90aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoaXMucGFyYW1zLm1lZGlhQ29udGFpbmVyID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgICAgIF90aGlzLm1lZGlhQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihfdGhpcy5wYXJhbXMubWVkaWFDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgICAgICBfdGhpcy5tZWRpYUNvbnRhaW5lciA9IF90aGlzLnBhcmFtcy5tZWRpYUNvbnRhaW5lcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghX3RoaXMubWVkaWFDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWVkaWEgQ29udGFpbmVyIGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3RoaXMucGFyYW1zLm1heENhbnZhc1dpZHRoIDw9IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWF4Q2FudmFzV2lkdGggbXVzdCBiZSBncmVhdGVyIHRoYW4gMScpO1xuICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnBhcmFtcy5tYXhDYW52YXNXaWR0aCAlIDIgPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXhDYW52YXNXaWR0aCBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGUgVXNlZCB0byBzYXZlIHRoZSBjdXJyZW50IHZvbHVtZSB3aGVuIG11dGluZyBzbyB3ZSBjYW5cbiAgICAgICAgICogcmVzdG9yZSBvbmNlIHVubXV0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNhdmVkVm9sdW1lID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGUgVGhlIGN1cnJlbnQgbXV0ZWQgc3RhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pc011dGVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlIFdpbGwgaG9sZCBhIGxpc3Qgb2YgZXZlbnQgZGVzY3JpcHRvcnMgdGhhdCBuZWVkIHRvIGJlXG4gICAgICAgICAqIGNhbmNlbGxlZCBvbiBzdWJzZXF1ZW50IGxvYWRzIG9mIGF1ZGlvXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3RbXX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcEV2ZW50cyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZSBIb2xkcyBhbnkgcnVubmluZyBhdWRpbyBkb3dubG9hZHNcbiAgICAgICAgICogQHR5cGUge09ic2VydmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3VycmVudEFqYXggPSBudWxsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYXJyYXlidWZmZXIgPSBudWxsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuZHJhd2VyID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJhY2tlbmQgPSBudWxsO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMucGVha0NhY2hlID0gbnVsbDtcblxuICAgICAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvciBvYmplY3RzXG4gICAgICAgIGlmICh0eXBlb2YgX3RoaXMucGFyYW1zLnJlbmRlcmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbmRlcmVyIHBhcmFtZXRlciBpcyBpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlIFRoZSB1bmluaXRpYWxpc2VkIERyYXdlciBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuRHJhd2VyID0gX3RoaXMucGFyYW1zLnJlbmRlcmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGUgVGhlIHVuaW5pdGlhbGlzZWQgQmFja2VuZCBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuQmFja2VuZCA9IF90aGlzLmJhY2tlbmRzW190aGlzLnBhcmFtcy5iYWNrZW5kXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGUgbWFwIG9mIHBsdWdpbiBuYW1lcyB0aGF0IGFyZSBjdXJyZW50bHkgaW5pdGlhbGlzZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmluaXRpYWxpc2VkUGx1Z2luTGlzdCA9IHt9O1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmlzUmVhZHkgPSBmYWxzZTtcblxuICAgICAgICAvLyByZXNwb25zaXZlIGRlYm91bmNlZCBldmVudCBsaXN0ZW5lci4gSWYgdGhpcy5wYXJhbXMucmVzcG9uc2l2ZSBpcyBub3RcbiAgICAgICAgLy8gc2V0LCB0aGlzIGlzIG5ldmVyIGNhbGxlZC4gVXNlIDEwMG1zIG9yIHRoaXMucGFyYW1zLnJlc3BvbnNpdmUgYXNcbiAgICAgICAgLy8gdGltZW91dCBmb3IgdGhlIGRlYm91bmNlIGZ1bmN0aW9uLlxuICAgICAgICB2YXIgcHJldldpZHRoID0gMDtcbiAgICAgICAgX3RoaXMuX29uUmVzaXplID0gdXRpbC5kZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocHJldldpZHRoICE9IF90aGlzLmRyYXdlci53cmFwcGVyLmNsaWVudFdpZHRoICYmICFfdGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcHJldldpZHRoID0gX3RoaXMuZHJhd2VyLndyYXBwZXIuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgX3RoaXMuZHJhd2VyLmZpcmVFdmVudCgncmVkcmF3Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHR5cGVvZiBfdGhpcy5wYXJhbXMucmVzcG9uc2l2ZSA9PT0gJ251bWJlcicgPyBfdGhpcy5wYXJhbXMucmVzcG9uc2l2ZSA6IDEwMCk7XG5cbiAgICAgICAgcmV0dXJuIF9yZXQgPSBfdGhpcywgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2UgdGhlIHdhdmVcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIHdhdmVzdXJmZXIgPSBuZXcgV2F2ZVN1cmZlcihwYXJhbXMpO1xuICAgICAqIHdhdmVzdXJmZXIuaW5pdCgpO1xuICAgICAqIEByZXR1cm4ge3RoaXN9XG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhXYXZlU3VyZmVyLCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyUGx1Z2lucyh0aGlzLnBhcmFtcy5wbHVnaW5zKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRHJhd2VyKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUJhY2tlbmQoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUGVha0NhY2hlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgYW5kIGluaXRpYWxpc2UgYXJyYXkgb2YgcGx1Z2lucyAoaWYgYHBsdWdpbi5kZWZlckluaXRgIGlzIGZhbHNleSksXG4gICAgICAgICAqIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGluIHRoZSBpbml0IGZ1bmN0aW9uIG9mIHdhdmVzdXJmZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtQbHVnaW5EZWZpbml0aW9uW119IHBsdWdpbnMgQW4gYXJyYXkgb2YgcGx1Z2luIGRlZmluaXRpb25zXG4gICAgICAgICAqIEBlbWl0cyB7V2F2ZVN1cmZlciNwbHVnaW5zLXJlZ2lzdGVyZWR9IENhbGxlZCB3aXRoIHRoZSBhcnJheSBvZiBwbHVnaW4gZGVmaW5pdGlvbnNcbiAgICAgICAgICogQHJldHVybiB7dGhpc31cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlZ2lzdGVyUGx1Z2lucycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlclBsdWdpbnMocGx1Z2lucykge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIGZpcnN0IGluc3RhbnRpYXRlIGFsbCB0aGUgcGx1Z2luc1xuICAgICAgICAgICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmFkZFBsdWdpbihwbHVnaW4pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIG5vdyBydW4gdGhlIGluaXQgZnVuY3Rpb25zXG4gICAgICAgICAgICBwbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIC8vIGNhbGwgaW5pdCBmdW5jdGlvbiBvZiB0aGUgcGx1Z2luIGlmIGRlZmVySW5pdCBpcyBmYWxzZXlcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGF0IGNhc2UgeW91IHdvdWxkIG1hbnVhbGx5IHVzZSBpbml0UGx1Z2lucygpXG4gICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uZGVmZXJJbml0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5pbml0UGx1Z2luKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdwbHVnaW5zLXJlZ2lzdGVyZWQnLCBwbHVnaW5zKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBhIHBsdWdpbiBvYmplY3QgdG8gd2F2ZXN1cmZlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge1BsdWdpbkRlZmluaXRpb259IHBsdWdpbiBBIHBsdWdpbiBkZWZpbml0aW9uXG4gICAgICAgICAqIEBlbWl0cyB7V2F2ZVN1cmZlciNwbHVnaW4tYWRkZWR9IENhbGxlZCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBwbHVnaW4gdGhhdCB3YXMgYWRkZWRcbiAgICAgICAgICogQGV4YW1wbGUgd2F2ZXN1cmZlci5hZGRQbHVnaW4oV2F2ZVN1cmZlci5taW5pbWFwKCkpO1xuICAgICAgICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWRkUGx1Z2luJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFBsdWdpbihwbHVnaW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXBsdWdpbi5uYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbHVnaW4gZG9lcyBub3QgaGF2ZSBhIG5hbWUhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBsdWdpbi5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGx1Z2luICcgKyBwbHVnaW4ubmFtZSArICcgZG9lcyBub3QgaGF2ZSBhbiBpbnN0YW5jZSBwcm9wZXJ0eSEnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3RhdGljUHJvcHMgcHJvcGVydGllcyBhcmUgYXBwbGllZCB0byB3YXZlc3VyZmVyIGluc3RhbmNlXG4gICAgICAgICAgICBpZiAocGx1Z2luLnN0YXRpY1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocGx1Z2luLnN0YXRpY1Byb3BzKS5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW5TdGF0aWNQcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIGRlZmluZWQgaW4gYSBwbHVnaW4gZGVmaW5pdGlvbidzIGBzdGF0aWNQcm9wc2AgcHJvcGVydHkgYXJlIGFkZGVkIGFzXG4gICAgICAgICAgICAgICAgICAgICAqIHN0YXRpY1Byb3BzIHByb3BlcnRpZXMgb2YgdGhlIFdhdmVTdXJmZXIgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIF90aGlzM1twbHVnaW5TdGF0aWNQcm9wXSA9IHBsdWdpbi5zdGF0aWNQcm9wc1twbHVnaW5TdGF0aWNQcm9wXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIEluc3RhbmNlID0gcGx1Z2luLmluc3RhbmNlO1xuXG4gICAgICAgICAgICAvLyB0dXJuIHRoZSBwbHVnaW4gaW5zdGFuY2UgaW50byBhbiBvYnNlcnZlclxuICAgICAgICAgICAgdmFyIG9ic2VydmVyUHJvdG90eXBlS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHV0aWwuT2JzZXJ2ZXIucHJvdG90eXBlKTtcbiAgICAgICAgICAgIG9ic2VydmVyUHJvdG90eXBlS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBJbnN0YW5jZS5wcm90b3R5cGVba2V5XSA9IHV0aWwuT2JzZXJ2ZXIucHJvdG90eXBlW2tleV07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbnN0YW50aWF0ZWQgcGx1Z2luIGNsYXNzZXMgYXJlIGFkZGVkIGFzIGEgcHJvcGVydHkgb2YgdGhlIHdhdmVzdXJmZXJcbiAgICAgICAgICAgICAqIGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzW3BsdWdpbi5uYW1lXSA9IG5ldyBJbnN0YW5jZShwbHVnaW4ucGFyYW1zIHx8IHt9LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdwbHVnaW4tYWRkZWQnLCBwbHVnaW4ubmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXNlIGEgcGx1Z2luXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgcGx1Z2luIG5hbWVcbiAgICAgICAgICogQGVtaXRzIFdhdmVTdXJmZXIjcGx1Z2luLWluaXRpYWxpc2VkXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIuaW5pdFBsdWdpbignbWluaW1hcCcpO1xuICAgICAgICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaW5pdFBsdWdpbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0UGx1Z2luKG5hbWUpIHtcbiAgICAgICAgICAgIGlmICghdGhpc1tuYW1lXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGx1Z2luICcgKyBuYW1lICsgJyBoYXMgbm90IGJlZW4gYWRkZWQgeWV0IScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGlzZWRQbHVnaW5MaXN0W25hbWVdKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVzdHJveSBhbnkgYWxyZWFkeSBpbml0aWFsaXNlZCBwbHVnaW5zXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95UGx1Z2luKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1tuYW1lXS5pbml0KCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpc2VkUGx1Z2luTGlzdFtuYW1lXSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgncGx1Z2luLWluaXRpYWxpc2VkJywgbmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXN0cm95IGEgcGx1Z2luXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgcGx1Z2luIG5hbWVcbiAgICAgICAgICogQGVtaXRzIFdhdmVTdXJmZXIjcGx1Z2luLWRlc3Ryb3llZFxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLmRlc3Ryb3lQbHVnaW4oJ21pbmltYXAnKTtcbiAgICAgICAgICogQHJldHVybnMge3RoaXN9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXN0cm95UGx1Z2luJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3lQbHVnaW4obmFtZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbHVnaW4gJyArIG5hbWUgKyAnIGhhcyBub3QgYmVlbiBhZGRlZCB5ZXQgYW5kIGNhbm5vdCBiZSBkZXN0cm95ZWQhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGlzZWRQbHVnaW5MaXN0W25hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbHVnaW4gJyArIG5hbWUgKyAnIGlzIG5vdCBhY3RpdmUgYW5kIGNhbm5vdCBiZSBkZXN0cm95ZWQhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNbbmFtZV0uZGVzdHJveSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGx1Z2luICcgKyBuYW1lICsgJyBkb2VzIG5vdCBoYXZlIGEgZGVzdHJveSBmdW5jdGlvbiEnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpc1tuYW1lXS5kZXN0cm95KCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pbml0aWFsaXNlZFBsdWdpbkxpc3RbbmFtZV07XG4gICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgncGx1Z2luLWRlc3Ryb3llZCcsIG5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVzdHJveSBhbGwgaW5pdGlhbGlzZWQgcGx1Z2lucy4gQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gdXNlIHdoZW5cbiAgICAgICAgICogd2F2ZXN1cmZlciBpcyByZW1vdmVkXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXN0cm95QWxsUGx1Z2lucycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95QWxsUGx1Z2lucygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmluaXRpYWxpc2VkUGx1Z2luTGlzdCkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuZGVzdHJveVBsdWdpbihuYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgZHJhd2VyIGFuZCBkcmF3IHRoZSB3YXZlZm9ybVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAZW1pdHMgV2F2ZVN1cmZlciNkcmF3ZXItY3JlYXRlZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlRHJhd2VyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZURyYXdlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmRyYXdlciA9IG5ldyB0aGlzLkRyYXdlcih0aGlzLmNvbnRhaW5lciwgdGhpcy5wYXJhbXMpO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuaW5pdCgpO1xuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ2RyYXdlci1jcmVhdGVkJywgdGhpcy5kcmF3ZXIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucmVzcG9uc2l2ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fb25SZXNpemUsIHRydWUpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMuX29uUmVzaXplLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIub24oJ3JlZHJhdycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczUuZHJhd0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgIF90aGlzNS5kcmF3ZXIucHJvZ3Jlc3MoX3RoaXM1LmJhY2tlbmQuZ2V0UGxheWVkUGVyY2VudHMoKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQ2xpY2stdG8tc2Vla1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUsIHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuc2Vla1RvKHByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZWxheSB0aGUgc2Nyb2xsIGV2ZW50IGZyb20gdGhlIGRyYXdlclxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIub24oJ3Njcm9sbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzNS5wYXJhbXMucGFydGlhbFJlbmRlcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUuZHJhd0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpczUuZmlyZUV2ZW50KCdzY3JvbGwnLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgYmFja2VuZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAZW1pdHMgV2F2ZVN1cmZlciNiYWNrZW5kLWNyZWF0ZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZUJhY2tlbmQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQmFja2VuZCgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5iYWNrZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrZW5kLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQmFjayBjb21wYXRcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5iYWNrZW5kID09ICdBdWRpb0VsZW1lbnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMuYmFja2VuZCA9ICdNZWRpYUVsZW1lbnQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuYmFja2VuZCA9PSAnV2ViQXVkaW8nICYmICF0aGlzLkJhY2tlbmQucHJvdG90eXBlLnN1cHBvcnRzV2ViQXVkaW8uY2FsbChudWxsKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLmJhY2tlbmQgPSAnTWVkaWFFbGVtZW50JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kID0gbmV3IHRoaXMuQmFja2VuZCh0aGlzLnBhcmFtcyk7XG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQuaW5pdCgpO1xuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ2JhY2tlbmQtY3JlYXRlZCcsIHRoaXMuYmFja2VuZCk7XG5cbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5vbignZmluaXNoJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmlyZUV2ZW50KCdmaW5pc2gnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLm9uKCdwbGF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmlyZUV2ZW50KCdwbGF5Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5vbigncGF1c2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5maXJlRXZlbnQoJ3BhdXNlJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLm9uKCdhdWRpb3Byb2Nlc3MnLCBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICAgICAgICAgIF90aGlzNi5kcmF3ZXIucHJvZ3Jlc3MoX3RoaXM2LmJhY2tlbmQuZ2V0UGxheWVkUGVyY2VudHMoKSk7XG4gICAgICAgICAgICAgICAgX3RoaXM2LmZpcmVFdmVudCgnYXVkaW9wcm9jZXNzJywgdGltZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgdGhlIHBlYWsgY2FjaGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZVBlYWtDYWNoZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQZWFrQ2FjaGUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucGFydGlhbFJlbmRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGVha0NhY2hlID0gbmV3IF9wZWFrY2FjaGUyLmRlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIG9mIHRoZSBhdWRpbyBjbGlwXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlIGNvbnN0IGR1cmF0aW9uID0gd2F2ZXN1cmZlci5nZXREdXJhdGlvbigpO1xuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IER1cmF0aW9uIGluIHNlY29uZHNcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldER1cmF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldER1cmF0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFja2VuZC5nZXREdXJhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgY3VycmVudCBwbGF5YmFjayBwb3NpdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZSBjb25zdCBjdXJyZW50VGltZSA9IHdhdmVzdXJmZXIuZ2V0Q3VycmVudFRpbWUoKTtcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBQbGF5YmFjayBwb3NpdGlvbiBpbiBzZWNvbmRzXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDdXJyZW50VGltZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50VGltZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhY2tlbmQuZ2V0Q3VycmVudFRpbWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGN1cnJlbnQgcGxheSB0aW1lIGluIHNlY29uZHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIEEgcG9zaXRpdmUgbnVtYmVyIGluIHNlY29uZHMuIEUuZy4gMTAgbWVhbnMgMTBcbiAgICAgICAgICogc2Vjb25kcywgNjAgbWVhbnMgMSBtaW51dGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldEN1cnJlbnRUaW1lJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEN1cnJlbnRUaW1lKHNlY29uZHMpIHtcbiAgICAgICAgICAgIGlmIChzZWNvbmRzID49IHRoaXMuZ2V0RHVyYXRpb24oKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vla1RvKDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlZWtUbyhzZWNvbmRzIC8gdGhpcy5nZXREdXJhdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdGFydHMgcGxheWJhY2sgZnJvbSB0aGUgY3VycmVudCBwb3NpdGlvbi4gT3B0aW9uYWwgc3RhcnQgYW5kIGVuZFxuICAgICAgICAgKiBtZWFzdXJlZCBpbiBzZWNvbmRzIGNhbiBiZSB1c2VkIHRvIHNldCB0aGUgcmFuZ2Ugb2YgYXVkaW8gdG8gcGxheS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHs/bnVtYmVyfSBzdGFydCBQb3NpdGlvbiB0byBzdGFydCBhdFxuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJ9IGVuZCBQb3NpdGlvbiB0byBlbmQgYXRcbiAgICAgICAgICogQGVtaXRzIFdhdmVTdXJmZXIjaW50ZXJhY3Rpb25cbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8gcGxheSBmcm9tIHNlY29uZCAxIHRvIDVcbiAgICAgICAgICogd2F2ZXN1cmZlci5wbGF5KDEsIDUpO1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncGxheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5KHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgnaW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5wbGF5KHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWNrZW5kLnBsYXkoc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcHMgcGxheWJhY2tcbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGUgd2F2ZXN1cmZlci5wYXVzZSgpO1xuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncGF1c2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYmFja2VuZC5pc1BhdXNlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFja2VuZC5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvZ2dsZSBwbGF5YmFja1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLnBsYXlQYXVzZSgpO1xuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncGxheVBhdXNlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYXlQYXVzZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhY2tlbmQuaXNQYXVzZWQoKSA/IHRoaXMucGxheSgpIDogdGhpcy5wYXVzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgY3VycmVudCBwbGF5YmFjayBzdGF0ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZSBjb25zdCBpc1BsYXlpbmcgPSB3YXZlc3VyZmVyLmlzUGxheWluZygpO1xuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBGYWxzZSBpZiBwYXVzZWQsIHRydWUgaWYgcGxheWluZ1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaXNQbGF5aW5nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzUGxheWluZygpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5iYWNrZW5kLmlzUGF1c2VkKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2tpcCBiYWNrd2FyZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJ9IHNlY29uZHMgQW1vdW50IHRvIHNraXAgYmFjaywgaWYgbm90IHNwZWNpZmllZCBgc2tpcExlbmd0aGBcbiAgICAgICAgICogaXMgdXNlZFxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLnNraXBCYWNrd2FyZCgpO1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2tpcEJhY2t3YXJkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNraXBCYWNrd2FyZChzZWNvbmRzKSB7XG4gICAgICAgICAgICB0aGlzLnNraXAoLXNlY29uZHMgfHwgLXRoaXMucGFyYW1zLnNraXBMZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNraXAgZm9yd2FyZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJ9IHNlY29uZHMgQW1vdW50IHRvIHNraXAgYmFjaywgaWYgbm90IHNwZWNpZmllZCBgc2tpcExlbmd0aGBcbiAgICAgICAgICogaXMgdXNlZFxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLnNraXBGb3J3YXJkKCk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdza2lwRm9yd2FyZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBza2lwRm9yd2FyZChzZWNvbmRzKSB7XG4gICAgICAgICAgICB0aGlzLnNraXAoc2Vjb25kcyB8fCB0aGlzLnBhcmFtcy5za2lwTGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTa2lwIGEgbnVtYmVyIG9mIHNlY29uZHMgZnJvbSB0aGUgY3VycmVudCBwb3NpdGlvbiAodXNlIGEgbmVnYXRpdmUgdmFsdWVcbiAgICAgICAgICogdG8gZ28gYmFja3dhcmRzKS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBBbW91bnQgdG8gc2tpcCBiYWNrIG9yIGZvcndhcmRzXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIC8vIGdvIGJhY2sgMiBzZWNvbmRzXG4gICAgICAgICAqIHdhdmVzdXJmZXIuc2tpcCgtMik7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdza2lwJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNraXAob2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLmdldER1cmF0aW9uKCkgfHwgMTtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSB8fCAwO1xuICAgICAgICAgICAgcG9zaXRpb24gPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkdXJhdGlvbiwgcG9zaXRpb24gKyAob2Zmc2V0IHx8IDApKSk7XG4gICAgICAgICAgICB0aGlzLnNlZWtBbmRDZW50ZXIocG9zaXRpb24gLyBkdXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2Vla3MgdG8gYSBwb3NpdGlvbiBhbmQgY2VudGVycyB0aGUgdmlld1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgQmV0d2VlbiAwICg9YmVnaW5uaW5nKSBhbmQgMSAoPWVuZClcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8gc2VlayBhbmQgZ28gdG8gdGhlIG1pZGRsZSBvZiB0aGUgYXVkaW9cbiAgICAgICAgICogd2F2ZXN1cmZlci5zZWVrVG8oMC41KTtcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NlZWtBbmRDZW50ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Vla0FuZENlbnRlcihwcm9ncmVzcykge1xuICAgICAgICAgICAgdGhpcy5zZWVrVG8ocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIucmVjZW50ZXIocHJvZ3Jlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlZWtzIHRvIGEgcG9zaXRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHByb2dyZXNzIEJldHdlZW4gMCAoPWJlZ2lubmluZykgYW5kIDEgKD1lbmQpXG4gICAgICAgICAqIEBlbWl0cyBXYXZlU3VyZmVyI2ludGVyYWN0aW9uXG4gICAgICAgICAqIEBlbWl0cyBXYXZlU3VyZmVyI3NlZWtcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8gc2VlayB0byB0aGUgbWlkZGxlIG9mIHRoZSBhdWRpb1xuICAgICAgICAgKiB3YXZlc3VyZmVyLnNlZWtUbygwLjUpO1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Vla1RvJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlZWtUbyhwcm9ncmVzcykge1xuICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIHJldHVybiBhbiBlcnJvciBpZiBwcm9ncmVzcyBpcyBub3QgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxXG4gICAgICAgICAgICBpZiAodHlwZW9mIHByb2dyZXNzICE9PSAnbnVtYmVyJyB8fCAhaXNGaW5pdGUocHJvZ3Jlc3MpIHx8IHByb2dyZXNzIDwgMCB8fCBwcm9ncmVzcyA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyB3YXZlc3VyZmVyLnNlZWtUbywgcGFyYW1ldGVyIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ2ludGVyYWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczguc2Vla1RvKHByb2dyZXNzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgcGF1c2VkID0gdGhpcy5iYWNrZW5kLmlzUGF1c2VkKCk7XG4gICAgICAgICAgICAvLyBhdm9pZCBkcmF3IHdyb25nIHBvc2l0aW9uIHdoaWxlIHBsYXlpbmcgYmFja3dhcmQgc2Vla2luZ1xuICAgICAgICAgICAgaWYgKCFwYXVzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tlbmQucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGF2b2lkIHNtYWxsIHNjcm9sbHMgd2hpbGUgcGF1c2VkIHNlZWtpbmdcbiAgICAgICAgICAgIHZhciBvbGRTY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5zZWVrVG8ocHJvZ3Jlc3MgKiB0aGlzLmdldER1cmF0aW9uKCkpO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIucHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXG4gICAgICAgICAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQgPSBvbGRTY3JvbGxQYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgnc2VlaycsIHByb2dyZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wcyBhbmQgZ29lcyB0byB0aGUgYmVnaW5uaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLnN0b3AoKTtcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N0b3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2Vla1RvKDApO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIucHJvZ3Jlc3MoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBwbGF5YmFjayB2b2x1bWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXZpY2VJZCBTdHJpbmcgdmFsdWUgcmVwcmVzZW50aW5nIHVuZGVybHlpbmcgb3V0cHV0IGRldmljZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0U2lua0lkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNpbmtJZChkZXZpY2VJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFja2VuZC5zZXRTaW5rSWQoZGV2aWNlSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgcGxheWJhY2sgdm9sdW1lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbmV3Vm9sdW1lIEEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLCAwIGJlaW5nIG5vXG4gICAgICAgICAqIHZvbHVtZSBhbmQgMSBiZWluZyBmdWxsIHZvbHVtZS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFZvbHVtZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWb2x1bWUobmV3Vm9sdW1lKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQuc2V0Vm9sdW1lKG5ld1ZvbHVtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBwbGF5YmFjayB2b2x1bWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gQSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEsIDAgYmVpbmcgbm9cbiAgICAgICAgICogdm9sdW1lIGFuZCAxIGJlaW5nIGZ1bGwgdm9sdW1lLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0Vm9sdW1lJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZvbHVtZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhY2tlbmQuZ2V0Vm9sdW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBwbGF5YmFjayByYXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmF0ZSBBIHBvc2l0aXZlIG51bWJlci4gRS5nLiAwLjUgbWVhbnMgaGFsZiB0aGUgbm9ybWFsXG4gICAgICAgICAqIHNwZWVkLCAyIG1lYW5zIGRvdWJsZSBzcGVlZCBhbmQgc28gb24uXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIuc2V0UGxheWJhY2tSYXRlKDIpO1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0UGxheWJhY2tSYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFBsYXliYWNrUmF0ZShyYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQuc2V0UGxheWJhY2tSYXRlKHJhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0UGxheWJhY2tSYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBsYXliYWNrUmF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhY2tlbmQuZ2V0UGxheWJhY2tSYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVG9nZ2xlIHRoZSB2b2x1bWUgb24gYW5kIG9mZi4gSXQgbm90IGN1cnJlbmx5IG11dGVkIGl0IHdpbGwgc2F2ZSB0aGVcbiAgICAgICAgICogY3VycmVudCB2b2x1bWUgdmFsdWUgYW5kIHR1cm4gdGhlIHZvbHVtZSBvZmYuIElmIGN1cnJlbnRseSBtdXRlZCB0aGVuIGl0XG4gICAgICAgICAqIHdpbGwgcmVzdG9yZSB0aGUgdm9sdW1lIHRvIHRoZSBzYXZlZCB2YWx1ZSwgYW5kIHRoZW4gcmVzdCB0aGUgc2F2ZWRcbiAgICAgICAgICogdmFsdWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIudG9nZ2xlTXV0ZSgpO1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9nZ2xlTXV0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVNdXRlKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRNdXRlKCF0aGlzLmlzTXV0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIG11dGVkIGF1ZGlvXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbXV0ZVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiAvLyB1bm11dGVcbiAgICAgICAgICogd2F2ZXN1cmZlci5zZXRNdXRlKGZhbHNlKTtcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldE11dGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TXV0ZShtdXRlKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgYWxsIG11dGluZyByZXF1ZXN0cyBpZiB0aGUgYXVkaW8gaXMgYWxyZWFkeSBpbiB0aGF0IHN0YXRlXG4gICAgICAgICAgICBpZiAobXV0ZSA9PT0gdGhpcy5pc011dGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobXV0ZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIGN1cnJlbnRseSBub3QgbXV0ZWQgdGhlbiBzYXZlIGN1cnJlbnQgdm9sdW1lLFxuICAgICAgICAgICAgICAgIC8vIHR1cm4gb2ZmIHRoZSB2b2x1bWUgYW5kIHVwZGF0ZSB0aGUgbXV0ZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlZFZvbHVtZSA9IHRoaXMuYmFja2VuZC5nZXRWb2x1bWUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tlbmQuc2V0Vm9sdW1lKDApO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNdXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIGN1cnJlbnRseSBtdXRlZCB0aGVuIHJlc3RvcmUgdG8gdGhlIHNhdmVkIHZvbHVtZVxuICAgICAgICAgICAgICAgIC8vIGFuZCB1cGRhdGUgdGhlIG11dGUgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5zZXRWb2x1bWUodGhpcy5zYXZlZFZvbHVtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc011dGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBjdXJyZW50IG11dGUgc3RhdHVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZSBjb25zdCBpc011dGVkID0gd2F2ZXN1cmZlci5nZXRNdXRlKCk7XG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRNdXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE11dGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc011dGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgY3VycmVudCByZWFkeSBzdGF0dXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlIGNvbnN0IGlzUmVhZHkgPSB3YXZlc3VyZmVyLmlzUmVhZHkoKTtcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2lzUmVhZHknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNSZWFkeSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUmVhZHk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBsaXN0IG9mIGN1cnJlbnQgc2V0IGZpbHRlcnMgYXMgYW4gYXJyYXkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEZpbHRlcnMgbXVzdCBiZSBzZXQgd2l0aCBzZXRGaWx0ZXJzIG1ldGhvZCBmaXJzdFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHthcnJheX1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEZpbHRlcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVycygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhY2tlbmQuZmlsdGVycyB8fCBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb2dnbGVzIGBzY3JvbGxQYXJlbnRgIGFuZCByZWRyYXdzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIudG9nZ2xlU2Nyb2xsKCk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b2dnbGVTY3JvbGwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlU2Nyb2xsKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50ID0gIXRoaXMucGFyYW1zLnNjcm9sbFBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvZ2dsZSBtb3VzZSBpbnRlcmFjdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLnRvZ2dsZUludGVyYWN0aW9uKCk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b2dnbGVJbnRlcmFjdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVJbnRlcmFjdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLmludGVyYWN0ID0gIXRoaXMucGFyYW1zLmludGVyYWN0O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgZmlsbCBjb2xvciBvZiB0aGUgd2F2ZWZvcm0gYWZ0ZXIgdGhlIGN1cnNvci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBBIENTUyBjb2xvciBzdHJpbmcuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRXYXZlQ29sb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2F2ZUNvbG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLndhdmVDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGZpbGwgY29sb3Igb2YgdGhlIHdhdmVmb3JtIGFmdGVyIHRoZSBjdXJzb3IuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBBIENTUyBjb2xvciBzdHJpbmcuXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIuc2V0V2F2ZUNvbG9yKCcjZGRkJyk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRXYXZlQ29sb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0V2F2ZUNvbG9yKGNvbG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy53YXZlQ29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgZmlsbCBjb2xvciBvZiB0aGUgd2F2ZWZvcm0gYmVoaW5kIHRoZSBjdXJzb3IuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gQSBDU1MgY29sb3Igc3RyaW5nLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0UHJvZ3Jlc3NDb2xvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcm9ncmVzc0NvbG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLnByb2dyZXNzQ29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBmaWxsIGNvbG9yIG9mIHRoZSB3YXZlZm9ybSBiZWhpbmQgdGhlIGN1cnNvci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yIEEgQ1NTIGNvbG9yIHN0cmluZy5cbiAgICAgICAgICogQGV4YW1wbGUgd2F2ZXN1cmZlci5zZXRQcm9ncmVzc0NvbG9yKCcjNDAwJyk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRQcm9ncmVzc0NvbG9yJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFByb2dyZXNzQ29sb3IoY29sb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLnByb2dyZXNzQ29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgZmlsbCBjb2xvciBvZiB0aGUgY3Vyc29yIGluZGljYXRpbmcgdGhlIHBsYXloZWFkXG4gICAgICAgICAqIHBvc2l0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgQ1NTIGNvbG9yIHN0cmluZy5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEN1cnNvckNvbG9yJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnNvckNvbG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLmN1cnNvckNvbG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgZmlsbCBjb2xvciBvZiB0aGUgY3Vyc29yIGluZGljYXRpbmcgdGhlIHBsYXloZWFkXG4gICAgICAgICAqIHBvc2l0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29sb3IgQSBDU1MgY29sb3Igc3RyaW5nLlxuICAgICAgICAgKiBAZXhhbXBsZSB3YXZlc3VyZmVyLnNldEN1cnNvckNvbG9yKCcjMjIyJyk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRDdXJzb3JDb2xvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDdXJzb3JDb2xvcihjb2xvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMuY3Vyc29yQ29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMuZHJhd2VyLnVwZGF0ZUN1cnNvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgaGVpZ2h0IG9mIHRoZSB3YXZlZm9ybS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQgbWVhc3VyZWQgaW4gcGl4ZWxzLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0SGVpZ2h0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEhlaWdodCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy5oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBoZWlnaHQgb2YgdGhlIHdhdmVmb3JtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBtZWFzdXJlZCBpbiBwaXhlbHMuXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIuc2V0SGVpZ2h0KDIwMCk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuc2V0SGVpZ2h0KGhlaWdodCAqIHRoaXMucGFyYW1zLnBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgdGhpcy5kcmF3QnVmZmVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBjb3JyZWN0IHBlYWtzIGZvciBjdXJyZW50IHdhdmUgdmlld3BvcnQgYW5kIHJlbmRlciB3YXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBlbWl0cyBXYXZlU3VyZmVyI3JlZHJhd1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd0J1ZmZlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3QnVmZmVyKCkge1xuICAgICAgICAgICAgdmFyIG5vbWluYWxXaWR0aCA9IE1hdGgucm91bmQodGhpcy5nZXREdXJhdGlvbigpICogdGhpcy5wYXJhbXMubWluUHhQZXJTZWMgKiB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRXaWR0aCA9IHRoaXMuZHJhd2VyLmdldFdpZHRoKCk7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBub21pbmFsV2lkdGg7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmRyYXdlci5nZXRTY3JvbGxYKCk7XG4gICAgICAgICAgICB2YXIgZW5kID0gTWF0aC5tYXgoc3RhcnQgKyBwYXJlbnRXaWR0aCwgd2lkdGgpO1xuICAgICAgICAgICAgLy8gRmlsbCBjb250YWluZXJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5maWxsUGFyZW50ICYmICghdGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50IHx8IG5vbWluYWxXaWR0aCA8IHBhcmVudFdpZHRoKSkge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gcGFyZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIGVuZCA9IHdpZHRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGVha3MgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucGFydGlhbFJlbmRlcikge1xuICAgICAgICAgICAgICAgIHZhciBuZXdSYW5nZXMgPSB0aGlzLnBlYWtDYWNoZS5hZGRSYW5nZVRvUGVha0NhY2hlKHdpZHRoLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbmV3UmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlYWtzID0gdGhpcy5iYWNrZW5kLmdldFBlYWtzKHdpZHRoLCBuZXdSYW5nZXNbaV1bMF0sIG5ld1Jhbmdlc1tpXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd2VyLmRyYXdQZWFrcyhwZWFrcywgd2lkdGgsIG5ld1Jhbmdlc1tpXVswXSwgbmV3UmFuZ2VzW2ldWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlYWtzID0gdGhpcy5iYWNrZW5kLmdldFBlYWtzKHdpZHRoLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdlci5kcmF3UGVha3MocGVha3MsIHdpZHRoLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdyZWRyYXcnLCBwZWFrcywgd2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvcml6b250YWxseSB6b29tcyB0aGUgd2F2ZWZvcm0gaW4gYW5kIG91dC4gSXQgYWxzbyBjaGFuZ2VzIHRoZSBwYXJhbWV0ZXJcbiAgICAgICAgICogYG1pblB4UGVyU2VjYCBhbmQgZW5hYmxlcyB0aGUgYHNjcm9sbFBhcmVudGAgb3B0aW9uLiBDYWxsaW5nIHRoZSBmdW5jdGlvblxuICAgICAgICAgKiB3aXRoIGEgZmFsc2V5IHBhcmFtZXRlciB3aWxsIHJlc2V0IHRoZSB6b29tIHN0YXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJ9IHB4UGVyU2VjIE51bWJlciBvZiBob3Jpem9udGFsIHBpeGVscyBwZXIgc2Vjb25kIG9mXG4gICAgICAgICAqIGF1ZGlvLCBpZiBub25lIGlzIHNldCB0aGUgd2F2ZWZvcm0gcmV0dXJucyB0byB1bnpvb21lZCBzdGF0ZVxuICAgICAgICAgKiBAZW1pdHMgV2F2ZVN1cmZlciN6b29tXG4gICAgICAgICAqIEBleGFtcGxlIHdhdmVzdXJmZXIuem9vbSgyMCk7XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd6b29tJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHpvb20ocHhQZXJTZWMpIHtcbiAgICAgICAgICAgIGlmICghcHhQZXJTZWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5taW5QeFBlclNlYyA9IHRoaXMuZGVmYXVsdFBhcmFtcy5taW5QeFBlclNlYztcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMubWluUHhQZXJTZWMgPSBweFBlclNlYztcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5zY3JvbGxQYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRyYXdCdWZmZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2VyLnByb2dyZXNzKHRoaXMuYmFja2VuZC5nZXRQbGF5ZWRQZXJjZW50cygpKTtcblxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIucmVjZW50ZXIodGhpcy5nZXRDdXJyZW50VGltZSgpIC8gdGhpcy5nZXREdXJhdGlvbigpKTtcbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCd6b29tJywgcHhQZXJTZWMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZSBidWZmZXIgYW5kIGxvYWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2xvYWRBcnJheUJ1ZmZlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkQXJyYXlCdWZmZXIoYXJyYXlidWZmZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmRlY29kZUFycmF5QnVmZmVyKGFycmF5YnVmZmVyLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXM5LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS5sb2FkRGVjb2RlZEJ1ZmZlcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXJlY3RseSBsb2FkIGFuIGV4dGVybmFsbHkgZGVjb2RlZCBBdWRpb0J1ZmZlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge0F1ZGlvQnVmZmVyfSBidWZmZXJcbiAgICAgICAgICogQGVtaXRzIFdhdmVTdXJmZXIjcmVhZHlcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2xvYWREZWNvZGVkQnVmZmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWREZWNvZGVkQnVmZmVyKGJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLmxvYWQoYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcigpO1xuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ3JlYWR5Jyk7XG4gICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRzIGF1ZGlvIGRhdGEgZnJvbSBhIEJsb2Igb3IgRmlsZSBvYmplY3RcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtCbG9ifEZpbGV9IGJsb2IgQXVkaW8gZGF0YVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9hZEJsb2InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZEJsb2IoYmxvYikge1xuICAgICAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgZmlsZSByZWFkZXJcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5vblByb2dyZXNzKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAubG9hZEFycmF5QnVmZmVyKGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5maXJlRXZlbnQoJ2Vycm9yJywgJ0Vycm9yIHJlYWRpbmcgZmlsZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7XG4gICAgICAgICAgICB0aGlzLmVtcHR5KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZHMgYXVkaW8gYW5kIHJlLXJlbmRlcnMgdGhlIHdhdmVmb3JtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MTWVkaWFFbGVtZW50fSB1cmwgVGhlIHVybCBvZiB0aGUgYXVkaW8gZmlsZSBvciB0aGVcbiAgICAgICAgICogYXVkaW8gZWxlbWVudCB3aXRoIHRoZSBhdWRpb1xuICAgICAgICAgKiBAcGFyYW0gez9udW1iZXJbXXxudW1iZXJbXVtdfSBwZWFrcyBXYXZlc3VyZmVyIGRvZXMgbm90IGhhdmUgdG8gZGVjb2RlXG4gICAgICAgICAqIHRoZSBhdWRpbyB0byByZW5kZXIgdGhlIHdhdmVmb3JtIGlmIHRoaXMgaXMgc3BlY2lmaWVkXG4gICAgICAgICAqIEBwYXJhbSB7P3N0cmluZ30gcHJlbG9hZCAoVXNlIHdpdGggYmFja2VuZCBgTWVkaWFFbGVtZW50YClcbiAgICAgICAgICogYCdub25lJ3wnbWV0YWRhdGEnfCdhdXRvJ2AgUHJlbG9hZCBhdHRyaWJ1dGUgZm9yIHRoZSBtZWRpYSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7P251bWJlcn0gZHVyYXRpb24gVGhlIGR1cmF0aW9uIG9mIHRoZSBhdWRpby4gVGhpcyBpcyB1c2VkIHRvXG4gICAgICAgICAqIHJlbmRlciB0aGUgcGVha3MgZGF0YSBpbiB0aGUgY29ycmVjdCBzaXplIGZvciB0aGUgYXVkaW8gZHVyYXRpb24gKGFzXG4gICAgICAgICAqIGJlZml0cyB0aGUgY3VycmVudCBtaW5QeFBlclNlYyBhbmQgem9vbSB2YWx1ZSkgd2l0aG91dCBoYXZpbmcgdG8gZGVjb2RlXG4gICAgICAgICAqIHRoZSBhdWRpby5cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8gdXNpbmcgYWpheCBvciBtZWRpYSBlbGVtZW50IHRvIGxvYWQgKGRlcGVuZGluZyBvbiBiYWNrZW5kKVxuICAgICAgICAgKiB3YXZlc3VyZmVyLmxvYWQoJ2h0dHA6Ly9leGFtcGxlLmNvbS9kZW1vLndhdicpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAvLyBzZXR0aW5nIHByZWxvYWQgYXR0cmlidXRlIHdpdGggbWVkaWEgZWxlbWVudCBiYWNrZW5kIGFuZCBzdXBwbHlpbmdcbiAgICAgICAgICogcGVha3Mgd2F2ZXN1cmZlci5sb2FkKFxuICAgICAgICAgKiAgICdodHRwOi8vZXhhbXBsZS5jb20vZGVtby53YXYnLFxuICAgICAgICAgKiAgIFswLjAyMTgsIDAuMDE4MywgMC4wMTY1LCAwLjAxOTgsIDAuMjEzNywgMC4yODg4XSxcbiAgICAgICAgICogICB0cnVlLFxuICAgICAgICAgKiApO1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9hZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKHVybCwgcGVha3MsIHByZWxvYWQsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIGlmIChwcmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgcHJlbG9hZCBhdHRyaWJ1dGUgd2lsbCBiZSB1c2FibGUgYW5kIGlmIG5vdCBsb2dcbiAgICAgICAgICAgICAgICAvLyBhIHdhcm5pbmcgbGlzdGluZyB0aGUgcmVhc29ucyB3aHkgbm90IGFuZCBudWxsaWZ5IHRoZSB2YXJpYWJsZVxuICAgICAgICAgICAgICAgIHZhciBwcmVsb2FkSWdub3JlUmVhc29ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJQcmVsb2FkIGlzIG5vdCAnYXV0bycsICdub25lJyBvciAnbWV0YWRhdGEnXCI6IFsnYXV0bycsICdtZXRhZGF0YScsICdub25lJ10uaW5kZXhPZihwcmVsb2FkKSA9PT0gLTEsXG4gICAgICAgICAgICAgICAgICAgICdQZWFrcyBhcmUgbm90IHByb3ZpZGVkJzogIXBlYWtzLFxuICAgICAgICAgICAgICAgICAgICAnQmFja2VuZCBpcyBub3Qgb2YgdHlwZSBNZWRpYUVsZW1lbnQnOiB0aGlzLnBhcmFtcy5iYWNrZW5kICE9PSAnTWVkaWFFbGVtZW50JyxcbiAgICAgICAgICAgICAgICAgICAgJ1VybCBpcyBub3Qgb2YgdHlwZSBzdHJpbmcnOiB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVJlYXNvbnMgPSBPYmplY3Qua2V5cyhwcmVsb2FkSWdub3JlUmVhc29ucykuZmlsdGVyKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZWxvYWRJZ25vcmVSZWFzb25zW3JlYXNvbl07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVJlYXNvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUHJlbG9hZCBwYXJhbWV0ZXIgb2Ygd2F2ZXN1cmZlci5sb2FkIHdpbGwgYmUgaWdub3JlZCBiZWNhdXNlOlxcblxcdC0gJyArIGFjdGl2ZVJlYXNvbnMuam9pbignXFxuXFx0LSAnKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3AgaW52YWxpZCB2YWx1ZXMgZnJvbSBiZWluZyB1c2VkXG4gICAgICAgICAgICAgICAgICAgIHByZWxvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnBhcmFtcy5iYWNrZW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnV2ViQXVkaW8nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnVmZmVyKHVybCwgcGVha3MsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICBjYXNlICdNZWRpYUVsZW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTWVkaWFFbGVtZW50KHVybCwgcGVha3MsIHByZWxvYWQsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkcyBhdWRpbyB1c2luZyBXZWIgQXVkaW8gYnVmZmVyIGJhY2tlbmQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICAgICAgICogQHBhcmFtIHs/bnVtYmVyW118bnVtYmVyW11bXX0gcGVha3NcbiAgICAgICAgICogQHBhcmFtIHs/bnVtYmVyfSBkdXJhdGlvblxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9hZEJ1ZmZlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkQnVmZmVyKHVybCwgcGVha3MsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBsb2FkID0gZnVuY3Rpb24gbG9hZChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMTEudG1wRXZlbnRzLnB1c2goX3RoaXMxMS5vbmNlKCdyZWFkeScsIGFjdGlvbikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS5nZXRBcnJheUJ1ZmZlcih1cmwsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczExLmxvYWRBcnJheUJ1ZmZlcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChwZWFrcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5zZXRQZWFrcyhwZWFrcywgZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudG1wRXZlbnRzLnB1c2godGhpcy5vbmNlKCdpbnRlcmFjdGlvbicsIGxvYWQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFaXRoZXIgY3JlYXRlIGEgbWVkaWEgZWxlbWVudCwgb3IgbG9hZCBhbiBleGlzdGluZyBtZWRpYSBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MTWVkaWFFbGVtZW50fSB1cmxPckVsdCBFaXRoZXIgYSBwYXRoIHRvIGEgbWVkaWEgZmlsZSwgb3IgYW5cbiAgICAgICAgICogZXhpc3RpbmcgSFRNTDUgQXVkaW8vVmlkZW8gRWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIEFycmF5IG9mIHBlYWtzLiBSZXF1aXJlZCB0byBieXBhc3Mgd2ViIGF1ZGlvXG4gICAgICAgICAqIGRlcGVuZGVuY3lcbiAgICAgICAgICogQHBhcmFtIHs/Ym9vbGVhbn0gcHJlbG9hZCBTZXQgdG8gdHJ1ZSBpZiB0aGUgcHJlbG9hZCBhdHRyaWJ1dGUgb2YgdGhlXG4gICAgICAgICAqIGF1ZGlvIGVsZW1lbnQgc2hvdWxkIGJlIGVuYWJsZWRcbiAgICAgICAgICogQHBhcmFtIHs/bnVtYmVyfSBkdXJhdGlvblxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9hZE1lZGlhRWxlbWVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkTWVkaWFFbGVtZW50KHVybE9yRWx0LCBwZWFrcywgcHJlbG9hZCwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHVybCA9IHVybE9yRWx0O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybE9yRWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5sb2FkKHVybCwgdGhpcy5tZWRpYUNvbnRhaW5lciwgcGVha3MsIHByZWxvYWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZWx0ID0gdXJsT3JFbHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrZW5kLmxvYWRFbHQoZWx0LCBwZWFrcyk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBwZWFrcyBhcmUgbm90IHByb3ZpZGVkLFxuICAgICAgICAgICAgICAgIC8vIHVybCA9IGVsZW1lbnQuc3JjIHNvIHdlIGNhbiBnZXQgcGVha3Mgd2l0aCB3ZWIgYXVkaW9cbiAgICAgICAgICAgICAgICB1cmwgPSBlbHQuc3JjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRtcEV2ZW50cy5wdXNoKHRoaXMuYmFja2VuZC5vbmNlKCdjYW5wbGF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMTIuZHJhd0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgIF90aGlzMTIuZmlyZUV2ZW50KCdyZWFkeScpO1xuICAgICAgICAgICAgICAgIF90aGlzMTIuaXNSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB9KSwgdGhpcy5iYWNrZW5kLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLmZpcmVFdmVudCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAvLyBJZiBubyBwcmUtZGVjb2RlZCBwZWFrcyBwcm92aWRlZCBvciBwcmUtZGVjb2RlZCBwZWFrcyBhcmVcbiAgICAgICAgICAgIC8vIHByb3ZpZGVkIHdpdGggZm9yY2VEZWNvZGUgZmxhZywgYXR0ZW1wdCB0byBkb3dubG9hZCB0aGVcbiAgICAgICAgICAgIC8vIGF1ZGlvIGZpbGUgYW5kIGRlY29kZSBpdCB3aXRoIFdlYiBBdWRpby5cbiAgICAgICAgICAgIGlmIChwZWFrcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5zZXRQZWFrcyhwZWFrcywgZHVyYXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKCFwZWFrcyB8fCB0aGlzLnBhcmFtcy5mb3JjZURlY29kZSkgJiYgdGhpcy5iYWNrZW5kLnN1cHBvcnRzV2ViQXVkaW8oKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXJyYXlCdWZmZXIodXJsLCBmdW5jdGlvbiAoYXJyYXlidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5kZWNvZGVBcnJheUJ1ZmZlcihhcnJheWJ1ZmZlciwgZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5iYWNrZW5kLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuYmFja2VuZC5zZXRQZWFrcyhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuZHJhd0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5maXJlRXZlbnQoJ3dhdmVmb3JtLXJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZSBhbiBhcnJheSBidWZmZXIgYW5kIHBhc3MgZGF0YSB0byBhIGNhbGxiYWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhcnJheWJ1ZmZlclxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVjb2RlQXJyYXlCdWZmZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVjb2RlQXJyYXlCdWZmZXIoYXJyYXlidWZmZXIsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuYXJyYXlidWZmZXIgPSBhcnJheWJ1ZmZlcjtcblxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLmRlY29kZUFycmF5QnVmZmVyKGFycmF5YnVmZmVyLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgdXNlIHRoZSBkZWNvZGVkIGRhdGEgaWYgd2UgaGF2ZW4ndCBiZWVuIGRlc3Ryb3llZCBvclxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgZGVjb2RlIHN0YXJ0ZWQgaW4gdGhlIG1lYW50aW1lXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpczEzLmlzRGVzdHJveWVkICYmIF90aGlzMTMuYXJyYXlidWZmZXIgPT0gYXJyYXlidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMTMuYXJyYXlidWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMy5maXJlRXZlbnQoJ2Vycm9yJywgJ0Vycm9yIGRlY29kaW5nIGF1ZGlvYnVmZmVyJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkIGFuIGFycmF5IGJ1ZmZlciBieSBhamF4IGFuZCBwYXNzIHRvIGEgY2FsbGJhY2tcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0QXJyYXlCdWZmZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXJyYXlCdWZmZXIodXJsLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF90aGlzMTQgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgYWpheCA9IHV0aWwuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInLFxuICAgICAgICAgICAgICAgIHhocjogdGhpcy5wYXJhbXMueGhyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QWpheCA9IGFqYXg7XG5cbiAgICAgICAgICAgIHRoaXMudG1wRXZlbnRzLnB1c2goYWpheC5vbigncHJvZ3Jlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzMTQub25Qcm9ncmVzcyhlKTtcbiAgICAgICAgICAgIH0pLCBhamF4Lm9uKCdzdWNjZXNzJywgZnVuY3Rpb24gKGRhdGEsIGUpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICBfdGhpczE0LmN1cnJlbnRBamF4ID0gbnVsbDtcbiAgICAgICAgICAgIH0pLCBhamF4Lm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMxNC5maXJlRXZlbnQoJ2Vycm9yJywgJ1hIUiBlcnJvcjogJyArIGUudGFyZ2V0LnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgIF90aGlzMTQuY3VycmVudEFqYXggPSBudWxsO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICByZXR1cm4gYWpheDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hpbGUgdGhlIGF1ZGlvIGZpbGUgaXMgbG9hZGluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgICAqIEBlbWl0cyBXYXZlU3VyZmVyI2xvYWRpbmdcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uUHJvZ3Jlc3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzcyhlKSB7XG4gICAgICAgICAgICB2YXIgcGVyY2VudENvbXBsZXRlID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgIHBlcmNlbnRDb21wbGV0ZSA9IGUubG9hZGVkIC8gZS50b3RhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQXBwcm94aW1hdGUgcHJvZ3Jlc3Mgd2l0aCBhbiBhc3ltcHRvdGljXG4gICAgICAgICAgICAgICAgLy8gZnVuY3Rpb24sIGFuZCBhc3N1bWUgZG93bmxvYWRzIGluIHRoZSAxLTMgTUIgcmFuZ2UuXG4gICAgICAgICAgICAgICAgcGVyY2VudENvbXBsZXRlID0gZS5sb2FkZWQgLyAoZS5sb2FkZWQgKyAxMDAwMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdsb2FkaW5nJywgTWF0aC5yb3VuZChwZXJjZW50Q29tcGxldGUgKiAxMDApLCBlLnRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRXhwb3J0cyBQQ00gZGF0YSBpbnRvIGEgSlNPTiBhcnJheSBhbmQgb3BlbnMgaW4gYSBuZXcgd2luZG93LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoPTEwMjQgVGhlIHNjYWxlIGluIHdoaWNoIHRvIGV4cG9ydCB0aGUgcGVha3MuIChJbnRlZ2VyKVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYWNjdXJhY3k9MTAwMDAgKEludGVnZXIpXG4gICAgICAgICAqIEBwYXJhbSB7P2Jvb2xlYW59IG5vV2luZG93IFNldCB0byB0cnVlIHRvIGRpc2FibGUgb3BlbmluZyBhIG5ld1xuICAgICAgICAgKiB3aW5kb3cgd2l0aCB0aGUgSlNPTlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRcbiAgICAgICAgICogQHRvZG8gVXBkYXRlIGV4cG9ydFBDTSB0byB3b3JrIHdpdGggbmV3IGdldFBlYWtzIHNpZ25hdHVyZVxuICAgICAgICAgKiBAcmV0dXJuIHtKU09OfSBKU09OIG9mIHBlYWtzXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdleHBvcnRQQ00nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXhwb3J0UENNKGxlbmd0aCwgYWNjdXJhY3ksIG5vV2luZG93LCBzdGFydCkge1xuICAgICAgICAgICAgbGVuZ3RoID0gbGVuZ3RoIHx8IDEwMjQ7XG4gICAgICAgICAgICBzdGFydCA9IHN0YXJ0IHx8IDA7XG4gICAgICAgICAgICBhY2N1cmFjeSA9IGFjY3VyYWN5IHx8IDEwMDAwO1xuICAgICAgICAgICAgbm9XaW5kb3cgPSBub1dpbmRvdyB8fCBmYWxzZTtcbiAgICAgICAgICAgIHZhciBwZWFrcyA9IHRoaXMuYmFja2VuZC5nZXRQZWFrcyhsZW5ndGgsIHN0YXJ0KTtcbiAgICAgICAgICAgIHZhciBhcnIgPSBbXS5tYXAuY2FsbChwZWFrcywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbCAqIGFjY3VyYWN5KSAvIGFjY3VyYWN5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KGFycik7XG4gICAgICAgICAgICBpZiAoIW5vV2luZG93KSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2RhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoanNvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGpzb247XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2F2ZSB3YXZlZm9ybSBpbWFnZSBhcyBkYXRhIFVSSS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGRlZmF1bHQgZm9ybWF0IGlzIGBpbWFnZS9wbmdgLiBPdGhlciBzdXBwb3J0ZWQgdHlwZXMgYXJlXG4gICAgICAgICAqIGBpbWFnZS9qcGVnYCBhbmQgYGltYWdlL3dlYnBgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0PSdpbWFnZS9wbmcnXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBxdWFsaXR5PTFcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBkYXRhIFVSSSBvZiBpbWFnZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZXhwb3J0SW1hZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXhwb3J0SW1hZ2UoZm9ybWF0LCBxdWFsaXR5KSB7XG4gICAgICAgICAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9ICdpbWFnZS9wbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFxdWFsaXR5KSB7XG4gICAgICAgICAgICAgICAgcXVhbGl0eSA9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXdlci5nZXRJbWFnZShmb3JtYXQsIHF1YWxpdHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbmNlbCBhbnkgYWpheCByZXF1ZXN0IGN1cnJlbnRseSBpbiBwcm9ncmVzc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2FuY2VsQWpheCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxBamF4KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEFqYXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRBamF4Lnhoci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEFqYXggPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjbGVhclRtcEV2ZW50cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclRtcEV2ZW50cygpIHtcbiAgICAgICAgICAgIHRoaXMudG1wRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS51bigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGxheSBlbXB0eSB3YXZlZm9ybS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2VtcHR5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJhY2tlbmQuaXNQYXVzZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5kaXNjb25uZWN0U291cmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFqYXgoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUbXBFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2VyLnByb2dyZXNzKDApO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuc2V0V2lkdGgoMCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdlci5kcmF3UGVha3MoeyBsZW5ndGg6IHRoaXMuZHJhd2VyLmdldFdpZHRoKCkgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIGV2ZW50cywgZWxlbWVudHMgYW5kIGRpc2Nvbm5lY3QgV2ViQXVkaW8gbm9kZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBlbWl0cyBXYXZlU3VyZmVyI2Rlc3Ryb3lcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUFsbFBsdWdpbnMoKTtcbiAgICAgICAgICAgIHRoaXMuZmlyZUV2ZW50KCdkZXN0cm95Jyk7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFqYXgoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUbXBFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMudW5BbGwoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5yZXNwb25zaXZlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5fb25SZXNpemUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2VyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcnJheWJ1ZmZlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gV2F2ZVN1cmZlcjtcbn0odXRpbC5PYnNlcnZlcik7XG5cbldhdmVTdXJmZXIudXRpbCA9IHV0aWw7XG5leHBvcnRzLmRlZmF1bHQgPSBXYXZlU3VyZmVyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBhamF4O1xuXG52YXIgX29ic2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9vYnNlcnZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYnNlcnZlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogUGVyZm9ybSBhbiBhamF4IHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgRGVzY3JpcHRpb25cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBPYnNlcnZlciBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4KG9wdGlvbnMpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgX29ic2VydmVyMi5kZWZhdWx0KCk7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBmaXJlZDEwMCA9IGZhbHNlO1xuICAgIHhoci5vcGVuKG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLCBvcHRpb25zLnVybCwgdHJ1ZSk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9IG9wdGlvbnMucmVzcG9uc2VUeXBlIHx8ICdqc29uJztcblxuICAgIGlmIChvcHRpb25zLnhocikge1xuICAgICAgICBpZiAob3B0aW9ucy54aHIucmVxdWVzdEhlYWRlcnMpIHtcbiAgICAgICAgICAgIC8vIGFkZCBjdXN0b20gcmVxdWVzdCBoZWFkZXJzXG4gICAgICAgICAgICBvcHRpb25zLnhoci5yZXF1ZXN0SGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIua2V5LCBoZWFkZXIudmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMueGhyLndpdGhDcmVkZW50aWFscykge1xuICAgICAgICAgICAgLy8gdXNlIGNyZWRlbnRpYWxzXG4gICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGluc3RhbmNlLmZpcmVFdmVudCgncHJvZ3Jlc3MnLCBlKTtcbiAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSAmJiBlLmxvYWRlZCA9PSBlLnRvdGFsKSB7XG4gICAgICAgICAgICBmaXJlZDEwMCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghZmlyZWQxMDApIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmZpcmVFdmVudCgncHJvZ3Jlc3MnLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5maXJlRXZlbnQoJ2xvYWQnLCBlKTtcbiAgICAgICAgaWYgKDIwMCA9PSB4aHIuc3RhdHVzIHx8IDIwNiA9PSB4aHIuc3RhdHVzKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5maXJlRXZlbnQoJ3N1Y2Nlc3MnLCB4aHIucmVzcG9uc2UsIGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UuZmlyZUV2ZW50KCdlcnJvcicsIGUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmZpcmVFdmVudCgnZXJyb3InLCBlKTtcbiAgICB9KTtcbiAgICB4aHIuc2VuZCgpO1xuICAgIGluc3RhbmNlLnhociA9IHhocjtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGdldElkO1xuLyoqXG4gKiBHZXQgYSByYW5kb20gcHJlZml4ZWQgSURcbiAqXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBSYW5kb20gSURcbiAqL1xuZnVuY3Rpb24gZ2V0SWQoKSB7XG4gICAgcmV0dXJuICd3YXZlc3VyZmVyXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDMyKS5zdWJzdHJpbmcoMik7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG1heDtcbi8qKlxuICogR2V0IHRoZSBsYXJnZXN0IHZhbHVlXG4gKlxuICogQHBhcmFtICAge0FycmF5fSB2YWx1ZXMgQXJyYXkgb2YgbnVtYmVyc1xuICogQHJldHVybnMge051bWJlcn0gTGFyZ2VzdCBudW1iZXIgZm91bmRcbiAqL1xuZnVuY3Rpb24gbWF4KHZhbHVlcykge1xuICAgIHZhciBsYXJnZXN0ID0gLUluZmluaXR5O1xuICAgIE9iamVjdC5rZXlzKHZhbHVlcykuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICBpZiAodmFsdWVzW2ldID4gbGFyZ2VzdCkge1xuICAgICAgICAgICAgbGFyZ2VzdCA9IHZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBsYXJnZXN0O1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG1pbjtcbi8qKlxuICogR2V0IHRoZSBzbWFsbGVzdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSAgIHtBcnJheX0gdmFsdWVzIEFycmF5IG9mIG51bWJlcnNcbiAqIEByZXR1cm5zIHtOdW1iZXJ9ICAgICAgIFNtYWxsZXN0IG51bWJlciBmb3VuZFxuICovXG5mdW5jdGlvbiBtaW4odmFsdWVzKSB7XG4gICAgdmFyIHNtYWxsZXN0ID0gTnVtYmVyKEluZmluaXR5KTtcbiAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgaWYgKHZhbHVlc1tpXSA8IHNtYWxsZXN0KSB7XG4gICAgICAgICAgICBzbWFsbGVzdCA9IHZhbHVlc1tpXTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzbWFsbGVzdDtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBleHRlbmQ7XG4vKipcbiAqIEV4dGVuZCBhbiBvYmplY3Qgc2hhbGxvd2x5IHdpdGggb3RoZXJzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3QgVGhlIHRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0W119IHNvdXJjZXMgVGhlIG9iamVjdHMgdG8gdXNlIGZvciBleHRlbmRpbmdcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IE1lcmdlZCBvYmplY3RcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGRlc3QpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlcyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgc291cmNlc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGRlc3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVzdDtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc3R5bGU7XG4vKipcbiAqIEFwcGx5IGEgbWFwIG9mIHN0eWxlcyB0byBhbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgVGhlIGVsZW1lbnQgdGhhdCB0aGUgc3R5bGVzIHdpbGwgYmUgYXBwbGllZCB0b1xuICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBUaGUgbWFwIG9mIHByb3BOYW1lOiBhdHRyaWJ1dGUsIGJvdGggYXJlIHVzZWQgYXMtaXNcbiAqXG4gKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gZWxcbiAqL1xuZnVuY3Rpb24gc3R5bGUoZWwsIHN0eWxlcykge1xuICAgIE9iamVjdC5rZXlzKHN0eWxlcykuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICBpZiAoZWwuc3R5bGVbcHJvcF0gIT09IHN0eWxlc1twcm9wXSkge1xuICAgICAgICAgICAgZWwuc3R5bGVbcHJvcF0gPSBzdHlsZXNbcHJvcF07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZWw7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBmcmFtZTtcblxudmFyIF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3JlcXVlc3RBbmltYXRpb25GcmFtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIENyZWF0ZSBhIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGF0IHRoZSBuZXh0IHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICogY3ljbGVcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gKlxuICogQHJldHVybiB7ZnVuY30gVGhlIGZ1bmN0aW9uIHdyYXBwZWQgd2l0aGluIGEgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKi9cbmZ1bmN0aW9uIGZyYW1lKGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gKDAsIF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUyLmRlZmF1bHQpKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfSk7XG4gIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAqIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAqIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICogbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy4gVGhlIGZ1bmN0aW9uIGFsc28gaGFzIGEgcHJvcGVydHkgJ2NsZWFyJyBcbiAqIHRoYXQgaXMgYSBmdW5jdGlvbiB3aGljaCB3aWxsIGNsZWFyIHRoZSB0aW1lciB0byBwcmV2ZW50IHByZXZpb3VzbHkgc2NoZWR1bGVkIGV4ZWN1dGlvbnMuIFxuICpcbiAqIEBzb3VyY2UgdW5kZXJzY29yZS5qc1xuICogQHNlZSBodHRwOi8vdW5zY3JpcHRhYmxlLmNvbS8yMDA5LzAzLzIwL2RlYm91bmNpbmctamF2YXNjcmlwdC1tZXRob2RzL1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb24gdG8gd3JhcFxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQgaW4gbXMgKGAxMDBgKVxuICogQHBhcmFtIHtCb29sZWFufSB3aGV0aGVyIHRvIGV4ZWN1dGUgYXQgdGhlIGJlZ2lubmluZyAoYGZhbHNlYClcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpe1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG4gIGlmIChudWxsID09IHdhaXQpIHdhaXQgPSAxMDA7XG5cbiAgZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuXG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBkZWJvdW5jZWQgPSBmdW5jdGlvbigpe1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykge1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGRlYm91bmNlZC5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIFxuICBkZWJvdW5jZWQuZmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGltZW91dCkge1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIFxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBkZWJvdW5jZWQ7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gcHJldmVudENsaWNrO1xuZnVuY3Rpb24gcHJldmVudENsaWNrSGFuZGxlcihlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJldmVudENsaWNrSGFuZGxlciwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHByZXZlbnRDbGljayh2YWx1ZXMpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJldmVudENsaWNrSGFuZGxlciwgdHJ1ZSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZHJhd2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfZHJhd2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RyYXdlcik7XG5cbnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciB1dGlsID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ2FudmFzRW50cnlcbiAqIEBwcml2YXRlXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSB3YXZlIFRoZSB3YXZlIG5vZGVcbiAqIEBwcm9wZXJ0eSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSB3YXZlQ3R4IFRoZSBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHRcbiAqIEBwcm9wZXJ0eSB7P0hUTUxFbGVtZW50fSBwcm9ncmVzcyBUaGUgcHJvZ3Jlc3Mgd2F2ZSBub2RlXG4gKiBAcHJvcGVydHkgez9DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IHByb2dyZXNzQ3R4IFRoZSBwcm9ncmVzcyB3YXZlIGNhbnZhc1xuICogcmVuZGVyaW5nIGNvbnRleHRcbiAqIEBwcm9wZXJ0eSB7P251bWJlcn0gc3RhcnQgU3RhcnQgb2YgdGhlIGFyZWEgdGhlIGNhbnZhcyBzaG91bGQgcmVuZGVyLCBiZXR3ZWVuIDAgYW5kIDFcbiAqIEBwcm9wZXJ0eSB7P251bWJlcn0gZW5kIEVuZCBvZiB0aGUgYXJlYSB0aGUgY2FudmFzIHNob3VsZCByZW5kZXIsIGJldHdlZW4gMCBhbmQgMVxuICovXG5cbi8qKlxuICogTXVsdGlDYW52YXMgcmVuZGVyZXIgZm9yIHdhdmVzdXJmZXIuIElzIGN1cnJlbnRseSB0aGUgZGVmYXVsdCBhbmQgc29sZSBidWlsdFxuICogaW4gcmVuZGVyZXIuXG4gKi9cbnZhciBNdWx0aUNhbnZhcyA9IGZ1bmN0aW9uIChfRHJhd2VyKSB7XG4gICAgX2luaGVyaXRzKE11bHRpQ2FudmFzLCBfRHJhd2VyKTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgY29udGFpbmVyIG5vZGUgb2YgdGhlIHdhdmVzdXJmZXIgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1dhdmVzdXJmZXJQYXJhbXN9IHBhcmFtcyBUaGUgd2F2ZXN1cmZlciBpbml0aWFsaXNhdGlvbiBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gTXVsdGlDYW52YXMoY29udGFpbmVyLCBwYXJhbXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE11bHRpQ2FudmFzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNdWx0aUNhbnZhcy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE11bHRpQ2FudmFzKSkuY2FsbCh0aGlzLCBjb250YWluZXIsIHBhcmFtcykpO1xuXG4gICAgICAgIF90aGlzLm1heENhbnZhc1dpZHRoID0gcGFyYW1zLm1heENhbnZhc1dpZHRoO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heENhbnZhc0VsZW1lbnRXaWR0aCA9IE1hdGgucm91bmQocGFyYW1zLm1heENhbnZhc1dpZHRoIC8gcGFyYW1zLnBpeGVsUmF0aW8pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIG9yIG5vdCB0aGUgcHJvZ3Jlc3Mgd2F2ZSBpcyByZW5kZXJlcmVkLiBJZiB0aGUgYHdhdmVDb2xvcmBcbiAgICAgICAgICogYW5kIGBwcm9ncmVzc0NvbG9yYCBhcmUgdGhlIHNhbWUgY29sb3VyIGl0IGlzIG5vdC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oYXNQcm9ncmVzc0NhbnZhcyA9IHBhcmFtcy53YXZlQ29sb3IgIT0gcGFyYW1zLnByb2dyZXNzQ29sb3I7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGFsZlBpeGVsID0gMC41IC8gcGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jYW52YXNlcyA9IFtdO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMucHJvZ3Jlc3NXYXZlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2UgdGhlIGRyYXdlclxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoTXVsdGlDYW52YXMsIFt7XG4gICAgICAgIGtleTogJ2luaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlV3JhcHBlcigpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVFbGVtZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgY2FudmFzIGVsZW1lbnRzIGFuZCBzdHlsZSB0aGVtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVFbGVtZW50cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFbGVtZW50cygpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NXYXZlID0gdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuc3R5bGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnd2F2ZScpLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgekluZGV4OiAzLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcwJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICAgICAgICAgICAgYm9yZGVyUmlnaHRTdHlsZTogJ3NvbGlkJyxcbiAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgdGhpcy5hZGRDYW52YXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGN1cnNvciBzdHlsZSBmcm9tIHBhcmFtcy5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZUN1cnNvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVDdXJzb3IoKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMucHJvZ3Jlc3NXYXZlLCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyUmlnaHRXaWR0aDogdGhpcy5wYXJhbXMuY3Vyc29yV2lkdGggKyAncHgnLFxuICAgICAgICAgICAgICAgIGJvcmRlclJpZ2h0Q29sb3I6IHRoaXMucGFyYW1zLmN1cnNvckNvbG9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGp1c3QgdG8gdGhlIHVwZGF0ZWQgc2l6ZSBieSBhZGRpbmcgb3IgcmVtb3ZpbmcgY2FudmFzZXNcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZVNpemUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgdG90YWxXaWR0aCA9IE1hdGgucm91bmQodGhpcy53aWR0aCAvIHRoaXMucGFyYW1zLnBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVkQ2FudmFzZXMgPSBNYXRoLmNlaWwodG90YWxXaWR0aCAvIHRoaXMubWF4Q2FudmFzRWxlbWVudFdpZHRoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHRoaXMuY2FudmFzZXMubGVuZ3RoIDwgcmVxdWlyZWRDYW52YXNlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2FudmFzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmNhbnZhc2VzLmxlbmd0aCA+IHJlcXVpcmVkQ2FudmFzZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbnZhcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHNvbWUgb3ZlcmxhcCB0byBwcmV2ZW50IHZlcnRpY2FsIHdoaXRlIHN0cmlwZXMsIGtlZXAgdGhlIHdpZHRoIGV2ZW4gZm9yIHNpbXBsaWNpdHkuXG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhc1dpZHRoID0gX3RoaXMyLm1heENhbnZhc1dpZHRoICsgMiAqIE1hdGguY2VpbChfdGhpczIucGFyYW1zLnBpeGVsUmF0aW8gLyAyKTtcblxuICAgICAgICAgICAgICAgIGlmIChpID09IF90aGlzMi5jYW52YXNlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc1dpZHRoID0gX3RoaXMyLndpZHRoIC0gX3RoaXMyLm1heENhbnZhc1dpZHRoICogKF90aGlzMi5jYW52YXNlcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfdGhpczIudXBkYXRlRGltZW5zaW9ucyhlbnRyeSwgY2FudmFzV2lkdGgsIF90aGlzMi5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIF90aGlzMi5jbGVhcldhdmVGb3JFbnRyeShlbnRyeSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgYSBjYW52YXMgdG8gdGhlIGNhbnZhcyBsaXN0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRDYW52YXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2FudmFzKCkge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge307XG4gICAgICAgICAgICB2YXIgbGVmdE9mZnNldCA9IHRoaXMubWF4Q2FudmFzRWxlbWVudFdpZHRoICogdGhpcy5jYW52YXNlcy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGVudHJ5LndhdmUgPSB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSwge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgIHpJbmRleDogMixcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0T2Zmc2V0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZW50cnkud2F2ZUN0eCA9IGVudHJ5LndhdmUuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzcyA9IHRoaXMucHJvZ3Jlc3NXYXZlLmFwcGVuZENoaWxkKHRoaXMuc3R5bGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRPZmZzZXQgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJSdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZW50cnkucHJvZ3Jlc3NDdHggPSBlbnRyeS5wcm9ncmVzcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLnB1c2goZW50cnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvcCBvbmUgY2FudmFzIGZyb20gdGhlIGxpc3RcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbW92ZUNhbnZhcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVDYW52YXMoKSB7XG4gICAgICAgICAgICB2YXIgbGFzdEVudHJ5ID0gdGhpcy5jYW52YXNlcy5wb3AoKTtcbiAgICAgICAgICAgIGxhc3RFbnRyeS53YXZlLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGFzdEVudHJ5LndhdmUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBsYXN0RW50cnkucHJvZ3Jlc3MucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsYXN0RW50cnkucHJvZ3Jlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgZGltZW5zaW9ucyBvZiBhIGNhbnZhcyBlbGVtZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7Q2FudmFzRW50cnl9IGVudHJ5XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBUaGUgbmV3IHdpZHRoIG9mIHRoZSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgVGhlIG5ldyBoZWlnaHQgb2YgdGhlIGVsZW1lbnRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZURpbWVuc2lvbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGltZW5zaW9ucyhlbnRyeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRXaWR0aCA9IE1hdGgucm91bmQod2lkdGggLyB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKTtcbiAgICAgICAgICAgIHZhciB0b3RhbFdpZHRoID0gTWF0aC5yb3VuZCh0aGlzLndpZHRoIC8gdGhpcy5wYXJhbXMucGl4ZWxSYXRpbyk7XG5cbiAgICAgICAgICAgIC8vIFdoZXJlIHRoZSBjYW52YXMgc3RhcnRzIGFuZCBlbmRzIGluIHRoZSB3YXZlZm9ybSwgcmVwcmVzZW50ZWQgYXMgYSBkZWNpbWFsIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgICAgICAgIGVudHJ5LnN0YXJ0ID0gZW50cnkud2F2ZUN0eC5jYW52YXMub2Zmc2V0TGVmdCAvIHRvdGFsV2lkdGggfHwgMDtcbiAgICAgICAgICAgIGVudHJ5LmVuZCA9IGVudHJ5LnN0YXJ0ICsgZWxlbWVudFdpZHRoIC8gdG90YWxXaWR0aDtcblxuICAgICAgICAgICAgZW50cnkud2F2ZUN0eC5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGVudHJ5LndhdmVDdHguY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUoZW50cnkud2F2ZUN0eC5jYW52YXMsIHsgd2lkdGg6IGVsZW1lbnRXaWR0aCArICdweCcgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy5wcm9ncmVzc1dhdmUsIHsgZGlzcGxheTogJ2Jsb2NrJyB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvZ3Jlc3NDYW52YXMpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzc0N0eC5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgICAgICBlbnRyeS5wcm9ncmVzc0N0eC5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUoZW50cnkucHJvZ3Jlc3NDdHguY2FudmFzLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50V2lkdGggKyAncHgnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYXIgdGhlIHdob2xlIHdhdmVmb3JtXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjbGVhcldhdmUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJXYXZlKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuY2FudmFzZXMuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmNsZWFyV2F2ZUZvckVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFyIG9uZSBjYW52YXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtDYW52YXNFbnRyeX0gZW50cnlcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NsZWFyV2F2ZUZvckVudHJ5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyV2F2ZUZvckVudHJ5KGVudHJ5KSB7XG4gICAgICAgICAgICBlbnRyeS53YXZlQ3R4LmNsZWFyUmVjdCgwLCAwLCBlbnRyeS53YXZlQ3R4LmNhbnZhcy53aWR0aCwgZW50cnkud2F2ZUN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc1Byb2dyZXNzQ2FudmFzKSB7XG4gICAgICAgICAgICAgICAgZW50cnkucHJvZ3Jlc3NDdHguY2xlYXJSZWN0KDAsIDAsIGVudHJ5LnByb2dyZXNzQ3R4LmNhbnZhcy53aWR0aCwgZW50cnkucHJvZ3Jlc3NDdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBhIHdhdmVmb3JtIHdpdGggYmFyc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIENhbiBhbHNvIGJlIGFuIGFycmF5IG9mIGFycmF5cyBmb3Igc3BsaXQgY2hhbm5lbFxuICAgICAgICAgKiByZW5kZXJpbmdcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxJbmRleCBUaGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgY2hhbm5lbC4gTm9ybWFsbHlcbiAgICAgICAgICogc2hvdWxkIGJlIDAuIE11c3QgYmUgYW4gaW50ZWdlci5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSB4LW9mZnNldCBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBlbmQgb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmVcbiAgICAgICAgICogcmVuZGVyZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RyYXdCYXJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdCYXJzKHBlYWtzLCBjaGFubmVsSW5kZXgsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVwYXJlRHJhdyhwZWFrcywgY2hhbm5lbEluZGV4LCBzdGFydCwgZW5kLCBmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICAgICAgICAgIHZhciBhYnNtYXggPSBfcmVmLmFic21heCxcbiAgICAgICAgICAgICAgICAgICAgaGFzTWluVmFscyA9IF9yZWYuaGFzTWluVmFscyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gX3JlZi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFkgPSBfcmVmLm9mZnNldFksXG4gICAgICAgICAgICAgICAgICAgIGhhbGZIID0gX3JlZi5oYWxmSCxcbiAgICAgICAgICAgICAgICAgICAgcGVha3MgPSBfcmVmLnBlYWtzO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgZHJhd0JhcnMgd2FzIGNhbGxlZCB3aXRoaW4gd3MuZW1wdHkgd2UgZG9uJ3QgcGFzcyBhIHN0YXJ0IGFuZFxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHdhbnQgYW55dGhpbmcgdG8gaGFwcGVuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTa2lwIGV2ZXJ5IG90aGVyIHZhbHVlIGlmIHRoZXJlIGFyZSBuZWdhdGl2ZXMuXG4gICAgICAgICAgICAgICAgdmFyIHBlYWtJbmRleFNjYWxlID0gaGFzTWluVmFscyA/IDIgOiAxO1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBwZWFrcy5sZW5ndGggLyBwZWFrSW5kZXhTY2FsZTtcbiAgICAgICAgICAgICAgICB2YXIgYmFyID0gX3RoaXM0LnBhcmFtcy5iYXJXaWR0aCAqIF90aGlzNC5wYXJhbXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgICAgICB2YXIgZ2FwID0gX3RoaXM0LnBhcmFtcy5iYXJHYXAgPT09IG51bGwgPyBNYXRoLm1heChfdGhpczQucGFyYW1zLnBpeGVsUmF0aW8sIH5+KGJhciAvIDIpKSA6IE1hdGgubWF4KF90aGlzNC5wYXJhbXMucGl4ZWxSYXRpbywgX3RoaXM0LnBhcmFtcy5iYXJHYXAgKiBfdGhpczQucGFyYW1zLnBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgICAgIHZhciBzdGVwID0gYmFyICsgZ2FwO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gbGVuZ3RoIC8gX3RoaXM0LndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHZhciBsYXN0ID0gZW5kO1xuICAgICAgICAgICAgICAgIHZhciBpID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAgICAgZm9yIChpID0gZmlyc3Q7IGkgPCBsYXN0OyBpICs9IHN0ZXApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlYWsgPSBwZWFrc1tNYXRoLmZsb29yKGkgKiBzY2FsZSAqIHBlYWtJbmRleFNjYWxlKV0gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBNYXRoLnJvdW5kKHBlYWsgLyBhYnNtYXggKiBoYWxmSCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5maWxsUmVjdChpICsgX3RoaXM0LmhhbGZQaXhlbCwgaGFsZkggLSBoICsgb2Zmc2V0WSwgYmFyICsgX3RoaXM0LmhhbGZQaXhlbCwgaCAqIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERyYXcgYSB3YXZlZm9ybVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIENhbiBhbHNvIGJlIGFuIGFycmF5IG9mIGFycmF5cyBmb3Igc3BsaXQgY2hhbm5lbFxuICAgICAgICAgKiByZW5kZXJpbmdcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxJbmRleCBUaGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgY2hhbm5lbC4gTm9ybWFsbHlcbiAgICAgICAgICogc2hvdWxkIGJlIDBcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXI/fSBzdGFydCBUaGUgeC1vZmZzZXQgb2YgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZCAoSWYgdGhpcyBpc24ndCBzZXQgb25seSBhIGZsYXQgbGluZSBpcyByZW5kZXJlZClcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXI/fSBlbmQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBlbmQgb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmVcbiAgICAgICAgICogcmVuZGVyZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RyYXdXYXZlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdXYXZlKHBlYWtzLCBjaGFubmVsSW5kZXgsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVwYXJlRHJhdyhwZWFrcywgY2hhbm5lbEluZGV4LCBzdGFydCwgZW5kLCBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWJzbWF4ID0gX3JlZjIuYWJzbWF4LFxuICAgICAgICAgICAgICAgICAgICBoYXNNaW5WYWxzID0gX3JlZjIuaGFzTWluVmFscyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gX3JlZjIuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRZID0gX3JlZjIub2Zmc2V0WSxcbiAgICAgICAgICAgICAgICAgICAgaGFsZkggPSBfcmVmMi5oYWxmSCxcbiAgICAgICAgICAgICAgICAgICAgcGVha3MgPSBfcmVmMi5wZWFrcztcblxuICAgICAgICAgICAgICAgIGlmICghaGFzTWluVmFscykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVmbGVjdGVkUGVha3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9IHBlYWtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmbGVjdGVkUGVha3NbMiAqIGldID0gcGVha3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZsZWN0ZWRQZWFrc1syICogaSArIDFdID0gLXBlYWtzW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBlYWtzID0gcmVmbGVjdGVkUGVha3M7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgZHJhd1dhdmUgd2FzIGNhbGxlZCB3aXRoaW4gd3MuZW1wdHkgd2UgZG9uJ3QgcGFzcyBhIHN0YXJ0IGFuZFxuICAgICAgICAgICAgICAgIC8vIGVuZCBhbmQgc2ltcGx5IHdhbnQgYSBmbGF0IGxpbmVcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUuZHJhd0xpbmUocGVha3MsIGFic21heCwgaGFsZkgsIG9mZnNldFksIHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBkcmF3IGEgbWVkaWFuIGxpbmVcbiAgICAgICAgICAgICAgICBfdGhpczUuZmlsbFJlY3QoMCwgaGFsZkggKyBvZmZzZXRZIC0gX3RoaXM1LmhhbGZQaXhlbCwgX3RoaXM1LndpZHRoLCBfdGhpczUuaGFsZlBpeGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRlbGwgdGhlIGNhbnZhcyBlbnRyaWVzIHRvIHJlbmRlciB0aGVpciBwb3J0aW9uIG9mIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfSBwZWFrcyBQZWFrIGRhdGFcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGFic21heCBNYXhpbXVtIHBlYWsgdmFsdWUgKGFic29sdXRlKVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaGFsZkggSGFsZiB0aGUgaGVpZ2h0IG9mIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBPZmZzZXQgdG8gdGhlIHRvcFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyZWEgdGhhdFxuICAgICAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgeC1vZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd0xpbmUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0xpbmUocGVha3MsIGFic21heCwgaGFsZkgsIG9mZnNldFksIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgX3RoaXM2LnNldEZpbGxTdHlsZXMoZW50cnkpO1xuICAgICAgICAgICAgICAgIF90aGlzNi5kcmF3TGluZVRvQ29udGV4dChlbnRyeSwgZW50cnkud2F2ZUN0eCwgcGVha3MsIGFic21heCwgaGFsZkgsIG9mZnNldFksIHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgIF90aGlzNi5kcmF3TGluZVRvQ29udGV4dChlbnRyeSwgZW50cnkucHJvZ3Jlc3NDdHgsIHBlYWtzLCBhYnNtYXgsIGhhbGZILCBvZmZzZXRZLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0aGUgYWN0dWFsIHdhdmVmb3JtIGxpbmUgb24gYSBjYW52YXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtDYW52YXNFbnRyeX0gZW50cnlcbiAgICAgICAgICogQHBhcmFtIHtDYW52YXMyRENvbnRleHRBdHRyaWJ1dGVzfSBjdHggRXNzZW50aWFsbHkgYGVudHJ5Llt3YXZlfHByb2dyZXNzXUN0eGBcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXX0gcGVha3NcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGFic21heCBNYXhpbXVtIHBlYWsgdmFsdWUgKGFic29sdXRlKVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaGFsZkggSGFsZiB0aGUgaGVpZ2h0IG9mIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBPZmZzZXQgdG8gdGhlIHRvcFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyZWEgdGhhdFxuICAgICAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgeC1vZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd0xpbmVUb0NvbnRleHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0xpbmVUb0NvbnRleHQoZW50cnksIGN0eCwgcGVha3MsIGFic21heCwgaGFsZkgsIG9mZnNldFksIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gcGVha3MubGVuZ3RoIC8gMjtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHRoaXMucGFyYW1zLmZpbGxQYXJlbnQgJiYgdGhpcy53aWR0aCAhPSBsZW5ndGggPyB0aGlzLndpZHRoIC8gbGVuZ3RoIDogMTtcblxuICAgICAgICAgICAgdmFyIGZpcnN0ID0gTWF0aC5yb3VuZChsZW5ndGggKiBlbnRyeS5zdGFydCk7XG4gICAgICAgICAgICAvLyBVc2Ugb25lIG1vcmUgcGVhayB2YWx1ZSB0byBtYWtlIHN1cmUgd2Ugam9pbiBwZWFrcyBhdCBlbmRzIC0tIHVubGVzcyxcbiAgICAgICAgICAgIC8vIG9mIGNvdXJzZSwgdGhpcyBpcyB0aGUgbGFzdCBjYW52YXMuXG4gICAgICAgICAgICB2YXIgbGFzdCA9IE1hdGgucm91bmQobGVuZ3RoICogZW50cnkuZW5kKSArIDE7XG4gICAgICAgICAgICBpZiAoZmlyc3QgPiBlbmQgfHwgbGFzdCA8IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhbnZhc1N0YXJ0ID0gTWF0aC5taW4oZmlyc3QsIHN0YXJ0KTtcbiAgICAgICAgICAgIHZhciBjYW52YXNFbmQgPSBNYXRoLm1heChsYXN0LCBlbmQpO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgaiA9IHZvaWQgMDtcblxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbygoY2FudmFzU3RhcnQgLSBmaXJzdCkgKiBzY2FsZSArIHRoaXMuaGFsZlBpeGVsLCBoYWxmSCArIG9mZnNldFkpO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSBjYW52YXNTdGFydDsgaSA8IGNhbnZhc0VuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlYWsgPSBwZWFrc1syICogaV0gfHwgMDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IE1hdGgucm91bmQocGVhayAvIGFic21heCAqIGhhbGZIKTtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKChpIC0gZmlyc3QpICogc2NhbGUgKyB0aGlzLmhhbGZQaXhlbCwgaGFsZkggLSBoICsgb2Zmc2V0WSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERyYXcgdGhlIGJvdHRvbSBlZGdlIGdvaW5nIGJhY2t3YXJkcywgdG8gbWFrZSBhIHNpbmdsZVxuICAgICAgICAgICAgLy8gY2xvc2VkIGh1bGwgdG8gZmlsbC5cbiAgICAgICAgICAgIGZvciAoaiA9IGNhbnZhc0VuZCAtIDE7IGogPj0gY2FudmFzU3RhcnQ7IGotLSkge1xuICAgICAgICAgICAgICAgIHZhciBfcGVhayA9IHBlYWtzWzIgKiBqICsgMV0gfHwgMDtcbiAgICAgICAgICAgICAgICB2YXIgX2ggPSBNYXRoLnJvdW5kKF9wZWFrIC8gYWJzbWF4ICogaGFsZkgpO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oKGogLSBmaXJzdCkgKiBzY2FsZSArIHRoaXMuaGFsZlBpeGVsLCBoYWxmSCAtIF9oICsgb2Zmc2V0WSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgd2F2ZWZvcm1cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZpbGxSZWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBzdGFydENhbnZhcyA9IE1hdGguZmxvb3IoeCAvIHRoaXMubWF4Q2FudmFzV2lkdGgpO1xuICAgICAgICAgICAgdmFyIGVuZENhbnZhcyA9IE1hdGgubWluKE1hdGguY2VpbCgoeCArIHdpZHRoKSAvIHRoaXMubWF4Q2FudmFzV2lkdGgpICsgMSwgdGhpcy5jYW52YXNlcy5sZW5ndGgpO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICBmb3IgKGkgPSBzdGFydENhbnZhczsgaSA8IGVuZENhbnZhczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5jYW52YXNlc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdE9mZnNldCA9IGkgKiB0aGlzLm1heENhbnZhc1dpZHRoO1xuXG4gICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDE6IE1hdGgubWF4KHgsIGkgKiB0aGlzLm1heENhbnZhc1dpZHRoKSxcbiAgICAgICAgICAgICAgICAgICAgeTE6IHksXG4gICAgICAgICAgICAgICAgICAgIHgyOiBNYXRoLm1pbih4ICsgd2lkdGgsIGkgKiB0aGlzLm1heENhbnZhc1dpZHRoICsgZW50cnkud2F2ZUN0eC5jYW52YXMud2lkdGgpLFxuICAgICAgICAgICAgICAgICAgICB5MjogeSArIGhlaWdodFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uLngxIDwgaW50ZXJzZWN0aW9uLngyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlcyhlbnRyeSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsUmVjdFRvQ29udGV4dChlbnRyeS53YXZlQ3R4LCBpbnRlcnNlY3Rpb24ueDEgLSBsZWZ0T2Zmc2V0LCBpbnRlcnNlY3Rpb24ueTEsIGludGVyc2VjdGlvbi54MiAtIGludGVyc2VjdGlvbi54MSwgaW50ZXJzZWN0aW9uLnkyIC0gaW50ZXJzZWN0aW9uLnkxKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGxSZWN0VG9Db250ZXh0KGVudHJ5LnByb2dyZXNzQ3R4LCBpbnRlcnNlY3Rpb24ueDEgLSBsZWZ0T2Zmc2V0LCBpbnRlcnNlY3Rpb24ueTEsIGludGVyc2VjdGlvbi54MiAtIGludGVyc2VjdGlvbi54MSwgaW50ZXJzZWN0aW9uLnkyIC0gaW50ZXJzZWN0aW9uLnkxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUGVyZm9ybXMgcHJlcGFyYXRpb24gdGFza3MgYW5kIGNhbGN1bGF0aW9ucyB3aGljaCBhcmUgc2hhcmVkIGJ5IGRyYXdCYXJzIGFuZCBkcmF3V2F2ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIENhbiBhbHNvIGJlIGFuIGFycmF5IG9mIGFycmF5cyBmb3Igc3BsaXQgY2hhbm5lbFxuICAgICAgICAgKiByZW5kZXJpbmdcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxJbmRleCBUaGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgY2hhbm5lbC4gTm9ybWFsbHlcbiAgICAgICAgICogc2hvdWxkIGJlIDBcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXI/fSBzdGFydCBUaGUgeC1vZmZzZXQgb2YgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZCAoSWYgdGhpcyBpc24ndCBzZXQgb25seSBhIGZsYXQgbGluZSBpcyByZW5kZXJlZClcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXI/fSBlbmQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBlbmQgb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmVcbiAgICAgICAgICogcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gVGhlIHJlbmRlciBmdW5jdGlvbiB0byBjYWxsXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwcmVwYXJlRHJhdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYXJlRHJhdyhwZWFrcywgY2hhbm5lbEluZGV4LCBzdGFydCwgZW5kLCBmbikge1xuICAgICAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiB1dGlsLmZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBjaGFubmVscyBhbmQgY2FsbCB0aGlzIGZ1bmN0aW9uIHdpdGggdGhlIGNoYW5uZWxJbmRleCBzZXRcbiAgICAgICAgICAgICAgICBpZiAocGVha3NbMF0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbHMgPSBwZWFrcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5wYXJhbXMuc3BsaXRDaGFubmVscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnNldEhlaWdodChjaGFubmVscy5sZW5ndGggKiBfdGhpczcucGFyYW1zLmhlaWdodCAqIF90aGlzNy5wYXJhbXMucGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhbm5lbHMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbm5lbFBlYWtzLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5wcmVwYXJlRHJhdyhjaGFubmVsUGVha3MsIGksIHN0YXJ0LCBlbmQsIGZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBlYWtzID0gY2hhbm5lbHNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBtYXhpbXVtIG1vZHVsYXRpb24gdmFsdWUsIGVpdGhlciBmcm9tIHRoZSBiYXJIZWlnaHRcbiAgICAgICAgICAgICAgICAvLyBwYXJhbWV0ZXIgb3IgaWYgbm9ybWFsaXplPXRydWUgZnJvbSB0aGUgbGFyZ2VzdCB2YWx1ZSBpbiB0aGUgcGVha1xuICAgICAgICAgICAgICAgIC8vIHNldFxuICAgICAgICAgICAgICAgIHZhciBhYnNtYXggPSAxIC8gX3RoaXM3LnBhcmFtcy5iYXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzNy5wYXJhbXMubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSB1dGlsLm1heChwZWFrcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW4gPSB1dGlsLm1pbihwZWFrcyk7XG4gICAgICAgICAgICAgICAgICAgIGFic21heCA9IC1taW4gPiBtYXggPyAtbWluIDogbWF4O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEJhciB3YXZlIGRyYXdzIHRoZSBib3R0b20gb25seSBhcyBhIHJlZmxlY3Rpb24gb2YgdGhlIHRvcCxcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBkb24ndCBuZWVkIG5lZ2F0aXZlIHZhbHVlc1xuICAgICAgICAgICAgICAgIHZhciBoYXNNaW5WYWxzID0gW10uc29tZS5jYWxsKHBlYWtzLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwgPCAwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBfdGhpczcucGFyYW1zLmhlaWdodCAqIF90aGlzNy5wYXJhbXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IGhlaWdodCAqIGNoYW5uZWxJbmRleCB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciBoYWxmSCA9IGhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZm4oe1xuICAgICAgICAgICAgICAgICAgICBhYnNtYXg6IGFic21heCxcbiAgICAgICAgICAgICAgICAgICAgaGFzTWluVmFsczogaGFzTWluVmFscyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFk6IG9mZnNldFksXG4gICAgICAgICAgICAgICAgICAgIGhhbGZIOiBoYWxmSCxcbiAgICAgICAgICAgICAgICAgICAgcGVha3M6IHBlYWtzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERyYXcgdGhlIGFjdHVhbCByZWN0YW5nbGUgb24gYSBjYW52YXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtDYW52YXMyRENvbnRleHRBdHRyaWJ1dGVzfSBjdHhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZpbGxSZWN0VG9Db250ZXh0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGxSZWN0VG9Db250ZXh0KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBmaWxsIHN0eWxlcyBmb3IgYSBjZXJ0YWluIGVudHJ5ICh3YXZlIGFuZCBwcm9ncmVzcylcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtDYW52YXNFbnRyeX0gZW50cnlcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldEZpbGxTdHlsZXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RmlsbFN0eWxlcyhlbnRyeSkge1xuICAgICAgICAgICAgZW50cnkud2F2ZUN0eC5maWxsU3R5bGUgPSB0aGlzLnBhcmFtcy53YXZlQ29sb3I7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNQcm9ncmVzc0NhbnZhcykge1xuICAgICAgICAgICAgICAgIGVudHJ5LnByb2dyZXNzQ3R4LmZpbGxTdHlsZSA9IHRoaXMucGFyYW1zLnByb2dyZXNzQ29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJuIGltYWdlIGRhdGEgb2YgdGhlIHdhdmVmb3JtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlPSdpbWFnZS9wbmcnIEFuIG9wdGlvbmFsIHZhbHVlIG9mIGEgZm9ybWF0IHR5cGUuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBxdWFsaXR5PTAuOTIgQW4gb3B0aW9uYWwgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd8c3RyaW5nW119IGltYWdlcyBBIGRhdGEgVVJMIG9yIGFuIGFycmF5IG9mIGRhdGEgVVJMc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0SW1hZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW1hZ2UodHlwZSwgcXVhbGl0eSkge1xuICAgICAgICAgICAgdmFyIGltYWdlcyA9IHRoaXMuY2FudmFzZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS53YXZlLnRvRGF0YVVSTCh0eXBlLCBxdWFsaXR5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdlcy5sZW5ndGggPiAxID8gaW1hZ2VzIDogaW1hZ2VzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciB0aGUgbmV3IHByb2dyZXNzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb3NpdGlvbiBYLU9mZnNldCBvZiBwcm9ncmVzcyBwb3NpdGlvbiBpbiBwaXhlbHNcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZVByb2dyZXNzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMucHJvZ3Jlc3NXYXZlLCB7IHdpZHRoOiBwb3NpdGlvbiArICdweCcgfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTXVsdGlDYW52YXM7XG59KF9kcmF3ZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNdWx0aUNhbnZhcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIHV0aWwgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfdXRpbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuLyoqXG4gKiBQYXJlbnQgY2xhc3MgZm9yIHJlbmRlcmVyc1xuICpcbiAqIEBleHRlbmRzIHtPYnNlcnZlcn1cbiAqL1xudmFyIERyYXdlciA9IGZ1bmN0aW9uIChfdXRpbCRPYnNlcnZlcikge1xuICAgIF9pbmhlcml0cyhEcmF3ZXIsIF91dGlsJE9ic2VydmVyKTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgY29udGFpbmVyIG5vZGUgb2YgdGhlIHdhdmVzdXJmZXIgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1dhdmVzdXJmZXJQYXJhbXN9IHBhcmFtcyBUaGUgd2F2ZXN1cmZlciBpbml0aWFsaXNhdGlvbiBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhd2VyKGNvbnRhaW5lciwgcGFyYW1zKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcmF3ZXIpO1xuXG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRHJhd2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJhd2VyKSkuY2FsbCh0aGlzKSk7XG5cbiAgICAgICAgX3RoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge1dhdmVzdXJmZXJQYXJhbXN9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIHJlbmRlcmVyXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy53aWR0aCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSByZW5kZXJlclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodCAqIF90aGlzLnBhcmFtcy5waXhlbFJhdGlvO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMubGFzdFBvcyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYDx3YXZlPmAgZWxlbWVudCB3aGljaCBpcyBhZGRlZCB0byB0aGUgY29udGFpbmVyXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndyYXBwZXIgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgYHV0aWwuc3R5bGVgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB0aGF0IHRoZSBzdHlsZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBUaGUgbWFwIG9mIHByb3BOYW1lOiBhdHRyaWJ1dGUsIGJvdGggYXJlIHVzZWQgYXMtaXNcbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gZWxcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKERyYXdlciwgW3tcbiAgICAgICAga2V5OiAnc3R5bGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3R5bGUoZWwsIHN0eWxlcykge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWwuc3R5bGUoZWwsIHN0eWxlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIHRoZSB3cmFwcGVyIGA8d2F2ZT5gIGVsZW1lbnQsIHN0eWxlIGl0IGFuZCBzZXQgdXAgdGhlIGV2ZW50cyBmb3JcbiAgICAgICAgICogaW50ZXJhY3Rpb25cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZVdyYXBwZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlV3JhcHBlcigpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9IHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3dhdmUnKSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgd2Via2l0VXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5wYXJhbXMuaGVpZ2h0ICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5maWxsUGFyZW50IHx8IHRoaXMucGFyYW1zLnNjcm9sbFBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WDogdGhpcy5wYXJhbXMuaGlkZVNjcm9sbGJhciA/ICdoaWRkZW4nIDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0dXBXcmFwcGVyRXZlbnRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlIGNsaWNrIGV2ZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGUgQ2xpY2sgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIHs/Ym9vbGVhbn0gbm9QcmV2ZW50IFNldCB0byB0cnVlIHRvIG5vdCBjYWxsIGBlLnByZXZlbnREZWZhdWx0KClgXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUGxheWJhY2sgcG9zaXRpb24gZnJvbSAwIHRvIDFcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUV2ZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGUsIG5vUHJldmVudCkge1xuICAgICAgICAgICAgIW5vUHJldmVudCAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBjbGllbnRYID0gZS50YXJnZXRUb3VjaGVzID8gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFggOiBlLmNsaWVudFg7XG4gICAgICAgICAgICB2YXIgYmJveCA9IHRoaXMud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgdmFyIG5vbWluYWxXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICB2YXIgcGFyZW50V2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG5cbiAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IHZvaWQgMDtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmFtcy5maWxsUGFyZW50ICYmIG5vbWluYWxXaWR0aCA8IHBhcmVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSAoY2xpZW50WCAtIGJib3gubGVmdCkgKiB0aGlzLnBhcmFtcy5waXhlbFJhdGlvIC8gbm9taW5hbFdpZHRoIHx8IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzID0gKGNsaWVudFggLSBiYm94LmxlZnQgKyB0aGlzLndyYXBwZXIuc2Nyb2xsTGVmdCkgLyB0aGlzLndyYXBwZXIuc2Nyb2xsV2lkdGggfHwgMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXR1cFdyYXBwZXJFdmVudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBXcmFwcGVyRXZlbnRzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbGJhckhlaWdodCA9IF90aGlzMi53cmFwcGVyLm9mZnNldEhlaWdodCAtIF90aGlzMi53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsYmFySGVpZ2h0ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsYmFyIGlzIHZpc2libGUuICBDaGVjayBpZiBjbGljayB3YXMgb24gaXRcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJib3ggPSBfdGhpczIud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY2xpZW50WSA+PSBiYm94LmJvdHRvbSAtIHNjcm9sbGJhckhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIG1vdXNlZG93biBhcyBpdCB3YXMgb24gdGhlIHNjcm9sbGJhclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzMi5wYXJhbXMuaW50ZXJhY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmZpcmVFdmVudCgnY2xpY2snLCBlLCBfdGhpczIuaGFuZGxlRXZlbnQoZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmZpcmVFdmVudCgnc2Nyb2xsJywgZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEcmF3IHBlYWtzIG9uIHRoZSBjYW52YXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBwZWFrcyBDYW4gYWxzbyBiZSBhbiBhcnJheSBvZiBhcnJheXMgZm9yIHNwbGl0IGNoYW5uZWxcbiAgICAgICAgICogcmVuZGVyaW5nXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggVGhlIHdpZHRoIG9mIHRoZSBhcmVhIHRoYXQgc2hvdWxkIGJlIGRyYXduXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgeC1vZmZzZXQgb2YgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJlYSB0aGF0XG4gICAgICAgICAqIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSB4LW9mZnNldCBvZiB0aGUgZW5kIG9mIHRoZSBhcmVhIHRoYXQgc2hvdWxkIGJlXG4gICAgICAgICAqIHJlbmRlcmVkXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkcmF3UGVha3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd1BlYWtzKHBlYWtzLCBsZW5ndGgsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXRXaWR0aChsZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhcldhdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuYmFyV2lkdGggPyB0aGlzLmRyYXdCYXJzKHBlYWtzLCAwLCBzdGFydCwgZW5kKSA6IHRoaXMuZHJhd1dhdmUocGVha3MsIDAsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjcm9sbCB0byB0aGUgYmVnaW5uaW5nXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZXNldFNjcm9sbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldFNjcm9sbCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndyYXBwZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIuc2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVjZW50ZXIgdGhlIHZpZXdwb3J0IGF0IGEgY2VydGFpbiBwZXJjZW50IG9mIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcGVyY2VudCBWYWx1ZSBmcm9tIDAgdG8gMSBvbiB0aGUgd2F2ZWZvcm1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2VudGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlY2VudGVyKHBlcmNlbnQpIHtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMud3JhcHBlci5zY3JvbGxXaWR0aCAqIHBlcmNlbnQ7XG4gICAgICAgICAgICB0aGlzLnJlY2VudGVyT25Qb3NpdGlvbihwb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVjZW50ZXIgdGhlIHZpZXdwb3J0IG9uIGEgcG9zaXRpb24sIGVpdGhlciBzY3JvbGwgdGhlcmUgaW1tZWRpYXRlbHkgb3JcbiAgICAgICAgICogaW4gc3RlcHMgb2YgNSBwaXhlbHNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uIFgtb2Zmc2V0IGluIHBpeGVsc1xuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGltbWVkaWF0ZSBTZXQgdG8gdHJ1ZSB0byBpbW1lZGlhdGVseSBzY3JvbGwgc29tZXdoZXJlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWNlbnRlck9uUG9zaXRpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjZW50ZXJPblBvc2l0aW9uKHBvc2l0aW9uLCBpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdGhpcy53cmFwcGVyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICB2YXIgaGFsZiA9IH5+KHRoaXMud3JhcHBlci5jbGllbnRXaWR0aCAvIDIpO1xuICAgICAgICAgICAgdmFyIG1heFNjcm9sbCA9IHRoaXMud3JhcHBlci5zY3JvbGxXaWR0aCAtIHRoaXMud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBwb3NpdGlvbiAtIGhhbGY7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gdGFyZ2V0IC0gc2Nyb2xsTGVmdDtcblxuICAgICAgICAgICAgaWYgKG1heFNjcm9sbCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gbmVlZCB0byBjb250aW51ZSBpZiBzY3JvbGxiYXIgaXMgbm90IHRoZXJlXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0aGUgY3Vyc29yIGlzIGN1cnJlbnRseSB2aXNpYmxlLi4uXG4gICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSAmJiAtaGFsZiA8PSBvZmZzZXQgJiYgb2Zmc2V0IDwgaGFsZikge1xuICAgICAgICAgICAgICAgIC8vIHdlJ2xsIGxpbWl0IHRoZSBcInJlLWNlbnRlclwiIHJhdGUuXG4gICAgICAgICAgICAgICAgdmFyIHJhdGUgPSA1O1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IE1hdGgubWF4KC1yYXRlLCBNYXRoLm1pbihyYXRlLCBvZmZzZXQpKTtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBzY3JvbGxMZWZ0ICsgb2Zmc2V0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBsaW1pdCB0YXJnZXQgdG8gdmFsaWQgcmFuZ2UgKDAgdG8gbWF4U2Nyb2xsKVxuICAgICAgICAgICAgdGFyZ2V0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obWF4U2Nyb2xsLCB0YXJnZXQpKTtcbiAgICAgICAgICAgIC8vIG5vIHVzZSBhdHRlbXB0aW5nIHRvIHNjcm9sbCBpZiB3ZSdyZSBub3QgbW92aW5nXG4gICAgICAgICAgICBpZiAodGFyZ2V0ICE9IHNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIuc2Nyb2xsTGVmdCA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uIGluIHBpeGVsc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRTY3JvbGxYJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFgoKSB7XG4gICAgICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQodGhpcy53cmFwcGVyLnNjcm9sbExlZnQgKiBwaXhlbFJhdGlvKTtcblxuICAgICAgICAgICAgLy8gSW4gY2FzZXMgb2YgZWxhc3RpYyBzY3JvbGwgKHNhZmFyaSB3aXRoIG1vdXNlIHdoZWVsKSB5b3UgY2FuXG4gICAgICAgICAgICAvLyBzY3JvbGwgYmV5b25kIHRoZSBsaW1pdHMgb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGFuZCBmbG9vciB0aGUgc2Nyb2xsYWJsZSBleHRlbnQgdG8gbWFrZSBzdXJlIGFuIG91dFxuICAgICAgICAgICAgLy8gb2YgYm91bmRzIHZhbHVlIGlzIG5vdCByZXR1cm5lZFxuICAgICAgICAgICAgLy8gVGlja2V0ICMxMzEyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heFNjcm9sbCA9IH5+KHRoaXMud3JhcHBlci5zY3JvbGxXaWR0aCAqIHBpeGVsUmF0aW8gLSB0aGlzLmdldFdpZHRoKCkpO1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLm1pbihtYXhTY3JvbGwsIE1hdGgubWF4KDAsIHgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSB3aWR0aCBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFdpZHRoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdpZHRoKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5jb250YWluZXIuY2xpZW50V2lkdGggKiB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHdpZHRoIG9mIHRoZSBjb250YWluZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRXaWR0aCh3aWR0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGggPT0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1zLmZpbGxQYXJlbnQgfHwgdGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZSh0aGlzLndyYXBwZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB+fih0aGlzLndpZHRoIC8gdGhpcy5wYXJhbXMucGl4ZWxSYXRpbykgKyAncHgnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBoZWlnaHQgb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICAgICAgaWYgKGhlaWdodCA9PSB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMud3JhcHBlciwge1xuICAgICAgICAgICAgICAgIGhlaWdodDogfn4odGhpcy5oZWlnaHQgLyB0aGlzLnBhcmFtcy5waXhlbFJhdGlvKSArICdweCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBieSB3YXZlc3VyZmVyIHdoZW4gcHJvZ3Jlc3Mgc2hvdWxkIGJlIHJlbmRlcmVyZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHByb2dyZXNzIEZyb20gMCB0byAxXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwcm9ncmVzcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9ncmVzcyhfcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHZhciBtaW5QeERlbHRhID0gMSAvIHRoaXMucGFyYW1zLnBpeGVsUmF0aW87XG4gICAgICAgICAgICB2YXIgcG9zID0gTWF0aC5yb3VuZChfcHJvZ3Jlc3MgKiB0aGlzLndpZHRoKSAqIG1pblB4RGVsdGE7XG5cbiAgICAgICAgICAgIGlmIChwb3MgPCB0aGlzLmxhc3RQb3MgfHwgcG9zIC0gdGhpcy5sYXN0UG9zID49IG1pblB4RGVsdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RQb3MgPSBwb3M7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMuc2Nyb2xsUGFyZW50ICYmIHRoaXMucGFyYW1zLmF1dG9DZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1BvcyA9IH5+KHRoaXMud3JhcHBlci5zY3JvbGxXaWR0aCAqIF9wcm9ncmVzcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjZW50ZXJPblBvc2l0aW9uKG5ld1Bvcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyhwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2F2ZXN1cmZlciBpcyBkZXN0cm95ZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIHRoaXMudW5BbGwoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLndyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53cmFwcGVyLnBhcmVudE5vZGUgPT0gdGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy53cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJlbmRlcmVyLXNwZWNpZmljIG1ldGhvZHMgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIGFmdGVyIGN1cnNvciByZWxhdGVkIHBhcmFtcyBoYXZlIGNoYW5nZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlQ3Vyc29yJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUN1cnNvcigpIHt9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoZSBzaXplIG9mIHRoZSBjb250YWluZXIgY2hhbmdlcyBzbyB0aGUgcmVuZGVyZXIgY2FuIGFkanVzdFxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWJzdHJhY3RcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZVNpemUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2l6ZSgpIHt9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERyYXcgYSB3YXZlZm9ybSB3aXRoIGJhcnNcbiAgICAgICAgICpcbiAgICAgICAgICogQGFic3RyYWN0XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyW118bnVtYmVyW11bXX0gcGVha3MgQ2FuIGFsc28gYmUgYW4gYXJyYXkgb2YgYXJyYXlzIGZvciBzcGxpdCBjaGFubmVsXG4gICAgICAgICAqIHJlbmRlcmluZ1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbEluZGV4IFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaGFubmVsLiBOb3JtYWxseVxuICAgICAgICAgKiBzaG91bGQgYmUgMFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFyZWEgdGhhdFxuICAgICAgICAgKiBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgeC1vZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgYXJlYSB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiByZW5kZXJlZFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd0JhcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0JhcnMocGVha3MsIGNoYW5uZWxJbmRleCwgc3RhcnQsIGVuZCkge31cblxuICAgICAgICAvKipcbiAgICAgICAgICogRHJhdyBhIHdhdmVmb3JtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIENhbiBhbHNvIGJlIGFuIGFycmF5IG9mIGFycmF5cyBmb3Igc3BsaXQgY2hhbm5lbFxuICAgICAgICAgKiByZW5kZXJpbmdcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxJbmRleCBUaGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgY2hhbm5lbC4gTm9ybWFsbHlcbiAgICAgICAgICogc2hvdWxkIGJlIDBcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSB4LW9mZnNldCBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcmVhIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIHgtb2Zmc2V0IG9mIHRoZSBlbmQgb2YgdGhlIGFyZWEgdGhhdCBzaG91bGQgYmVcbiAgICAgICAgICogcmVuZGVyZWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RyYXdXYXZlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdXYXZlKHBlYWtzLCBjaGFubmVsSW5kZXgsIHN0YXJ0LCBlbmQpIHt9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFyIHRoZSB3YXZlZm9ybVxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWJzdHJhY3RcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NsZWFyV2F2ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcldhdmUoKSB7fVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXIgdGhlIG5ldyBwcm9ncmVzc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAYWJzdHJhY3RcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uIFgtT2Zmc2V0IG9mIHByb2dyZXNzIHBvc2l0aW9uIGluIHBpeGVsc1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlUHJvZ3Jlc3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MocG9zaXRpb24pIHt9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERyYXdlcjtcbn0odXRpbC5PYnNlcnZlcik7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERyYXdlcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG52YXIgX3dlYmF1ZGlvID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF93ZWJhdWRpbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWJhdWRpbyk7XG5cbnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciB1dGlsID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbi8qKlxuICogTWVkaWFFbGVtZW50IGJhY2tlbmRcbiAqL1xudmFyIE1lZGlhRWxlbWVudCA9IGZ1bmN0aW9uIChfV2ViQXVkaW8pIHtcbiAgICBfaW5oZXJpdHMoTWVkaWFFbGVtZW50LCBfV2ViQXVkaW8pO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IHRoZSBiYWNrZW5kXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dhdmVzdXJmZXJQYXJhbXN9IHBhcmFtc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lZGlhRWxlbWVudChwYXJhbXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lZGlhRWxlbWVudCk7XG5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNZWRpYUVsZW1lbnQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNZWRpYUVsZW1lbnQpKS5jYWxsKHRoaXMsIHBhcmFtcykpO1xuXG4gICAgICAgIF90aGlzLnBhcmFtcyA9IHBhcmFtcztcblxuICAgICAgICAvLyBEdW1teSBtZWRpYSB0byBjYXRjaCBlcnJvcnNcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLm1lZGlhID0ge1xuICAgICAgICAgICAgY3VycmVudFRpbWU6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgIHBsYXliYWNrUmF0ZTogMSxcbiAgICAgICAgICAgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7fSxcbiAgICAgICAgICAgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHt9LFxuXG4gICAgICAgICAgICB2b2x1bWU6IDBcbiAgICAgICAgfTtcblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMubWVkaWFUeXBlID0gcGFyYW1zLm1lZGlhVHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudFBvc2l0aW9uID0gcGFyYW1zLmVsZW1lbnRQb3NpdGlvbjtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLnBlYWtzID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLnBsYXliYWNrUmF0ZSA9IDE7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy52b2x1bWUgPSAxO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLm9uUGxheUVuZCA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXNlIHRoZSBiYWNrZW5kLCBjYWxsZWQgaW4gYHdhdmVzdXJmZXIuY3JlYXRlQmFja2VuZCgpYFxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoTWVkaWFFbGVtZW50LCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFBsYXliYWNrUmF0ZSh0aGlzLnBhcmFtcy5hdWRpb1JhdGUpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUaW1lcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIHRpbWVyIHRvIHByb3ZpZGUgYSBtb3JlIHByZWNpc2UgYGF1ZGlvcHJvY2Vzc2AgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVUaW1lcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUaW1lcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgb25BdWRpb1Byb2Nlc3MgPSBmdW5jdGlvbiBvbkF1ZGlvUHJvY2VzcygpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLmlzUGF1c2VkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpczIuZmlyZUV2ZW50KCdhdWRpb3Byb2Nlc3MnLCBfdGhpczIuZ2V0Q3VycmVudFRpbWUoKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxsIGFnYWluIGluIHRoZSBuZXh0IGZyYW1lXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25BdWRpb1Byb2Nlc3MpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5vbigncGxheScsIG9uQXVkaW9Qcm9jZXNzKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwcm9ncmVzcyBvbmUgbW9yZSB0aW1lIHRvIHByZXZlbnQgaXQgZnJvbSBiZWluZyBzdHVjayBpbiBjYXNlIG9mIGxvd2VyIGZyYW1lcmF0ZXNcbiAgICAgICAgICAgIHRoaXMub24oJ3BhdXNlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMi5maXJlRXZlbnQoJ2F1ZGlvcHJvY2VzcycsIF90aGlzMi5nZXRDdXJyZW50VGltZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBtZWRpYSBlbGVtZW50IHdpdGggdXJsIGFzIGl0cyBzb3VyY2UsXG4gICAgICAgICAqIGFuZCBhcHBlbmQgdG8gY29udGFpbmVyIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUGF0aCB0byBtZWRpYSBmaWxlXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBIVE1MIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBwZWFrcyBBcnJheSBvZiBwZWFrIGRhdGFcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByZWxvYWQgSFRNTCA1IHByZWxvYWQgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsb2FkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQodXJsLCBjb250YWluZXIsIHBlYWtzLCBwcmVsb2FkKSB7XG4gICAgICAgICAgICB2YXIgbWVkaWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMubWVkaWFUeXBlKTtcbiAgICAgICAgICAgIG1lZGlhLmNvbnRyb2xzID0gdGhpcy5wYXJhbXMubWVkaWFDb250cm9scztcbiAgICAgICAgICAgIG1lZGlhLmF1dG9wbGF5ID0gdGhpcy5wYXJhbXMuYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgICAgICAgICBtZWRpYS5wcmVsb2FkID0gcHJlbG9hZCA9PSBudWxsID8gJ2F1dG8nIDogcHJlbG9hZDtcbiAgICAgICAgICAgIG1lZGlhLnNyYyA9IHVybDtcbiAgICAgICAgICAgIG1lZGlhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXG4gICAgICAgICAgICB2YXIgcHJldk1lZGlhID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IodGhpcy5tZWRpYVR5cGUpO1xuICAgICAgICAgICAgaWYgKHByZXZNZWRpYSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChwcmV2TWVkaWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1lZGlhKTtcblxuICAgICAgICAgICAgdGhpcy5fbG9hZChtZWRpYSwgcGVha3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWQgZXhpc3RpbmcgbWVkaWEgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtIVE1MTWVkaWFFbGVtZW50fSBlbHQgSFRNTDUgQXVkaW8gb3IgVmlkZW8gZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHBlYWtzIEFycmF5IG9mIHBlYWsgZGF0YVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbG9hZEVsdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkRWx0KGVsdCwgcGVha3MpIHtcbiAgICAgICAgICAgIGVsdC5jb250cm9scyA9IHRoaXMucGFyYW1zLm1lZGlhQ29udHJvbHM7XG4gICAgICAgICAgICBlbHQuYXV0b3BsYXkgPSB0aGlzLnBhcmFtcy5hdXRvcGxheSB8fCBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5fbG9hZChlbHQsIHBlYWtzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcml2YXRlIG1ldGhvZCBjYWxsZWQgYnkgYm90aCBsb2FkIChmcm9tIHVybClcbiAgICAgICAgICogYW5kIGxvYWRFbHQgKGV4aXN0aW5nIG1lZGlhIGVsZW1lbnQpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxNZWRpYUVsZW1lbnR9IG1lZGlhIEhUTUw1IEF1ZGlvIG9yIFZpZGVvIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBwZWFrcyBBcnJheSBvZiBwZWFrIGRhdGFcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19sb2FkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9sb2FkKG1lZGlhLCBwZWFrcykge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIGxvYWQgbXVzdCBiZSBjYWxsZWQgbWFudWFsbHkgb24gaU9TLCBvdGhlcndpc2UgcGVha3Mgd29uJ3QgZHJhd1xuICAgICAgICAgICAgLy8gdW50aWwgYSB1c2VyIGludGVyYWN0aW9uIHRyaWdnZXJzIGxvYWQgLS0+ICdyZWFkeScgZXZlbnRcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVkaWEubG9hZCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVzZXRzIHRoZSBtZWRpYSBlbGVtZW50IGFuZCByZXN0YXJ0cyB0aGUgbWVkaWEgcmVzb3VyY2UuIEFueVxuICAgICAgICAgICAgICAgIC8vIHBlbmRpbmcgZXZlbnRzIGFyZSBkaXNjYXJkZWQuIEhvdyBtdWNoIG1lZGlhIGRhdGEgaXMgZmV0Y2hlZCBpc1xuICAgICAgICAgICAgICAgIC8vIHN0aWxsIGFmZmVjdGVkIGJ5IHRoZSBwcmVsb2FkIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgICAgICBtZWRpYS5sb2FkKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMy5maXJlRXZlbnQoJ2Vycm9yJywgJ0Vycm9yIGxvYWRpbmcgbWVkaWEgZWxlbWVudCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMzLmZpcmVFdmVudCgnY2FucGxheScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMy5maXJlRXZlbnQoJ2ZpbmlzaCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIExpc3RlbiB0byBhbmQgcmVsYXkgcGxheSBhbmQgcGF1c2UgZXZlbnRzIHRvIGVuYWJsZVxuICAgICAgICAgICAgLy8gcGxheWJhY2sgY29udHJvbCBmcm9tIHRoZSBleHRlcm5hbCBtZWRpYSBlbGVtZW50XG4gICAgICAgICAgICBtZWRpYS5hZGRFdmVudExpc3RlbmVyKCdwbGF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMy5maXJlRXZlbnQoJ3BsYXknKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtZWRpYS5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczMuZmlyZUV2ZW50KCdwYXVzZScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMubWVkaWEgPSBtZWRpYTtcbiAgICAgICAgICAgIHRoaXMucGVha3MgPSBwZWFrcztcbiAgICAgICAgICAgIHRoaXMub25QbGF5RW5kID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2V0UGxheWJhY2tSYXRlKHRoaXMucGxheWJhY2tSYXRlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Vm9sdW1lKHRoaXMudm9sdW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGJ5IGB3YXZlc3VyZmVyLmlzUGxheWluZygpYCBhbmQgYHdhdmVzdXJmZXIucGxheVBhdXNlKClgXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdpc1BhdXNlZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1BhdXNlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5tZWRpYSB8fCB0aGlzLm1lZGlhLnBhdXNlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGJ5IGB3YXZlc3VyZmVyLmdldER1cmF0aW9uKClgXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldER1cmF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldER1cmF0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwbGljaXREdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4cGxpY2l0RHVyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAodGhpcy5idWZmZXIgfHwgdGhpcy5tZWRpYSkuZHVyYXRpb247XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gPj0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBzdHJlYW1pbmcgYXVkaW9cbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMubWVkaWEuc2Vla2FibGUuZW5kKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBzZWNvbmRzIHJlbGF0aXZlIHRvIHRoZSBhdWRpb2NsaXAnc1xuICAgICAgICAgKiBkdXJhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0Q3VycmVudFRpbWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZWRpYSAmJiB0aGlzLm1lZGlhLmN1cnJlbnRUaW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgcG9zaXRpb24gZnJvbSAwIHRvIDFcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0UGxheWVkUGVyY2VudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGxheWVkUGVyY2VudHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VGltZSgpIC8gdGhpcy5nZXREdXJhdGlvbigpIHx8IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBhdWRpbyBzb3VyY2UgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0UGxheWJhY2tSYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBsYXliYWNrUmF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXliYWNrUmF0ZSB8fCB0aGlzLm1lZGlhLnBsYXliYWNrUmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGF1ZGlvIHNvdXJjZSBwbGF5YmFjayByYXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFBsYXliYWNrUmF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQbGF5YmFja1JhdGUodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucGxheWJhY2tSYXRlID0gdmFsdWUgfHwgMTtcbiAgICAgICAgICAgIHRoaXMubWVkaWEucGxheWJhY2tSYXRlID0gdGhpcy5wbGF5YmFja1JhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCBieSBgd2F2ZXN1cmZlci5zZWVrVG8oKWBcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFBvc2l0aW9uIHRvIHN0YXJ0IGF0IGluIHNlY29uZHNcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NlZWtUbycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZWVrVG8oc3RhcnQpIHtcbiAgICAgICAgICAgIGlmIChzdGFydCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYS5jdXJyZW50VGltZSA9IHN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclBsYXlFbmQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQbGF5cyB0aGUgbG9hZGVkIGF1ZGlvIHJlZ2lvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFN0YXJ0IG9mZnNldCBpbiBzZWNvbmRzLCByZWxhdGl2ZSB0byB0aGUgYmVnaW5uaW5nXG4gICAgICAgICAqIG9mIGEgY2xpcC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBXaGVuIHRvIHN0b3AsIHJlbGF0aXZlIHRvIHRoZSBiZWdpbm5pbmcgb2YgYSBjbGlwLlxuICAgICAgICAgKiBAZW1pdHMgTWVkaWFFbGVtZW50I3BsYXlcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3BsYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGxheShzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICB0aGlzLnNlZWtUbyhzdGFydCk7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMubWVkaWEucGxheSgpO1xuICAgICAgICAgICAgZW5kICYmIHRoaXMuc2V0UGxheUVuZChlbmQpO1xuXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXVzZXMgdGhlIGxvYWRlZCBhdWRpby5cbiAgICAgICAgICpcbiAgICAgICAgICogQGVtaXRzIE1lZGlhRWxlbWVudCNwYXVzZVxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncGF1c2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcblxuICAgICAgICAgICAgaWYgKHRoaXMubWVkaWEpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gdGhpcy5tZWRpYS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclBsYXlFbmQoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0UGxheUVuZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQbGF5RW5kKGVuZCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuX29uUGxheUVuZCA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPj0gZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuc2Vla1RvKGVuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMub24oJ2F1ZGlvcHJvY2VzcycsIHRoaXMuX29uUGxheUVuZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2xlYXJQbGF5RW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyUGxheUVuZCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vblBsYXlFbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuKCdhdWRpb3Byb2Nlc3MnLCB0aGlzLl9vblBsYXlFbmQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29uUGxheUVuZCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcHV0ZSB0aGUgbWF4IGFuZCBtaW4gdmFsdWUgb2YgdGhlIHdhdmVmb3JtIHdoZW4gYnJva2VuIGludG9cbiAgICAgICAgICogPGxlbmd0aD4gc3VicmFuZ2VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIEhvdyBtYW55IHN1YnJhbmdlcyB0byBicmVhayB0aGUgd2F2ZWZvcm0gaW50by5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGZpcnN0IEZpcnN0IHNhbXBsZSBpbiB0aGUgcmVxdWlyZWQgcmFuZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsYXN0IExhc3Qgc2FtcGxlIGluIHRoZSByZXF1aXJlZCByYW5nZS5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyW118bnVtYmVyW11bXX0gQXJyYXkgb2YgMio8bGVuZ3RoPiBwZWFrcyBvciBhcnJheSBvZlxuICAgICAgICAgKiBhcnJheXMgb2YgcGVha3MgY29uc2lzdGluZyBvZiAobWF4LCBtaW4pIHZhbHVlcyBmb3IgZWFjaCBzdWJyYW5nZS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFBlYWtzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBlYWtzKGxlbmd0aCwgZmlyc3QsIGxhc3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0KE1lZGlhRWxlbWVudC5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNZWRpYUVsZW1lbnQucHJvdG90eXBlKSwgJ2dldFBlYWtzJywgdGhpcykuY2FsbCh0aGlzLCBsZW5ndGgsIGZpcnN0LCBsYXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlYWtzIHx8IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgc2luayBpZCBmb3IgdGhlIG1lZGlhIHBsYXllclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgU3RyaW5nIHZhbHVlIHJlcHJlc2VudGluZyBhdWRpbyBkZXZpY2UgaWQuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRTaW5rSWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2lua0lkKGRldmljZUlkKSB7XG4gICAgICAgICAgICBpZiAoZGV2aWNlSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubWVkaWEuc2V0U2lua0lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3NldFNpbmtJZCBpcyBub3Qgc3VwcG9ydGVkIGluIHlvdXIgYnJvd3NlcicpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVkaWEuc2V0U2lua0lkKGRldmljZUlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBkZXZpY2VJZDogJyArIGRldmljZUlkKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBjdXJyZW50IHZvbHVtZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHZhbHVlIEEgZmxvYXRpbmcgcG9pbnQgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0Vm9sdW1lJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZvbHVtZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZvbHVtZSB8fCB0aGlzLm1lZGlhLnZvbHVtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGF1ZGlvIHZvbHVtZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgQSBmbG9hdGluZyBwb2ludCB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRWb2x1bWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Vm9sdW1lKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZvbHVtZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5tZWRpYS52b2x1bWUgPSB0aGlzLnZvbHVtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIHdhdmVzdXJmZXIgaXMgZGVzdHJveWVkXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXN0cm95JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICB0aGlzLnVuQWxsKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5yZW1vdmVNZWRpYUVsZW1lbnRPbkRlc3Ryb3kgJiYgdGhpcy5tZWRpYSAmJiB0aGlzLm1lZGlhLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5tZWRpYSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubWVkaWEgPSBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1lZGlhRWxlbWVudDtcbn0oX3dlYmF1ZGlvMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTWVkaWFFbGVtZW50O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcbiAqIENhY2hlcyB0aGUgZGVjb2RlZCBwZWFrcyBkYXRhIHRvIGltcHJvdmUgcmVuZGVyaW5nIHNwZWVkIGZvciBsYWdlIGF1ZGlvXG4gKlxuICogSXMgdXNlZCBpZiB0aGUgb3B0aW9uIHBhcmFtZXRlciBgcGFydGlhbFJlbmRlcmAgaXMgc2V0IHRvIGB0cnVlYFxuICovXG52YXIgUGVha0NhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIGNhY2hlXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGVha0NhY2hlKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGVha0NhY2hlKTtcblxuICAgICAgICB0aGlzLmNsZWFyUGVha0NhY2hlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1wdHkgdGhlIGNhY2hlXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhQZWFrQ2FjaGUsIFt7XG4gICAgICAgIGtleTogXCJjbGVhclBlYWtDYWNoZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJQZWFrQ2FjaGUoKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZsYXQgYXJyYXkgd2l0aCBlbnRyaWVzIHRoYXQgYXJlIGFsd2F5cyBpbiBwYWlycyB0byBtYXJrIHRoZVxuICAgICAgICAgICAgICogYmVnaW5uaW5nIGFuZCBlbmQgb2YgZWFjaCBzdWJyYW5nZS4gIFRoaXMgaXMgYSBjb252ZW5pZW5jZSBzbyB3ZSBjYW5cbiAgICAgICAgICAgICAqIGl0ZXJhdGUgb3ZlciB0aGUgcGFpcnMgZm9yIGVhc3kgc2V0IGRpZmZlcmVuY2Ugb3BlcmF0aW9ucy5cbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMucGVha0NhY2hlUmFuZ2VzID0gW107XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIExlbmd0aCBvZiB0aGUgZW50aXJlIGNhY2hhYmxlIHJlZ2lvbiwgdXNlZCBmb3IgcmVzZXR0aW5nIHRoZSBjYWNoZVxuICAgICAgICAgICAgICogd2hlbiB0aGlzIGNoYW5nZXMgKHpvb20gZXZlbnRzLCBmb3IgaW5zdGFuY2UpLlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5wZWFrQ2FjaGVMZW5ndGggPSAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgYSByYW5nZSBvZiBwZWFrcyB0byB0aGUgY2FjaGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCBUaGUgbGVuZ3RoIG9mIHRoZSByYW5nZVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHggb2Zmc2V0IG9mIHRoZSBzdGFydCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgeCBvZmZzZXQgb2YgdGhlIGVuZCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyW11bXX1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJhZGRSYW5nZVRvUGVha0NhY2hlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRSYW5nZVRvUGVha0NhY2hlKGxlbmd0aCwgc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgaWYgKGxlbmd0aCAhPSB0aGlzLnBlYWtDYWNoZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQZWFrQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlYWtDYWNoZUxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmV0dXJuIHJhbmdlcyB0aGF0IHdlcmVuJ3QgaW4gdGhlIGNhY2hlIGJlZm9yZSB0aGUgY2FsbC5cbiAgICAgICAgICAgIHZhciB1bmNhY2hlZFJhbmdlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgLy8gU2tpcCByYW5nZXMgYmVmb3JlIHRoZSBjdXJyZW50IHN0YXJ0LlxuICAgICAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnBlYWtDYWNoZVJhbmdlcy5sZW5ndGggJiYgdGhpcy5wZWFrQ2FjaGVSYW5nZXNbaV0gPCBzdGFydCkge1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHxpfCBpcyBldmVuLCB8c3RhcnR8IGZhbGxzIGFmdGVyIGFuIGV4aXN0aW5nIHJhbmdlLiAgT3RoZXJ3aXNlLFxuICAgICAgICAgICAgLy8gfHN0YXJ0fCBmYWxscyBiZXR3ZWVuIGFuIGV4aXN0aW5nIHJhbmdlLCBhbmQgdGhlIHVuY2FjaGVkIHJlZ2lvblxuICAgICAgICAgICAgLy8gc3RhcnRzIHdoZW4gd2UgZW5jb3VudGVyIHRoZSBuZXh0IG5vZGUgaW4gfHBlYWtDYWNoZVJhbmdlc3wgb3JcbiAgICAgICAgICAgIC8vIHxlbmR8LCB3aGljaGV2ZXIgY29tZXMgZmlyc3QuXG4gICAgICAgICAgICBpZiAoaSAlIDIgPT0gMCkge1xuICAgICAgICAgICAgICAgIHVuY2FjaGVkUmFuZ2VzLnB1c2goc3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnBlYWtDYWNoZVJhbmdlcy5sZW5ndGggJiYgdGhpcy5wZWFrQ2FjaGVSYW5nZXNbaV0gPD0gZW5kKSB7XG4gICAgICAgICAgICAgICAgdW5jYWNoZWRSYW5nZXMucHVzaCh0aGlzLnBlYWtDYWNoZVJhbmdlc1tpXSk7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgfGl8IGlzIGV2ZW4sIHxlbmR8IGlzIGFmdGVyIGFsbCBleGlzdGluZyByYW5nZXMuXG4gICAgICAgICAgICBpZiAoaSAlIDIgPT0gMCkge1xuICAgICAgICAgICAgICAgIHVuY2FjaGVkUmFuZ2VzLnB1c2goZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmlsdGVyIG91dCB0aGUgMC1sZW5ndGggcmFuZ2VzLlxuICAgICAgICAgICAgdW5jYWNoZWRSYW5nZXMgPSB1bmNhY2hlZFJhbmdlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0sIHBvcywgYXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9IGFycltwb3MgKyAxXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyA9PSBhcnIubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSAhPSBhcnJbcG9zIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9IGFycltwb3MgLSAxXSAmJiBpdGVtICE9IGFycltwb3MgKyAxXTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNZXJnZSB0aGUgdHdvIHJhbmdlcyB0b2dldGhlciwgdW5jYWNoZWRSYW5nZXMgd2lsbCBlaXRoZXIgY29udGFpblxuICAgICAgICAgICAgLy8gd2hvbGx5IG5ldyBwb2ludHMsIG9yIGR1cGxpY2F0ZXMgb2YgcG9pbnRzIGluIHBlYWtDYWNoZVJhbmdlcy4gIElmXG4gICAgICAgICAgICAvLyBkdXBsaWNhdGVzIGFyZSBkZXRlY3RlZCwgcmVtb3ZlIGJvdGggYW5kIGV4dGVuZCB0aGUgcmFuZ2UuXG4gICAgICAgICAgICB0aGlzLnBlYWtDYWNoZVJhbmdlcyA9IHRoaXMucGVha0NhY2hlUmFuZ2VzLmNvbmNhdCh1bmNhY2hlZFJhbmdlcyk7XG4gICAgICAgICAgICB0aGlzLnBlYWtDYWNoZVJhbmdlcyA9IHRoaXMucGVha0NhY2hlUmFuZ2VzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XG4gICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0sIHBvcywgYXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9IGFycltwb3MgKyAxXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyA9PSBhcnIubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSAhPSBhcnJbcG9zIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9IGFycltwb3MgLSAxXSAmJiBpdGVtICE9IGFycltwb3MgKyAxXTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBQdXNoIHRoZSB1bmNhY2hlZCByYW5nZXMgaW50byBhbiBhcnJheSBvZiBhcnJheXMgZm9yIGVhc2Ugb2ZcbiAgICAgICAgICAgIC8vIGl0ZXJhdGlvbiBpbiB0aGUgZnVuY3Rpb25zIHRoYXQgY2FsbCB0aGlzLlxuICAgICAgICAgICAgdmFyIHVuY2FjaGVkUmFuZ2VQYWlycyA9IFtdO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHVuY2FjaGVkUmFuZ2VzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgdW5jYWNoZWRSYW5nZVBhaXJzLnB1c2goW3VuY2FjaGVkUmFuZ2VzW2ldLCB1bmNhY2hlZFJhbmdlc1tpICsgMV1dKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuY2FjaGVkUmFuZ2VQYWlycztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3IgdGVzdGluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJbXVtdfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldENhY2hlUmFuZ2VzXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDYWNoZVJhbmdlcygpIHtcbiAgICAgICAgICAgIHZhciBwZWFrQ2FjaGVSYW5nZVBhaXJzID0gW107XG4gICAgICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBlYWtDYWNoZVJhbmdlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgIHBlYWtDYWNoZVJhbmdlUGFpcnMucHVzaChbdGhpcy5wZWFrQ2FjaGVSYW5nZXNbaV0sIHRoaXMucGVha0NhY2hlUmFuZ2VzW2kgKyAxXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBlYWtDYWNoZVJhbmdlUGFpcnM7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUGVha0NhY2hlO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQZWFrQ2FjaGU7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhdmVzdXJmZXIuanMubWFwIiwiLy8gSGFuZGxlYmFycyB0YW1wbGF0ZXNcbnZhciBIYW5kbGViYXJzID0gcmVxdWlyZSgnLi9qcy9oYW5kbGViYXJzLm1pbi5qcycpO1xudmFyIGxvY2FsX2V4ZWNfaGVhZCA9IEhhbmRsZWJhcnMuY29tcGlsZShgXHRcdFx0PHRhYmxlIGNsYXNzPSdub2JvcmQnPjx0cj5cblx0XHRcdFx0PHRkPjxpbnB1dCBJRD0nb3BlbmVyJyBuYW1lPVwiZmlsZVwiIHR5cGU9XCJmaWxlXCIgYWNjZXB0PVwiLndhdiwuV0FWXCIgLz48L3RkPlxuXHRcdFx0XHQ8IS0tXG5cdFx0XHRcdDx0ZD48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiT3BlblwiIHN0eWxlPVwid2lkdGg6NTVwdFwiIG9uY2xpY2s9XCJidG5fb3BlbigpXCIgPjwvdGQ+XG5cdFx0XHRcdDx0ZD48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiU2F2ZShGMSlcIiBzdHlsZT1cIndpZHRoOjU1cHRcIiBvbmNsaWNrPVwiYnRuX3NhdmUoKVwiPjwvdGQ+XG5cdFx0XHRcdC0tPlxuXHRcdFx0PC90cj5cblx0XHRcdDwvdGFibGU+YCk7XG5cbnZhciBsb2NhbF9leGVjX2luZm8gPSBIYW5kbGViYXJzLmNvbXBpbGUoYFxuWW91IGFyZSBydW5uaW5nIHRoZSBsb2NhbCB2ZXJzaW9uIG9mIFdhdmVybHkuXG5gKTtcblxuXG52YXIgc2Z4X2Ryb3Bkbl90ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShgPGJ1dHRvbiBjbGFzcz1cImRyb3BidG5cIj5FZmZlY3RzICYjeDI1YmM7PC9idXR0b24+XG5cdDxkaXYgY2xhc3M9XCJkcm9wZG93bi1jb250ZW50XCI+XG5cdDxhIGlkPSdvcGVuZmlsdGVyJz5RdWFkIEZpbHRlcjwvYT5cblx0PGEgaWQ9J29wZW5SZXZlcmInPlNpbXBsZSBSZXZlcmI8L2E+XG5cdDxhIGlkPSdvcGVuRGVsYXknPkRlbGF5PC9hPlxuIDwvZGl2PmApO1xuXG5cbnZhciBxdWFkX2Ryb3Bkbl90ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShgPGJ1dHRvbiBpZD0ncXVhZHBvcCcgY2xhc3M9XCJkcm9wYnRuXCI+TG93cGFzcyBGaWx0ZXIgJiN4MjViYzs8L2J1dHRvbj5cblx0PGRpdiBjbGFzcz1cImRyb3Bkb3duLWNvbnRlbnRcIj5cblx0PGEgaWQ9J2l0bWxvd3Bhc3MnPkxvd3Bhc3MgRmlsdGVyPC9hPlxuXHQ8YSBpZD0naXRtaGlnaHBhc3MnPkhpZ2hwYXNzIEZpbHRlcjwvYT5cblx0PGEgaWQ9J2l0bWJhbmRwYXNzJz5CYW5kcGFzcyBGaWx0ZXI8L2E+XG5cdDxhIGlkPSdpdG1sb3dzaGVsZic+TG93c2hlbGYgRmlsdGVyPC9hPlxuXHQ8YSBpZD0naXRtaGlnaHNoZWxmJz5IaWdoc2hlbGYgRmlsdGVyPC9hPlxuXHQ8YSBpZD0naXRtcGVha2luZyc+UGVha2luZyBGaWx0ZXI8L2E+XG5cdDxhIGlkPSdpdG1ub3RjaCc+Tm90Y2ggRmlsdGVyPC9hPlxuXHQ8YSBpZD0naXRtYWxscGFzcyc+QWxscGFzcyBGaWx0ZXI8L2E+XG4gPC9kaXY+YCk7XG5IYW5kbGViYXJzLnJlZ2lzdGVyUGFydGlhbChcInF1YWRkcm9wZG5cIiwgcXVhZF9kcm9wZG5fdGVtcGxhdGUpO1xuXG52YXIgZmlsdGVyX2ZyYW1lX3RlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGA8ZGl2IGlkPSdmaWx0ZXJoZHInPlxuPHRhYmxlPjx0cj5cbjx0ZD48YnV0dG9uIGNsYXNzPVwiYnV0blwiIGlkPSdmbF9hcHBseSc+QXBwbHk8L2J1dHRvbj48L3RkPlxuPHRkPjxidXR0b24gY2xhc3M9XCJidXRuXCIgaWQ9J2ZsX2NhbmNlbCc+Q2xvc2U8L2J1dHRvbj48L3RkPlxuPHRkPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2xhc3M9J2F1ZGNoYm94JyBpZD0nZmxfYXVkaXRpb24nIGNoZWNrZWQ+PHNwYW4gY2xhc3M9J2Nib3h0ZXh0Jz5BdWRpdGlvbjwvc3Bhbj48L2lucHV0PjwvdGQ+XG48L3RyPjwvdGFibGU+XG48ZGl2IGlkID0nZmlsdGVyYm9keSc+XG48L2Rpdj5cbjwvZGl2PlxuYCk7XG5cbi8vIEhhbmRsZWJhcnMucmVnaXN0ZXJQYXJ0aWFsKFwiZmlsdGVyaGVhZGVyXCIsIGZpbHRlcmhlYWRlcik7XG5cbnZhciBxdWFkZmlsdGVyX3RlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGA8ZGl2IGlkPSdxdWFkZmlsdGVyJz5cbjx0YWJsZT5cbjx0cj5cbjx0ZD48ZGl2IGlkPSdxdWFkZHJvcGRuJz57ez4gcXVhZGRyb3Bkbn19PC9kaXY+PC90ZD5cbjx0ZD48aW5wdXQgaWQ9J3FmX2ZyZXF1ZW5jeScgdHlwZT1cInRleHRcIiB2YWx1ZT1cIjQ0MFwiIGNsYXNzPVwiZGlhbFwiIGRhdGEtbWluPVwiMVwiIGRhdGEtbWF4PVwiODAwMFwiIGRhdGEtYW5nbGVBcmM9XCIzMDBcIiBkYXRhLWFuZ2xlT2Zmc2V0PVwiMzBcIiBkYXRhLXdpZHRoPScxMjgnIGRhdGEtaGVpZ2h0PScxMjgnPjwvdGQ+XG48dGQ+PGRpdiBjbGFzcz0ncV9kaXYnPjxpbnB1dCBpZD0ncWZfUScgdHlwZT1cInRleHRcIiB2YWx1ZT1cIjFcIiBjbGFzcz1cImRpYWxcIiBkYXRhLW1pbj1cIjBcIiBkYXRhLW1heD1cIjUwXCIgZGF0YS1hbmdsZUFyYz1cIjMwMFwiIGRhdGEtYW5nbGVPZmZzZXQ9XCIzMFwiIGRhdGEtd2lkdGg9JzEyOCcgZGF0YS1oZWlnaHQ9JzEyOCc8L2Rpdj48L3RkPlxuPHRkPjxkaXYgY2xhc3M9J2dhaW5fZGl2Jz48aW5wdXQgaWQ9J3FmX2dhaW4nIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIwXCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCItNDBcIiBkYXRhLW1heD1cIjQwXCIgZGF0YS1hbmdsZUFyYz1cIjMwMFwiIGRhdGEtYW5nbGVPZmZzZXQ9XCIzMFwiIGRhdGEtd2lkdGg9JzEyOCcgZGF0YS1oZWlnaHQ9JzEyOCc+PC9kaXY+PC90ZD5cbjwvdHI+XG48dHI+XG48dGg+S2luZDwvdGg+XG48dGg+RnJlcXVlbmN5PC90aD5cbjx0aD48ZGl2IGNsYXNzPSdxX2Rpdic+UTwvZGl2PjwvdGg+XG48dGg+PGRpdiBjbGFzcz0nZ2Fpbl9kaXYnPkdhaW48L2Rpdj48L3RoPlxuPC90cj5cbjwvdGFibGU+XG48L2Rpdj5cbmApO1xuXG52YXIgcmV2ZXJiX3RlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGA8ZGl2IGlkPSdzaW1wbGVyZXZlcmInPlxuPHRhYmxlPlxuPHRyPlxuPHRkPjxpbnB1dCBpZD0ncWZfZHJ5bGV2ZWwnIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCI1XCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCIwXCIgZGF0YS1tYXg9XCIxMFwiIGRhdGEtc3RlcD0nMC4xJyBkYXRhLWFuZ2xlQXJjPVwiMzAwXCIgZGF0YS1hbmdsZU9mZnNldD1cIjIxMFwiIGRhdGEtd2lkdGg9JzEyOCcgZGF0YS1oZWlnaHQ9JzEyOCc+PC90ZD5cbjx0ZD48aW5wdXQgaWQ9J3FmX3dldGxldmVsJyB0eXBlPVwidGV4dFwiIHZhbHVlPVwiNVwiIGNsYXNzPVwiZGlhbFwiIGRhdGEtbWluPVwiMFwiIGRhdGEtbWF4PVwiMTBcIiBkYXRhLXN0ZXA9JzAuMScgZGF0YS1hbmdsZUFyYz1cIjMwMFwiIGRhdGEtYW5nbGVPZmZzZXQ9XCIyMTBcIiBkYXRhLXdpZHRoPScxMjgnIGRhdGEtaGVpZ2h0PScxMjgnPjwvdGQ+XG48dGQ+PGlucHV0IGlkPSdxZl9zZWNvbmRzJyB0eXBlPVwidGV4dFwiIHZhbHVlPVwiM1wiIGNsYXNzPVwiZGlhbFwiIGRhdGEtbWluPVwiMFwiIGRhdGEtbWF4PVwiMzBcIiAgZGF0YS1zdGVwPScwLjEnIGRhdGEtYW5nbGVBcmM9XCIzMDBcIiBkYXRhLWFuZ2xlT2Zmc2V0PVwiMjEwXCIgZGF0YS13aWR0aD0nMTI4JyBkYXRhLWhlaWdodD0nMTI4Jz48L3RkPlxuPHRkPjxpbnB1dCBpZD0ncWZfZGVjYXknIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIyXCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCIwXCIgZGF0YS1tYXg9XCIxMDBcIiBkYXRhLWFuZ2xlQXJjPVwiMzAwXCIgZGF0YS1hbmdsZU9mZnNldD1cIjIxMFwiIGRhdGEtd2lkdGg9JzEyOCcgZGF0YS1oZWlnaHQ9JzEyOCc+PC90ZD5cbjx0ZD48aW5wdXQgaWQ9J3FmX3JldmVyc2UnIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIwXCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCIwXCIgZGF0YS1tYXg9XCIxXCIgZGF0YS1hbmdsZUFyYz1cIjMwMFwiIGRhdGEtYW5nbGVPZmZzZXQ9XCIyMTBcIiBkYXRhLXdpZHRoPScxMjgnIGRhdGEtaGVpZ2h0PScxMjgnPjwvdGQ+XG48L3RyPlxuPHRyPlxuPHRoPkRyeSBMZXZlbDwvdGg+XG48dGg+V2V0IExldmVsPC90aD5cbjx0aD5TZWNvbmRzPC90aD5cbjx0aD5EZWNheTwvdGg+XG48dGg+UmV2ZXJzZTwvdGg+XG48L3RyPlxuPC90YWJsZT5cbjwvZGl2PlxuYCk7XG5cbnZhciBkZWxheV90ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShgPGRpdiBpZD0nZGVsYXknPlxuPHRhYmxlPlxuPHRyPlxuPHRoIGNvbHNwYW49JzYnPkRlbGF5IEZpbHRlcjwvdGg+XG48L3RyPlxuPHRyPlxuPHRkPlxuPGRpdiBpZD0nZGVsYXlkcm9wZG4nPjxidXR0b24gaWQ9J3R5cGVwb3AnIGNsYXNzPVwiZHJvcGJ0blwiPktpbmQgJiN4MjViYzs8L2J1dHRvbj5cblx0PGRpdiBjbGFzcz1cImRyb3Bkb3duLWNvbnRlbnRcIj5cblx0PGEgaWQ9J2l0bW5vcm1hbCc+Tm9ybWFsPC9hPlxuXHQ8YSBpZD0naXRtaW52ZXJ0ZWQnPkludmVydGVkPC9hPlxuXHQ8YSBpZD0naXRtcGluZ3BvbmcnPlBpbmdQb25nPC9hPlxuIDwvZGl2PlxuPC9kaXY+XG48L3RkPlxuPHRkPjxpbnB1dCBpZD0ncWZfZGVsYXknIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIxXCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCIwXCIgZGF0YS1tYXg9XCIyXCIgZGF0YS1zdGVwPScwLjEnIGRhdGEtYW5nbGVBcmM9XCIzMDBcIiBkYXRhLWFuZ2xlT2Zmc2V0PVwiMjEwXCIgZGF0YS13aWR0aD0nMTI4JyBkYXRhLWhlaWdodD0nMTI4Jz48L3RkPlxuPHRkPjxpbnB1dCBpZD0ncWZfZmVlZGJhY2snIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIwLjVcIiBjbGFzcz1cImRpYWxcIiBkYXRhLW1pbj1cIjBcIiBkYXRhLW1heD1cIjEuMFwiIGRhdGEtc3RlcD0nMC4wMScgZGF0YS1hbmdsZUFyYz1cIjMwMFwiIGRhdGEtYW5nbGVPZmZzZXQ9XCIyMTBcIiBkYXRhLXdpZHRoPScxMjgnIGRhdGEtaGVpZ2h0PScxMjgnPjwvdGQ+XG48dGQ+PGlucHV0IGlkPSdxZl9jdXRvZmYnIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCI4MDAwXCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCIwXCIgZGF0YS1tYXg9XCIyMjA1MFwiIGRhdGEtYW5nbGVBcmM9XCIzMDBcIiBkYXRhLWFuZ2xlT2Zmc2V0PVwiMjEwXCIgZGF0YS13aWR0aD0nMTI4JyBkYXRhLWhlaWdodD0nMTI4Jz48L3RkPlxuPHRkPjxpbnB1dCBpZD0ncWZfb2Zmc2V0JyB0eXBlPVwidGV4dFwiIHZhbHVlPVwiMFwiIGNsYXNzPVwiZGlhbFwiIGRhdGEtbWluPVwiLTAuNVwiIGRhdGEtbWF4PVwiMC41XCIgZGF0YS1zdGVwPScwLjAxJyAgZGF0YS1hbmdsZUFyYz1cIjMwMFwiIGRhdGEtYW5nbGVPZmZzZXQ9XCIyMTBcIiBkYXRhLXdpZHRoPScxMjgnIGRhdGEtaGVpZ2h0PScxMjgnPjwvdGQ+XG48dGQ+PGlucHV0IGlkPSdxZl9kcnknIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIxXCIgY2xhc3M9XCJkaWFsXCIgZGF0YS1taW49XCIwXCIgZGF0YS1tYXg9XCIxXCIgZGF0YS1zdGVwPScwLjAxJyBkYXRhLWFuZ2xlQXJjPVwiMzAwXCIgZGF0YS1hbmdsZU9mZnNldD1cIjIxMFwiIGRhdGEtd2lkdGg9JzEyOCcgZGF0YS1oZWlnaHQ9JzEyOCc+PC90ZD5cbjwvdHI+XG48dHI+XG48dGg+VHlwZTwvdGg+XG48dGg+RGVsYXk8L3RoPlxuPHRoPkZlZWRiYWNrPC90aD5cbjx0aD5DdXRvZmY8L3RoPlxuPHRoPk9mZnNldDwvdGg+XG48dGg+RHJ5PC90aD5cbjwvdHI+XG48L3RhYmxlPlxuPC9kaXY+XG5gKTtcblxuZXhwb3J0IHtzZnhfZHJvcGRuX3RlbXBsYXRlLCBsb2NhbF9leGVjX2hlYWQsIGxvY2FsX2V4ZWNfaW5mbywgZmlsdGVyX2ZyYW1lX3RlbXBsYXRlLCBxdWFkZmlsdGVyX3RlbXBsYXRlLCBxdWFkX2Ryb3Bkbl90ZW1wbGF0ZSwgcmV2ZXJiX3RlbXBsYXRlLCBkZWxheV90ZW1wbGF0ZX07IiwiaW1wb3J0ICQgZnJvbScuL2pzL2pxdWVyeS0zLjIuMS5taW4uanMnO1xyXG5pbXBvcnQgV2F2ZSBmcm9tICcuL1dhdmUuanMnO1xyXG5cclxuXHJcbmltcG9ydCB7c2Z4X2Ryb3Bkbl90ZW1wbGF0ZSwgbG9jYWxfZXhlY19oZWFkLCBsb2NhbF9leGVjX2luZm99IGZyb20nLi90ZW1wbGF0ZXMuanMnO1xyXG5cclxuaW1wb3J0IHt1bmRvU3RhY2t9IGZyb20gJy4vVW5kb1N0YWNrLmpzJztcclxuaW1wb3J0IHtiYXNlNjRBcnJheUJ1ZmZlciwgYmFzZTY0VG9BcnJheUJ1ZmZlcn0gZnJvbSAnLi9iYXNlNjRkYXRhLmpzJztcclxuaW1wb3J0IHthdWRpb0J1ZmZlclRvV2F2fSBmcm9tICcuL2F1ZGlvQnVmZmVyVG9XYXYuanMnO1xyXG5pbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9Ecm9wZG93bi5qcyc7XHJcbmltcG9ydCB7YXVkaW9DdHgsIE9mZmxpbmVDb250ZXh0fSBmcm9tICcuL0F1ZGlvQ3R4LmpzJztcclxuaW1wb3J0IHtGaWx0ZXJGcmFtZX0gZnJvbSAnLi9GaWx0ZXJzLmpzJztcclxuaW1wb3J0IEJpUXVhZEZpbHRlciBmcm9tICcuL0JpcXVhZEZpbHRlci5qcyc7XHJcbmltcG9ydCBTaW1wbGVSZXZlcmJGaWx0ZXIgZnJvbSAnLi9TaW1wbGVyZXZlcmJGaWx0ZXIuanMnO1xyXG5pbXBvcnQgRGVsYXlGaWx0ZXIgZnJvbSAnLi9EZWxheUZpbHRlci5qcyc7XHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vIEZsYWcgdG8gZW5hYmxlIGxvY2FsIGV4ZWN1dGlvbiAobm90IHZpYSB0aGUgRmxhc2hBaXIgd2ViIHNlcnZlcilcclxudmFyIGxvY2FsX2V4ZWMgPSBkb2N1bWVudC5VUkwuaW5kZXhPZignZmlsZTonKSA9PSAwO1xyXG5cclxudmFyIHNhbXBsZV9wYXRoX3ByZWZpeCA9ICcvJztcclxudmFyIGZpbGVuYW1lX2lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKFwiZm5hbWVcIik7Ly8udmFsdWVcclxudmFyIGZuYW1lID0gXCJcIjtcclxuXHJcbnZhciBsb2NhbENsaXBib2FyZDtcclxuXHJcbnZhciB3YXZlO1xyXG52YXIgZmlsdGVyRnJhbWU7XHJcblxyXG5mdW5jdGlvbiB0ZXN0RmlsdGVyQnV0dG9uKGUpXHJcbntcclxuXHRpZiAoZmlsdGVyRnJhbWUpIHtcclxuXHRcdGZpbHRlckZyYW1lLmNsb3NlKCk7XHJcblx0fVxyXG5cclxuXHRmaWx0ZXJGcmFtZSA9IG5ldyBGaWx0ZXJGcmFtZSh3YXZlKTtcclxuXHRsZXQgdGFyZ0lEID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG5cdGxldCBjbGFzc1RvTWFrZTtcclxuXHRpZiAodGFyZ0lEID09PSAnb3BlbmZpbHRlcicpIGNsYXNzVG9NYWtlID0gQmlRdWFkRmlsdGVyO1xyXG5cdCBlbHNlIGlmICh0YXJnSUQgPT09ICdvcGVuUmV2ZXJiJykgY2xhc3NUb01ha2UgPSBTaW1wbGVSZXZlcmJGaWx0ZXI7XHJcblx0IFx0ZWxzZSBpZiAodGFyZ0lEID09PSAnb3BlbkRlbGF5JykgY2xhc3NUb01ha2UgPSBEZWxheUZpbHRlcjtcclxuXHRmaWx0ZXJGcmFtZS5vcGVuKGNsYXNzVG9NYWtlKTtcclxufVxyXG5cclxuLy8gU2ltcGxpZmllZCB0byBqdXN0IG11bHRpcGx5IGJ5IDEvbWF4KGFicyhidWZmZXIpKVxyXG4vLyAod2hpY2ggcHJlc2VydmVzIGFueSBleGlzdGluZyBEQyBvZmZzZXQpLlxyXG52YXIgbm9ybWFsaXplID0gZnVuY3Rpb24gKGJ1ZmZlcilcclxue1xyXG5cdGxldCB7bnVtYmVyT2ZDaGFubmVscywgc2FtcGxlUmF0ZX0gPSBidWZmZXI7XHJcblx0bGV0IGJ1ZkxlbiA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKS5sZW5ndGg7XHJcblxyXG5cdGZvciAodmFyIGN4ID0gMDsgY3ggPCBudW1iZXJPZkNoYW5uZWxzOyArK2N4KSB7XHJcblx0XHR2YXIgbWF4diA9IC0xMDAwMDAwO1xyXG5cdFx0bGV0IGQgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY3gpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkLmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdGxldCBzID0gZFtpXTtcclxuXHRcdFx0aWYgKHMgPCAwKSBzID0gLXM7XHJcblx0XHRcdGlmIChzID4gbWF4dikgbWF4diA9IHM7XHJcblx0XHR9XHJcblx0XHRpZiAobWF4diA9PT0gMCkgcmV0dXJuO1xyXG5cdFx0bGV0IHNjYWxlciA9IDEuMCAvIG1heHY7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0ZFtpXSA9IGRbaV0qIHNjYWxlcjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBidWZmZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJldmVyc2UgKGJ1ZmZlcilcclxue1xyXG5cdGxldCB7bnVtYmVyT2ZDaGFubmVscywgc2FtcGxlUmF0ZX0gPSBidWZmZXI7XHJcblx0bGV0IGJ1ZkxlbiA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKS5sZW5ndGg7XHJcblx0bGV0IGhhbGZidWYgPSBidWZMZW4gLyAyO1xyXG5cclxuXHRmb3IgKHZhciBjeCA9IDA7IGN4IDwgbnVtYmVyT2ZDaGFubmVsczsgKytjeCkge1xyXG5cdFx0bGV0IGQgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY3gpO1xyXG5cdFx0bGV0IHRkID0gYnVmTGVuIC0gMTtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaGFsZmJ1ZjsgKytpKSB7XHJcblx0XHRcdGxldCBzID0gZFtpXTtcclxuXHRcdFx0ZFtpXSA9IGRbdGRdO1xyXG5cdFx0XHRkW3RkLS1dID0gcztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBidWZmZXI7XHJcbn1cclxuXHJcbnZhciBhcHBseUZ1bmN0aW9uID0gZnVuY3Rpb24gKGJ1ZmZlciwgZilcclxue1xyXG5cdGxldCB7bnVtYmVyT2ZDaGFubmVscywgc2FtcGxlUmF0ZX0gPSBidWZmZXI7XHJcblx0bGV0IGJ1ZkxlbiA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKS5sZW5ndGg7XHJcblxyXG5cdGZvciAodmFyIGN4ID0gMDsgY3ggPCBudW1iZXJPZkNoYW5uZWxzOyArK2N4KSB7XHJcblx0XHR2YXIgbWludiA9IDEwMDAwMDA7XHJcblx0XHR2YXIgbWF4diA9IC0xMDAwMDAwO1xyXG5cdFx0bGV0IGQgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY3gpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkLmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdGRbaV0gPSBmKGRbaV0sIGksIGJ1Zkxlbik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gYnVmZmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkb1BsYXlTZWwoZSlcclxue1xyXG5cdGxldCB7c3RhcnQsIGVuZH0gPSB3YXZlLmdldFNlbGVjdGlvbigpO1xyXG5cdHdhdmUuc3VyZmVyLnBsYXkoc3RhcnQsIGVuZCk7XHJcbn1cclxuXHJcblxyXG52YXIgZGVsZXRlU2VsZWN0ZWQgPSBmdW5jdGlvbiAoZSlcclxue1xyXG5cdGxldCBidWZmZXIgPSB3YXZlLmJhY2tlbmQuYnVmZmVyO1xyXG5cdGxldCB7cmVnaW9uYWwsIGxlbmd0aCwgZmlyc3QsIGxhc3QsIHJlZ2lvbn0gPSB3YXZlLmdldFNlbGVjdGlvbigpO1xyXG5cdGlmICghcmVnaW9uYWwpIHJldHVybjtcclxuXHJcblx0bGV0IGRzID0gbGFzdCAtIGZpcnN0O1xyXG5cdGxldCB7bnVtYmVyT2ZDaGFubmVscywgc2FtcGxlUmF0ZX0gPSBidWZmZXI7XHJcblx0bGV0IGJ1ZkxlbiA9IGxlbmd0aCAtIGRzO1xyXG5cdGlmIChidWZMZW4gPT09IDApIGJ1ZkxlbiA9IDE7XHJcblx0bGV0IG5leHRCdWZmZXIgPSBhdWRpb0N0eC5jcmVhdGVCdWZmZXIobnVtYmVyT2ZDaGFubmVscywgYnVmTGVuLCBzYW1wbGVSYXRlKTtcclxuXHJcblx0Zm9yICh2YXIgY3ggPSAwOyBjeCA8IG51bWJlck9mQ2hhbm5lbHM7ICsrY3gpIHtcclxuXHRcdGxldCBzYSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YShjeCk7XHJcblx0XHRsZXQgZGEgPSBuZXh0QnVmZmVyLmdldENoYW5uZWxEYXRhKGN4KTtcclxuXHRcdGxldCBkeCA9IDA7XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZmlyc3Q7ICsraSkge1xyXG5cdFx0XHRkYVtkeCsrXSA9IHNhW2ldO1xyXG5cdFx0fVxyXG5cdFx0Zm9yKHZhciBpID0gbGFzdDsgaSA8IGxlbmd0aDsgKytpKSB7XHJcblx0XHRcdGRhW2R4KytdID0gc2FbaV07XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmKHJlZ2lvbikgcmVnaW9uLnJlbW92ZSgpO1xyXG5cdHVuZG9TdGFjay5wdXNoKGJ1ZmZlcik7XHJcblx0d2F2ZS5jaGFuZ2VCdWZmZXIobmV4dEJ1ZmZlcik7XHJcbn1cclxuXHJcblxyXG4vLyBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgc2VsZWN0ZWQgYXJlYSBhbmQgcmVwbGFjZSB0aGUgc2VsZWN0ZWQgYXJlYVxyXG4vLyB3aXRoIHRoZSByZXN1bHQuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gY2FuIGJlIGVpdGhlciAnaW4gcGxhY2UnIG9yIGNhbiByZXR1cm4gYVxyXG4vLyByZXN1bHQgYnVmZmVyIG9mIGFueSBzaXplLlxyXG5mdW5jdGlvbiBhcHBseVRyYW5zZm9ybShmLCBmMilcclxue1xyXG5cdGxldCB3b3JraW5nID0gd2F2ZS5jb3B5U2VsZWN0ZWQoKTtcclxuXHRsZXQgcmVzdWx0ID0gZih3b3JraW5nLCBmMik7XHJcblx0d2F2ZS5wYXN0ZVNlbGVjdGVkKHJlc3VsdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJldmVyc2VyKGUpIHtcclxuXHRhcHBseVRyYW5zZm9ybShyZXZlcnNlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplcihlKSB7XHJcblx0XHJcblx0YXBwbHlUcmFuc2Zvcm0obm9ybWFsaXplKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmFkZUluKGUpIHtcclxuXHRcclxuXHRsZXQgZiA9IGZ1bmN0aW9uIChzLCBpLCBsZW4pIHtcclxuXHRcdHJldHVybiBzICogKGkgLyBsZW4pO1xyXG5cdH1cclxuXHRhcHBseVRyYW5zZm9ybShhcHBseUZ1bmN0aW9uLCBmKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmFkZU91dChlKSB7XHJcblx0XHJcblx0bGV0IGYgPSBmdW5jdGlvbiAocywgaSwgbGVuKSB7XHJcblx0XHRyZXR1cm4gcyAqICgxLjAgLSBpIC8gbGVuKTtcclxuXHR9XHJcblx0YXBwbHlUcmFuc2Zvcm0oYXBwbHlGdW5jdGlvbiwgZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbEFsbChlKSB7XHJcblx0bGV0IHtyZWdpb25hbCwgc3RhcnQsIGVuZCwgZHVyYXRpb259ID0gd2F2ZS5nZXRTZWxlY3Rpb24oKTtcclxuXHR3YXZlLnN1cmZlci5yZWdpb25zLmNsZWFyKCk7XHJcblx0d2F2ZS5zdXJmZXIuc2Vla1RvKDApO1xyXG5cdC8vIElmIHdhIGFyZSBhbHJlYWQgYSBmdWxsIHNlbGVjdGlvbiwgcXVpdCByaWdodCBhZnRlciB3ZSBjbGVhcmVkLlxyXG5cdGlmIChyZWdpb25hbCAmJiBzdGFydCA9PT0gMCAmJiBlbmQgPT09IGR1cmF0aW9uKSByZXR1cm47XHJcblxyXG5cdGxldCBwb3MgPSB7XHJcblx0XHRzdGFydDpcdDAsXHJcblx0XHRlbmQ6XHR3YXZlLnN1cmZlci5nZXREdXJhdGlvbigpLFxyXG5cdFx0ZHJhZzpcdGZhbHNlLFxyXG5cdFx0cmVzaXplOiBmYWxzZSxcclxuXHR9O1xyXG5cdHdhdmUuc3VyZmVyLnJlZ2lvbnMuYWRkKHBvcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvVW5kbyhlKSB7XHJcblx0Y29uc29sZS5sb2coXCJVbmRvXCIpO1xyXG5cclxuXHRpZiAodW5kb1N0YWNrLmF0VG9wKCkpIHtcclxuXHRcdGxldCBidWZmZXIgPSB3YXZlLmJhY2tlbmQuYnVmZmVyO1xyXG5cdFx0dW5kb1N0YWNrLnB1c2goYnVmZmVyKTtcclxuXHR9XHJcblx0bGV0IHVuYnVmID0gdW5kb1N0YWNrLnVuZG8oKTtcclxuXHR3YXZlLmNoYW5nZUJ1ZmZlcih1bmJ1Zik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvUmVkbyhlKSB7XHJcblx0Y29uc29sZS5sb2coXCJSZWRvXCIpO1xyXG5cdGxldCByZWRvID0gdW5kb1N0YWNrLnJlZG8oKTtcclxuXHR3YXZlLmNoYW5nZUJ1ZmZlcihyZWRvKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29weVRvQ2xpcChlKSBcclxue1xyXG5cdGxldCBjbGlwID0gZS5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGE7XHJcblxyXG5cdGxldCBjbGlwQnVmZiA9IHdhdmUuY29weVNlbGVjdGVkKCk7XHJcblx0bGV0IHdhdkRhdGEgPSBhdWRpb0J1ZmZlclRvV2F2KGNsaXBCdWZmKTtcclxuXHRsZXQgYXNUZXh0ID0gYmFzZTY0QXJyYXlCdWZmZXIod2F2RGF0YSk7XHJcblx0bG9jYWxDbGlwYm9hcmQgPSBjbGlwQnVmZjtcclxuXHRpZiAoY2xpcCkgY2xpcC5zZXREYXRhKCd0ZXh0L3BsYWluJywgYXNUZXh0KTtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGN1dFRvQ2xpcChlKSB7XHJcblx0Y29weVRvQ2xpcChlKTtcclxuXHRkZWxldGVTZWxlY3RlZChlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFzdGVGcm9tQ2xpcChlKVxyXG57XHJcblx0bGV0IGNsaXBCZCA9IGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhO1xyXG5cdGlmIChjbGlwQmQpIHtcclxuXHRcdGxldCBjbGlwID0gY2xpcEJkLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcclxuXHRcdGlmIChjbGlwLnN0YXJ0c1dpdGgoJ1VrbCcpKSB7XHJcblx0XHRcdGxldCBhc2JpbiA9IGJhc2U2NFRvQXJyYXlCdWZmZXIoY2xpcCk7XHJcblx0XHRcdHdhdmUuYmFja2VuZC5kZWNvZGVBcnJheUJ1ZmZlcihhc2JpbiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0aWYgKGRhdGEpIHdhdmUucGFzdGVTZWxlY3RlZChkYXRhLCB0cnVlKTtcclxuXHQgXHQgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuXHRcdFx0YWxlcnQoJ3Bhc3RlIGRlY29kZSBlcnJvcicpO1xyXG5cdFx0ICB9KTtcclxuXHRcdCAgcmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAobG9jYWxDbGlwYm9hcmQpIHdhdmUucGFzdGVTZWxlY3RlZChsb2NhbENsaXBib2FyZCwgdHJ1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHpvb20oYW10KSB7XHJcblx0XHJcblx0bGV0IG1pblB4V2FzID0gd2F2ZS5zdXJmZXIucGFyYW1zLm1pblB4UGVyU2VjO1xyXG5cdGxldCBuZXdQeCA9IG1pblB4V2FzICogYW10O1xyXG5cdGxldCB6b29tTGltaXQgPSA0NDEwMDtcclxuXHRpZiAobmV3UHggPiB6b29tTGltaXQpIG5ld1B4ID0gem9vbUxpbWl0O1xyXG4vLyBjb25zb2xlLmxvZygnem9vbSByYXRlOiAnICsgbmV3UHgpO1xyXG5cdHdhdmUuc3VyZmVyLnpvb20obmV3UHgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kR3VpKCkge1xyXG5cdCQod2luZG93KS5vbigncGFzdGUnLCBwYXN0ZUZyb21DbGlwKTtcclxuXHQvLyBpT1Mgd2FzIHNjcmV3aW5nIHVwIGlmIHRoZSBmb2xsb3dpbmcgbGluZSB3YXMgbm90IGNvbW1lbnRlZCBvdXQuXHJcblx0JCh3aW5kb3cpLm9uKCdjb3B5JywgY29weVRvQ2xpcCk7XHJcblx0JCh3aW5kb3cpLm9uKCdjdXQnLCBjdXRUb0NsaXApO1xyXG5cdFxyXG5cdCQod2luZG93KS5vbigndW5kbycsIGRvVW5kbyk7XHJcblx0JCh3aW5kb3cpLm9uKCdyZWRvJywgZG9SZWRvKTtcclxuXHQvLyBSZW1vdmUgaGlnaGxpZ2h0aW5nIGFmdGVyIGJ1dHRvbiBwdXNoZXM6XHJcblx0JCgnLmJ1dG4nKS5tb3VzZXVwKGZ1bmN0aW9uKCkgeyB0aGlzLmJsdXIoKX0pO1xyXG5cdFxyXG5cdCQoJyNsb2FkYnV0Jykub24oJ2NsaWNrJyxidG5fbG9hZCk7XHJcblx0JCgnI3NhdmVidXQnKS5vbignY2xpY2snLGJ0bl9zYXZlKTtcclxuXHJcblx0JCgnI3Bsc3lidXQnKS5vbignY2xpY2snLChlKT0+e3dhdmUuc3VyZmVyLnBsYXlQYXVzZShlKX0pO1xyXG5cdCQoJyNyZXdidXQnKS5vbignY2xpY2snLCAoZSk9Pnt3YXZlLnN1cmZlci5zZWVrVG8oMCl9KTtcclxuXHQkKCcjcGxzeXNlbGJ1dCcpLm9uKCdjbGljaycsIGRvUGxheVNlbCk7XHJcblx0JCgnI3VuZG9idXQnKS5vbignY2xpY2snLCBkb1VuZG8pO1xyXG5cdCQoJyNyZWRvYnV0Jykub24oJ2NsaWNrJywgZG9SZWRvKTtcclxuXHQkKCcjZGVsYnV0Jykub24oJ2NsaWNrJywgZGVsZXRlU2VsZWN0ZWQpO1xyXG5cdCQoJyNjdXRidXQnKS5vbignY2xpY2snLCBjdXRUb0NsaXApO1xyXG5cdCQoJyNjb3B5YnV0Jykub24oJ2NsaWNrJywgY29weVRvQ2xpcCk7XHJcblxyXG5cdCQoJyNwYXN0ZWJ1dCcpLm9uKCdjbGljaycscGFzdGVGcm9tQ2xpcCk7XHJcblx0JCgnI25vcm1idXQnKS5vbignY2xpY2snLG5vcm1hbGl6ZXIpO1xyXG5cdCQoJyNyZXZlcnNlYnV0Jykub24oJ2NsaWNrJyxyZXZlcnNlcik7XHJcblx0JCgnI2ZhZGVpbmJ1dCcpLm9uKCdjbGljaycsZmFkZUluKTtcclxuXHQkKCcjZmFkZW91dGJ1dCcpLm9uKCdjbGljaycsZmFkZU91dCk7XHJcblx0JCgnI3NlbGFsbGJ1dCcpLm9uKCdjbGljaycsc2VsQWxsKTtcclxuXHQkKCcjem9vbWluYnV0Jykub24oJ2NsaWNrJyxlPT57em9vbSgyLjApfSk7XHJcblx0JCgnI3pvb21vdXRidXQnKS5vbignY2xpY2snLGU9Pnt6b29tKDAuNSl9KTtcclxufVxyXG5cclxudmFyIHNmeGRkID0gc2Z4X2Ryb3Bkbl90ZW1wbGF0ZSgpO1xyXG5cclxuZnVuY3Rpb24gb3BlbkZpbHRlcihlKSB7XHJcblx0dGVzdEZpbHRlckJ1dHRvbihlKTtcclxufVxyXG5cclxudmFyIGRyb3Bkb3duID0gbmV3IERyb3Bkb3duKCcjZHJvcGRuJywgc2Z4ZGQsIG9wZW5GaWx0ZXIpO1xyXG5jb25zb2xlLmxvZyhkcm9wZG93bik7XHJcblxyXG52YXIgcGxheUJ0bkltZyA9ICQoJyNwbGF5YnV0aW1nJyk7XHJcbnZhciB1bmRvQnRuID0gJCgnI3VuZG9idXQnKTtcclxudmFyIHJlZG9CdG4gPSAkKCcjcmVkb2J1dCcpO1xyXG5cclxuZnVuY3Rpb24gc2V0RGlzYWJsZShpdGVtLCBzdGF0ZSlcclxue1xyXG5cdGl0ZW0ucHJvcChcImRpc2FibGVkXCIsIHN0YXRlKTtcclxuXHRpdGVtLmNzcygnb3BhY2l0eScsIHN0YXRlID8gMC4zOiAxLjApO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVHdWkoKVxyXG57XHJcblx0aWYoIXdhdmUgfHwgIXdhdmUuc3VyZmVyKSByZXR1cm47XHJcblx0bGV0IHBsYXlTdGF0ZSA9IHdhdmUuc3VyZmVyLmlzUGxheWluZygpO1xyXG5cclxuXHRsZXQgbmV3UGxheUltZyA9IFwiaW1nL2dseXBoaWNvbnMtMTc0LXBsYXkucG5nXCJcclxuXHRpZiAocGxheVN0YXRlKSBuZXdQbGF5SW1nID0gXCJpbWcvZ2x5cGhpY29ucy0xNzUtcGF1c2UucG5nXCI7XHJcblx0aWYgKHBsYXlCdG5JbWcuYXR0cignc3JjJykgIT09IG5ld1BsYXlJbWcpIHtcclxuXHRcdHBsYXlCdG5JbWcuYXR0cignc3JjJyxuZXdQbGF5SW1nKTtcclxuXHR9XHJcblxyXG5cdGxldCBjYW5VbmRvID0gdW5kb1N0YWNrLmNhblVuZG8oKTtcclxuXHRzZXREaXNhYmxlKHVuZG9CdG4sICFjYW5VbmRvKTtcclxuXHJcblx0bGV0IGNhblJlZG8gPSB1bmRvU3RhY2suY2FuUmVkbygpO1xyXG5cdHNldERpc2FibGUocmVkb0J0biwgIWNhblJlZG8pO1xyXG59XHJcblxyXG52YXIgZ3VpQ2hlY2s7XHJcblxyXG5mdW5jdGlvbiBzdGFydEd1aUNoZWNrKCkge1xyXG5cdGlmKCFndWlDaGVjaykgZ3VpQ2hlY2sgPSBzZXRJbnRlcnZhbCh1cGRhdGVHdWksIDIwMCk7XHJcbn1cclxuXHJcbi8qXHJcbi8vIENocm9tZSBkZWNpZGVkIHRvIG9ubHkgYWxsb3cgdGhlIGJyb3dzZXIgYWNjZXNzIHRvIHRoZSBtaWNyb3Bob25lIHdoZW4gdGhlIHBhZ2UgaGFzIGJlZW4gc2VydmVkLXVwIHZpYSBodHRwc1xyXG4vLyBzaW5jZSB0aGUgRmxhc2hBaXIgY2FyZCBkb2Vzbid0IGRvIHRoYXQsIHdlIGNhbid0IHJlY29yZCBhdWRpby4gQW5vdGhlciBhbm5veWluZyBicm93c2VyIGluY2FwYWNpdHkuXHJcbmZ1bmN0aW9uIHJlY29yZCgpXHJcbntcclxuXHR2YXIgbWlrZSA9IG5ldyBNaWNyb3Bob25lKHt9LCB3YXZlLnN1cmZlcik7XHJcblxyXG5cdG1pa2Uuc3RhcnQoKTtcclxufVxyXG4qL1xyXG5cclxuLy8gZGF0YSA9IERPTUV4Y2VwdGlvbjogT25seSBzZWN1cmUgb3JpZ2lucyBhcmUgYWxsb3dlZCAoc2VlOiBodHRwczovL2dvby5nbC9ZMFprTlYpLlxyXG5cclxuXHJcbi8vZWRpdG9yXHJcbmZ1bmN0aW9uIHNldEVkaXREYXRhKGRhdGEpXHJcbntcclxuXHRpZighd2F2ZSkge1xyXG5cdFx0d2F2ZSA9IG5ldyBXYXZlKCk7XHJcblx0fVxyXG5cdHdhdmUub3Blbk9uQnVmZmVyKGRhdGEpO1xyXG5cdHN0YXJ0R3VpQ2hlY2soKTtcclxuXHQvLyBsZXQgbG9hZEVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHQvLyBjb25zb2xlLmxvZyhcIkxvYWQgdGltZTogXCIgKyAobG9hZEVuZFRpbWUgLSBsb2FkU3RhcnRUaW1lKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Mb2NhbChldnQpXHJcbntcclxuXHR2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzO1xyXG5cdHZhciBmID0gZmlsZXNbMF07XHJcblx0aWYgKGYgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG5cdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cdGlmKCF3YXZlKSB7XHJcblx0XHR3YXZlID0gbmV3IFdhdmUoKTtcclxuXHR9XHJcbi8vIENsb3N1cmUgdG8gY2FwdHVyZSB0aGUgZmlsZSBpbmZvcm1hdGlvbi5cclxuXHRyZWFkZXIub25sb2FkZW5kID0gKGZ1bmN0aW9uKHRoZUZpbGUpIHtcclxuXHRcdHJldHVybiB3YXZlLm9wZW5PbkJ1ZmZlcih0aGVGaWxlKTtcclxuXHR9KShmKTtcclxuXHQvLyBSZWFkIGluIHRoZSBpbWFnZSBmaWxlIGFzIGEgZGF0YSBVUkwuXHJcblx0cmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmKTtcclxufVxyXG5cclxuXHJcbi8vLS0tLS0tLS0tLSBXaGVuIHJlYWRpbmcgcGFnZSAtLS0tLS0tLS0tLS0tXHJcbmZ1bmN0aW9uIG9uTG9hZCgpXHJcbntcclxuXHQvLyBHZXR0aW5nIGFyZ3VtZW50c1xyXG5cdHZhciB1cmxhcmcgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xyXG5cdGlmKHVybGFyZyAhPSBcIlwiKVxyXG5cdHtcclxuXHRcdC8vIERlY29kZSBhbmQgYXNzaWduIHRvIGZpbGUgbmFtZSBib3hcclxuXHRcdGZpbGVuYW1lX2lucHV0LnZhbHVlID0gZGVjb2RlVVJJKHVybGFyZyk7XHJcblx0fVxyXG5cclxuXHRpZighbG9jYWxfZXhlYykge1xyXG5cdFx0bG9hZEZpbGUoKTtcclxuXHR9IGVsc2UgeyAvLyBXZSBhcmUgcnVubmluZyBhcyBhICdmaWxlOi8vJywgc28gY2hhbmdlIHRoZSBHVUkgdG8gcmVmbGVjdCB0aGF0LlxyXG5cdFx0JCgnI2ZpbGVncm91cCcpLnJlbW92ZSgpO1xyXG5cdFx0JCgnI2ZpbGVncm91cHBsYWNlJykuYXBwZW5kKGxvY2FsX2V4ZWNfaGVhZCgpKTtcclxuXHRcdCQoJyNqdGFiJykuYXBwZW5kIChsb2NhbF9leGVjX2luZm8oKSk7XHJcblx0XHQkKCcjb3BlbmVyJykub24oJ2NoYW5nZScsIG9wZW5Mb2NhbCk7XHJcblx0fVxyXG5cdGJpbmRHdWkoKTtcclxufVxyXG5cclxud2luZG93Lm9ubG9hZCA9IG9uTG9hZDtcclxuXHJcbi8vIHVzZSBhamF4IHRvIGxvYWQgd2F2IGRhdGEgKGluc3RlYWQgb2YgYSB3ZWIgd29ya2VyKS5cclxuZnVuY3Rpb24gbG9hZEZpbGUoKVxyXG57XHJcblx0Zm5hbWUgPSBmaWxlbmFtZV9pbnB1dC52YWx1ZTtcclxuXHQkKFwiI3N0YXRpbmRcIikudGV4dChcIkxvYWRpbmc6IFwiICsgIGZuYW1lKTtcclxuXHQkLmFqYXgoe1xyXG5cdHVybCAgICAgICAgIDogZm5hbWUsXHJcblx0Y2FjaGUgICAgICAgOiBmYWxzZSxcclxuXHRwcm9jZXNzRGF0YSA6IGZhbHNlLFxyXG5cdG1ldGhvZDpcdFx0J0dFVCcsXHJcblx0dHlwZSAgICAgICAgOiAnR0VUJyxcclxuXHRzdWNjZXNzICAgICA6IGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKXtcclxuXHRcdHNldEVkaXREYXRhKGRhdGEpO1xyXG5cdFx0JChcIiNzdGF0aW5kXCIpLnRleHQoZm5hbWUgKyBcIiBsb2FkZWQuXCIpO1xyXG5cdH0sXHJcblxyXG5cdGVycm9yOiBmdW5jdGlvbiAoZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6IFwiICsgdGV4dFN0YXR1cyk7XHJcblx0fSxcclxuXHJcblx0eGhyOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB4aHIgPSBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHR4aHIucmVzcG9uc2VUeXBlPSAnYmxvYic7XHJcblx0XHRyZXR1cm4geGhyO1xyXG5cdH0sXHJcblxyXG5cdH0pO1xyXG59XHJcblxyXG4vLyB1c2UgYWpheCB0byBzYXZlLWJhY2sgd2F2IGRhdGEgKGluc3RlYWQgb2YgYSB3ZWIgd29ya2VyKS5cclxuZnVuY3Rpb24gc2F2ZUZpbGUoZmlsZXBhdGgsIGRhdGEpXHJcbntcclxuXHR2YXIgdGltZXN0cmluZztcclxuXHR2YXIgZHQgPSBuZXcgRGF0ZSgpO1xyXG5cdHZhciB5ZWFyID0gKGR0LmdldEZ1bGxZZWFyKCkgLSAxOTgwKSA8PCA5O1xyXG5cdHZhciBtb250aCA9IChkdC5nZXRNb250aCgpICsgMSkgPDwgNTtcclxuXHR2YXIgZGF0ZSA9IGR0LmdldERhdGUoKTtcclxuXHR2YXIgaG91cnMgPSBkdC5nZXRIb3VycygpIDw8IDExO1xyXG5cdHZhciBtaW51dGVzID0gZHQuZ2V0TWludXRlcygpIDw8IDU7XHJcblx0dmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKGR0LmdldFNlY29uZHMoKSAvIDIpO1xyXG5cdHZhciB0aW1lc3RyaW5nID0gXCIweFwiICsgKHllYXIgKyBtb250aCArIGRhdGUpLnRvU3RyaW5nKDE2KSArIChob3VycyArIG1pbnV0ZXMgKyBzZWNvbmRzKS50b1N0cmluZygxNik7XHJcblx0dmFyIHVybERhdGVTZXQgPSAnL3VwbG9hZC5jZ2k/RlRJTUU9JyArIHRpbWVzdHJpbmcgKyBcIiZUSU1FPVwiKyhEYXRlLm5vdygpKTs7XHJcblx0JC5nZXQodXJsRGF0ZVNldCwgZnVuY3Rpb24oKSB7XHJcblx0XHQkLmFqYXgoZmlsZXBhdGgsIHtcclxuXHRcdGhlYWRlcnM6XHR7J092ZXJ3cml0ZSc6ICd0JywgJ0NvbnRlbnQtdHlwZSc6ICdhdWRpby93YXYnfSxcclxuXHRcdGNhY2hlOlx0XHRmYWxzZSxcclxuXHRcdGNvbnRlbnRUeXBlOiBmYWxzZSxcclxuXHRcdGRhdGE6XHRcdGRhdGEsXHJcblx0XHRwcm9jZXNzRGF0YSA6IGZhbHNlLFxyXG5cdFx0bWV0aG9kOlx0XHQnUFVUJyxcclxuXHRcdGVycm9yOlx0XHRmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHRcdFx0YWxlcnQodGV4dFN0YXR1cyArIFwiXFxuXCIgKyBlcnJvclRocm93bik7XHJcblx0XHR9LFxyXG5cdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlNhdmUgT0tcIik7XHJcblx0XHRcdCQuYWpheChcIi91cGxvYWQuY2dpP1dSSVRFUFJPVEVDVD1PRkZcIix7XHJcblx0XHRcdFx0ZXJyb3I6XHRmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuXHRcdFx0XHRcdGFsZXJ0KHRleHRTdGF0dXMgKyBcIlxcblwiICsgZXJyb3JUaHJvd24pO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0aGVhZGVyczoge1wiSWYtTW9kaWZpZWQtU2luY2VcIjogXCJUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVFwifSxcclxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUil7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInNhdmUgYW5kIHVubG9jayBkb25lXCIpO1xyXG5cdFx0XHRcdFx0JChcIiNzdGF0aW5kXCIpLnRleHQoZmlsZXBhdGggKyBcIiBzYXZlZC5cIik7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSlcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdHhocjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB4aHIgPSBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHQgIFx0eGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZXZ0KXtcclxuXHRcdFx0ICBpZiAoZXZ0Lmxlbmd0aENvbXB1dGFibGUpIHtcclxuXHRcdFx0XHQgIHZhciBwZXJjZW50Q29tcGxldGUgPSBNYXRoLnJvdW5kKGV2dC5sb2FkZWQgLyBldnQudG90YWwgKiAxMDAuMCk7XHJcblx0XHRcdFx0ICAvL0RvIHNvbWV0aGluZyB3aXRoIHVwbG9hZCBwcm9ncmVzc1xyXG5cdFx0XHRcdCAkKFwiI3N0YXRpbmRcIikudGV4dChmaWxlcGF0aCArIFwiIFwiICsgcGVyY2VudENvbXBsZXRlICsgXCIlXCIpO1xyXG5cdFx0XHRcdCAvL2NvbnNvbGUubG9nKHBlcmNlbnRDb21wbGV0ZSk7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHR9LCBmYWxzZSk7XHJcblx0XHQgXHRyZXR1cm4geGhyO1xyXG5cdFx0IH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59XHJcblxyXG4vLy0tLS0tLS1rZXlpbi0tLS0tLS0tXHJcbmRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChlKXtcclxuXHRpZighZSkgZSA9IHdpbmRvdy5ldmVudDtcclxuXHJcblx0aWYoZS5rZXlDb2RlID09IDExMikgLy9GMVxyXG5cdHtcclxuXHRcdGJ0bl9zYXZlKCk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHRcdFxyXG5cdH1cclxuXHJcblx0aWYoZS5rZXlDb2RlID09IDEyMykgLy9GMTJcclxuXHR7XHJcblx0XHRidG5fbG9hZCgpO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1x0XHRcclxuXHR9XHJcbn07XHJcblxyXG5cclxuLy8tLS0tLS0tLS1CdXR0b24tLS0tLS0tLS0tLVxyXG5cclxuLy9Mb2FkXHJcbmZ1bmN0aW9uIGJ0bl9sb2FkKClcclxue1xyXG4vL1x0aWYod2luZG93LmNvbmZpcm0oJ0xvYWQgPycpKVxyXG4vL1x0e1xyXG5cdFx0Ly8gcG9zdFdvcmtlcihcImxvYWRcIik7IC8vIDQzMDZcclxuXHRcdGxvYWRGaWxlKCk7XHJcblx0XHRmbmFtZSA9IGZpbGVuYW1lX2lucHV0LnZhbHVlO1xyXG5cclxuLy9cdH1cclxuXHQvLyBqc0VkaXRvci5tYXJrQ2xlYW4oKTtcclxufVxyXG5cclxuLy9TYXZlXHJcblxyXG5mdW5jdGlvbiBidG5fc2F2ZSgpe1xyXG5cclxuXHRpZihmbmFtZSAhPSBmaWxlbmFtZV9pbnB1dC52YWx1ZSlcclxuXHR7XHJcblx0XHRpZighd2luZG93LmNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBzYXZlIGl0P1xcbihUYXJnZXQgZmlsZSBuYW1lIGhhcyBjaGFuZ2VkISknKSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRmbmFtZSA9IGZpbGVuYW1lX2lucHV0LnZhbHVlO1xyXG5cclxuXHRsZXQgYUJ1ZiA9IHdhdmUuYmFja2VuZC5idWZmZXI7XHJcblx0bGV0IHNhdmVEYXRhID0gYXVkaW9CdWZmZXJUb1dhdihhQnVmKTtcclxuXHRzYXZlRmlsZShmbmFtZSwgc2F2ZURhdGEpO1xyXG5cdC8vIGpzRWRpdG9yLm1hcmtDbGVhbigpO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=